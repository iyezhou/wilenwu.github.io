<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>NexT主题进阶</title>
      <link href="/posts/hexo/theme-NexT-advanced.html"/>
      <url>/posts/hexo/theme-NexT-advanced.html</url>
      
        <content type="html"><![CDATA[<p><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT</a> 是 <a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a> 框架中最为流行的主题之一。精于心，简于形。<br>NexT 支持多种常见第三方服务，使用  <strong>第三方服务</strong>  来扩展站点的功能 。<br>除了 Markdown 支持的语法之外，NexT 借助 Hexo 提供的  <strong>tag 插件</strong> ， 为您提供在书写文档时快速插入带特殊样式的内容。</p><a id="more"></a><h1 id="安装主题"><a class="markdownIt-Anchor" href="#安装主题"></a> 安装主题</h1><ol><li><p>克隆NexT 主题</p><div class="tabs" id="clone"><ul class="nav-tabs"><li class="tab"><a href="#clone-1">克隆最新版本</a></li><li class="tab active"><a href="#clone-2">克隆稳定版本</a></li></ul><div class="tab-content"><div class="tab-pane" id="clone-1"><p>定位到 Hexo 站点目录下，将NexT主题文件克隆或者拷贝到<code>hexo/theme</code>目录下即可。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd your-hexo-sit</span><br><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></div><div class="tab-pane active" id="clone-2"><p>定位到 Hexo 站点目录下，将NexT主题文件克隆或者拷贝到<code>hexo/theme</code>目录下即可。本博客就是克隆的这个版本。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd your-hexo-sit</span><br><span class="line">git clone https://github.com/theme-next/hexo-theme-next  themes/next</span><br></pre></td></tr></table></figure></div></div></div></li><li><p>启用主题</p><p>与所有 Hexo 主题启用的模式一样。 当 克隆/下载 完成后，打开站点配置文件， 找到 theme 字段，并将其值更改为 next</p><figure class="highlight sh"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure></li></ol><h1 id="主题核心配置"><a class="markdownIt-Anchor" href="#主题核心配置"></a> 主题核心配置</h1><p>核心配置可完全参考<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">NexT官网中文文档</a><br>包括：选择Scheme、设置语言、设置菜单、设置头像、设置侧栏、添加「标签」页面、添加「分类」页面、设置字体、设置代码高亮主题、侧边栏社交链接、开启打赏功能、友情链接、腾讯公益404页面、数据统计与分析、搜索服务、分享服务等。</p><p>主题配置文件 <code>‪username.github.io\themes\next\_config.yml</code><br>分为若干块，每块都附带官方说明文件网址，可以用谷歌浏览器打开，开启翻译，即可轻松配置。<br>目前主流的组件基本已被装进 NexT主题，只需修改主题配置文件参数即可，网上的若干优化教程估计已非必要。</p><p>NexT 7 自定义样式支持已与主题核心组件分离，如博客背景、文本结束标记等。这样用户可放心升级主题而不会破坏自定义配置。在路径 <code>source/_data</code> 下添加自定义文件，并在主题配置文件 <code>custom_file_path</code> 取消注释。</p><p>另，tag 插件也是NexT的一大亮点，会单独开一篇文章具体介绍，请参考 <a href="/posts/hexo/Hexo-tag-plugins.html">NexT tag 插件</a></p><p>本人博客：由 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> 强力驱动 v3.9.0 |主题 – <a href="https://theme-next.org/" target="_blank" rel="noopener">NexT.Gemini</a> v7.4.0</p><h1 id="主题优化"><a class="markdownIt-Anchor" href="#主题优化"></a> 主题优化</h1><h2 id="rss支持"><a class="markdownIt-Anchor" href="#rss支持"></a> RSS支持</h2><p>RSS(Really Simple Syndication)称为简易信息聚合，是一种描述和同步网站内容的格式。RSS搭建了信息迅速传播的一个技术平台，使得每个人都成为潜在的信息提供者。发布一个RSS文件后，这个RSS Feed中包含的信息就能直接被其他站点调用，而且由于这些数据都是标准的XML格式，所以也能在其他的终端和服务中使用，是一种描述和同步网站内容的格式。</p><p>NexT 中 RSS 有三个设置选项，满足特定的使用场景。 更改主题配置文件，设定 rss 字段的值。</p><div class="tabs" id="rss"><ul class="nav-tabs"><li class="tab active"><a href="#rss-1">false</a></li><li class="tab"><a href="#rss-2">blank</a></li><li class="tab"><a href="#rss-3">URL</a></li></ul><div class="tab-content"><div class="tab-pane active" id="rss-1"><p>禁用 RSS，不在页面上显示 RSS 连接。</p><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss: false </span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="rss-2"><p>留空：使用 Hexo 生成的 Feed 链接，需先安装 <code>hexo-generator-feed</code> 插件</p><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss:  </span><br></pre></td></tr></table></figure><ul><li><p>安装 <code>hexo-generator-feed</code> 插件</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save </span><br></pre></td></tr></table></figure></li><li><p>在站点配置文件 <code>_config.yml</code> 修改/添加</p> <figure class="highlight plain"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20     # Feed中的最大帖子数(使用0或false显示所有帖子)</span><br></pre></td></tr></table></figure></li></ul></div><div class="tab-pane" id="rss-3"><p>具体的URL：适用于已经烧制过 Feed 的情形。</p><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss: /atom.xml</span><br></pre></td></tr></table></figure><ul><li><p>安装 <code>hexo-generator-feed</code> 插件</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save </span><br></pre></td></tr></table></figure></li><li><p>在站点配置文件 <code>_config.yml</code> 修改/添加</p> <figure class="highlight plain"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20     # Feed中的最大帖子数(使用0或false显示所有帖子)</span><br></pre></td></tr></table></figure></li></ul></div></div></div><h2 id="creative-commons"><a class="markdownIt-Anchor" href="#creative-commons"></a> Creative Commons</h2><p>NexT支持显示Creative Commons 4.0国际许可证。这些许可证允许创作者声明保留的权利和放弃的权利。</p><p>修改主题配置文件</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">creative_commons:</span><br><span class="line">  license: by-nc-sa</span><br><span class="line">  sidebar: <span class="literal">true</span></span><br><span class="line">  post: <span class="literal">true</span></span><br><span class="line">  language: deed.zh</span><br></pre></td></tr></table></figure><h2 id="阅读进度和书签"><a class="markdownIt-Anchor" href="#阅读进度和书签"></a> 阅读进度和书签</h2><p>NexT支持页面滚动阅读进度指示器。</p><p>修改主题配置文件</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">reading_progress:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  color: <span class="string">"#37c6c0"</span></span><br><span class="line">  height: 2px</span><br></pre></td></tr></table></figure><p>Bookmark是一个插件，允许用户保存他们的阅读进度。用户只需单击页面左上角的书签图标即可保存滚动位置。当他们下次访问您的博客时，他们可以自动恢复每个页面的最后滚动位置。<br>在主题配置文件启用</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bookmark:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  color: <span class="string">"#222"</span>   <span class="comment"># 自定义书签颜色</span></span><br><span class="line">  save: auto  <span class="comment"># auto | manual 自动保存进度或点击保存进度</span></span><br></pre></td></tr></table></figure><h2 id="网站图标favicon"><a class="markdownIt-Anchor" href="#网站图标favicon"></a> 网站图标(favicon)</h2><p>默认情况下，Hexo站点在<code>hexo-site/themes/next/source/images/</code>目录中使用 NexT favicons 。<br>可以自己下载图标，放在<code>hexo-site/source/images/</code>目录中，修改主题配置文件。</p><blockquote><p>图标网站 <a href="https://www.easyicon.net/" target="_blank" rel="noopener">easyicon</a></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">favicon：</span><br><span class="line">  small：/  images/ favicon-16x16-next.png </span><br><span class="line">  medium： /images/favicon-32x32-next.png </span><br><span class="line">  apple_touch_icon： /images/apple-touch-icon-next.png </span><br><span class="line">  safari_pinned_tab： /images/logo.svg </span><br><span class="line">  android_manifest： /images/manifest.json </span><br><span class="line">  ms_browserconfig： /images/browserconfig.xml</span><br></pre></td></tr></table></figure><h2 id="seo支持"><a class="markdownIt-Anchor" href="#seo支持"></a> SEO支持</h2><p>SEO(Search Engine Optimization)意为搜索引擎优化,利用搜索引擎的规则提高网站在有关搜索引擎内的自然排名。</p><ul><li>安装站点地图(sitemap)插件</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><ul><li>站点配置文件修改/添加</li></ul><figure class="highlight sh"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SEO </span></span><br><span class="line">sitemap: </span><br><span class="line">  path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br></pre></td></tr></table></figure><ul><li>启用百度推送功能，博客会自动将网址推送到百度，这对搜索引擎优化非常有帮助。<br>主题配置文件修改 <code>baidu_push: true</code></li></ul><h2 id="字数统计和阅读时长"><a class="markdownIt-Anchor" href="#字数统计和阅读时长"></a> 字数统计和阅读时长</h2><ul><li><p>导入插件</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure></li><li><p>站点配置文件</p> <figure class="highlight plain"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">symbols_count_time:</span><br><span class="line">  symbols: true              # 是否启用</span><br><span class="line">  time: true                 # 估计阅读时间</span><br><span class="line">  total_symbols: true        # 页脚部分中所有帖子字数</span><br><span class="line">  total_time: true           # 页脚部分中所有帖子的估计阅读时间</span><br><span class="line">  exclude_codeblock: false</span><br></pre></td></tr></table></figure></li><li><p>主题配置文件</p> <figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">symbols_count_time:</span><br><span class="line">  separated_meta: true       # 以分隔线显示单词计数和估计读取时间</span><br><span class="line">  item_text_post: true       # 显示单词计数和估计阅读时间的文本描述</span><br><span class="line">  item_text_total: false     # 在页脚部分显示单词计数和估计阅读时间的文本描述</span><br><span class="line">  awl: 4                     # 平均字长</span><br><span class="line">  wpm: 275                   # 每分钟的平均单词数</span><br><span class="line">  suffix: mins.</span><br></pre></td></tr></table></figure></li></ul><h2 id="文章热度"><a class="markdownIt-Anchor" href="#文章热度"></a> 文章热度</h2><ul><li><p>配置 leancloud <a href="https://theme-next.org/docs/third-party-services/comments#Disqus" target="_blank" rel="noopener">官方使用文档</a></p></li><li><p>修复NexT的leancloud计数器的安全插件</p></li></ul><ol><li><p>导入插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-leancloud-counter-security --save</span><br></pre></td></tr></table></figure></li><li><p>站点配置文件添加</p><figure class="highlight plain"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">leancloud_counter_security:</span><br><span class="line">  enable_sync: true</span><br><span class="line">  app_id: &lt;&lt;your app id&gt;&gt;</span><br><span class="line">  app_key: &lt;&lt;your app key&gt;&gt;</span><br><span class="line">  username: &lt;&lt;your username&gt;&gt; # 部署时会询问是否留空</span><br><span class="line">  password: &lt;&lt;your password&gt;&gt; # 建议留空。部署时会询问是否留空</span><br></pre></td></tr></table></figure></li><li><p>主题配置文件修改</p><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  enable: true</span><br><span class="line">  app_id: &lt;&lt;your app id&gt;&gt;</span><br><span class="line">  app_key: &lt;&lt;your app key&gt;&gt;</span><br><span class="line"></span><br><span class="line"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span><br><span class="line"></span><br><span class="line">  security: true</span><br><span class="line"> betterPerformance: false</span><br></pre></td></tr></table></figure></li><li><p>控制台命令：在Leancloud数据库中注册用户以进行权限控制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo lc-counter register &lt;&lt;username&gt;&gt; &lt;&lt;password&gt;&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="相关热门帖子"><a class="markdownIt-Anchor" href="#相关热门帖子"></a> 相关热门帖子</h2><p>请参考<a href="https://github.com/tea3/hexo-related-popular-posts" target="_blank" rel="noopener">官方文档</a></p><h2 id="背景动画"><a class="markdownIt-Anchor" href="#背景动画"></a> 背景动画</h2><p>NexT 支持多种背景动画，导入插件并修改对应主题配置文件即可</p><p>加载栏: <a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener">pace</a><br>3D库: <a href="https://github.com/theme-next/theme-next-three" target="_blank" rel="noopener">three</a><br>流动线条: <a href="https://github.com/theme-next/theme-next-canvas-nest" target="_blank" rel="noopener">canvas_nest</a><br>彩带: <a href="https://github.com/theme-next/theme-next-canvas-ribbon" target="_blank" rel="noopener">canvas_ribbon</a></p><h1 id="第三方服务"><a class="markdownIt-Anchor" href="#第三方服务"></a> 第三方服务</h1><p>静态网站在某些功能上受到限制，因此我们需要第三方服务来扩展我们的网站。<br>您可以随时使用NexT支持的第三方服务扩展所需的功能。</p><h2 id="数学公式"><a class="markdownIt-Anchor" href="#数学公式"></a> 数学公式</h2><p>NexT提供了两个用于显示数学公式的渲染引擎。</p><ol><li><p>启用数学公式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">math:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  per_page: <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>per_page: true 默认只渲染 Front-matter 标记 <code>mathjax: true</code> 的文档<br>per_page: false 每一页都会导入 <code>mathjax / katex</code> 脚本</p></blockquote></li><li><p>选择渲染引擎</p><p>目前，NexT提供了两个渲染引擎：MathJax和KaTeX。</p><div class="tabs" id="math"><ul class="nav-tabs"><li class="tab"><a href="#math-1">mathjax</a></li><li class="tab active"><a href="#math-2">katex</a></li></ul><div class="tab-content"><div class="tab-pane" id="math-1"><ul><li>需要卸载原始渲染器 <code>hexo-renderer-marked</code> 并选择渲染器之一安装：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save </span><br><span class="line">npm i hexo-renderer-kramed --save ＃ or hexo-renderer-pandoc</span><br></pre></td></tr></table></figure><ul><li>打开主题配置文件渲染引擎</li></ul><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mathjax：    </span><br><span class="line">  enable：true</span><br></pre></td></tr></table></figure></div><div class="tab-pane active" id="math-2"><ul><li>需要卸载原始渲染器 <code>hexo-renderer-marked</code> 并选择渲染器之一安装：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save </span><br><span class="line">npm i hexo-renderer-markdown-it-plus --save ＃ or hexo-renderer-markdown-it</span><br></pre></td></tr></table></figure><ul><li>打开主题配置文件渲染引擎</li></ul><figure class="highlight plain"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">katex:</span><br><span class="line">  enable：true</span><br></pre></td></tr></table></figure></div></div></div></li></ol><blockquote><p>Note: 渲染器插件只能选择其一，否则不能正常显示。</p></blockquote><h2 id="评论系统"><a class="markdownIt-Anchor" href="#评论系统"></a> 评论系统</h2><p>NexT 支持多款评论系统。<br>如需取消某个 页面/文章 的评论，在 md 文件的 front-matter 中增加 <code>comments: false</code></p><ul><li><p>gitalk: 是一个基于Github Issue和Preact的现代评论组件。</p><ol><li>单击此处注册新的<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">OAuth应用程序</a>。<br>其他内容可以随意填写，但请务必填写正确的回调URL（通常是与评论页面对应的域名）。<br>然后，您将获得 Client ID和Client secret。</li><li>创建一个您想要在GitHub中存储Gitalk 评论的存储库。</li><li>修改主题配置文件</li></ol> <figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gitalk</span></span><br><span class="line"><span class="comment"># Demo: https://gitalk.github.io</span></span><br><span class="line">gitalk:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> </span><br><span class="line">  github_id:             <span class="comment"># Github username</span></span><br><span class="line">  repo:                  <span class="comment"># Gitalk 评论的存储库</span></span><br><span class="line">  client_id:             <span class="comment"># Client ID</span></span><br><span class="line">  client_secret:         <span class="comment"># Client Secret</span></span><br><span class="line">  admin_user:            <span class="comment"># 所有者和合作者</span></span><br><span class="line">  distraction_free_mode: <span class="literal">true</span> <span class="comment"># Facebook-like distraction free mode</span></span><br><span class="line">  language: zh-CN</span><br></pre></td></tr></table></figure></li><li><p>Valine (China): 是一种快速，简单和高效的Leancloud，不依赖后端评论系统。<a href="https://theme-next.org/docs/third-party-services/comments#Disqus" target="_blank" rel="noopener">官方使用文档</a></p></li><li><p>多评论系统支持: NexT允许您同时启用多个评论系统。<a href="https://theme-next.org/docs/third-party-services/comments#Disqus" target="_blank" rel="noopener">官方使用文档</a></p></li></ul><h2 id="聊天服务"><a class="markdownIt-Anchor" href="#聊天服务"></a> 聊天服务</h2><p>请参考<a href="https://theme-next.org/docs/third-party-services/chat-services" target="_blank" rel="noopener">官方文档</a></p><h1 id="自定义样式支持"><a class="markdownIt-Anchor" href="#自定义样式支持"></a> 自定义样式支持</h1><p>NexT 建议大家使用 Hexo 官方推荐的 Data Files 系统（Hexo 3.x 及以上）来分离个人配置，这样就可以在尽可能少地修改 NexT 工程代码的情况下进行个性化配置，方便主题升级。</p><h2 id="文本结束标记"><a class="markdownIt-Anchor" href="#文本结束标记"></a> 文本结束标记</h2><p>主题配置文件取消注释</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  postBodyEnd: <span class="built_in">source</span>/_data/post-body-end.swig</span><br></pre></td></tr></table></figure><p>在路径 <code>/source/_data</code> 下创建/修改 <code>post-body-end.swig</code>文件，并添加以下内容</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">        &lt;div style=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;-------------本文结束&lt;i class=<span class="string">"fa fa-paw"</span>&gt;&lt;/i&gt;感谢您的阅读-------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="添加主题及标题栏背景图"><a class="markdownIt-Anchor" href="#添加主题及标题栏背景图"></a> 添加主题及标题栏背景图</h2><p>首先主题配置文件取消注释</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  style: <span class="built_in">source</span>/_data/styles.styl</span><br></pre></td></tr></table></figure><p>在路径 <code>/source/_data</code> 下创建/修改 <code>styles.styl</code>文件，并添加以下内容</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加背景 url(https://source.unsplash.com/random/1600x900); </span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    background:url(/images/background6.jpg);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">    <span class="attribute">background-position</span>:<span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-size</span>:cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标题栏背景</span></span><br><span class="line"><span class="selector-class">.site-meta</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">$blue</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">    <span class="attribute">background-position</span>:center;</span><br><span class="line">    <span class="attribute">background-size</span>:cover;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改主体透明度</span></span><br><span class="line">.main-inner&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.95</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改菜单栏透明度，会引起本地搜索菜单bug</span></span><br><span class="line"><span class="comment">//.header-inner &#123;</span></span><br><span class="line"><span class="comment">//    opacity: 0.95;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="修改主副标题字体颜色"><a class="markdownIt-Anchor" href="#修改主副标题字体颜色"></a> 修改主副标题字体颜色</h2><p>继续在<code>/source/_data/styles.styl</code>文件中添加，帮你挑选颜色的网站： <a href="http://www.color-hex.com/" target="_blank" rel="noopener">color-hex</a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主标题颜色</span></span><br><span class="line">.brand&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$white</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//副标题颜色</span></span><br><span class="line"><span class="selector-class">.site-subtitle</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="修改按钮选择区域代码块表格等样式"><a class="markdownIt-Anchor" href="#修改按钮选择区域代码块表格等样式"></a> 修改按钮，选择区域，代码块，表格等样式</h2><p>首先主题配置文件取消注释</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  style: <span class="built_in">source</span>/_data/variables.styl</span><br></pre></td></tr></table></figure><p>在路径 <code>/source/_data</code> 下创建/修改 <code>variables.styl</code>文件（相当于修改主题文件 <code>next/source/css/_variables/base.styl</code>），并添加以下内容</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Buttons</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line">$btn-default-bg                 = white;</span><br><span class="line"><span class="variable">$btn</span>-default-<span class="attribute">color</span>              = <span class="number">#49b1f5</span>;</span><br><span class="line"><span class="variable">$btn</span>-default-<span class="attribute">font-size</span>          = <span class="variable">$font</span>-size-small;</span><br><span class="line"><span class="variable">$btn</span>-default-<span class="attribute">border-width</span>       = <span class="number">2px</span>;</span><br><span class="line"><span class="variable">$btn</span>-default-<span class="attribute">border-color</span>       = <span class="number">#49b1f5</span>;</span><br><span class="line">$btn-default-hover-bg           = #49b1f5;</span><br><span class="line"><span class="variable">$btn</span>-default-hover-<span class="attribute">color</span>        = white;</span><br><span class="line"><span class="variable">$btn</span>-default-hover-<span class="attribute">border-color</span> = <span class="number">#49b1f5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Selection</span></span><br><span class="line">$selection-bg                 = #49b1f5;</span><br><span class="line"><span class="variable">$selection</span>-<span class="attribute">color</span>              = white;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Code &amp; Code Blocks</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">font-family</span>               = <span class="variable">$font</span>-family-monospace;</span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">border-radius</span>             = <span class="number">3px</span>;</span><br><span class="line">$code-foreground                = $black-light;</span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">background</span>                = <span class="number">#edf1ff</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Table</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">width</span>                    = normal;  <span class="comment">//next默认100%</span></span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">border-color</span>             = <span class="variable">$gray</span>-lighter;</span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">font-size</span>                = <span class="variable">$font</span>-size-small;</span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">content</span>-alignment        = left;</span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">content</span>-vertical         = middle;</span><br><span class="line"><span class="variable">$table</span>-th-<span class="attribute">font-weight</span>           = <span class="number">700</span>;</span><br><span class="line"><span class="variable">$table</span>-cell-<span class="attribute">padding</span>             = <span class="number">8px</span>;</span><br><span class="line"><span class="variable">$table</span>-cell-<span class="attribute">border-right-color</span>  = <span class="variable">$gainsboro</span>;</span><br><span class="line"><span class="variable">$table</span>-cell-<span class="attribute">border-bottom-color</span> = <span class="variable">$gray</span>-lighter;</span><br><span class="line"><span class="variable">$table</span>-row-odd-bg-<span class="attribute">color</span>         = <span class="number">#f9f9f9</span>;</span><br><span class="line"><span class="variable">$table</span>-row-hover-bg-<span class="attribute">color</span>       = <span class="variable">$whitesmoke</span>;</span><br></pre></td></tr></table></figure><h2 id="文章加密"><a class="markdownIt-Anchor" href="#文章加密"></a> 文章加密</h2><p>在需要加密的文章 Front matter 区域设置 <code>password: 123456</code><br>主题配置文件取消注释</p><figure class="highlight sh"><figcaption><span>next\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  head: <span class="built_in">source</span>/_data/head.swig</span><br></pre></td></tr></table></figure><p>在路径 <code>/source/_data</code> 下创建/修改 <code>head.swig</code>文件，并添加以下内容</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt; </span><br><span class="line"> (<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">'&#123;&#123; page.password &#125;&#125;'</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (prompt(<span class="string">'请输入文章密码'</span>) !== <span class="string">'&#123;&#123; page.password &#125;&#125;'</span>)&#123;</span><br><span class="line">                alert(<span class="string">'密码错误！'</span>);</span><br><span class="line">                history.back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><hr><p>参考链接：</p><p><a href="https://blog.csdn.net/weixin_44815733/article/details/88817220" target="_blank" rel="noopener">hexo的next主题个性化配置</a><br><a href="https://blog.csdn.net/qq_31279347/article/details/82427562" target="_blank" rel="noopener">Hexo Next主题进阶详细教程</a><br><a href="https://www.linjiujiu.xyz/2018/12/11/hexo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/" target="_blank" rel="noopener">hexo个人博客next主题优化</a><br><a href="https://www.jianshu.com/p/2a8d399f1266" target="_blank" rel="noopener">NexT主题统一网站颜色</a><br><a href="https://blog.csdn.net/colton_null/article/details/97622079" target="_blank" rel="noopener">Hexo Theme NexT 主题个性化配置最佳实践</a><br><a href="https://blog.ynxiu.com/2016/hexo-next-theme-optimize.html" target="_blank" rel="noopener">Hexo+NexT 主题配置备忘</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> Github pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo标签插件的使用</title>
      <link href="/posts/hexo/Hexo-tag-plugins.html"/>
      <url>/posts/hexo/Hexo-tag-plugins.html</url>
      
        <content type="html"><![CDATA[<p>「tag 插件」(Tag Plugin) 是 Hexo 提供的一种快速生成特定内容的方式。 例如，在标准 Markdown 语法中，我们无法指定图片的大小。这种情景，我们即可使用标签来解决。 Hexo 内置来许多标签来帮助写作者可以更快的书写， <a href="https://hexo.io/docs/tag-plugins.html" target="_blank" rel="noopener">完整的标签列表</a> 可以参考 Hexo 官网。 另外，Hexo 也开放来接口给主题，使主题有可能提供给写作者更简便的写作方法。</p><a id="more"></a><h1 id="hexo-标签插件使用"><a class="markdownIt-Anchor" href="#hexo-标签插件使用"></a> Hexo 标签插件使用</h1><h2 id="引用块"><a class="markdownIt-Anchor" href="#引用块"></a> 引用块</h2><p>在文章中插入引言，可包含作者、来源和标题，均可选。</p><p>标签方式：使用 <code>blockquote</code> 或者 简写 <code>quote</code>。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote author, <span class="built_in">source</span> link source_link_title %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>content</p><footer><strong>author</strong><cite>source link source_link_title</cite></footer></blockquote><h2 id="代码块"><a class="markdownIt-Anchor" href="#代码块"></a> 代码块</h2><p>在文章中插入代码，包含指定语言、附加说明和网址，均可选。<br>标签方式：使用 <code>codeblock</code> 或者 简写 <code>code</code>。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>title url link text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code snippet</span><br></pre></td></tr></table></figure><p>反引号代码块</p><p>```[language] [title] [url] [link text]<br>code snippet<br>```</p><h2 id="iframe"><a class="markdownIt-Anchor" href="#iframe"></a> iframe</h2><p>在文章中插入 iframe。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure><h2 id="image"><a class="markdownIt-Anchor" href="#image"></a> Image</h2><p>在文章中插入指定大小的图片。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] &quot;title text &apos;alt text&apos;&quot; %&#125;</span><br></pre></td></tr></table></figure><h2 id="link"><a class="markdownIt-Anchor" href="#link"></a> Link</h2><p>在文章中插入链接，并自动给外部链接添加 <code>target=&quot;_blank&quot;</code> 属性。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure><h2 id="include-code"><a class="markdownIt-Anchor" href="#include-code"></a> Include Code</h2><p>插入 <code>source/downloads/code</code> 文件夹内的代码文件。<code>source/downloads/code</code> 不是固定的，取决于你在配置文件中 <code>code_dir</code> 的配置。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] path/to/file %&#125;</span><br></pre></td></tr></table></figure><h1 id="next-标签插件使用"><a class="markdownIt-Anchor" href="#next-标签插件使用"></a> NexT 标签插件使用</h1><h2 id="文本居中引用"><a class="markdownIt-Anchor" href="#文本居中引用"></a> 文本居中引用</h2><p>此标签将生成一个带上下分割线的引用，同时引用内文本将自动居中。 文本居中时，多行文本若长度不等，视觉上会显得不对称，因此建议在引用单行文本的场景下使用。 例如作为文章开篇引用 或者 结束语之前的总结引用</p><p>使用方式</p><ul><li>HTML方式：直接在 Markdown 文件中编写 HTML 来调用，给 <code>img</code> 添加属性 <code>class=&quot;blockquote-center&quot;</code> 即可。</li><li>标签方式：使用 <code>centerquote</code> 或者 简写 <code>cq</code>。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># HTML方式</span><br><span class="line">&lt;blockquote class=&quot;blockquote-center&quot;&gt;blah blah blah&lt;/blockquote&gt;</span><br><span class="line"></span><br><span class="line"># 标签方式</span><br><span class="line">&#123;% centerquote %&#125;blah blah blah&#123;% endcenterquote %&#125;</span><br></pre></td></tr></table></figure><blockquote class="blockquote-center"><p>佚名</p></blockquote><h2 id="突破容器宽度限制的图片"><a class="markdownIt-Anchor" href="#突破容器宽度限制的图片"></a> 突破容器宽度限制的图片</h2><p>当使用此标签引用图片时，图片将自动扩大 26%，并突破文章容器的宽度。 此标签使用于需要突出显示的图片, 图片的扩大与容器的偏差从视觉上提升图片的吸引力。 此标签有两种调用方式（详细参看底下示例）：</p><p>使用方式</p><ul><li>HTML方式：直接在 Markdown 文件中编写 HTML 来调用，为 <code>img</code> 添加属性 <code>class=&quot;full-image&quot;</code>即可。</li><li>标签方式：使用 <code>fullimage</code> 或者 简写 <code>fi</code>， 并传递图片地址、 <code>alt</code> 和 <code>title</code> 属性即可。 属性之间以逗号分隔。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># HTML方式:</span><br><span class="line">&lt;img src=&quot;/image-url&quot; class=&quot;full-image&quot; /&gt;</span><br><span class="line"></span><br><span class="line"># 标签 方式</span><br><span class="line">&#123;% fullimage /image-url, alt, title %&#125;</span><br></pre></td></tr></table></figure><h2 id="note-标签"><a class="markdownIt-Anchor" href="#note-标签"></a> Note 标签</h2><p>使用方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] %&#125; </span><br><span class="line">content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>[class]: default | primary | success | info | warning | danger<br>[no-icon] : 禁用图标</p></blockquote><p>效果如下</p><div class="note default">            <p>default</p>          </div><div class="note default no-icon">            <p>default no-icon</p>          </div><div class="note primary">            <p>primary</p>          </div><div class="note success">            <p>success</p>          </div><div class="note info">            <p>info</p>          </div><div class="note warning">            <p>warning</p>          </div><div class="note danger">            <p>danger</p>          </div><h2 id="tabs-选项卡"><a class="markdownIt-Anchor" href="#tabs-选项卡"></a> Tabs 选项卡</h2><p>使用方式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [caption] [@icon] --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab Solution 2 --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab Solution 3 @paw --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Unique name：选项卡唯一名字<br>[index]：活动卡索引号<br>[caption]：标签标题<br>[@icon]：FontAwesome图标名称</p></blockquote><div class="tabs" id="unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#unique-name-1"><i class="fa fa-github"></i>caption</a></li><li class="tab"><a href="#unique-name-2">Solution 2</a></li><li class="tab"><a href="#unique-name-3"><i class="fa fa-paw"></i>Solution 3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="unique-name-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-pane" id="unique-name-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-pane" id="unique-name-3"><p><strong>This is Tab 3.</strong></p></div></div></div><h2 id="label-标签"><a class="markdownIt-Anchor" href="#label-标签"></a> Label 标签</h2><p>使用方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label [class]@Text %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>[class] : default | primary | success | info | warning | danger.</p></blockquote><p>效果如下</p><p>Will you choose <span class="label default">default</span>, <span class="label primary">primary</span>, <span class="label success">success</span>, <span class="label info">info</span>, <span class="label warning">warning</span> or <span class="label danger">danger</span> ?</p><h2 id="video-标签"><a class="markdownIt-Anchor" href="#video-标签"></a> Video 标签</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://example.com/sample.mp4 %&#125;</span><br></pre></td></tr></table></figure><h2 id="button-标签"><a class="markdownIt-Anchor" href="#button-标签"></a> Button 标签</h2><p>使用 <code>button</code> 或者 简写 <code>btn</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% button url, text, icon [class], [title] %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>url：绝对或相对路径<br>text, icon：按钮文字或FontAwesome图标<br>[class]：FontAwesome类：fa-fw | fa-lg | fa-2x | fa-3x | fa-4x | fa-5x<br>[title]：鼠标悬停时的工具提示</p></blockquote><a class="btn" href="#"><i class="fa fa-home"></i>home</a>  <h2 id="流程图"><a class="markdownIt-Anchor" href="#流程图"></a> 流程图</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid type%&#125;</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>type: 请访问 <a href="https://github.com/knsv/mermaid" target="_blank" rel="noopener">https://github.com/knsv/mermaid</a> 以获取更多信息</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid sequenceDiagram %&#125;</span><br><span class="line">Alice -&gt;&gt; Bob: Hello Bob, how are you?</span><br><span class="line">Bob--&gt;&gt;John: How about you John?</span><br><span class="line">Bob--x Alice: I am good thanks!</span><br><span class="line">Bob-x John: I am good thanks!</span><br><span class="line">Note right of John: Bob thinks a long&lt;br/&gt;long time, so long that the text does not fit on a row.</span><br><span class="line">Bob--&gt;&gt;Alice: Checking with John...</span><br><span class="line">Alice-&gt;&gt;John: Yes... John, how are you?</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><pre class="mermaid" style="text-align: center;">            sequenceDiagram            Alice ->> Bob: Hello Bob, how are you?Bob-->>John: How about you John?Bob--x Alice: I am good thanks!Bob-x John: I am good thanks!Note right of John: Bob thinks a long<br>long time, so long that the text does not fit on a row.Bob-->>Alice: Checking with John...Alice->>John: Yes... John, how are you?          </pre><h2 id="图片集"><a class="markdownIt-Anchor" href="#图片集"></a> 图片集</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% grouppicture [group]-[layout] %&#125;&#123;% endgrouppicture %&#125;</span><br><span class="line">&#123;% gp [group]-[layout] %&#125;&#123;% endgp %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>[group]  : 要在组中添加的图片总数<br>[layout] : 显示组下的默认图片</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% grouppicture 6-3 %&#125;</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">  ![](/images/github.png)</span><br><span class="line">&#123;% endgrouppicture %&#125;</span><br></pre></td></tr></table></figure><div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img alt data-src="/images/github.png"></div><div class="group-picture-column" style="width: 50%;"><img alt data-src="/images/github.png"></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 100%;"><img alt data-src="/images/github.png"></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><img alt data-src="/images/github.png"></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img alt data-src="/images/github.png"></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img alt data-src="/images/github.png"></div></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> Github pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建及配置</title>
      <link href="/posts/hexo/Hexo-setup&amp;configuration.html"/>
      <url>/posts/hexo/Hexo-setup&amp;configuration.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> 是高效的静态站点生成框架，基于 <a href="https://nodejs.org/" target="_blank" rel="noopener">Node.js</a>。 通过 Hexo 你可以轻松地使用 Markdown 编写文章，除了 Markdown 本身的语法之外，还可以使用 Hexo 提供的 <a href="https://hexo.io/zh-cn/docs/tag-plugins.html" target="_blank" rel="noopener">tag 插件</a> 来快速的插入特定形式的内容。Hexo 还拥有丰富的主题和插件。</p><a id="more"></a><h1 id="前提环境"><a class="markdownIt-Anchor" href="#前提环境"></a> 前提环境</h1><ul><li><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> (Should be at least nodejs 6.9)</li><li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a>：<a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">Git命令官方文档</a></li><li>创建 github pages 库：库名为 <code>username.github.io</code> ，<code>username</code> 必须和github用户名保持一致</li></ul><h1 id="hexo-相关命令"><a class="markdownIt-Anchor" href="#hexo-相关命令"></a> Hexo 相关命令</h1><p>选择博客目录文件夹，右键打开 <code>Git Bash Here</code></p><ul><li>安装命令</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g             <span class="comment"># 安装hexo</span></span><br><span class="line">hexo init username.github.io        <span class="comment"># 初始化项目文件夹</span></span><br><span class="line"><span class="built_in">cd</span> username.github.io               <span class="comment"># 进入项目根目录</span></span><br><span class="line">npm install                         <span class="comment"># 安装依赖包</span></span><br></pre></td></tr></table></figure><ul><li>常用操作</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo clean           <span class="comment"># 清除缓存</span></span><br><span class="line">hexo generate        <span class="comment"># 编译文件 生成静态页面至 \public 目录</span></span><br><span class="line">hexo serve           <span class="comment"># 本地预览  http://localhost:4000 </span></span><br><span class="line">hexo deploye         <span class="comment"># 发布 https://username.github.io</span></span><br><span class="line"></span><br><span class="line">hexo new <span class="string">"PostName"</span>        <span class="comment"># 新建文章至 \source\_posts</span></span><br><span class="line">hexo new page  <span class="string">"pageName"</span>  <span class="comment"># 新建页面</span></span><br></pre></td></tr></table></figure><ul><li>命令简写</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g -s    <span class="comment"># 清除缓存+生成+预览</span></span><br><span class="line">hexo clean &amp;&amp; hexo g -d    <span class="comment"># 清除缓存+生成+发布</span></span><br></pre></td></tr></table></figure><h1 id="预览"><a class="markdownIt-Anchor" href="#预览"></a> 预览</h1><p>可在本地4000端口预览 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a><br>主题的配置文件，修改时会自动更新，无需重启服务器。</p><ul><li>先安装服务器插件</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-server --save</span><br></pre></td></tr></table></figure><ul><li>修改<span class="label primary">站点配置文件</span></li></ul><figure class="highlight sh"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br></pre></td></tr></table></figure><ul><li>预览</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo serve</span><br></pre></td></tr></table></figure><h1 id="git-配置"><a class="markdownIt-Anchor" href="#git-配置"></a> Git 配置</h1><h2 id="配置-ssh-keys"><a class="markdownIt-Anchor" href="#配置-ssh-keys"></a> 配置 SSH keys</h2><ul><li>生成新的 SSH keys</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"github的注册邮箱"</span></span><br></pre></td></tr></table></figure><ul><li><p>添加 SSH Key 到 GitHub<br>在本地用户文件夹 <code>C:\Users\Administrator\</code> 找到 <code>.ssh\id_rsa.pub</code><br>用编辑器打开，并复制全部内容 ·<code>ctrl+A</code> -&gt; <code>ctrl+C</code><br>打开 github <code>setting</code> -&gt; <code>SSH keys and GPG keys</code> -&gt; <code>New SSH keys</code> -&gt; 粘贴 -&gt; <code>Add SSH key</code></p></li><li><p>测试设置是否成功</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><ul><li>配置个人信息</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"username"</span></span><br><span class="line">git config --global user.email <span class="string">"github注册邮箱"</span></span><br></pre></td></tr></table></figure><h2 id="部署博客到-github-pages"><a class="markdownIt-Anchor" href="#部署博客到-github-pages"></a> 部署博客到 github pages</h2><ul><li>安装插件</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><ul><li>修改<span class="label primary">站点配置文件</span></li></ul><figure class="highlight sh"><figcaption><span>/_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:username/username.github.io.git    <span class="comment"># 预先创建好的库地址</span></span><br><span class="line">  branch: master                                          <span class="comment"># 分支名称</span></span><br><span class="line">  message: update                                   <span class="comment"># 自定义commit信息</span></span><br></pre></td></tr></table></figure><ul><li>推送到 github</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploye</span><br></pre></td></tr></table></figure><p>完成以上操作后，使用浏览器访访问 <a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a> 就可以成功访问我们的博客</p><p>当执行 <code>hexo deploy</code> 时，Hexo 会将 public 目录中的文件和目录推送至_config.yml 中指定的远端仓库和分支中，并且完全覆盖该分支下的已有内容。<br>此外，如果您的 Github Pages 需要使用 CNAME 文件<strong>自定义域名</strong>，请将 CNAME 文件置于 <code>source</code> 目录下，只有这样 <code>hexo deploy</code> 才能将 CNAME 文件一并推送至部署分支</p><h1 id="站点配置文件"><a class="markdownIt-Anchor" href="#站点配置文件"></a> 站点配置文件</h1><p>Hexo 框架主要配置2方面的内容：站点配置文件和主题配置文件。</p><p>站点配置文件 <code>‪username.github.io\_config.yml</code><br>主题配置文件  <code>‪username.github.io\themes\next\_config.yml</code></p><p>站点配置文件建议参考<a href="(https://hexo.io/zh-cn/)">中文官方文档</a></p><p>站点配置主要分为几块：</p><table><thead><tr><th style="text-align:left">Site</th><th style="text-align:left">网站</th></tr></thead><tbody><tr><td style="text-align:left">title:  title</td><td style="text-align:left">网站标题</td></tr><tr><td style="text-align:left">subtitle: ∞</td><td style="text-align:left">网站子标题</td></tr><tr><td style="text-align:left">description: 个人技术博客</td><td style="text-align:left">网站的描述性</td></tr><tr><td style="text-align:left">keywords:</td><td style="text-align:left">网站的关键字</td></tr><tr><td style="text-align:left">author: name</td><td style="text-align:left">网站的作者</td></tr><tr><td style="text-align:left">language: zh-CN</td><td style="text-align:left">网站采用语言，与/theme/next/languages/zh-CN.yml下的文件名对应</td></tr><tr><td style="text-align:left">timezone:</td><td style="text-align:left">网站的时区</td></tr></tbody></table><table><thead><tr><th style="text-align:left">URL</th><th style="text-align:left">url配置</th></tr></thead><tbody><tr><td style="text-align:left">url: <a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a></td><td style="text-align:left">网站的url，如果不在域名根目录，应包含子目录，且root要设置为<code>/子目录/</code></td></tr><tr><td style="text-align:left">root: /</td><td style="text-align:left">网站的根目录</td></tr><tr><td style="text-align:left">permalink: :year/:month/:day/:title/</td><td style="text-align:left">文章永久链接的形成模版。每一篇文章都有唯一的url。</td></tr><tr><td style="text-align:left">permalink_defaults:</td><td style="text-align:left">文章永久链接中，各部分的默认值。</td></tr></tbody></table><table><thead><tr><th style="text-align:left">Directory</th><th style="text-align:left">路径配置</th></tr></thead><tbody><tr><td style="text-align:left">source_dir: source</td><td style="text-align:left">网站中源文件</td></tr><tr><td style="text-align:left">public_dir: public</td><td style="text-align:left">生成的静态网站的目录</td></tr><tr><td style="text-align:left">tag_dir: tags</td><td style="text-align:left">标签页所在的文件夹</td></tr><tr><td style="text-align:left">archive_dir: archives</td><td style="text-align:left">文档页所在的文件夹</td></tr><tr><td style="text-align:left">category_dir: categories</td><td style="text-align:left">类别页所在的文件夹</td></tr><tr><td style="text-align:left">code_dir: downloads/code</td><td style="text-align:left">代码页所在的文件夹</td></tr><tr><td style="text-align:left">i18n_dir: :lang</td><td style="text-align:left">国际语言所在的文件夹</td></tr><tr><td style="text-align:left">skip_render:</td><td style="text-align:left">忽略文档清单</td></tr></tbody></table><table><thead><tr><th style="text-align:left">Writing</th><th style="text-align:left">写作设置</th></tr></thead><tbody><tr><td style="text-align:left">new_post_name: :title.md</td><td style="text-align:left">默认新建文档名，<code>:title</code>为变量，指文档标题，也可用其他变量</td></tr><tr><td style="text-align:left">default_layout: post</td><td style="text-align:left">新建文档的默认布局</td></tr><tr><td style="text-align:left">titlecase: false</td><td style="text-align:left">是否要把标题中的首字符大写</td></tr><tr><td style="text-align:left">external_link: true</td><td style="text-align:left">是否要在新开tab中打开外链</td></tr><tr><td style="text-align:left">filename_case: 0</td><td style="text-align:left">文件名是否小写敏感</td></tr><tr><td style="text-align:left">render_drafts: false</td><td style="text-align:left">是否渲染草稿</td></tr><tr><td style="text-align:left">post_asset_folder: false</td><td style="text-align:left">是否启用资源文件夹。如启用，新建文档同时建立同名的资源文件夹</td></tr><tr><td style="text-align:left">relative_link: false</td><td style="text-align:left">是否把站内资源的链接改为站内相对链接。建议关闭。</td></tr><tr><td style="text-align:left">future: true</td><td style="text-align:left">文档中指定为未来时间创建</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">highlight:                     </span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>                          <span class="comment"># 是否开启代码高亮功能 </span></span><br><span class="line">  line_number: <span class="literal">true</span>                     <span class="comment"># 代码块中是否在前面加上行号</span></span><br><span class="line">  auto_detect: <span class="literal">false</span>                    <span class="comment"># 是否自动检测代码块的语言</span></span><br><span class="line">  tab_replace:                          <span class="comment"># 用什么字符来代替tab(`\t`)字符。</span></span><br></pre></td></tr></table></figure><p>主页设置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">index_generator:          </span><br><span class="line">  path: <span class="string">''</span>                   <span class="comment"># 主页所在路径，默认为''</span></span><br><span class="line">  per_page: 10               <span class="comment"># 主页的索引页包含文章数量，如未定义，则采用根目录下的`per_page`值</span></span><br><span class="line">  order_by: -date            <span class="comment"># 文章（Post类型）排序属性，`-`为降序 </span></span><br><span class="line">  </span><br><span class="line">archive_generator:           <span class="comment"># 归档页</span></span><br><span class="line">  per_page: 20</span><br><span class="line">  yearly: <span class="literal">true</span></span><br><span class="line">  monthly: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">tag_generator:               <span class="comment"># 标签页</span></span><br><span class="line">  per_page: 10</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">Category &amp; Tag</th><th style="text-align:left">分类和标签</th></tr></thead><tbody><tr><td style="text-align:left">default_category: uncategorized</td><td style="text-align:left">对文档的默认分类</td></tr><tr><td style="text-align:left">category_map:</td><td style="text-align:left">对文档中的分类字段进行映射，建立分类文件夹时采用映射后的字符串</td></tr><tr><td style="text-align:left">tag_map:</td><td style="text-align:left">对文档中的标签字段进行映射，建立标签文件夹时采用映射后的字符串</td></tr><tr><td style="text-align:left">per_page: 10</td><td style="text-align:left">主页/分类/标签/存档等类型索引页包含文章数量</td></tr><tr><td style="text-align:left">pagination_dir: page</td><td style="text-align:left">分页所在文件夹</td></tr></tbody></table><p>接下来是扩展(Extensions)，放置插件和主题。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next    <span class="comment"># 更换主题</span></span><br></pre></td></tr></table></figure><h1 id="写作模板"><a class="markdownIt-Anchor" href="#写作模板"></a> 写作模板</h1><p>在新建文章时，Hexo 会根据 <code>scaffolds</code> 文件夹内相对应的模板来建立文件</p><p>Front-matter 是文件最上方以 <code>---</code> 分隔的区域，用于指定个别文件的变量，举例来说：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2013</span><span class="string">/7/13</span> <span class="number">20</span><span class="string">:46:25</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">描述</th><th style="text-align:left">默认值</th></tr></thead><tbody><tr><td style="text-align:left"><code>layout</code></td><td style="text-align:left">布局</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>title</code></td><td style="text-align:left">标题</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>date</code></td><td style="text-align:left">建立日期</td><td style="text-align:left">文件建立日期</td></tr><tr><td style="text-align:left"><code>updated</code></td><td style="text-align:left">更新日期</td><td style="text-align:left">文件更新日期</td></tr><tr><td style="text-align:left"><code>comments</code></td><td style="text-align:left">开启文章的评论功能</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left"><code>tags</code></td><td style="text-align:left">标签（不适用于分页）</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>categories</code></td><td style="text-align:left">分类（不适用于分页）</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>permalink</code></td><td style="text-align:left">覆盖文章网址</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>keywords</code></td><td style="text-align:left">仅用于 meta 标签和 Open Graph 的关键词（不推荐使用）</td><td style="text-align:left"></td></tr></tbody></table><h1 id="分类和标签"><a class="markdownIt-Anchor" href="#分类和标签"></a> 分类和标签</h1><p>可以在 Front-matter 中设置分类和标签。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- Diary</span><br><span class="line">- Sunday </span><br><span class="line">tags:</span><br><span class="line">- Games</span><br></pre></td></tr></table></figure><h1 id="文章摘要和截断"><a class="markdownIt-Anchor" href="#文章摘要和截断"></a> 文章摘要和截断</h1><p>在文章中使用 <code>&lt;!-- more --&gt;</code>，那么 <code>&lt;!-- more --&gt;</code> 之前的文字将会被视为摘要，在主页中展示。</p><h1 id="置顶和置顶标签"><a class="markdownIt-Anchor" href="#置顶和置顶标签"></a> 置顶和置顶标签</h1><p>修改Hexo文件夹下的<code>node_modules/hexo-generator-index/lib/generator.js</code>，在生成文章之前进行文章sticky值排序。</p><p>以下是最终的generator.js内容、</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pagination = <span class="built_in">require</span>(<span class="string">'hexo-pagination'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = <span class="keyword">this</span>.config;</span><br><span class="line">  <span class="keyword">var</span> posts = locals.posts.sort(config.index_generator.order_by);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// -----------------需要添加的代码------------------------</span></span><br><span class="line">  posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(a.sticky &amp;&amp; b.sticky) &#123; <span class="comment">// 两篇文章sticky都有定义</span></span><br><span class="line">          <span class="keyword">if</span>(a.sticky == b.sticky) <span class="keyword">return</span> b.date - a.date; <span class="comment">// 若sticky值一样则按照文章日期降序排</span></span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">return</span> b.sticky - a.sticky; <span class="comment">// 否则按照sticky值降序排</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span>(a.sticky &amp;&amp; !b.sticky) &#123; <span class="comment">// 以下是只有一篇文章sticky有定义</span></span><br><span class="line">          <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span>(!a.sticky &amp;&amp; b.sticky) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// 都没定义按照文章日期降序排</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//-------------------------分割线-----------------------</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> paginationDir = config.pagination_dir || <span class="string">'page'</span>;</span><br><span class="line">  <span class="keyword">var</span> path = config.index_generator.path || <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pagination(path, posts, &#123;</span><br><span class="line">    perPage: config.index_generator.per_page,</span><br><span class="line">    layout: [<span class="string">'index'</span>, <span class="string">'archive'</span>],</span><br><span class="line">    format: paginationDir + <span class="string">'/%d/'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      __index: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>修改完成后，只需要在front-matter中设置需要置顶文章的 <code>sticky: true</code>。同时sticky也决定了是否添加置顶标签。<br>也可以设置sticky值为数字，将会根据sticky值大小来选择置顶顺序，sticky值越大越靠前。<br>需要注意的是，这个文件不是主题的一部分，也不是Git管理的，备份的时候比较容易忽略。</p><h1 id="本地图片链接"><a class="markdownIt-Anchor" href="#本地图片链接"></a> 本地图片链接</h1><ul><li>如果你的Hexo项目中只有少量图片，那最简单的方法就是将它们放在 <code>source/images</code> 文件夹中。然后通过类似于 <code>![](/images/image.jpg)</code> 或 <code></code> 的方法访问它们。</li><li>对于那些想要更有规律地提供图片和其他资源以及想要将他们的资源分布在各个文章上的人来说，Hexo也提供了更组织化的方式来管理资源。<br>需要首先修改站点配置文件 <code>post_asset_folder: true</code> 打开资源文件夹。<br>打开当资源文件管理功能打开后，Hexo将会在你每一次通过 <code>hexo new [layout] &lt;title&gt;</code> 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径  <code>![](image.jpg)</code>  来引用它们。</li></ul><hr><h1 id="踩过的坑"><a class="markdownIt-Anchor" href="#踩过的坑"></a> 踩过的坑</h1><div class="note info">            <p>skip_render</p>          </div><p><code>skip_render</code>：跳过指定文件的渲染。匹配到的文件将会被不做改动的复制到 <code>public</code> 目录中。</p><ul><li><p><code>skip_render: &quot;mypage/**&quot;</code> 将会直接将 <code>source/mypage/</code>下的所有文件和目录不做改动地输出到 ‘public’ 目录<br>注意：这里只能填相对于source文件夹的<strong>相对路径</strong>。千万不要手贱加上个<code>/</code></p></li><li><p><code>skip_render: &quot;_posts/test-post.md&quot;</code> 这将会忽略对 ‘<a href="http://test-post.md" target="_blank" rel="noopener">test-post.md</a>’ 的渲染</p></li><li><p><code>skip_render: &quot;mypage/*&quot;</code>将会忽略<code>source/mypage/</code>文件夹下所有文件的渲染</p></li><li><p><code>skip_render: &quot;mypage/*.html&quot;</code> 将会忽略<code>source/mypage/</code>文件夹下<code>.html</code>文件</p></li><li><p>如果要忽略多个路径的文件或目录，可以这样配置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">skip_render: </span><br><span class="line">  - "_posts/test-post.md"   </span><br><span class="line">  - "mypage/*</span><br></pre></td></tr></table></figure></li></ul><p>参考链接：<br><a href="https://www.linjiujiu.xyz/2018/12/10/Github-Hexo%E6%90%AD%E5%BB%BA%E4%B8%93%E5%B1%9E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">Github+Hexo搭建专属自己的博客</a><br><a href="https://www.cnblogs.com/lqerio/p/11117467.html" target="_blank" rel="noopener">HEXO添加置顶功能</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> Github pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KaTeX 数学符号列表</title>
      <link href="/posts/markdown/KaTeX-Mathematical-Symbols.html"/>
      <url>/posts/markdown/KaTeX-Mathematical-Symbols.html</url>
      
        <content type="html"><![CDATA[<p>KaTeX 是一个快速，易于使用的JavaScript库，用于在Web上进行TeX数学渲染。<br>KaTeX兼容所有主流浏览器，包括Chrome，Safari，Firefox，Opera，Edge和IE 9-11。<br>KaTeX支持很多（但不是全部）LaTeX语法和许多LaTeX软件包。</p><p><a href="https://katex.org/docs/supported.html" target="_blank" rel="noopener">katex官方文档</a></p><a id="more"></a><h1 id="希腊字母"><a class="markdownIt-Anchor" href="#希腊字母"></a> 希腊字母</h1><table><thead><tr><th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">A</mi></mrow><annotation encoding="application/x-tex">\Alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">A</span></span></span></span></span> \Alpha</th><th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> \alpha</th><th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">T</mi></mrow><annotation encoding="application/x-tex">\Tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">T</span></span></span></span></span> \Tau</th><th><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> \tau</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">B</mi></mrow><annotation encoding="application/x-tex">\Beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">B</span></span></span></span></span> \Beta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span> \beta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Υ</mi></mrow><annotation encoding="application/x-tex">\Upsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Υ</span></span></span></span> \Upsilon</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>υ</mi></mrow><annotation encoding="application/x-tex">\upsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">υ</span></span></span></span> \upsilon</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Γ</span></span></span></span> \Gamma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span></span></span></span> \gamma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Φ</mi></mrow><annotation encoding="application/x-tex">\Phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Φ</span></span></span></span> \Phi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span> \phi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span> \Delta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span></span></span></span> \delta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\Chi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">X</span></span></span></span></span> \Chi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>χ</mi></mrow><annotation encoding="application/x-tex">\chi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">χ</span></span></span></span> \chi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">E</mi></mrow><annotation encoding="application/x-tex">\Epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">E</span></span></span></span></span> \Epsilon</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span></span></span> \epsilon</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ψ</mi></mrow><annotation encoding="application/x-tex">\Psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ψ</span></span></span></span> \Psi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span></span></span> \psi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Z</mi></mrow><annotation encoding="application/x-tex">\Zeta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">Z</span></span></span></span></span> \Zeta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ζ</mi></mrow><annotation encoding="application/x-tex">\zeta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07378em;">ζ</span></span></span></span> \zeta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ω</span></span></span></span> \Omega</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ω</span></span></span></span> \omega</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">H</mi></mrow><annotation encoding="application/x-tex">\Eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">H</span></span></span></span></span> \Eta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">η</span></span></span></span> \eta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Π</mi></mrow><annotation encoding="application/x-tex">\varPi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Π</span></span></span></span></span> \varPi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϖ</mi></mrow><annotation encoding="application/x-tex">\varpi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">ϖ</span></span></span></span> \varpi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi></mrow><annotation encoding="application/x-tex">\Theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Θ</span></span></span></span> \Theta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span> \theta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Σ</mi></mrow><annotation encoding="application/x-tex">\varSigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Σ</span></span></span></span></span> \varSigma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ς</mi></mrow><annotation encoding="application/x-tex">\varsigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.52778em;vertical-align:-0.09722em;"></span><span class="mord mathdefault" style="margin-right:0.07986em;">ς</span></span></span></span> \varsigma</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">I</mi></mrow><annotation encoding="application/x-tex">\Iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">I</span></span></span></span></span> \Iota</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ι</mi></mrow><annotation encoding="application/x-tex">\iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ι</span></span></span></span> \iota</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Θ</mi></mrow><annotation encoding="application/x-tex">\varTheta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Θ</span></span></span></span></span> \varTheta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϑ</mi></mrow><annotation encoding="application/x-tex">\vartheta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">ϑ</span></span></span></span> \vartheta</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">K</mi></mrow><annotation encoding="application/x-tex">\Kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">K</span></span></span></span></span> \Kappa</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">κ</span></span></span></span> \kappa</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Φ</mi></mrow><annotation encoding="application/x-tex">\varPhi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Φ</span></span></span></span></span> \varPhi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">φ</span></span></span></span> \varphi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Λ</mi></mrow><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Λ</span></span></span></span> \Lambda</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">λ</span></span></span></span> \lambda</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Γ</mi></mrow><annotation encoding="application/x-tex">\varGamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Γ</span></span></span></span></span> \varGamma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> \varepsilon</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">M</mi></mrow><annotation encoding="application/x-tex">\Mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span></span></span></span></span> \Mu</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span> \mu</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Δ</mi></mrow><annotation encoding="application/x-tex">\varDelta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Δ</span></span></span></span></span> \varDelta</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ϰ</mi></mrow><annotation encoding="application/x-tex">\varkappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord amsrm" style="margin-right:0.04028em;">ϰ</span></span></span></span> \varkappa</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">N</mi></mrow><annotation encoding="application/x-tex">\Nu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">N</span></span></span></span></span> \Nu</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ν</mi></mrow><annotation encoding="application/x-tex">\nu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.06366em;">ν</span></span></span></span> \nu</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Λ</mi></mrow><annotation encoding="application/x-tex">\varLambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Λ</span></span></span></span></span> \varLambda</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϑ</mi></mrow><annotation encoding="application/x-tex">\thetasym</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">ϑ</span></span></span></span> \thetasym</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ξ</mi></mrow><annotation encoding="application/x-tex">\Xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ξ</span></span></span></span> \Xi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ξ</mi></mrow><annotation encoding="application/x-tex">\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.04601em;">ξ</span></span></span></span> \xi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ξ</mi></mrow><annotation encoding="application/x-tex">\varXi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Ξ</span></span></span></span></span> \varXi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϱ</mi></mrow><annotation encoding="application/x-tex">\varrho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϱ</span></span></span></span> \varrho</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">O</mi></mrow><annotation encoding="application/x-tex">\Omicron</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">O</span></span></span></span></span> \Omicron</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ο</mi></mrow><annotation encoding="application/x-tex">\omicron</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ο</span></span></span></span> \omicron</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Υ</mi></mrow><annotation encoding="application/x-tex">\varUpsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Υ</span></span></span></span></span> \varUpsilon</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ϝ</mi></mrow><annotation encoding="application/x-tex">\digamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66334em;vertical-align:-0.08167em;"></span><span class="mord amsrm">ϝ</span></span></span></span> \digamma</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Π</mi></mrow><annotation encoding="application/x-tex">\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Π</span></span></span></span> \Pi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span> \pi</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ψ</mi></mrow><annotation encoding="application/x-tex">\varPsi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Ψ</span></span></span></span></span> \varPsi</td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">P</mi></mrow><annotation encoding="application/x-tex">\Rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">P</span></span></span></span></span> \Rho</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span> \rho</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ω</mi></mrow><annotation encoding="application/x-tex">\varOmega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathit">Ω</span></span></span></span></span> \varOmega</td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Σ</span></span></span></span> \Sigma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span></span> \sigma</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">℧</mi></mrow><annotation encoding="application/x-tex">\mho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">℧</span></span></span></span> \mho</td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ı</mi></mrow><annotation encoding="application/x-tex">\imath</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathit latin_fallback">ı</span></span></span></span> \imath</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi></mrow><annotation encoding="application/x-tex">\nabla</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">∇</span></span></span></span> \nabla</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℑ</mi></mrow><annotation encoding="application/x-tex">\Im</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℑ</span></span></span></span> \Im</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\Reals</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span> \Reals</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ȷ</mi></mrow><annotation encoding="application/x-tex">\jmath</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathit latin_fallback">ȷ</span></span></span></span> \jmath</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∂</mi></mrow><annotation encoding="application/x-tex">\partial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span> \partial</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℑ</mi></mrow><annotation encoding="application/x-tex">\image</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℑ</span></span></span></span> \image</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">℘</mi></mrow><annotation encoding="application/x-tex">\wp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord">℘</span></span></span></span> \wp</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℵ</mi></mrow><annotation encoding="application/x-tex">\aleph</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℵ</span></span></span></span> \aleph</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">⅁</mi></mrow><annotation encoding="application/x-tex">\Game</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">⅁</span></span></span></span> \Game</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">k</mi></mrow><annotation encoding="application/x-tex">\Bbbk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">k</span></span></span></span></span> \Bbbk</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">℘</mi></mrow><annotation encoding="application/x-tex">\weierp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord">℘</span></span></span></span> \weierp</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℵ</mi></mrow><annotation encoding="application/x-tex">\alef</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℵ</span></span></span></span> \alef</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ⅎ</mi></mrow><annotation encoding="application/x-tex">\Finv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">Ⅎ</span></span></span></span> \Finv</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span> \N</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> \Z</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℵ</mi></mrow><annotation encoding="application/x-tex">\alefsym</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℵ</span></span></span></span> \alefsym</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\cnums</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> \cnums</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\natnums</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span> \natnums</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mtext>a</mtext><mo>˚</mo></mover></mrow><annotation encoding="application/x-tex">\text{\aa}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord text"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.375em;">˚</span></span></span></span></span></span></span></span></span></span> \text{\aa}</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℶ</mi></mrow><annotation encoding="application/x-tex">\beth</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">ℶ</span></span></span></span> \beth</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\Complex</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> \Complex</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span> \R</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mtext>A</mtext><mo>˚</mo></mover></mrow><annotation encoding="application/x-tex">\text{\AA}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9467699999999999em;vertical-align:0em;"></span><span class="mord text"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord">A</span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.375em;">˚</span></span></span></span></span></span></span></span></span></span> \text{\AA}</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℷ</mi></mrow><annotation encoding="application/x-tex">\gimel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">ℷ</span></span></span></span> \gimel</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℓ</mi></mrow><annotation encoding="application/x-tex">\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℓ</span></span></span></span> \ell</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℜ</mi></mrow><annotation encoding="application/x-tex">\Re</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℜ</span></span></span></span> \Re</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>æ</mtext></mrow><annotation encoding="application/x-tex">\text{\ae}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord text"><span class="mord">æ</span></span></span></span></span> \text{\ae}</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℸ</mi></mrow><annotation encoding="application/x-tex">\daleth</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">ℸ</span></span></span></span> \daleth</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℏ</mi></mrow><annotation encoding="application/x-tex">\hbar</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord">ℏ</span></span></span></span> \hbar</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℜ</mi></mrow><annotation encoding="application/x-tex">\real</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℜ</span></span></span></span> \real</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>Æ</mtext></mrow><annotation encoding="application/x-tex">\text{\AE}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord">Æ</span></span></span></span></span> \text{\AE}</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ð</mi></mrow><annotation encoding="application/x-tex">\eth</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">ð</span></span></span></span> \eth</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℏ</mi></mrow><annotation encoding="application/x-tex">\hslash</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">ℏ</span></span></span></span> \hslash</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\reals</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span> \reals</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>œ</mtext></mrow><annotation encoding="application/x-tex">\text{\oe}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord text"><span class="mord latin_fallback">œ</span></span></span></span></span> \text{\oe}</td></tr></tbody></table><h1 id="数学结构"><a class="markdownIt-Anchor" href="#数学结构"></a> 数学结构</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>ˉ</mo></mover><mo separator="true">;</mo><mover accent="true"><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mi>i</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\bar{a};\overline{a+bi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.08888em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">ˉ</span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.89444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span></span></span><span style="top:-3.81444em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.08333em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">共轭</td><td style="text-align:left">\bar{a}; \overline{a+bi}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">‾</mo></munder></mrow><annotation encoding="application/x-tex">\underline{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833300000000001em;vertical-align:-0.20000000000000007em;"></span><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.84em;"><span class="pstrut" style="height:3em;"></span><span class="underline-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20000000000000007em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\underline{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>⃗</mo></mover><mo separator="true">,</mo><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">→</mo></mover><mo separator="true">;</mo><mover accent="true"><mrow><mi>a</mi><mi>c</mi></mrow><mo stretchy="true">⇀</mo></mover></mrow><annotation encoding="application/x-tex">\vec{a},\overrightarrow{AB};\overrightharpoon{ac}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.39977em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">向量</td><td style="text-align:left">\vec{a},\overrightarrow{AB};\overrightharpoon{ac}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">→</mo></munder></mrow><annotation encoding="application/x-tex">\underrightarrow{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20533em;vertical-align:-0.522em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.4779999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.522em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\underrightarrow{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">←</mo></mover><mo separator="true">;</mo><mover accent="true"><mrow><mi>a</mi><mi>c</mi></mrow><mo stretchy="true">↼</mo></mover><mo separator="true">;</mo><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">←</mo></munder></mrow><annotation encoding="application/x-tex">\overleftarrow{AB};\overleftharpoon{ac};\underleftarrow{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.72733em;vertical-align:-0.522em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M400000 241H110l3-3c68.7-52.7 113.7-120 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202 l-3-3h399890zM100 241v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9525600000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.4779999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M400000 241H110l3-3c68.7-52.7 113.7-120 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202 l-3-3h399890zM100 241v40h399900v-40z"/></svg></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.522em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\overleftarrow{AB};;\overleftharpoon{ac};\underleftarrow{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>T</mi><mo stretchy="true">↔</mo></mover></mrow><annotation encoding="application/x-tex">\overleftrightarrow{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20533em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.522em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M400000 241H110l3-3c68.7-52.7 113.7-120 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202 l-3-3h399890zM100 241v40h399900v-40z"/></svg></span><span class="halfarrow-right" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">张量</td><td style="text-align:left">\overleftrightarrow{T}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mo><mi>T</mi></mo><mo>⇉</mo></mover></mrow><annotation encoding="application/x-tex">\overset{\rightrightarrows}{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.49339em;vertical-align:0em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.49339em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.92089em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel amsrm mtight">⇉</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">张量并矢</td><td style="text-align:left">\overset{\rightrightarrows}{T}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">↔</mo></munder></mrow><annotation encoding="application/x-tex">\underleftrightarrow{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20533em;vertical-align:-0.522em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.4779999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.522em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M400000 241H110l3-3c68.7-52.7 113.7-120 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202 l-3-3h399890zM100 241v40h399900v-40z"/></svg></span><span class="halfarrow-right" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.522em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\underleftrightarrow{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">⇒</mo></mover></mrow><annotation encoding="application/x-tex">\Overrightarrow{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24333em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.24333em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.56em;min-width:0.888em;"><svg width="400em" height="0.56em" viewbox="0 0 400000 560" preserveaspectratio="xMaxYMin slice"><path d="M399738 392l-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z"/></svg></span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\Overrightarrow{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>b</mi><mi>a</mi></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{b}{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:left">分数</td><td style="text-align:left">\frac{b}{a}; \dfrac{b}{a}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>a</mi><mrow><mn>1</mn><mo>+</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mi>b</mi></mfrac></mstyle></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\cfrac{a}{1 + \cfrac{1}{b}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.756em;vertical-align:-2.166em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span></span></span></span></span><span style="top:-3.82em;"><span class="pstrut" style="height:3.59em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.33em;"><span class="pstrut" style="height:3.59em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.166em;"><span></span></span></span></span></span><span></span></span></span></span></span></td><td style="text-align:left">复合分式</td><td style="text-align:left">\cfrac{a}{1 + \cfrac{1}{b}}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>x</mi></msqrt><mo separator="true">;</mo><mroot><mi>x</mi><mi>n</mi></mroot></mrow><annotation encoding="application/x-tex">\sqrt{x}; \sqrt[n]{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">x</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5516160000000001em;"><span style="top:-2.836336em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">x</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">开方</td><td style="text-align:left">\sqrt{x}; \sqrt[n]{x}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>a</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">a^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">指数</td><td style="text-align:left">a^n</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">下标</td><td style="text-align:left">a_n</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mo><mo>=</mo></mo><mo stretchy="false">!</mo></mover></mrow><annotation encoding="application/x-tex">\stackrel{!}{=}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.152978em;vertical-align:0em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">=</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mclose mtight">!</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">堆叠</td><td style="text-align:left">\stackrel{!}{=}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mo><mo>=</mo></mo><mo stretchy="false">!</mo></mover></mrow><annotation encoding="application/x-tex">\overset{!}{=}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.152978em;vertical-align:0em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">=</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mclose mtight">!</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">上方</td><td style="text-align:left">\overset{!}{=}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><mo><mo>=</mo></mo><mo stretchy="false">!</mo></munder></mrow><annotation encoding="application/x-tex">\underset{!}{=}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1189779999999998em;vertical-align:-0.752108em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3668699999999999em;"><span style="top:-2.347892em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mclose mtight">!</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">=</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.752108em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">下方</td><td style="text-align:left">\underset{!}{=}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac linethickness="0px"><mi>a</mi><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">a \atop b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.090392em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7453919999999999em;"><span style="top:-2.3550000000000004em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">a \atop b</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mpadded voffset="0.25em"><mtext>b</mtext></mpadded><mi>c</mi></mrow><annotation encoding="application/x-tex">a\raisebox{0.25em}{b}c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.94444em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.94444em;"><span style="top:-3.25em;"><span class="pstrut" style="height:3em;"></span><span class="mord text"><span class="mord">b</span></span></span></span></span></span><span class="mord mathdefault">c</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">a\raisebox{0.25em}{b}c</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>∘</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f \circ g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span></td><td style="text-align:left">复合函数</td><td style="text-align:left">f \circ g</td></tr></tbody></table><h1 id="math-mode-accents"><a class="markdownIt-Anchor" href="#math-mode-accents"></a> Math mode accents</h1><table><thead><tr><th style="text-align:left">二元运算</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>θ</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9578799999999998em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span></span></span></span></span></span></span></td><td style="text-align:left">坐标基</td><td style="text-align:left">\hat{\theta};^{\theta}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>a</mi><mi>c</mi></mrow><mo stretchy="true">^</mo></mover></mrow><annotation encoding="application/x-tex">\widehat{ac}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73056em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.73056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z"/></svg></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">夹角</td><td style="text-align:left">\widehat{ac}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>˘</mo></mover></mrow><annotation encoding="application/x-tex">\breve{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">˘</span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\breve{a}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>ˇ</mo></mover><mo separator="true">;</mo><mover accent="true"><mrow><mi>a</mi><mi>c</mi></mrow><mo stretchy="true">ˇ</mo></mover></mrow><annotation encoding="application/x-tex">\check{a};\widecheck{ac}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.925em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.62847em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">ˇ</span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.73056em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.3em;"><svg width="100%" height="0.3em" viewbox="0 0 2364 300" preserveaspectratio="none"><path d="M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z"/></svg></span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\check{a};\widecheck{ac}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>~</mo></mover><mo separator="true">;</mo><mover accent="true"><mrow><mi>a</mi><mi>c</mi></mrow><mo stretchy="true">~</mo></mover><mo separator="true">;</mo><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">~</mo></munder></mrow><annotation encoding="application/x-tex">\tilde{a};\widetilde{ac};\utilde{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.12256em;vertical-align:-0.40599999999999997em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6678599999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">~</span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.71656em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.43056em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.286em;"><svg width="100%" height="0.286em" viewbox="0 0 1033 286" preserveaspectratio="none"><path d="M344 55.266c-142 0-300.638 81.316-311.5 86.418-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751 181.476 676 181.476c-149 0-189-126.21-332-126.21z"/></svg></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.594em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.286em;"><svg width="100%" height="0.286em" viewbox="0 0 1033 286" preserveaspectratio="none"><path d="M344 55.266c-142 0-300.638 81.316-311.5 86.418-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751 181.476 676 181.476c-149 0-189-126.21-332-126.21z"/></svg></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40599999999999997em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">波浪</td><td style="text-align:left">\tilde{a};\widetilde{ac};\utilde{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>ˊ</mo></mover></mrow><annotation encoding="application/x-tex">\acute{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">ˊ</span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\acute{a}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>a</mi><mo>ˋ</mo></mover></mrow><annotation encoding="application/x-tex">\grave{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">ˋ</span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\grave{a}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">⏠</mo></mover><mo separator="true">;</mo><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">⏡</mo></munder></mrow><annotation encoding="application/x-tex">\overgroup{AB};\undergroup{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3673300000000002em;vertical-align:-0.342em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.02533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.342em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.342em;"><svg width="400em" height="0.342em" viewbox="0 0 400000 342" preserveaspectratio="xMinYMin slice"><path d="M400000 80H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0 435 0h399565z"/></svg></span><span class="halfarrow-right" style="height:0.342em;"><svg width="400em" height="0.342em" viewbox="0 0 400000 342" preserveaspectratio="xMaxYMin slice"><path d="M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0 3-1 3-3v-38c-76-158-257-219-435-219H0z"/></svg></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.658em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.342em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.342em;"><svg width="400em" height="0.342em" viewbox="0 0 400000 342" preserveaspectratio="xMinYMin slice"><path d="M400000 262H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219 435 219h399565z"/></svg></span><span class="halfarrow-right" style="height:0.342em;"><svg width="400em" height="0.342em" viewbox="0 0 400000 342" preserveaspectratio="xMaxYMin slice"><path d="M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.342em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\overgroup{AB};\undergroup{AB}</td></tr></tbody></table><h1 id="基本运算"><a class="markdownIt-Anchor" href="#基本运算"></a> 基本运算</h1><table><thead><tr><th style="text-align:left">基本运算</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo></mrow><annotation encoding="application/x-tex">=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span></span></span></td><td style="text-align:left">is equal to</td><td style="text-align:left">=</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≈</mo></mrow><annotation encoding="application/x-tex">\approx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.48312em;vertical-align:0em;"></span><span class="mrel">≈</span></span></span></span></td><td style="text-align:left">is approximately equal to</td><td style="text-align:left">\approx</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span></span></span></span></td><td style="text-align:left">plus</td><td style="text-align:left">+</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo></mrow><annotation encoding="application/x-tex">-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span></span></span></span></td><td style="text-align:left">minus</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>±</mo><mo separator="true">;</mo><mo>∓</mo></mrow><annotation encoding="application/x-tex">\pm; \mp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord">±</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∓</span></span></span></span></td><td style="text-align:left">plus-minus; minus-plus</td><td style="text-align:left">\pm; \mp</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span></span></span></span></td><td style="text-align:left">multiplied by;cross product</td><td style="text-align:left">\times</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord">⋅</span></span></span></span></td><td style="text-align:left">dot product</td><td style="text-align:left">\cdot; \centerdot</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∗</mo></mrow><annotation encoding="application/x-tex">*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">∗</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">*;\ast</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>÷</mo><mo separator="true">;</mo><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">\div; /</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">÷</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">/</span></span></span></span></td><td style="text-align:left">divided by</td><td style="text-align:left">\div; /</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&lt;</mo></mrow><annotation encoding="application/x-tex">&lt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span></span></span></span></td><td style="text-align:left">is less than</td><td style="text-align:left">&lt;;\lt</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span></span></span></td><td style="text-align:left">is greater than</td><td style="text-align:left">&gt;;\gt</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≪</mo><mo separator="true">;</mo><mo>⋘</mo></mrow><annotation encoding="application/x-tex">\ll;\lll</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">≪</span></span><span class="base"><span class="strut" style="height:0.7443em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel amsrm">⋘</span></span></span></span></td><td style="text-align:left">远小于</td><td style="text-align:left">\ll\lll</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≫</mo><mo separator="true">;</mo><mo>⋙</mo></mrow><annotation encoding="application/x-tex">\gg;\ggg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">≫</span></span><span class="base"><span class="strut" style="height:0.7443em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel amsrm">⋙</span></span></span></span></td><td style="text-align:left">远大于</td><td style="text-align:left">\gg;\ggg</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⩾</mo><mo separator="true">;</mo><mo>≥</mo></mrow><annotation encoding="application/x-tex">\geqslant;\ge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7733399999999999em;vertical-align:-0.13667em;"></span><span class="mrel amsrm">⩾</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span></span></span></span></td><td style="text-align:left">大于等于</td><td style="text-align:left">\geqslant\ge</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⩽</mo><mo separator="true">;</mo><mo>≤</mo></mrow><annotation encoding="application/x-tex">\leqslant;\le</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7733399999999999em;vertical-align:-0.13667em;"></span><span class="mrel amsrm">⩽</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span></span></span></span></td><td style="text-align:left">小于等于</td><td style="text-align:left">\leqslant;\le</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∝</mo></mrow><annotation encoding="application/x-tex">\propto</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">∝</span></span></span></span></td><td style="text-align:left">正比于</td><td style="text-align:left">\propto</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≜</mo></mrow><annotation encoding="application/x-tex">\triangleq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.99865em;vertical-align:-0.08198em;"></span><span class="mrel amsrm">≜</span></span></span></span></td><td style="text-align:left">定义</td><td style="text-align:left">\triangleq</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≠</mo><mo separator="true">;</mo><mo>∉</mo></mrow><annotation encoding="application/x-tex">\not=;\not\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span></td><td style="text-align:left">前方加\not否定</td><td style="text-align:left">\not=;\not\in</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><msubsup><mi mathvariant="normal">∁</mi><mi>n</mi><mi>k</mi></msubsup></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle\sum_{k=0}^n \complement^k_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9535100000000005em;vertical-align:-1.302113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord amsrm">∁</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999998em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">求和</td><td style="text-align:left"><code>\displaystyle\sum_{k=0}^n \complement^k_n</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∏</mo></mrow><annotation encoding="application/x-tex">\prod</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∏</span></span></span></span></td><td style="text-align:left">求积</td><td style="text-align:left">\prod</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨿</mo></mrow><annotation encoding="application/x-tex">\amalg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">⨿</span></span></span></span></td><td style="text-align:left">合并</td><td style="text-align:left">\amalg</td></tr></tbody></table><h1 id="分隔符"><a class="markdownIt-Anchor" href="#分隔符"></a> 分隔符</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∣</mo><mi>a</mi><mo>∣</mo></mrow><annotation encoding="application/x-tex">\mid a \mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span></span></span></span></td><td style="text-align:left">绝对值</td><td style="text-align:left">\vert; \mid; <code>|</code>;\vert; \rvert</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∥</mi><mi>a</mi><mi mathvariant="normal">∥</mi></mrow><annotation encoding="application/x-tex">\|a\|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∥</span><span class="mord mathdefault">a</span><span class="mord">∥</span></span></span></span></td><td style="text-align:left">范数，模</td><td style="text-align:left">\Vert; <code>\|</code>; \lVert\ ;rVert</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌈</mo><mi>a</mi><mo stretchy="false">⌉</mo></mrow><annotation encoding="application/x-tex">\lceil a\rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mord mathdefault">a</span><span class="mclose">⌉</span></span></span></span></td><td style="text-align:left">ceiling</td><td style="text-align:left">\lceil a\rceil</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌊</mo><mi>a</mi><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\lfloor a\rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mord mathdefault">a</span><span class="mclose">⌋</span></span></span></span></td><td style="text-align:left">floor</td><td style="text-align:left">\lfloor a\rfloor</td><td style="text-align:left">⌊2.1⌋ = 2</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌊</mo><mi>a</mi><mo stretchy="false">⌉</mo></mrow><annotation encoding="application/x-tex">\lfloor a\rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mord mathdefault">a</span><span class="mclose">⌉</span></span></span></span></td><td style="text-align:left">最接近的整数</td><td style="text-align:left">\lfloor a\rceil</td><td style="text-align:left">⌊2.6⌉ = 3</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⎰</mo><mo stretchy="false">⎱</mo></mrow><annotation encoding="application/x-tex">\lmoustache\rmoustache</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.988em;vertical-align:-0.244em;"></span><span class="mopen">⎰</span><span class="mclose">⎱</span></span></span></span></td><td style="text-align:left">胡须</td><td style="text-align:left">\lmoustache\rmoustache</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">┌</mo><mo stretchy="false">┐</mo></mrow><annotation encoding="application/x-tex">\ulcorner\urcorner</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mopen amsrm">┌</span><span class="mclose amsrm">┐</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\ulcorner\urcorner</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">└</mo><mo stretchy="false">┘</mo></mrow><annotation encoding="application/x-tex">\llcorner\lrcorner</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.37788em;vertical-align:0em;"></span><span class="mopen amsrm">└</span><span class="mclose amsrm">┘</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\llcorner\lrcorner</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↑</mo><mo separator="true">;</mo><mo>↓</mo><mo separator="true">;</mo><mo>↕</mo></mrow><annotation encoding="application/x-tex">\uparrow;\downarrow;\updownarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">↑</span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↓</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↕</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\uparrow;\downarrow;\updownarrow</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇑</mo><mo separator="true">;</mo><mo>⇓</mo><mo separator="true">;</mo><mo>⇕</mo></mrow><annotation encoding="application/x-tex">\Uparrow;\Downarrow;\Updownarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel">⇑</span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇓</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇕</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\uparrow;\downarrow;\updownarrow</td><td style="text-align:left"></td></tr></tbody></table><p><strong>分隔符尺寸</strong></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mstyle mathsize="1.728em"><mrow><mi>A</mi><mi>B</mi></mrow></mstyle><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(\LARGE{AB}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.83081424em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord sizing reset-size6 size9"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span></span> <code>\left(\LARGE{AB}\right)</code><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo fence="false">(</mo><mo fence="false">(</mo><mo fence="false">(</mo><mo fence="false">(</mo></mrow><annotation encoding="application/x-tex">( \big( \Big( \bigg( \Bigg(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mopen">(</span><span class="mord"><span class="delimsizing size1">(</span></span><span class="mord"><span class="delimsizing size2">(</span></span><span class="mord"><span class="delimsizing size3">(</span></span><span class="mord"><span class="delimsizing size4">(</span></span></span></span></span> <code>( \big( \Big( \bigg( \Bigg(</code></p><h1 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>§</mtext></mrow><annotation encoding="application/x-tex">\text{\sect}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord text"><span class="mord">§</span></span></span></span></span></td><td style="text-align:left">分节</td><td style="text-align:left">\text{\sect}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋆</mo></mrow><annotation encoding="application/x-tex">\star</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">⋆</span></span></span></span></td><td style="text-align:left">星号</td><td style="text-align:left">\star</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="updiagonalstrike"><mn>5</mn></menclose></mrow><annotation encoding="application/x-tex">\cancel{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.84444em;"><span style="top:-3.04444em;"><span class="pstrut" style="height:3.04444em;"></span><span class="mord"><span class="mord">5</span></span></span><span class="svg-align" style="top:-2.8444399999999996em;"><span class="pstrut" style="height:3.04444em;"></span><span style="height:1.04444em;"><svg width="100%" height="1.04444em"><line x1="0" y1="100%" x2="100%" y2="0" stroke-width="0.046em"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20000000000000007em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">划线</td><td style="text-align:left">\cancel{5}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="downdiagonalstrike"><mn>5</mn></menclose></mrow><annotation encoding="application/x-tex">\bcancel{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.84444em;"><span style="top:-3.04444em;"><span class="pstrut" style="height:3.04444em;"></span><span class="mord"><span class="mord">5</span></span></span><span class="svg-align" style="top:-2.8444399999999996em;"><span class="pstrut" style="height:3.04444em;"></span><span style="height:1.04444em;"><svg width="100%" height="1.04444em"><line x1="0" y1="0" x2="100%" y2="100%" stroke-width="0.046em"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20000000000000007em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">划线</td><td style="text-align:left">\bcancel{5}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="updiagonalstrike downdiagonalstrike"><mrow><mi>a</mi><mi>b</mi><mi>c</mi></mrow></menclose></mrow><annotation encoding="application/x-tex">\xcancel{abc}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord cancel-lap"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord cancel-pad"><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span style="height:0.69444em;"><svg width="100%" height="0.69444em"><line x1="0" y1="0" x2="100%" y2="100%" stroke-width="0.046em"/><line x1="0" y1="100%" x2="100%" y2="0" stroke-width="0.046em"/></svg></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">划线</td><td style="text-align:left">\xcancel{5}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="horizontalstrike"><mn>5</mn></menclose></mrow><annotation encoding="application/x-tex">\sout{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.64444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.2155em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy sout"></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">划线</td><td style="text-align:left">sout{5}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="box"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>π</mi><mo>=</mo><mfrac><mi>c</mi><mi>d</mi></mfrac></mrow></mstyle></mstyle></menclose></mrow><annotation encoding="application/x-tex">\boxed{\pi=\frac c d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4735600000000004em;vertical-align:-1.0259999999999998em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4475600000000006em;"><span style="top:-4.473560000000001em;"><span class="pstrut" style="height:4.473560000000001em;"></span><span class="mord boxpad"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathdefault">d</span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathdefault">c</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-3.447560000000001em;"><span class="pstrut" style="height:4.473560000000001em;"></span><span class="stretchy fbox" style="height:2.4735600000000004em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0259999999999998em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">方框</td><td style="text-align:left">\boxed{\pi=\frac c d}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mover><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi></mrow><mo stretchy="true">⏞</mo></mover><mtext>note</mtext></mover></mrow><annotation encoding="application/x-tex">\overbrace{a+b+c}^{\text{note}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.056326em;vertical-align:-0.08333em;"></span><span class="mord mover"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9729959999999997em;"><span style="top:-3.34244em;"><span class="pstrut" style="height:3.34244em;"></span><span class="mord mover"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3424399999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span></span></span><span class="svg-align" style="top:-3.79444em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMinYMin slice"><path d="M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7 5-6 9-10 13-.7 1-7.3 1-20 1H6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMidYMin slice"><path d="M200428 334c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMaxYMin slice"><path d="M400000 542l-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z"/></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.08333em;"><span></span></span></span></span></span></span><span style="top:-4.88488em;"><span class="pstrut" style="height:3.34244em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">note</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.08333em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">上备注</td><td style="text-align:left">\overbrace{a+b+c}^{\text{note}}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><munder><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi></mrow><mo stretchy="true">⏟</mo></munder><mtext>note</mtext></munder></mrow><annotation encoding="application/x-tex">\underbrace{a+b+c}_{\text{note}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.056326em;vertical-align:-1.361886em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-1.638114em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">note</span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span class="svg-align" style="top:-2.26867em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMidYMin slice"><path d="M199572 214c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg width="400em" height="0.548em" viewbox="0 0 400000 548" preserveaspectratio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.73133em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.361886em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">下备注</td><td style="text-align:left">\underbrace{a+b+c}_{\text{note}}</td></tr></tbody></table><p><code>\tag{hi} x+y^{2x}</code></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>x</mi><mo>+</mo><msup><mi>y</mi><mrow><mn>2</mn><mi>x</mi></mrow></msup></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(hi)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">x+y^{2x} \tag{hi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0585479999999998em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">h</span><span class="mord">i</span></span><span class="mord">)</span></span></span></span></span></span></p><p><code>\tag*{hi} x+y^{2x}</code></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>x</mi><mo>+</mo><msup><mi>y</mi><mrow><mn>2</mn><mi>x</mi></mrow></msup></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>hi</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">x+y^{2x}\tag*{hi}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0585479999999998em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1.0585479999999998em;vertical-align:-0.19444em;"></span><span class="mord text"><span class="mord">hi</span></span></span></span></span></span></p><h1 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h1><table><thead><tr><th style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arcsin</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arcsin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">arcsin</span></span></span></span>  <code>\arcsin</code></th><th style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cotg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cotg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mop">cot<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\cotg</code></th><th style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ln</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\ln</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ln</span></span></span></span>  <code>\ln</code></th><th style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>det</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\det</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">det</span></span></span></span>  <code>\det</code></th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arccos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arccos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">arccos</span></span></span></span>  <code>\arccos</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>coth</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\coth</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">coth</span></span></span></span>  <code>\coth</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>log</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\log</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>gcd</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\gcd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop"><span style="margin-right:0.01389em;">g</span>cd</span></span></span></span>  <code>\gcd</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arctan</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arctan</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mop">arctan</span></span></span></span>  <code>\arctan</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>csc</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\csc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">csc</span></span></span></span>  <code>\csc</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sec</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\sec</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">sec</span></span></span></span>  <code>\sec</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>inf</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\inf</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">in<span style="margin-right:0.07778em;">f</span></span></span></span></span>  <code>\inf</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arctg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arctg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mop">arct<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\arctg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ctg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\ctg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mop">ct<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\ctg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\sin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">sin</span></span></span></span>  <code>\sin</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>lim</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\lim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">lim</span></span></span></span>  <code>\lim</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arcctg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arcctg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mop">arcct<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\arcctg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cth</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cth</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">cth</span></span></span></span>  <code>\cth</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sinh</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\sinh</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">sinh</span></span></span></span>  <code>\sinh</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo><mi mathvariant="normal">lim inf</mi><mo>⁡</mo></mo></mrow><annotation encoding="application/x-tex">\liminf</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">l</span><span class="mord mathrm">i</span><span class="mord mathrm">m</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathrm">i</span><span class="mord mathrm">n</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span></span></span></span></span></span>  <code>\liminf</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\arg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>deg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\deg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop">de<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\deg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sh</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\sh</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">sh</span></span></span></span>  <code>\sh</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo><mi mathvariant="normal">lim sup</mi><mo>⁡</mo></mo></mrow><annotation encoding="application/x-tex">\limsup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">l</span><span class="mord mathrm">i</span><span class="mord mathrm">m</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathrm">s</span><span class="mord mathrm">u</span><span class="mord mathrm">p</span></span></span></span></span></span>  <code>\limsup</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ch</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\ch</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ch</span></span></span></span>  <code>\ch</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>dim</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\dim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">dim</span></span></span></span>  <code>\dim</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tan</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\tan</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mop">tan</span></span></span></span>  <code>\tan</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>max</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">max</span></span></span></span>  <code>\max</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cos</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">cos</span></span></span></span>  <code>\cos</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>exp</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\exp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mop">exp</span></span></span></span>  <code>\exp</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tanh</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\tanh</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">tanh</span></span></span></span>  <code>\tanh</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>min</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">min</span></span></span></span>  <code>\min</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cosec</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cosec</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">cosec</span></span></span></span>  <code>\cosec</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>hom</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\hom</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">hom</span></span></span></span>  <code>\hom</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>tg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\tg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mop">t<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\tg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Pr</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\Pr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mop">Pr</span></span></span></span>  <code>\Pr</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cosh</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cosh</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">cosh</span></span></span></span>  <code>\cosh</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ker</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\ker</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ker</span></span></span></span>  <code>\ker</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>th</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\th</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">th</span></span></span></span>  <code>\th</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sup</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\sup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mop">sup</span></span></span></span>  <code>\sup</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cot</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\cot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mop">cot</span></span></span></span>  <code>\cot</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>lg</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\lg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mop">l<span style="margin-right:0.01389em;">g</span></span></span></span></span>  <code>\lg</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">f</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\operatorname{f}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.07778em;">f</span></span></span></span></span>  <code>\operatorname{f}</code></td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arg</mi><mo>⁡</mo><mi>max</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arg\max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">max</span></span></span></span>  <code>\arg\max</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arg</mi><mo>⁡</mo><mi>min</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\arg\min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8623000000000001em;vertical-align:-0.19444em;"></span><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">min</span></span></span></span>  <code>\arg\min</code></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><h1 id="逻辑理论"><a class="markdownIt-Anchor" href="#逻辑理论"></a> 逻辑理论</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∵</mo></mrow><annotation encoding="application/x-tex">\because</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">∵</span></span></span></span></td><td style="text-align:left">因为</td><td style="text-align:left">\because</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∴</mo></mrow><annotation encoding="application/x-tex">\therefore</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">∴</span></span></span></span></td><td style="text-align:left">所以</td><td style="text-align:left">\therefore</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">¬</mi><mo separator="true">;</mo><mo>∼</mo></mrow><annotation encoding="application/x-tex">\lnot; \sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord">¬</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span></span></span></span></td><td style="text-align:left">逻辑非(negation)</td><td style="text-align:left">\neg; \lnot; \sim</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">¬</mi><mo stretchy="false">(</mo><mi mathvariant="normal">¬</mi><mi>A</mi><mo stretchy="false">)</mo><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>A</mi></mrow><annotation encoding="application/x-tex">\lnot(\lnot A)\iff A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">¬</span><span class="mopen">(</span><span class="mord">¬</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∧</mo></mrow><annotation encoding="application/x-tex">\land</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∧</span></span></span></span></td><td style="text-align:left">逻辑与</td><td style="text-align:left">\land</td><td style="text-align:left">n &lt; 4 ∧ n &gt; 2 ⇔ n = 3 when n is a natural number.</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∨</mo></mrow><annotation encoding="application/x-tex">\lor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∨</span></span></span></span></td><td style="text-align:left">逻辑或</td><td style="text-align:left">\lor</td><td style="text-align:left">n ≥ 4 ∨ n ≤ 2 ⇔ n ≠ 3 when n is a natural number.</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊕</mo><mo separator="true">;</mo><mo>⊻</mo></mrow><annotation encoding="application/x-tex">\oplus; \veebar</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8866799999999999em;vertical-align:-0.19444em;"></span><span class="mord">⊕</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord amsrm">⊻</span></span></span></span></td><td style="text-align:left">异或</td><td style="text-align:left">\oplus; \veebar</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>⊕</mo><mi>b</mi><mo>=</mo><mo stretchy="false">(</mo><mi mathvariant="normal">¬</mi><mi>a</mi><mo>∧</mo><mi>b</mi><mo stretchy="false">)</mo><mo>∨</mo><mo stretchy="false">(</mo><mi>a</mi><mo>∧</mo><mi mathvariant="normal">¬</mi><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a\oplus b=(\lnot a\land b)\lor(a\land \lnot b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">¬</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">¬</span><span class="mord mathdefault">b</span><span class="mclose">)</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mo separator="true">;</mo><mo>↔</mo></mrow><annotation encoding="application/x-tex">\iff; \leftrightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↔</span></span></span></span></td><td style="text-align:left">双条件，等价关系，当且仅当(if and only if)</td><td style="text-align:left">\iff; \leftrightarrow</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇒</mo><mo separator="true">;</mo><mo>→</mo></mrow><annotation encoding="application/x-tex">\Rarr; \rarr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">⇒</span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span></span></span></span></td><td style="text-align:left">条件运算,if … then</td><td style="text-align:left">\Rarr; \rarr ;\to</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mn>6</mn><mo>⇒</mo><msup><mi>x</mi><mn>2</mn></msup><mo>=</mo><mn>36</mn></mrow><annotation encoding="application/x-tex">x=6\Rightarrow x^2=36</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">6</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⇐</mo><mo separator="true">;</mo><mo>←</mo></mrow><annotation encoding="application/x-tex">\Larr; \larr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">⇐</span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span></span></span></span></td><td style="text-align:left">左箭头</td><td style="text-align:left">\Larr; \larr; \gets</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>:</mo><mo>=</mo><mo separator="true">;</mo><mo>:</mo><mo>⇔</mo></mrow><annotation encoding="application/x-tex">:=; :\Leftrightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">⇔</span></span></span></span></td><td style="text-align:left">定义</td><td style="text-align:left">:=</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mo separator="true">;</mo><mtext>  </mtext><mo>⟸</mo><mtext>  </mtext></mrow><annotation encoding="application/x-tex">\implies; \impliedby</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7194400000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟸</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\implies; \impliedby</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∀</mi></mrow><annotation encoding="application/x-tex">\forall</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∀</span></span></span></span></td><td style="text-align:left">任意</td><td style="text-align:left">\forall</td><td style="text-align:left">∀ n ∈ ℕ, n2 ≥ n</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∃</mi></mrow><annotation encoding="application/x-tex">\exists</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∃</span></span></span></span></td><td style="text-align:left">存在</td><td style="text-align:left">\exists</td><td style="text-align:left">∃ n ∈ ℕ: n is even</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∃</mi><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">\exists!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">∃</span><span class="mclose">!</span></span></span></span></td><td style="text-align:left">唯一存在</td><td style="text-align:left">\exists!</td><td style="text-align:left">∃! n ∈ ℕ: n + 5 = 2n.</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊨</mo></mrow><annotation encoding="application/x-tex">\vDash</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">⊨</span></span></span></span></td><td style="text-align:left">满足符</td><td style="text-align:left">\vDash</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>⊨</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\vDash B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel amsrm">⊨</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊢</mo></mrow><annotation encoding="application/x-tex">\vdash</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mrel">⊢</span></span></span></span></td><td style="text-align:left">推断出</td><td style="text-align:left">\vdash</td><td style="text-align:left">A → B ⊢ ¬B → ¬A</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">□</mi></mrow><annotation encoding="application/x-tex">\square</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.675em;vertical-align:0em;"></span><span class="mord amsrm">□</span></span></span></span></td><td style="text-align:left">拟态词必然</td><td style="text-align:left">\square</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">◊</mi></mrow><annotation encoding="application/x-tex">\Diamond</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80335em;vertical-align:-0.11111em;"></span><span class="mord amsrm">◊</span></span></span></span></td><td style="text-align:left">拟态词可能</td><td style="text-align:left">\Diamond</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>∘</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R \circ S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></td><td style="text-align:left">复合关系</td><td style="text-align:left">R \circ S</td><td style="text-align:left"></td></tr></tbody></table><h1 id="集合和概率"><a class="markdownIt-Anchor" href="#集合和概率"></a> 集合和概率</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">{</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{x\vert P(x)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></td><td style="text-align:left">集合</td><td style="text-align:left">{x\mid P(x)}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>U</mi><mo>˚</mo></mover></mrow><annotation encoding="application/x-tex">\mathring{U}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9467699999999999em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.34722em;">˚</span></span></span></span></span></span></span></span></span></td><td style="text-align:left">邻域</td><td style="text-align:left">\mathring{U}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊎</mo></mrow><annotation encoding="application/x-tex">\uplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">⊎</span></span></span></span></td><td style="text-align:left">多重集</td><td style="text-align:left">\uplus</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊂</mo></mrow><annotation encoding="application/x-tex">\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊂</span></span></span></span></td><td style="text-align:left">真子集</td><td style="text-align:left">\subset</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊆</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊆</span></span></span></span></td><td style="text-align:left">子集</td><td style="text-align:left">\subseteq</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊃</mo></mrow><annotation encoding="application/x-tex">\supset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">⊃</span></span></span></span></td><td style="text-align:left">真父集</td><td style="text-align:left">\supset</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊇</mo></mrow><annotation encoding="application/x-tex">\supseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">⊇</span></span></span></span></td><td style="text-align:left">父集</td><td style="text-align:left">\supseteq</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\in</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∋</mo></mrow><annotation encoding="application/x-tex">\ni</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∋</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\ni</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∩</mo></mrow><annotation encoding="application/x-tex">\cap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∩</span></span></span></span></td><td style="text-align:left">交集</td><td style="text-align:left">\cap</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∪</mo></mrow><annotation encoding="application/x-tex">\cup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord">∪</span></span></span></span></td><td style="text-align:left">并集</td><td style="text-align:left">\cup</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∖</mo></mrow><annotation encoding="application/x-tex">\setminus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∖</span></span></span></span></td><td style="text-align:left">差集</td><td style="text-align:left">\setminus</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{card}(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">c</span><span class="mord mathrm">a</span><span class="mord mathrm">r</span><span class="mord mathrm">d</span></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span></td><td style="text-align:left">元素个数</td><td style="text-align:left">\mathrm{card}(A)</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∅</mi><mo separator="true">;</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\emptyset; \varnothing</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.94444em;vertical-align:-0.19444em;"></span><span class="mord">∅</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord amsrm">∅</span></span></span></span></td><td style="text-align:left">空集</td><td style="text-align:left">\emptyset; \varnothing</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span></td><td style="text-align:left">自然数</td><td style="text-align:left">\N</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></td><td style="text-align:left">整数</td><td style="text-align:left">\Z</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span></td><td style="text-align:left">实数</td><td style="text-align:left">\R;\Reals</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ℑ</mi></mrow><annotation encoding="application/x-tex">\Im</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">ℑ</span></span></span></span></td><td style="text-align:left">虚数</td><td style="text-align:left">\Im; \Image</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\Complex</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span></td><td style="text-align:left">复数</td><td style="text-align:left">\Complex</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">n!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mclose">!</span></span></span></span></td><td style="text-align:left">阶乘</td><td style="text-align:left">n!</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mi>n</mi><mi>k</mi></mfrac><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\binom{n}{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7453919999999999em;"><span style="top:-2.3550000000000004em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">[</mo><mfrac linethickness="0px"><mi>n</mi><mi>k</mi></mfrac><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">{n\brack k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7453919999999999em;"><span style="top:-2.3550000000000004em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></span></td><td style="text-align:left">二项式系数</td><td style="text-align:left">\binom{n}{k}; \dbinom{n}{k}; <br>{n \choose k}; n\brack k</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>A</mi><mi>m</mi><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">A^n_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.93033em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">排列(Arrangement)</td><td style="text-align:left">A^n_m</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="normal">∁</mi><mi>m</mi><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\complement^n_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.072em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord amsrm">∁</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">组合</td><td style="text-align:left">\complement^n_m</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mi>μ</mi><mo separator="true">,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X\sim N(\mu,\sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathdefault">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:left">服从分布</td><td style="text-align:left">\sim</td></tr><tr><td style="text-align:left">⟨φ|ψ⟩</td><td style="text-align:left">左矢量,右矢量</td><td style="text-align:left">\langle\rangle</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">{</mo><mfrac linethickness="0px"><mi>n</mi><mi>k</mi></mfrac><mo fence="true">}</mo></mrow><annotation encoding="application/x-tex">{n\brace k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">{</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7453919999999999em;"><span style="top:-2.3550000000000004em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">}</span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">{n\brace k}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">[</mo><mfrac linethickness="0px"><mi>n</mi><mi>k</mi></mfrac><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">{n\brack k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord"><span class="mord"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7453919999999999em;"><span style="top:-2.3550000000000004em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.144em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">{n\brack k}</td></tr></tbody></table><h1 id="几何"><a class="markdownIt-Anchor" href="#几何"></a> 几何</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∽</mo></mrow><annotation encoding="application/x-tex">\backsim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.37788em;vertical-align:0em;"></span><span class="mrel amsrm">∽</span></span></span></span></td><td style="text-align:left">相似三角形</td><td style="text-align:left">\backsim</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋍</mo></mrow><annotation encoding="application/x-tex">\backsimeq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46402em;vertical-align:0em;"></span><span class="mrel amsrm">⋍</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\backsimeq</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mo><mo>=</mo></mo><mo>∽</mo></mover></mrow><annotation encoding="application/x-tex">\overset{\backsim}{=}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9313859999999999em;vertical-align:0em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9313859999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">=</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel amsrm mtight">∽</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">全等三角形</td><td style="text-align:left">\overset{\backsim}{=}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∥</mo></mrow><annotation encoding="application/x-tex">\parallel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel">∥</span></span></span></span></td><td style="text-align:left">平行</td><td style="text-align:left">\parallel</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∦</mo></mrow><annotation encoding="application/x-tex">\nparallel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.99253em;vertical-align:-0.25142em;"></span><span class="mrel amsrm">∦</span></span></span></span></td><td style="text-align:left">不平行</td><td style="text-align:left">\nparallel</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">⊥</mi></mrow><annotation encoding="application/x-tex">\bot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">⊥</span></span></span></span></td><td style="text-align:left">垂直</td><td style="text-align:left">\bot</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833300000000001em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">直线</td><td style="text-align:left">\overline{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">undefined</mo></mover></mrow><annotation encoding="application/x-tex">\overlinesegment{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20533em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.20533em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833299999999998em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.522em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M40 281 V428 H0 V94 H40 V241 H400000 v40zM40 281 V428 H0 V94 H40 V241 H400000 v40z"/></svg></span><span class="halfarrow-right" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M399960 241 V94 h40 V428 h-40 V281 H0 v-40zM399960 241 V94 h40 V428 h-40 V281 H0 v-40z"/></svg></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">线段</td><td style="text-align:left">\overlinesegment{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder accentunder="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">undefined</mo></munder></mrow><annotation encoding="application/x-tex">\underlinesegment{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20533em;vertical-align:-0.522em;"></span><span class="mord accentunder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span class="svg-align" style="top:-2.4779999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.522em;min-width:0.888em;"><span class="halfarrow-left" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMinYMin slice"><path d="M40 281 V428 H0 V94 H40 V241 H400000 v40zM40 281 V428 H0 V94 H40 V241 H400000 v40z"/></svg></span><span class="halfarrow-right" style="height:0.522em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M399960 241 V94 h40 V428 h-40 V281 H0 v-40zM399960 241 V94 h40 V428 h-40 V281 H0 v-40z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.522em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\underlinesegment{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover><mo><mi>A</mi><mi>B</mi></mo><mo>⌢</mo></mover></mrow><annotation encoding="application/x-tex">\overset{\frown}{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.233678em;vertical-align:0em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.233678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop"><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3.88333em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⌢</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">弧</td><td style="text-align:left">\overset{\frown}{AB}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊙</mo></mrow><annotation encoding="application/x-tex">\odot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">⊙</span></span></span></span></td><td style="text-align:left">圆</td><td style="text-align:left">\odot</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>◯</mo></mrow><annotation encoding="application/x-tex">\bigcirc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">◯</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\bigcirc</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊡</mo></mrow><annotation encoding="application/x-tex">\boxdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.675em;vertical-align:0em;"></span><span class="mord amsrm">⊡</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\boxdot</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">□</mi></mrow><annotation encoding="application/x-tex">\square</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.675em;vertical-align:0em;"></span><span class="mord amsrm">□</span></span></span></span></td><td style="text-align:left">矩形</td><td style="text-align:left">\square</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="normal">R</mi><mi mathvariant="normal">t</mi></mrow><mi mathvariant="normal">△</mi></mrow><annotation encoding="application/x-tex">\mathrm{Rt}\triangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathrm">R</span><span class="mord mathrm">t</span></span><span class="mord">△</span></span></span></span></td><td style="text-align:left">直角三角形</td><td style="text-align:left">\mathrm{Rt}\triangle</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">◊</mi></mrow><annotation encoding="application/x-tex">\Diamond</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80335em;vertical-align:-0.11111em;"></span><span class="mord amsrm">◊</span></span></span></span></td><td style="text-align:left">菱形</td><td style="text-align:left">\Diamond</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∠</mi></mrow><annotation encoding="application/x-tex">\angle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord">∠</span></span></span></span></td><td style="text-align:left">角</td><td style="text-align:left">\angle</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∡</mi></mrow><annotation encoding="application/x-tex">\measuredangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord amsrm">∡</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\measuredangle</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>90</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">90\degree</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">0</span><span class="mord">°</span></span></span></span></td><td style="text-align:left">角度</td><td style="text-align:left">90\degree</td></tr></tbody></table><h1 id="微积分"><a class="markdownIt-Anchor" href="#微积分"></a> 微积分</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>←</mo></mrow><annotation encoding="application/x-tex">\gets</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">←</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\gets</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span></td><td style="text-align:left">趋向于</td><td style="text-align:left">\to</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">f:X\to Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></td><td style="text-align:left">无穷大</td><td style="text-align:left">\infty</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>lim</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\lim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">lim</span></span></span></span></td><td style="text-align:left">极限</td><td style="text-align:left">\lim\limits_{x\to \infty} f(x)=1</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>x</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></munder><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lim\limits_{x\to \infty} f(x)=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.45em;vertical-align:-0.7em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-2.1em;margin-left:0em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>x</mi><mo>˙</mo></mover></mrow><annotation encoding="application/x-tex">\dot{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.66786em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.11111000000000001em;">˙</span></span></span></span></span></span></span></span></span></td><td style="text-align:left">导数</td><td style="text-align:left">\dot{x}</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>x</mi><mo>¨</mo></mover></mrow><annotation encoding="application/x-tex">\ddot{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.66786em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.22222em;">¨</span></span></span></span></span></span></span></span></span></td><td style="text-align:left">二阶导</td><td style="text-align:left">\ddot{x}</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup></mrow><annotation encoding="application/x-tex">x&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">导数</td><td style="text-align:left">x’; x^\prime</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></mrow><annotation encoding="application/x-tex">x&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">二阶导</td><td style="text-align:left">x’’</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">x^{(n)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">n阶导</td><td style="text-align:left">x^{(n)}</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∂</mi></mrow><annotation encoding="application/x-tex">\partial</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord" style="margin-right:0.05556em;">∂</span></span></span></span></td><td style="text-align:left">偏导数</td><td style="text-align:left">\partial</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\mathrm{d}x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">x</span></span></span></span></td><td style="text-align:left">微分</td><td style="text-align:left">\mathrm{d}x</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∫</mo></mrow><annotation encoding="application/x-tex">\int</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span></span></span></span></td><td style="text-align:left">积分</td><td style="text-align:left">\int</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∫</mo><msup><mi>x</mi><mn>2</mn></msup><mi mathvariant="normal">d</mi><mi>x</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msup><mi>x</mi><mn>3</mn></msup><mn>3</mn></mfrac></mstyle><mo>+</mo><mi>C</mi><mspace linebreak="newline"></mspace><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><msup><mi>x</mi><mn>2</mn></msup><mi mathvariant="normal">d</mi><mi>x</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><msup><mi>b</mi><mn>3</mn></msup><mo>−</mo><msup><mi>a</mi><mn>3</mn></msup></mrow><mn>3</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\int x^2\mathrm{d}x =\dfrac{x^3}{3}+C \\ \int_a^b x^2\mathrm{d}x =\dfrac{b^3-a^3}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.120228em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.399828em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.044008em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span><span style="top:-3.2579000000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∬</mo></mrow><annotation encoding="application/x-tex">\iint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">∬</span></span></span></span></td><td style="text-align:left">积分</td><td style="text-align:left">\iint</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∭</mo></mrow><annotation encoding="application/x-tex">\iiint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">∭</span></span></span></span></td><td style="text-align:left">积分</td><td style="text-align:left">\iiint</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∮</mo></mrow><annotation encoding="application/x-tex">\oint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∮</span></span></span></span></td><td style="text-align:left">曲线积分</td><td style="text-align:left">\oint</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∮</mo><mi>C</mi></msub><mfrac><mn>1</mn><mi>z</mi></mfrac><mi mathvariant="normal">d</mi><mi>z</mi><mo>=</mo><mn>2</mn><mi>π</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">\oint_C \frac{1}{z}\mathrm{d}z=2\pi i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.200928em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">∮</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.12251099999999993em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">d</span></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord mathdefault">i</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∯</mo></mrow><annotation encoding="application/x-tex">\oiint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop vlist-t vlist-t2" style="position:relative;top:-0.0005000000000000282em;"><span class="vlist-r"><span class="vlist" style="height:0.8049999999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;">∬</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="overlay" style="height:0.499em;width:0.957em;"><svg width="0.957em" height="0.499em" style="width:0.957em" viewbox="0 0 957 499" preserveaspectratio="xMinYMin"><path d="M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2zm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.860.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.306em;"><span></span></span></span></span></span></span></span></td><td style="text-align:left">积分</td><td style="text-align:left">\oiint</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∰</mo></mrow><annotation encoding="application/x-tex">\oiiint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop vlist-t vlist-t2" style="position:relative;top:-0.0005000000000000282em;"><span class="vlist-r"><span class="vlist" style="height:0.8049999999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;">∭</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="overlay" style="height:0.499em;width:1.304em;"><svg width="1.304em" height="0.499em" style="width:1.304em" viewbox="0 0 1304 499" preserveaspectratio="xMinYMin"><path d="M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2zm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 085.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.306em;"><span></span></span></span></span></span></span></span></td><td style="text-align:left">积分</td><td style="text-align:left">\oiiint</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi></mrow><annotation encoding="application/x-tex">\nabla</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">∇</span></span></span></span></td><td style="text-align:left">梯度</td><td style="text-align:left">\nabla</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi><mo>⋅</mo><mover accent="true"><mi>v</mi><mo>⃗</mo></mover><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>v</mi><mi>x</mi></msub></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac></mstyle><mo>+</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>v</mi><mi>y</mi></msub></mrow><mrow><mi mathvariant="normal">∂</mi><mi>y</mi></mrow></mfrac></mstyle><mo>+</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>v</mi><mi>z</mi></msub></mrow><mrow><mi mathvariant="normal">∂</mi><mi>z</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\nabla\cdot\vec{v}=\dfrac{\partial v_x}{\partial x}+\dfrac{\partial v_y}{\partial y}+\dfrac{\partial v_z}{\partial z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">∇</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.714em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.20772em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.25188em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span></td><td style="text-align:left">拉普拉斯变换</td><td style="text-align:left">\Delta</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>f</mi><mo>=</mo><msup><mi mathvariant="normal">∇</mi><mn>2</mn></msup><mi>f</mi><mo>=</mo><mi mathvariant="normal">∇</mi><mo>⋅</mo><mi mathvariant="normal">∇</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">\Delta f=\nabla ^{2}f=\nabla \cdot \nabla f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">∇</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">∇</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">□</mi></mrow><annotation encoding="application/x-tex">\Box</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.675em;vertical-align:0em;"></span><span class="mord amsrm">□</span></span></span></span></td><td style="text-align:left">非欧几里得<br>拉普拉斯算子</td><td style="text-align:left">\Box</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">□</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><msup><mi>c</mi><mn>2</mn></msup></mfrac></mstyle><mstyle displaystyle="true" scriptlevel="0"><mfrac><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mrow><mi mathvariant="normal">∂</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac></mstyle><mo>−</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mrow><mi mathvariant="normal">∂</mi><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mstyle><mo>−</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mrow><mi mathvariant="normal">∂</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></mfrac></mstyle><mo>−</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><msup><mi mathvariant="normal">∂</mi><mn>2</mn></msup><mrow><mi mathvariant="normal">∂</mi><msup><mi>z</mi><mn>2</mn></msup></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\Box=\dfrac{1}{c^2}\dfrac{\partial^2}{\partial t^2}-\dfrac{\partial^2}{\partial x^2}-\dfrac{\partial^2}{\partial y^2}-\dfrac{\partial^2}{\partial z^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.675em;vertical-align:0em;"></span><span class="mord amsrm">□</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.371548em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td></tr></tbody></table><h1 id="线性代数"><a class="markdownIt-Anchor" href="#线性代数"></a> 线性代数</h1><table><thead><tr><th style="text-align:left">表示</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>b</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>d</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">f(x)=\begin{cases} a &amp;\text{if } b \\   c &amp;\text{if } d \end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathdefault">b</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:left">定义方程</td><td style="text-align:left"><code>f(x)=\begin{cases}</code>   <br><code>a &amp;\text{if } b \\</code> <br>   <code>c &amp;\text{if } d</code> <br><code>\end{cases}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>x</mi><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>y</mi><mo>=</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>x</mi><mo>+</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>13</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>y</mi><mo>=</mo><mn>4</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{alignedat}{2}   10&amp;x+ &amp;3&amp;y = 2 \\  3&amp;x+&amp;13&amp;y = 4 \end{alignedat}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault">x</span><span class="mord">+</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault">x</span><span class="mord">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">方程组</td><td style="text-align:left"><code>\begin{alignedat}{2</code>}   <br><code>10&amp;x+ &amp;3&amp;y = 2 \\</code>   <br><code>3&amp;x+&amp;13&amp;y = 4</code> <br><code>\end{alignedat}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>m</mi><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  f(x) &amp;=(m+n)^2 \\ &amp; =m^2+2m+n^2 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.048216em;vertical-align:-1.274108em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.774108em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-2.385892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.274108em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.774108em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.385892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.274108em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">多行等式</td><td style="text-align:left"><code>\begin{aligned}</code> <br><code>f(x) &amp;=(m+n)^2 \\</code> <br><code>&amp; =m^2+2m+n^2</code> <br><code>\end{aligned}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{matrix}   a &amp; b \\   c &amp; d\end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">数组</td><td style="text-align:left"><code>\begin{matrix}</code>   <br><code>a &amp; b \\</code>   <br><code>c &amp; d</code><br><code>\end{matrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.15999999999999992em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc}   a &amp; b \\   c &amp; d\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></td><td style="text-align:left">数组</td><td style="text-align:left"><code>\begin{array}{cc}</code>   <br><code>a &amp; b \\</code>   <br><code>c &amp; d</code><br><code>\end{array}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\begin{pmatrix}   a &amp; b \\   c &amp; d\end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></td><td style="text-align:left">矩阵</td><td style="text-align:left"><code>\begin{pmatrix}</code>   <br><code>a &amp; b \\</code>   <br><code>c &amp; d</code> <br><code>\end{pmatrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}   a &amp; b \\   c &amp; d\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></td><td style="text-align:left">矩阵</td><td style="text-align:left"><code>\begin{bmatrix</code>}   <br><code>a &amp; b \\</code>   <br><code>c &amp; d</code> <br><code>\end{bmatrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">∣</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">∣</mo></mrow><annotation encoding="application/x-tex">\begin{vmatrix}   a &amp; b \\   c &amp; d\end{vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.424em;vertical-align:-0.9500199999999999em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.47398em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.26198em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.86798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47398em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.47398em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.26198em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.86798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47398em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">行列式</td><td style="text-align:left"><code>\begin{vmatrix}</code>   <br><code>a &amp; b \\</code>   <br><code>c &amp; d</code>  <br><code>\end{vmatrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">∥</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">∥</mo></mrow><annotation encoding="application/x-tex">\begin{Vmatrix}   a &amp; b \\   c &amp; d\end{Vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.424em;vertical-align:-0.9500199999999999em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.47398em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.26198em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.86798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-3.47398em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.47398em;"><span style="top:-1.65598em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.26198em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-2.86798em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span><span style="top:-3.47398em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∥</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500199999999999em;"><span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">范式，模</td><td style="text-align:left"><code>\begin{Vmatrix}</code>   <br><code>a &amp; b \\</code> <br><code>c &amp; d</code>  <br><code>\end{Vmatrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><annotation encoding="application/x-tex">\begin{Bmatrix}a &amp; b \\ c &amp; d\end{Bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">}</span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left"><code>\begin{Bmatrix}</code><br><code>a &amp; b \\</code> <br><code>c &amp; d</code><br><code>\end{Bmatrix}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.6599999999999999em" columnalign="center center center" columnlines="dashed dashed" columnspacing="1em" rowlines="solid dashed"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>e</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>f</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>g</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>h</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>i</mi></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\def\arraystretch{1.5} \begin{array}{c:c:c}   a &amp; b &amp; c \\ \hline   d &amp; e &amp; f \\   \hdashline   g &amp; h &amp; i\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.4em;vertical-align:-2.45em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:4.95em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span><span style="top:-1.3499999999999996em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator vs-dashed" style="height:5.4em;vertical-align:-2.45em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">e</span></span></span><span style="top:-1.3499999999999996em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator vs-dashed" style="height:5.4em;vertical-align:-2.45em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-1.3499999999999996em;"><span class="pstrut" style="height:3.26em;"></span><span class="mord"><span class="mord mathdefault">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-4.300000000000001em;"><span class="pstrut" style="height:4.95em;"></span><span class="hdashline" style="border-bottom-width:0.05em;"></span></span><span style="top:-6.1000000000000005em;"><span class="pstrut" style="height:4.95em;"></span><span class="hline" style="border-bottom-width:0.05em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left"><code>\def\arraystretch{1.5}</code> <br><code>\begin{array}{c:c:c}</code>   <br><code>a &amp; b &amp; c \\</code> <br><code>\hline</code>   <br><code>d &amp; e &amp; f \\</code>   <br><code>\hdashline</code>   <br><code>g &amp; h &amp; i</code><br><code>\end{array}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munderover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>u</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi></mrow></mpadded><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>o</mi><mi>v</mi><mi>e</mi><mi>r</mi></mrow></mpadded></munderover></mrow><annotation encoding="application/x-tex">\xrightarrow[under]{over}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.5314999999999999em;vertical-align:-0.608108em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.923392em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span><span style="top:-2.091892em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.608108em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:left">初等变换</td><td style="text-align:left"><code>\xrightarrow[under]{over}</code></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>≅</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\cong B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≅</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></td><td style="text-align:left">矩阵等价</td><td style="text-align:left">A\cong B</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>∼</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\sim B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></td><td style="text-align:left">矩阵相似</td><td style="text-align:left">A\sim B</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>≃</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\simeq B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≃</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></td><td style="text-align:left">矩阵合同</td><td style="text-align:left">A\simeq B</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>A</mi><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8201099999999999em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.11110999999999999em;">ˉ</span></span></span></span></span></span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\bar{A}</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">A^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:left">伴随矩阵</td><td style="text-align:left">A^*</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>det</mi><mo>⁡</mo><mi>A</mi><mo separator="true">;</mo><mi mathvariant="normal">∣</mi><mi>A</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">\det A;\vert A \vert</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∣</span><span class="mord mathdefault">A</span><span class="mord">∣</span></span></span></span></td><td style="text-align:left">矩阵的行列式</td><td style="text-align:left">\det A</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="normal">d</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">g</mi></mrow><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{diag}(a_1,a_2,a_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">d</span><span class="mord mathrm">i</span><span class="mord mathrm">a</span><span class="mord mathrm" style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:left">对角阵</td><td style="text-align:left">\mathrm{diag}(a_1,a_2,a_3)</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>⊗</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\otimes B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></td><td style="text-align:left">克罗内克积</td><td style="text-align:left">\otimes</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span></td><td style="text-align:left">横点</td><td style="text-align:left">\cdots</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mrow><annotation encoding="application/x-tex">\vdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.03em;"></span><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span></span></td><td style="text-align:left">竖点</td><td style="text-align:left">\vdots</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋱</mo></mrow><annotation encoding="application/x-tex">\ddots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.82em;vertical-align:0em;"></span><span class="minner">⋱</span></span></span></span></td><td style="text-align:left">对角点</td><td style="text-align:left">\ddots</td></tr></tbody></table><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mi>n</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mspace width="1em"></mspace><mrow><mo fence="true">(</mo><mtable rowspacing="0.3599999999999999em" columnalign="center center center" columnlines="none dashed" columnspacing="1em" rowlines="none dashed"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{pmatrix}a_{11}&amp;a_{12}&amp;\cdots&amp;a_{1n} \\a_{21}&amp;a_{22}&amp;\cdots&amp;a_{2n} \\\vdots&amp;\vdots&amp;\ddots&amp;\vdots \\a_{m1}&amp;a_{m2}&amp;\cdots&amp;a_{mn} \\\end{pmatrix} \quad\left(\def\arraystretch{1.2} \begin{array}{cc:c} 1&amp;0 &amp; 0 &amp; 0 \\ 0&amp;1 &amp; 0 &amp;0 \\ \hdashline 0&amp;0 &amp; 1 &amp; 5\end{array}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.459999999999999em;vertical-align:-2.4799999999999995em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9500349999999997em;"><span style="top:-1.3499850000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎝</span></span></span><span style="top:-2.5049950000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style="top:-3.1050050000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style="top:-3.7050150000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style="top:-4.950035em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎛</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4500349999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-2.5799999999999996em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋱</span></span></span><span style="top:-1.3800000000000006em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9500349999999997em;"><span style="top:-1.3499850000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎠</span></span></span><span style="top:-2.5049950000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style="top:-3.1050050000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style="top:-3.7050150000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style="top:-4.950035em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4500349999999997em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500249999999996em;"><span style="top:-1.9499950000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎝</span></span></span><span style="top:-3.1050050000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎜</span></span></span><span style="top:-4.350025em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎛</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.850025em;"><span></span></span></span></span></span></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.4100000000000006em;"><span style="top:-4.41em;"><span class="pstrut" style="height:4.41em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator vs-dashed" style="height:4.32em;vertical-align:-1.9100000000000001em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-3.9400000000000004em;"><span class="pstrut" style="height:4.41em;"></span><span class="hdashline" style="border-bottom-width:0.05em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500249999999996em;"><span style="top:-1.9499950000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎠</span></span></span><span style="top:-3.1050050000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎟</span></span></span><span style="top:-4.350025em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.850025em;"><span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;pmatrix&#125;</span><br><span class="line">a<span class="emphasis">_&#123;11&#125;&amp;a_</span>&#123;12&#125;&amp;\cdots&amp;a_&#123;1n&#125; \\</span><br><span class="line">a<span class="emphasis">_&#123;21&#125;&amp;a_</span>&#123;22&#125;&amp;\cdots&amp;a_&#123;2n&#125; \\</span><br><span class="line">\vdots&amp;\vdots&amp;\ddots&amp;\vdots \\</span><br><span class="line">a<span class="emphasis">_&#123;m1&#125;&amp;a_</span>&#123;m2&#125;&amp;\cdots&amp;a_&#123;mn&#125; \\</span><br><span class="line">\end&#123;pmatrix&#125;</span><br><span class="line"></span><br><span class="line">\left(</span><br><span class="line">\def\arraystretch&#123;1.2&#125; </span><br><span class="line">\begin&#123;array&#125;&#123;cc:c&#125; </span><br><span class="line">1&amp;0 &amp; 0 &amp; 0 \\ </span><br><span class="line">0&amp;1 &amp; 0 &amp;0 \\ </span><br><span class="line">\hdashline </span><br><span class="line">0&amp;0 &amp; 1 &amp; 5</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">\right)</span><br></pre></td></tr></table></figure><h1 id="群论"><a class="markdownIt-Anchor" href="#群论"></a> 群论</h1><table><thead><tr><th style="text-align:left">符号</th><th style="text-align:left">定义</th><th style="text-align:left">Latex</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mspace></mspace><mspace width="0.4444444444444444em"></mspace><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"></mspace><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b\pmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.4444444444444444em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">b\pmod m</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mspace></mspace><mspace width="0.4444444444444444em"></mspace><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x \pod a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.4444444444444444em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mclose">)</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">x \pod a</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mtext> </mtext><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">a \bmod b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace" style="margin-right:0.05555555555555555em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">a \bmod b</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≡</mo></mrow><annotation encoding="application/x-tex">\equiv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46375em;vertical-align:0em;"></span><span class="mrel">≡</span></span></span></span></td><td style="text-align:left">同余关系</td><td style="text-align:left">\equiv</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>≡</mo><mi>b</mi><mspace></mspace><mspace width="0.4444444444444444em"></mspace><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"></mspace><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a\equiv b\pmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46375em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.4444444444444444em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋗</mo></mrow><annotation encoding="application/x-tex">\gtrdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord amsrm">⋗</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\gtrdot</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋖</mo></mrow><annotation encoding="application/x-tex">\lessdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord amsrm">⋖</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\lessdot</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊺</mo></mrow><annotation encoding="application/x-tex">\intercal</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord amsrm">⊺</span></span></span></span></td><td style="text-align:left">区间</td><td style="text-align:left">\intercal</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊳</mo></mrow><annotation encoding="application/x-tex">\rhd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58503em;vertical-align:-0.03517em;"></span><span class="mord amsrm">⊳</span></span></span></span></td><td style="text-align:left">双方关系对立</td><td style="text-align:left">\rhd</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>⊳</mo><mi>S</mi><mo>=</mo><mi>R</mi><mo>−</mo><mi>R</mi><mo>⋉</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\rhd S=R-R\ltimes S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7185em;vertical-align:-0.03517em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin amsrm">⊳</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.765em;vertical-align:-0.08167em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin amsrm">⋉</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊲</mo></mrow><annotation encoding="application/x-tex">\lhd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58503em;vertical-align:-0.03517em;"></span><span class="mord amsrm">⊲</span></span></span></span></td><td style="text-align:left">正规子群</td><td style="text-align:left">\lhd</td><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>⊲</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">Z(G) \lhd G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin amsrm">⊲</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊵</mo></mrow><annotation encoding="application/x-tex">\unrhd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7733399999999999em;vertical-align:-0.13667em;"></span><span class="mord amsrm">⊵</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\unrhd</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⊴</mo></mrow><annotation encoding="application/x-tex">\unlhd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7733399999999999em;vertical-align:-0.13667em;"></span><span class="mord amsrm">⊴</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\unlhd</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋋</mo></mrow><annotation encoding="application/x-tex">\leftthreetimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord amsrm">⋋</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\leftthreetimes</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋌</mo></mrow><annotation encoding="application/x-tex">\rightthreetimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord amsrm">⋌</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\rightthreetimes</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋊</mo></mrow><annotation encoding="application/x-tex">\rtimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66334em;vertical-align:-0.08167em;"></span><span class="mord amsrm">⋊</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\rtimes</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⋉</mo></mrow><annotation encoding="application/x-tex">\ltimes</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66334em;vertical-align:-0.08167em;"></span><span class="mord amsrm">⋉</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\ltimes</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≺</mo></mrow><annotation encoding="application/x-tex">\prec</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">≺</span></span></span></span></td><td style="text-align:left">卡普可约</td><td style="text-align:left">\prec</td><td style="text-align:left">If L1 ≺ L2 and L2 ∈ P, <br>then L1 ∈ P</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≻</mo></mrow><annotation encoding="application/x-tex">\succ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">≻</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\succ</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∣</mo></mrow><annotation encoding="application/x-tex">\mid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel">∣</span></span></span></span></td><td style="text-align:left">分解</td><td style="text-align:left">\mid</td><td style="text-align:left">Since 15 = 3 × 5, <br>it is true that 3 | 15 and 5 | 15</td></tr><tr><td style="text-align:left"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∤</mo></mrow><annotation encoding="application/x-tex">\nmid</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.99253em;vertical-align:-0.25142em;"></span><span class="mrel amsrm">∤</span></span></span></span></td><td style="text-align:left"></td><td style="text-align:left">\nmid</td><td style="text-align:left"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> math </tag>
            
            <tag> katex </tag>
            
            <tag> 数学符号 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Python Basics)--RPy2</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--RPy2.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--RPy2.html</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h1><p><a href="http://www.python.org/" target="_blank" rel="noopener">Python</a>是一种流行的通用脚本语言，而<a href="http://www.r-project.org/" target="_blank" rel="noopener">R</a>(S/Splus语言的开源实现)是一种主要用于数据分析，统计和图形的脚本语言。<a href="https://rpy2.github.io/doc/latest/html/overview.html" target="_blank" rel="noopener">rpy2</a> 是一个嵌入在Python进程中的R接口.</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install rpy2</span><br></pre></td></tr></table></figure><p>子模块</p><ul><li><a href="https://rpy2.github.io/doc/latest/html/rinterface.html#module-rpy2.rinterface" title="rpy2.rinterface：与R的低级接口（Unix，Windows）" target="_blank" rel="noopener">rpy2.rinterface</a>: Low-level interface to R，Close to R’s C-level API.当速度和灵活性最重要时</li><li><a href="https://rpy2.github.io/doc/latest/html/robjects.html#module-rpy2.robjects" target="_blank" rel="noopener">rpy2.robjects</a>: High-level interface,Based on the previous one.当易用性最重要时</li><li><a href="https://rpy2.github.io/doc/latest/html/interactive.html#module-rpy2.interactive" target="_blank" rel="noopener">rpy2.interactive</a>: High-level interface,Largely based on rpy2.robjects.当注重交互式工作时</li><li>rpy2.rpy_classic: High-level interface，这是出于兼容性原因提供的，也是为了便于RPy-1.x迁移到RPy2。</li><li><a href="https://rpy2.github.io/doc/latest/html/rlike.html#module-rpy2.rlike" target="_blank" rel="noopener">rpy2.rlike</a>: 数据结构和函数，以模仿纯Python中的一些R特性和特性（无嵌入式R过程）。</li></ul><h1 id="ipython魔法接口rmagic"><a class="markdownIt-Anchor" href="#ipython魔法接口rmagic"></a> IPython魔法接口(rmagic)</h1><p><strong>Rmagic</strong>: 用于在ipython中与R进行交互式工作的Magic命令。％R和%% R分别是单行和单元格(cell)的magic命令。<br><strong>Usage</strong>: 要运行magics below,，先执行 <code>%load_ext rpy2.ipython</code></p><ul><li><p><strong>%R</strong></p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%R [-i INPUT] [-o OUTPUT] [-n] [-w WIDTH] [-h HEIGHT] [-p POINTSIZE]</span><br><span class="line"></span><br><span class="line">[-b BG] [–noisolation] [-u &#123;px,<span class="keyword">in</span>,cm,mm&#125;] [-r RES] [-c CONVERTER] [code [code …]]</span><br></pre></td></tr></table></figure></li><li><p><strong>%% R</strong>:</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: %%R</span><br><span class="line">   ....: Y = c(<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">9</span>)</span><br><span class="line">   ....: summary(lm(Y~X))</span><br></pre></td></tr></table></figure><p>通过用分号连接来执行多个R表达式</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">9</span>]: %R X=c(<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>); sd(X); mean(X)</span><br><span class="line">Out[<span class="number">9</span>]: array([ <span class="number">4.25</span>])</span><br></pre></td></tr></table></figure><p>默认情况下，在 <code>%% R</code> 模式下，没有任何内容返回到python。对象可以通过行中的<code>-i -o</code>标志在rpy2和python之间来回传递：</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">14</span>]: Z = np.array([<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: %R -i Z mean(Z)</span><br><span class="line">Out[<span class="number">15</span>]: array([ <span class="number">5.</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: %R -o W W=Z*mean(Z)</span><br><span class="line">Out[<span class="number">16</span>]: array([  <span class="number">5.</span>,  <span class="number">20.</span>,  <span class="number">25.</span>,  <span class="number">50.</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: W</span><br><span class="line">Out[<span class="number">17</span>]: array([  <span class="number">5.</span>,  <span class="number">20.</span>,  <span class="number">25.</span>,  <span class="number">50.</span>])</span><br></pre></td></tr></table></figure></li><li><p><strong>%Rpush</strong>  and <strong>%Rpull</strong></p><p><code>%Rpush [input]</code> : pushes variables from python to rpy2<br><code>%Rpull [outputs outputs …]</code> : pulls variables from python to rpy2</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">8</span>]: X = np.array([<span class="number">4.5</span>,<span class="number">6.3</span>,<span class="number">7.9</span>])</span><br><span class="line">In [<span class="number">10</span>]: %Rpush X</span><br><span class="line">In [<span class="number">11</span>]: %R mean(X)</span><br><span class="line">Out[<span class="number">11</span>]: array([ <span class="number">6.23333333</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: _ = %R x = c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">6.7</span>); y = c(<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>); z = c(<span class="string">'a'</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">In [<span class="number">19</span>]: %Rpull x  y z</span><br><span class="line">In [<span class="number">20</span>]: x</span><br><span class="line">Out[<span class="number">20</span>]: array([ <span class="number">3.</span> ,  <span class="number">4.</span> ,  <span class="number">6.7</span>])</span><br></pre></td></tr></table></figure></li><li><p><strong>%Rget</strong></p><p><code>%Rget output</code> 从rpy2返回一个对象，可能是一个结构化数组（如果可能的话）。与Rpull类似，除了只接受一个参数并返回值而不是推送到self.shell.user_ns</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">3</span>]: dtype=[(<span class="string">'x'</span>, <span class="string">'&lt;i4'</span>), (<span class="string">'y'</span>, <span class="string">'&lt;f8'</span>), (<span class="string">'z'</span>, <span class="string">'|S1'</span>)]</span><br><span class="line">In [<span class="number">4</span>]: datapy = np.array([(<span class="number">1</span>, <span class="number">2.9</span>, <span class="string">'a'</span>), (<span class="number">2</span>, <span class="number">3.5</span>, <span class="string">'b'</span>), (<span class="number">3</span>, <span class="number">2.1</span>, <span class="string">'c'</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="string">'e'</span>)], dtype=dtype)</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: %R -i datapy</span><br><span class="line">In [<span class="number">6</span>]: %Rget datapy</span><br><span class="line">Out[<span class="number">6</span>]:</span><br><span class="line">array([[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>],</span><br><span class="line">       [<span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'2'</span>, <span class="string">'5'</span>],</span><br><span class="line">       [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>]],</span><br><span class="line">      dtype=<span class="string">'|S1'</span>)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> RPy2 </tag>
            
            <tag> R接口 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Scientific Computing)--SymPy</title>
      <link href="/posts/python/PythonNotebook(Scientific-Computing)--SymPy.html"/>
      <url>/posts/python/PythonNotebook(Scientific-Computing)--SymPy.html</url>
      
        <content type="html"><![CDATA[<p><strong>SymPy</strong>（Symbol Python的简称）是一个用于符号数学的Python库。它旨在成为一个功能齐全的计算机代数系统（CAS），同时保持代码尽可能简单，以便易于理解和易于扩展。SymPy完全用Python编写，不依赖于外部库。</p><a id="more"></a><h1 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h1><p>符号计算以符号方式处理数学对象的计算。这意味着数学对象被精确地表示，而不是近似地表示，并且数学表达式保留符号变量。<br>SymPy可以简化表达式，计算导数，积分和极限，求解方程，使用矩阵等等。还可以绘图，打印(like 2D pretty printed output of math formulas, or <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi>A</mi><mi>T</mi><mi>E</mi><mi>X</mi></mrow><annotation encoding="application/x-tex">LATEX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>)，代码生成，物理，统计，组合，数论，几何，逻辑等。</p><hr><p>参考链接：<br><a href="https://www.sympy.org/en/index.html" target="_blank" rel="noopener">SymPy官网</a><br><a href="https://www.cnblogs.com/sunshine-blog/p/8477523.html" target="_blank" rel="noopener">Python圈中的符号计算库-Sympy</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDY1MjQzNA==&amp;mid=2247487392&amp;idx=1&amp;sn=2669a7298ae81c8af82ad52d292c7ed2&amp;chksm=ec5ed0dddb2959cb689ef2bfa11922536b93f90baad575a6747899bad943cc4db4226bb1c73b&amp;mpshare=1&amp;scene=24&amp;srcid=08197tkiFFLKCyEZCsQqYt0K#rd" target="_blank" rel="noopener">微信公众号</a><br><a href="https://www.cnblogs.com/huiyang865/p/5823751.html" target="_blank" rel="noopener">博客园</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Scientific Computing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 科学计算 </tag>
            
            <tag> SymPy </tag>
            
            <tag> 符号计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>柏林噪声(Python)</title>
      <link href="/posts/python/PerlinNoise(Python).html"/>
      <url>/posts/python/PerlinNoise(Python).html</url>
      
        <content type="html"><![CDATA[<h1 id="柏林噪声"><a class="markdownIt-Anchor" href="#柏林噪声"></a> 柏林噪声</h1><p>  Perlin Noise是Ken Perlin在1983年开发的一种梯度噪音，这是一种用于在计算机生成的表面上产生自然出现纹理的技术，使用Perlin噪声合成的纹理通常用于CGI，通过模仿自然界中纹理的受控随机外观，使计算机生成的视觉元素（如物体表面，火焰，烟雾或云）看起来更自然。<a href="https://en.wikipedia.org/wiki/Perlin_noise" target="_blank" rel="noopener"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mo>−</mo><mi>W</mi><mi>i</mi><mi>k</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">--Wiki</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">i</span></span></span></span></a></p><a id="more"></a><h1 id="理论知识链接"><a class="markdownIt-Anchor" href="#理论知识链接"></a> 理论知识链接</h1><p><a href="Noisehttp://www.cnblogs.com/babyrender/archive/2008/10/27/BabyRender.html" target="_blank" rel="noopener">噪音 - Perlin</a><br><a href="https://www.cnblogs.com/leoin2012/p/7218033.html" target="_blank" rel="noopener">一篇文章搞懂柏林噪声算法，附代码讲解</a><br><a href="http://libnoise.sourceforge.net/index.html" target="_blank" rel="noopener">http://libnoise.sourceforge.net/index.html</a><br><a href="https://blog.csdn.net/qq_34302921/article/details/80849139" target="_blank" rel="noopener">不只是噪声，更是数学美 —浅谈Perlin Noise</a>（理论知识完美）<br><a href="https://zhuanlan.zhihu.com/p/22337544" target="_blank" rel="noopener">不只是噪音–知乎</a>（写的超棒！！）</p><h1 id="代码实现python"><a class="markdownIt-Anchor" href="#代码实现python"></a> 代码实现(Python)</h1><blockquote><p>由Ken Perlin 2002年原始JAVA代码改编而来</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:utf8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PYTHON REFERENCE IMPLEMENTATION OF IMPROVED NOISE - COPYRIGHT 2002 KEN PERLIN.</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">PerlinNoise</span><span class="params">(x,y,z, octaves=<span class="number">6</span>, persistence=<span class="number">0.5</span>)</span>:</span></span><br><span class="line">    <span class="comment"># Sum of Noise Function = Perlin Noise</span></span><br><span class="line">    <span class="comment"># Each successive noise function you add is known as an octave</span></span><br><span class="line">    total = <span class="number">0</span></span><br><span class="line">    p = persistence  <span class="comment"># reference value:  1/4, 1/2 ,3/4 </span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(octaves):</span><br><span class="line">        frequency=<span class="number">2</span>**i</span><br><span class="line">        amplitude=p**i</span><br><span class="line">        octave=ImprovedNoise(x * frequency, y * frequency, z * frequency) * amplitude</span><br><span class="line">        total+=octave</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ImprovedNoise</span><span class="params">(x, y, z)</span>:</span></span><br><span class="line">    <span class="comment"># frequency=1/wavelength</span></span><br><span class="line">    <span class="comment"># It returns floating point numbers between -1.0 and 1.0</span></span><br><span class="line">    <span class="comment"># FIND UNIT CUBE THAT CONTAINS POINT.</span></span><br><span class="line">    X = int(math.floor(x)) &amp; <span class="number">255</span></span><br><span class="line">    Y = int(math.floor(y)) &amp; <span class="number">255</span></span><br><span class="line">    Z = int(math.floor(z)) &amp; <span class="number">255</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># FIND RELATIVE X,Y,Z OF POINT IN CUBE.</span></span><br><span class="line">    x -= math.floor(x)</span><br><span class="line">    y -= math.floor(y)</span><br><span class="line">    z -= math.floor(z)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># COMPUTE FADE CURVES FOR EACH OF X,Y,Z.</span></span><br><span class="line">    u,v,w = fade(x),fade(y),fade(z)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># HASH COORDINATES OF THE 8 CUBE CORNERS</span></span><br><span class="line">    <span class="comment"># AND ADD BLENDED RESULTS FROM  8 CORNERS OF CUBE</span></span><br><span class="line">    A = p[X  ]+Y; AA = p[A]+Z; AB = p[A+<span class="number">1</span>]+Z;</span><br><span class="line">    B = p[X+<span class="number">1</span>]+Y; BA = p[B]+Z; BB = p[B+<span class="number">1</span>]+Z;</span><br><span class="line">    <span class="keyword">return</span> lerp(w, lerp(v, lerp(u, grad(p[AA  ], x  , y  , z   ),</span><br><span class="line">                                   grad(p[BA  ], x<span class="number">-1</span>, y  , z   )),</span><br><span class="line">                           lerp(u, grad(p[AB  ], x  , y<span class="number">-1</span>, z   ),</span><br><span class="line">                                   grad(p[BB  ], x<span class="number">-1</span>, y<span class="number">-1</span>, z   ))),</span><br><span class="line">                   lerp(v, lerp(u, grad(p[AA+<span class="number">1</span>], x  , y  , z<span class="number">-1</span> ),</span><br><span class="line">                                   grad(p[BA+<span class="number">1</span>], x<span class="number">-1</span>, y  , z<span class="number">-1</span> )),</span><br><span class="line">                           lerp(u, grad(p[AB+<span class="number">1</span>], x  , y<span class="number">-1</span>, z<span class="number">-1</span> ),</span><br><span class="line">                                   grad(p[BB+<span class="number">1</span>], x<span class="number">-1</span>, y<span class="number">-1</span>, z<span class="number">-1</span> ))))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fade</span><span class="params">(t)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> t * t * t * (t * (t * <span class="number">6</span> - <span class="number">15</span>) + <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lerp</span><span class="params">(t, a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + t * (b - a)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grad</span><span class="params">(hash, x, y, z)</span>:</span></span><br><span class="line">    <span class="comment"># CONVERT LO 4 BITS OF HASH CODE INTO 12 GRADIENT DIRECTIONS.</span></span><br><span class="line">    h = hash &amp; <span class="number">15</span></span><br><span class="line">    u = x <span class="keyword">if</span> h &lt; <span class="number">8</span> <span class="keyword">else</span> y</span><br><span class="line">    v = y <span class="keyword">if</span> h &lt; <span class="number">4</span> <span class="keyword">else</span> x <span class="keyword">if</span> h==<span class="number">12</span> <span class="keyword">or</span> h==<span class="number">14</span> <span class="keyword">else</span> z</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (u <span class="keyword">if</span> (h&amp;<span class="number">1</span>)==<span class="number">0</span> <span class="keyword">else</span> -u)+(v <span class="keyword">if</span> (h&amp;<span class="number">2</span>)==<span class="number">0</span> <span class="keyword">else</span> -v)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">permutation = [ <span class="number">151</span>,<span class="number">160</span>,<span class="number">137</span>,<span class="number">91</span>,<span class="number">90</span>,<span class="number">15</span>,</span><br><span class="line"><span class="number">131</span>,<span class="number">13</span>,<span class="number">201</span>,<span class="number">95</span>,<span class="number">96</span>,<span class="number">53</span>,<span class="number">194</span>,<span class="number">233</span>,<span class="number">7</span>,<span class="number">225</span>,<span class="number">140</span>,<span class="number">36</span>,<span class="number">103</span>,<span class="number">30</span>,<span class="number">69</span>,<span class="number">142</span>,<span class="number">8</span>,<span class="number">99</span>,<span class="number">37</span>,<span class="number">240</span>,<span class="number">21</span>,<span class="number">10</span>,<span class="number">23</span>,</span><br><span class="line"><span class="number">190</span>, <span class="number">6</span>,<span class="number">148</span>,<span class="number">247</span>,<span class="number">120</span>,<span class="number">234</span>,<span class="number">75</span>,<span class="number">0</span>,<span class="number">26</span>,<span class="number">197</span>,<span class="number">62</span>,<span class="number">94</span>,<span class="number">252</span>,<span class="number">219</span>,<span class="number">203</span>,<span class="number">117</span>,<span class="number">35</span>,<span class="number">11</span>,<span class="number">32</span>,<span class="number">57</span>,<span class="number">177</span>,<span class="number">33</span>,</span><br><span class="line"><span class="number">88</span>,<span class="number">237</span>,<span class="number">149</span>,<span class="number">56</span>,<span class="number">87</span>,<span class="number">174</span>,<span class="number">20</span>,<span class="number">125</span>,<span class="number">136</span>,<span class="number">171</span>,<span class="number">168</span>, <span class="number">68</span>,<span class="number">175</span>,<span class="number">74</span>,<span class="number">165</span>,<span class="number">71</span>,<span class="number">134</span>,<span class="number">139</span>,<span class="number">48</span>,<span class="number">27</span>,<span class="number">166</span>,</span><br><span class="line"><span class="number">77</span>,<span class="number">146</span>,<span class="number">158</span>,<span class="number">231</span>,<span class="number">83</span>,<span class="number">111</span>,<span class="number">229</span>,<span class="number">122</span>,<span class="number">60</span>,<span class="number">211</span>,<span class="number">133</span>,<span class="number">230</span>,<span class="number">220</span>,<span class="number">105</span>,<span class="number">92</span>,<span class="number">41</span>,<span class="number">55</span>,<span class="number">46</span>,<span class="number">245</span>,<span class="number">40</span>,<span class="number">244</span>,</span><br><span class="line"><span class="number">102</span>,<span class="number">143</span>,<span class="number">54</span>, <span class="number">65</span>,<span class="number">25</span>,<span class="number">63</span>,<span class="number">161</span>, <span class="number">1</span>,<span class="number">216</span>,<span class="number">80</span>,<span class="number">73</span>,<span class="number">209</span>,<span class="number">76</span>,<span class="number">132</span>,<span class="number">187</span>,<span class="number">208</span>, <span class="number">89</span>,<span class="number">18</span>,<span class="number">169</span>,<span class="number">200</span>,<span class="number">196</span>,</span><br><span class="line"><span class="number">135</span>,<span class="number">130</span>,<span class="number">116</span>,<span class="number">188</span>,<span class="number">159</span>,<span class="number">86</span>,<span class="number">164</span>,<span class="number">100</span>,<span class="number">109</span>,<span class="number">198</span>,<span class="number">173</span>,<span class="number">186</span>, <span class="number">3</span>,<span class="number">64</span>,<span class="number">52</span>,<span class="number">217</span>,<span class="number">226</span>,<span class="number">250</span>,<span class="number">124</span>,<span class="number">123</span>,</span><br><span class="line"><span class="number">5</span>,<span class="number">202</span>,<span class="number">38</span>,<span class="number">147</span>,<span class="number">118</span>,<span class="number">126</span>,<span class="number">255</span>,<span class="number">82</span>,<span class="number">85</span>,<span class="number">212</span>,<span class="number">207</span>,<span class="number">206</span>,<span class="number">59</span>,<span class="number">227</span>,<span class="number">47</span>,<span class="number">16</span>,<span class="number">58</span>,<span class="number">17</span>,<span class="number">182</span>,<span class="number">189</span>,<span class="number">28</span>,<span class="number">42</span>,</span><br><span class="line"><span class="number">223</span>,<span class="number">183</span>,<span class="number">170</span>,<span class="number">213</span>,<span class="number">119</span>,<span class="number">248</span>,<span class="number">152</span>, <span class="number">2</span>,<span class="number">44</span>,<span class="number">154</span>,<span class="number">163</span>, <span class="number">70</span>,<span class="number">221</span>,<span class="number">153</span>,<span class="number">101</span>,<span class="number">155</span>,<span class="number">167</span>, <span class="number">43</span>,<span class="number">172</span>,<span class="number">9</span>,</span><br><span class="line"><span class="number">129</span>,<span class="number">22</span>,<span class="number">39</span>,<span class="number">253</span>, <span class="number">19</span>,<span class="number">98</span>,<span class="number">108</span>,<span class="number">110</span>,<span class="number">79</span>,<span class="number">113</span>,<span class="number">224</span>,<span class="number">232</span>,<span class="number">178</span>,<span class="number">185</span>, <span class="number">112</span>,<span class="number">104</span>,<span class="number">218</span>,<span class="number">246</span>,<span class="number">97</span>,<span class="number">228</span>,</span><br><span class="line"><span class="number">251</span>,<span class="number">34</span>,<span class="number">242</span>,<span class="number">193</span>,<span class="number">238</span>,<span class="number">210</span>,<span class="number">144</span>,<span class="number">12</span>,<span class="number">191</span>,<span class="number">179</span>,<span class="number">162</span>,<span class="number">241</span>, <span class="number">81</span>,<span class="number">51</span>,<span class="number">145</span>,<span class="number">235</span>,<span class="number">249</span>,<span class="number">14</span>,<span class="number">239</span>,<span class="number">107</span>,</span><br><span class="line"><span class="number">49</span>,<span class="number">192</span>,<span class="number">214</span>, <span class="number">31</span>,<span class="number">181</span>,<span class="number">199</span>,<span class="number">106</span>,<span class="number">157</span>,<span class="number">184</span>, <span class="number">84</span>,<span class="number">204</span>,<span class="number">176</span>,<span class="number">115</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="number">45</span>,<span class="number">127</span>, <span class="number">4</span>,<span class="number">150</span>,<span class="number">254</span>,</span><br><span class="line"><span class="number">138</span>,<span class="number">236</span>,<span class="number">205</span>,<span class="number">93</span>,<span class="number">222</span>,<span class="number">114</span>,<span class="number">67</span>,<span class="number">29</span>,<span class="number">24</span>,<span class="number">72</span>,<span class="number">243</span>,<span class="number">141</span>,<span class="number">128</span>,<span class="number">195</span>,<span class="number">78</span>,<span class="number">66</span>,<span class="number">215</span>,<span class="number">61</span>,<span class="number">156</span>,<span class="number">180</span></span><br><span class="line">]</span><br><span class="line">p=permutation*<span class="number">2</span></span><br></pre></td></tr></table></figure><h1 id="perlin-noise-library-for-python"><a class="markdownIt-Anchor" href="#perlin-noise-library-for-python"></a> Perlin noise library for Python</h1><p>该包旨在为您提供简单易用的快速函数，用于<br>在Python程序中生成Perlin噪声。</p><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p><strong>安装前先下载微软开发环境</strong><br><a href="https://visualstudio.microsoft.com/downloads/" target="_blank" rel="noopener">https://visualstudio.microsoft.com/downloads/</a><br>找到 <strong>Other Tools and Frameworks</strong> 点开，<br>下载 <strong>Microsoft Visual C++ Redistributable for Visual Studio 2017</strong>安装即可。</p><p><strong>pip安装</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip indtsll noise</span><br></pre></td></tr></table></figure><p><strong>本地安装</strong><br><a href="https://github.com/caseman/noise" target="_blank" rel="noopener">GitHub</a>下载源文件，然后运行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure><p><strong>安装错误：</strong> <code>Failed building wheel for noise</code><br><a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#noise" target="_blank" rel="noopener">https://www.lfd.uci.edu/~gohlke/pythonlibs/#noise</a><br>下载对应版本，安装解析环境，cp后面是Python的版本号</p><blockquote><p>noise-1.2.2-cp36-cp36m-win32.whl<br>noise-1.2.2-cp36-cp36m-win_amd64.whl<br>noise-1.2.2-cp37-cp37m-win32.whl<br>noise-1.2.2-cp37-cp37m-win_amd64.whl</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install C:\Users\Admin\Anaconda3\Scripts\noise<span class="number">-1.2</span><span class="number">.2</span>-cp36-cp36m-win_amd64.whl</span><br></pre></td></tr></table></figure><h2 id="示例代码"><a class="markdownIt-Anchor" href="#示例代码"></a> 示例代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:utf8 -*-</span></span><br><span class="line"><span class="keyword">from</span> noise <span class="keyword">import</span> pnoise2,pnoise3</span><br><span class="line"><span class="keyword">import</span> numpy  <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span>  numpy <span class="keyword">import</span> sin,cos,arccos,arcsin,sqrt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="keyword">import</span> datetime</span><br><span class="line">    <span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="meta">    @wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorated</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        starttime = datetime.datetime.now()</span><br><span class="line">        res=func(*args, **kwargs)</span><br><span class="line">        endtime = datetime.datetime.now()</span><br><span class="line">        print(<span class="string">'time used &#123;&#125; sec'</span>.format((endtime - starttime).seconds))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> decorated</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sphere</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius)</span>:</span></span><br><span class="line">        self.radius=radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">coord_trans</span><span class="params">(self,longitude,latitude,radius=None)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        coordinate transformation</span></span><br><span class="line"><span class="string">        Cartesian coordinates</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        lat,lon=latitude,longitude</span><br><span class="line">        <span class="keyword">if</span> radius <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            r=self.radius</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            r=radius</span><br><span class="line"></span><br><span class="line">        x = r * cos(lat) * cos(lon)</span><br><span class="line">        y = r * cos(lat) * sin(lon)</span><br><span class="line">        z = r * sin(lat)</span><br><span class="line">        <span class="keyword">return</span> x,y,z</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">distance</span><span class="params">(self,lon,lat,angle=<span class="string">'degrees'</span>,radius=None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> angle==<span class="string">'degrees'</span>:</span><br><span class="line">            lon,lat=np.radians([lon,lat])</span><br><span class="line"></span><br><span class="line">        a1,a2=lat</span><br><span class="line">        b1,b2=lon</span><br><span class="line">        <span class="keyword">if</span> radius <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            r1=r2 =self.radius</span><br><span class="line">        <span class="keyword">elif</span> isinstance(radius,(int,float)):</span><br><span class="line">            r1=r2 = radius</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            r1,r2,*_=radius</span><br><span class="line"></span><br><span class="line">        <span class="string">'Cartesian distance'</span></span><br><span class="line">        tmp = cos(a1) * cos(a2) * cos(b1 - b2) + sin(a1) * sin(a2)</span><br><span class="line">        L = sqrt(r1 ** <span class="number">2</span> + r2 ** <span class="number">2</span> - <span class="number">2</span> * r1 * r2 * tmp)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> r1==r2:</span><br><span class="line">            <span class="string">'spherical distance'</span></span><br><span class="line">            S = r1 * arccos(tmp)</span><br><span class="line">            <span class="keyword">return</span> L,S</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> L,<span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @timer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_sphere</span><span class="params">(self,unit=<span class="number">0.1</span>,multiplier=<span class="number">1.0</span>,stretch=<span class="number">1.0</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                      seed=None,*args,**kwargs)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        Spherical coordinate system (lon,lat,r)</span></span><br><span class="line"><span class="string">        0 &lt;= r &lt; math.inf</span></span><br><span class="line"><span class="string">        0 &lt;= lon &lt;= PI * 2</span></span><br><span class="line"><span class="string">        -PI / 2 &lt;= lat &lt;= PI / 2</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line"></span><br><span class="line">        lon=np.arange(<span class="number">-180</span>,<span class="number">180</span>,unit)</span><br><span class="line">        lat=np.arange(<span class="number">-90</span>,<span class="number">90</span>+unit,unit)</span><br><span class="line"></span><br><span class="line">        <span class="string">'coordinate transformation'</span></span><br><span class="line">        <span class="comment"># coord = pd.MultiIndex.from_product([lon, lat], names=['lon', 'lat'])</span></span><br><span class="line">        <span class="comment"># coord = pd.DataFrame(index=coord).reset_index()</span></span><br><span class="line">        lon1,lat1=np.meshgrid(lon,lat)</span><br><span class="line">        x, y, z = self.coord_trans(np.radians(lon1), np.radians(lat1), radius=stretch)</span><br><span class="line"></span><br><span class="line">        <span class="string">'default arguments'</span></span><br><span class="line">        <span class="keyword">if</span> seed <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            seed=random.randint(<span class="number">0</span>,<span class="number">256</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            seed=int(seed)</span><br><span class="line"></span><br><span class="line">        <span class="string">'Define numpy ufunc(universal function)'</span></span><br><span class="line">        ufunc_pnoise3=<span class="keyword">lambda</span> x,y,z:pnoise3(x, y, z,base=seed,*args,**kwargs)</span><br><span class="line">        self.ufunc_pnoise3=np.frompyfunc(ufunc_pnoise3, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        h = self.ufunc_pnoise3(x,y,z)</span><br><span class="line">        <span class="comment"># h=pd.pivot(coord.lat, coord.lon, h)</span></span><br><span class="line"></span><br><span class="line">        print(<span class="string">'seed=&#123;&#125;'</span>.format(seed))</span><br><span class="line">        <span class="keyword">return</span> lon,lat,h</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">draw_sphere</span><span class="params">(self,lon,lat,h,map=<span class="string">'ellipse'</span>)</span>:</span></span><br><span class="line">        <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">        h1=h.copy()</span><br><span class="line">        h2=h.copy()</span><br><span class="line">        h1[h&lt;<span class="number">0</span>]=<span class="literal">None</span></span><br><span class="line">        h2[h&gt;<span class="number">0</span>]=<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        fig=plt.figure()</span><br><span class="line">        <span class="keyword">if</span> map==<span class="string">'ellipse'</span>:</span><br><span class="line">            lon,lat=np.meshgrid(lon,lat)</span><br><span class="line">            lon=sqrt(<span class="number">1</span>-(lat/<span class="number">90</span>)**<span class="number">2</span>)*lon</span><br><span class="line">            plt.contourf(lon, lat, h1, cmap=<span class="string">'Greens_r'</span>)</span><br><span class="line">            plt.contourf(lon, lat, h2, cmap=<span class="string">'Blues_r'</span>)</span><br><span class="line">        <span class="keyword">elif</span> map==<span class="string">'cosine'</span>:</span><br><span class="line">            lon,lat=np.meshgrid(lon,lat)</span><br><span class="line">            lon=cos(np.radians(lat))*lon</span><br><span class="line">            plt.contourf(lon, lat, h1, cmap=<span class="string">'Greens_r'</span>)</span><br><span class="line">            plt.contourf(lon, lat, h2, cmap=<span class="string">'Blues_r'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            plt.contourf(lon, lat, h1, cmap=<span class="string">'Greens_r'</span>)</span><br><span class="line">            plt.contourf(lon, lat, h2, cmap=<span class="string">'Blues_r'</span>)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line">earth=Sphere(radius=<span class="number">2</span>)</span><br><span class="line">lon,lat,h=earth.create_sphere(octaves=<span class="number">10</span>, persistence=<span class="number">0.5</span>,multiplier=<span class="number">2</span>,seed=<span class="number">57</span>)</span><br><span class="line">earth.draw_sphere(lon,lat,h,map=<span class="string">'ellipse'</span>)</span><br></pre></td></tr></table></figure><p><img alt="map" data-src="map.png"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Scientific Computing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 柏林噪声 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二分类模型评价指标</title>
      <link href="/posts/data-analysis/classification-evaluation.html"/>
      <url>/posts/data-analysis/classification-evaluation.html</url>
      
        <content type="html"><![CDATA[<ul><li><strong>混淆矩阵</strong><br>混淆矩阵(Confusion Matrix)也称误差矩阵，是表示精度评价的一种标准格式。</li></ul><p><img alt="cm" data-src="/images/ConfusionMatrix.png"></p><blockquote><p>TP（实际为正预测为正），FP（实际为负但预测为正），TN（实际为负预测为负），FN（实际为正但预测为负）</p></blockquote><a id="more"></a><ul><li><p><strong>准确率</strong><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>c</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>y</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Accuracy=\Large \frac{TP+TN}{TP+FP+TN+FN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span></p></li><li><p><strong>查全率（召回率）和查准率</strong><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo stretchy="false">(</mo><mi>S</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Recall(Sensitivity)=\Large \frac{TP}{TP+TN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Precision=\Large \frac{TP}{TP+FP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>y</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>N</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Specificity=\Large \frac{TN}{FP+TN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">p</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span></p></li><li><p><strong>F1度量</strong>—查准率和查全率的加权<strong>调和平均数</strong><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mn>1</mn><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo>+</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mn>2</mn><mo>×</mo><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow><mo>×</mo><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mrow><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo>+</mo><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></mfrac></mstyle></mstyle></mrow><annotation encoding="application/x-tex">F_{1}Score=\Large \frac{1}{1/Recall+1/Precision}=\Large \frac{2\times{Recall}\times{Precision}}{Recall+Precision}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.9586000000000001em;vertical-align:-0.7468em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8415277777777778em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5186111111111111em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel sizing reset-size6 size8">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8419299999999996em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.87625em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span></span><span class="mbin mtight">×</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">c</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span></p></li><li><p><strong>G度量</strong>–<strong>几何平均数</strong><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo>=</mo><mroot><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>×</mo><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mrow></mrow><mrow></mrow></mroot></mrow><annotation encoding="application/x-tex">G=\sqrt[]{Precision\times{Recall}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.14944500000000005em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.44466599999999995em;"><span style="top:-2.444666em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.890555em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span><span style="top:-2.850555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14944500000000005em;"><span></span></span></span></span></span></span></span></span></p></li><li><p><strong>ROC曲线， AUC</strong><br>ROC曲线描绘的是不同的截断点时，并以FPR(False Positive Rate)和TPR(True Positive Rate)为横纵坐标轴，描述随着截断点的变小，TPR随着FPR的变化。<br>纵轴：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mi>P</mi><mi>R</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac><mstyle mathsize="1em"><mo>=</mo><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi></mstyle></mstyle></mrow><annotation encoding="application/x-tex">TPR=\Large \frac{TP}{TP+FN} \normalsize =Recall</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel sizing reset-size6 size6">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault sizing reset-size6 size6" style="margin-right:0.00773em;">R</span><span class="mord mathdefault sizing reset-size6 size6">e</span><span class="mord mathdefault sizing reset-size6 size6">c</span><span class="mord mathdefault sizing reset-size6 size6">a</span><span class="mord mathdefault sizing reset-size6 size6" style="margin-right:0.01968em;">l</span><span class="mord mathdefault sizing reset-size6 size6" style="margin-right:0.01968em;">l</span></span></span></span><br>横轴：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>P</mi><mi>R</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>F</mi><mi>P</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">FPR=\Large \frac{FP}{FP+TN}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span><br><img alt="roc" data-src="/images/roc.png"></p></li><li><p><strong>KS曲线，KS值</strong><br>KS曲线和ROC曲线都用到了TPR，FPR。KS曲线是把TPR和FPR都作为纵坐标，而样本数作为横坐标。<br>TPR和FPR曲线分隔最开的位置就是最好的”截断点“，最大间隔距离就是KS值，通常&gt;0.2即可认为模型有比较好偶的预测准确性</p></li><li><p><strong>Lift 和Gain图</strong><br>Lift图衡量的是，与不利用模型相比，模型的预测能力“变好”了多少，lift(提升指数)越大，模型的运行效果越好。<br>Gain图是描述整体精准度的指标。<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Gain=\Large \frac{TP}{TP+FP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">a</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.8308199999999997em;vertical-align:-0.5801299999999999em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.40286805555555555em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi>i</mi><mi>f</mi><mi>t</mi><mo>=</mo><mstyle mathsize="1.44em"><mfrac><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac><mfrac><mi>P</mi><mrow><mi>P</mi><mo>+</mo><mi>N</mi></mrow></mfrac></mfrac><mo>=</mo><mfrac><mrow><mi>G</mi><mi>a</mi><mi>i</mi><mi>n</mi></mrow><mrow><mi>P</mi><mi>R</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">Lift=\Large\frac{\frac{TP}{TP+FP}}{\frac{P}{P+N}}=\frac{Gain}{PR}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">L</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.7241239999999998em;vertical-align:-1.0020619999999998em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1958763888888888em;"><span style="top:-2.5842145833333334em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5900909722222223em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.6958763888888888em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel sizing reset-size6 size8">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.7474899999999998em;vertical-align:-0.49679999999999996em;"></span><span class="mord sizing reset-size6 size8"><span class="mopen nulldelimiter sizing reset-size8 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8685347222222222em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size8 size6 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size8 size6"></span></span></span></span></span></p></li></ul><p><img alt="lift" data-src="/images/lift.png"><br><img alt="gain" data-src="/images/gain.png"></p><p>参考链接：<a href="https://blog.csdn.net/shy19890510/article/details/79501582" target="_blank" rel="noopener">https://blog.csdn.net/shy19890510/article/details/79501582</a></p>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据分析 </tag>
            
            <tag> 二分类 </tag>
            
            <tag> 混淆矩阵 </tag>
            
            <tag> ROC曲线 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL手册</title>
      <link href="/posts/big-data/SQLNotebook.html"/>
      <url>/posts/big-data/SQLNotebook.html</url>
      
        <content type="html"><![CDATA[<p>结构化查询语言(Structured Query Language)简称SQL，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。</p><a id="more"></a><table><thead><tr><th>数据库</th><th>Oracle</th><th>MySQL</th></tr></thead><tbody><tr><td>启动和关闭</td><td>sqlplus</td><td>NET START mysql57<br>NET STOP mysql57</td></tr><tr><td>登录（user+password）</td><td>sys/p as sysdba<br>[conn] system/p</td><td>MYSQL –uroot –p<br>EXIT</td></tr></tbody></table><h1 id="数据库操作"><a class="markdownIt-Anchor" href="#数据库操作"></a> 数据库操作</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;            <span class="comment">--查看数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> db_name;   <span class="comment">--创建数据库</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> db_name;     <span class="comment">--删除</span></span><br><span class="line"><span class="keyword">USE</span> db_name;               <span class="comment">--连接数据库</span></span><br><span class="line">SELETE DATABASE();</span><br></pre></td></tr></table></figure><h1 id="数据表操作"><a class="markdownIt-Anchor" href="#数据表操作"></a> 数据表操作</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--------查看数据表</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span>;</span><br><span class="line"><span class="comment">--------创建数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tbl_name(</span><br><span class="line">col_name col_type,</span><br><span class="line">col_name col_type,</span><br><span class="line">);</span><br><span class="line"><span class="comment">--------删除数据表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> tbl_name,table_name;</span><br><span class="line"><span class="comment">--------数据表结构</span></span><br><span class="line">DESC tbl_name;</span><br><span class="line"><span class="comment">---------修改数据表结构</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name</span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">TO</span> new_name,                    <span class="comment">--重命名表名</span></span><br><span class="line"><span class="keyword">ADD</span> col_name col_type,                 <span class="comment">--添加字段</span></span><br><span class="line"><span class="keyword">DROP</span> col_name,                         <span class="comment">--删除字段</span></span><br><span class="line"><span class="keyword">CHANGE</span> old_name new_name new_type;     <span class="comment">--重命名字段名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------mysql导入数据库</span></span><br><span class="line">mysql&gt; LOAD DATA LOCAL INFILE 'dump.txt' --utf-8 txt文件</span><br><span class="line">    -&gt; INTO TABLE mytbl                  --已创建的表</span><br><span class="line">    -&gt; FIELDS TERMINATED BY ':'          --分隔符</span><br><span class="line">    -&gt; LINES TERMINATED BY '\r\n';       --换行符</span><br><span class="line"><span class="comment">-----------------插入记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span>  tbl_name  <span class="keyword">VALUES</span> (....);</span><br><span class="line"><span class="comment">-----------------更新记录</span></span><br><span class="line"><span class="keyword">UPDATE</span> tbl_name</span><br><span class="line"><span class="keyword">SET</span> col_name = new_value,</span><br><span class="line"><span class="keyword">SET</span> col_name = new_value</span><br><span class="line"><span class="keyword">WHERE</span> ……;</span><br><span class="line"><span class="comment">-----------------删除记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tbl_name <span class="keyword">WHERE</span> ……;</span><br></pre></td></tr></table></figure><h1 id="查询语句"><a class="markdownIt-Anchor" href="#查询语句"></a> 查询语句</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> -&gt; <span class="keyword">from</span> -&gt; <span class="keyword">where</span> -&gt; <span class="keyword">group</span> <span class="keyword">by</span> -&gt; <span class="keyword">having</span> -&gt; <span class="keyword">order</span> <span class="keyword">by</span> -&gt; <span class="keyword">limit</span></span><br></pre></td></tr></table></figure><h1 id="常用函数"><a class="markdownIt-Anchor" href="#常用函数"></a> 常用函数</h1><table><thead><tr><th>Oracle(PL/SQL)</th><th>MySQL</th><th>说明</th></tr></thead><tbody><tr><td>concat()</td><td>concat()</td><td>字符连接</td></tr><tr><td>nvl()</td><td>ifnull()</td><td>空值替换</td></tr><tr><td>sysdate()</td><td>now()</td><td>系统时间</td></tr><tr><td>to_date()</td><td>date_formate</td><td>日期格式化</td></tr><tr><td>add_month()</td><td>date_sub()</td><td>日期+时间间隔</td></tr><tr><td>rownum</td><td>limit</td><td>查询部分记录</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据手册(Hive)--HiveQL</title>
      <link href="/posts/big-data/BigDataNotebook(Hive)--HiveQL.html"/>
      <url>/posts/big-data/BigDataNotebook(Hive)--HiveQL.html</url>
      
        <content type="html"><![CDATA[<p>Hive是一个数据仓库基础工具，在Hadoop中用来处理结构化数据。</p><a id="more"></a><h1 id="hive交互"><a class="markdownIt-Anchor" href="#hive交互"></a> Hive交互</h1><p><strong>hive启动</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hive [--database dbname]  <span class="comment">##进入CLI交互界面，默认进入default数据库</span></span><br><span class="line">hive -v  <span class="comment">##冗余verbose模式，额外打印出执行的HQL语句</span></span><br><span class="line">hive -S  <span class="comment">##静默Slient模式，不显示转化MR-Job的信息，只显示最终结果</span></span><br><span class="line">hive -i <span class="string">'hive-init.sql'</span>  <span class="comment">##进入Hive交互Shell时候先执行脚本中的HQL语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-----web管理</span></span><br><span class="line">hive --service serviceName    <span class="comment">##启动web服务</span></span><br><span class="line"><span class="comment">#打开web页面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-----hive 远程服务</span></span><br><span class="line">hive --serve hiveserve &amp;</span><br></pre></td></tr></table></figure><p><strong>hive命令行交互模式</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * from dummy   <span class="comment">#执行HiveQL语句</span></span><br><span class="line">hive&gt; <span class="built_in">source</span> ./hive-script.sql  <span class="comment">##执行HQL脚本</span></span><br><span class="line">hive&gt; !<span class="built_in">echo</span> <span class="string">'hello hive'</span>      <span class="comment">##执行shell命令，前面加 ！即可</span></span><br></pre></td></tr></table></figure><p><strong>shell窗口执行hive语句</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hive -e <span class="string">'show tables;'</span>  <span class="comment">##从命令行执行指定的HQL</span></span><br><span class="line">hive -f <span class="string">'hive-script.sql'</span>  <span class="comment">##执行HQL脚本</span></span><br><span class="line">hive -S -e <span class="string">'show tables;'</span>  <span class="comment">##静默模式</span></span><br></pre></td></tr></table></figure><h1 id="hive内置运算符"><a class="markdownIt-Anchor" href="#hive内置运算符"></a> Hive内置运算符</h1><table><thead><tr><th style="text-align:left">关系运算符</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">A = B</td><td style="text-align:left">等于</td></tr><tr><td style="text-align:left">A != B</td><td style="text-align:left">不等于</td></tr><tr><td style="text-align:left">A &lt; B</td><td style="text-align:left">小于</td></tr><tr><td style="text-align:left">A &lt;= B</td><td style="text-align:left">大于等于</td></tr><tr><td style="text-align:left">A &gt; B</td><td style="text-align:left">大于</td></tr><tr><td style="text-align:left">A &gt;= B</td><td style="text-align:left">大于等于</td></tr><tr><td style="text-align:left">A IS NULL</td><td style="text-align:left">空值</td></tr><tr><td style="text-align:left">A IS NOT NULL</td><td style="text-align:left">非空</td></tr><tr><td style="text-align:left">A LIKE B</td><td style="text-align:left">如果字符串模式A匹配到B，使用通配符，例如<code>%</code></td></tr><tr><td style="text-align:left">A RLIKE B</td><td style="text-align:left">如果A任何子字符串匹配正则表达式B</td></tr><tr><td style="text-align:left">A REGEXP B</td><td style="text-align:left">字符串，同于RLIKE.</td></tr></tbody></table><table><thead><tr><th>算数运算符</th><th>描述</th></tr></thead><tbody><tr><td>A + B</td><td></td></tr><tr><td>A - B</td><td></td></tr><tr><td>A * B</td><td></td></tr><tr><td>A / B</td><td></td></tr><tr><td>A % B</td><td>余数</td></tr><tr><td>A &amp; B</td><td>A和B的按位与结果</td></tr><tr><td>A | B</td><td>A和B的按位或结果</td></tr><tr><td>A ^ B</td><td>A和B的按位异或结果</td></tr><tr><td>~A</td><td>A按位非的结果</td></tr></tbody></table><table><thead><tr><th>逻辑运算符</th><th>描述</th></tr></thead><tbody><tr><td>A AND B</td><td></td></tr><tr><td>A &amp;&amp; B</td><td>类似于 A AND B.</td></tr><tr><td>A OR B</td><td></td></tr><tr><td>A || B</td><td>类似于 A OR B.</td></tr><tr><td>NOT A</td><td></td></tr><tr><td>!A</td><td>类似于 NOT A.</td></tr></tbody></table><table><thead><tr><th>复杂运算符</th><th>操作</th><th>描述</th></tr></thead><tbody><tr><td>A[n]</td><td>A是一个数组，n是一个int</td><td>它返回数组A的第n个元素，第一个元素的索引0。</td></tr><tr><td>M[key]</td><td>M 是一个 Map&lt;K, V&gt; 并 key 的类型为K</td><td>它返回对应于映射中关键字的值。</td></tr><tr><td>S.x</td><td>S 是一个结构</td><td>它返回S的s字段</td></tr></tbody></table><h1 id="hive数据类型"><a class="markdownIt-Anchor" href="#hive数据类型"></a> Hive数据类型</h1><table><thead><tr><th style="text-align:left">数据类型</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">tinyint/smallint/int/bigint</td><td style="text-align:left">整数类型</td></tr><tr><td style="text-align:left">float/double</td><td style="text-align:left">浮点型</td></tr><tr><td style="text-align:left">Boolean</td><td style="text-align:left">布尔类型</td></tr><tr><td style="text-align:left">string<br>varchar(n)/char(n)</td><td style="text-align:left">字符串类型</td></tr><tr><td style="text-align:left"><code>array&lt;data_type&gt;</code></td><td style="text-align:left">数组类型,同一类型<code>[val1,val2,...]</code></td></tr><tr><td style="text-align:left"><code>map&lt;key_type,value_type&gt;</code></td><td style="text-align:left">集合类型,<code>&lt;key,value&gt;</code></td></tr><tr><td style="text-align:left"><code>struct&lt;name1:type1,name2:type2,...&gt;</code></td><td style="text-align:left">结构类型,包含不同类型</td></tr><tr><td style="text-align:left"><strong>时间类型</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">date</td><td style="text-align:left">只有日期部分</td></tr><tr><td style="text-align:left">timestamp</td><td style="text-align:left">时间戳</td></tr></tbody></table><h1 id="hive的数据存储"><a class="markdownIt-Anchor" href="#hive的数据存储"></a> Hive的数据存储</h1><ul><li>基于HDFS</li><li>内部表 table：我们删除表的时候在hdfs上对应的目录及数据文件一同被删除了</li><li>分区表 partition：对于数据库中的超大型表，可以通过把它的数据分成若干个小表，从而简化数据库的管理活动</li><li>外部表 external：受控表在删除一个表的时候,会把hdfs中的目录给删除掉,外部表是你在删除这个表的时候只删除了表定义,对于h</li><li>桶表 bucket：经过hash运算后方在不同的桶中</li></ul><h1 id="hiveql常用语句"><a class="markdownIt-Anchor" href="#hiveql常用语句"></a> HiveQL常用语句</h1><p>HiveQL是Hive支持的类似于SQL的查询语言。HiveQL大体可以分成下面两种类型</p><ul><li>DDL(data definition language)  比如创建数据库(create database),创建表(create table),数据库和表的删除</li><li>DML(data manipulation language) 数据的添加，查询</li><li>UDF(user defined function) Hive还支持用户自定义查询函数</li></ul><h2 id="创建删除数据库"><a class="markdownIt-Anchor" href="#创建删除数据库"></a> 创建/删除数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] userdb;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] userdb;</span><br></pre></td></tr></table></figure><h2 id="创建删除表"><a class="markdownIt-Anchor" href="#创建删除表"></a> 创建/删除表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-------创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">EXTERNAL</span>] <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] userdb.table_name (</span><br><span class="line"><span class="keyword">id</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'主键'</span>,</span><br><span class="line"><span class="keyword">name</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'字符'</span>,</span><br><span class="line">age <span class="built_in">int</span> <span class="keyword">COMMENT</span> <span class="string">'整数'</span>,</span><br><span class="line">married <span class="built_in">boolean</span> <span class="keyword">COMMENT</span> <span class="string">'布尔类型'</span>, </span><br><span class="line">arr <span class="built_in">array</span>&lt;<span class="keyword">map</span>&lt;<span class="keyword">string</span>,<span class="built_in">int</span>&gt;&gt; <span class="keyword">COMMENT</span> <span class="string">'map数组'</span>,</span><br><span class="line">info <span class="keyword">struct</span>&lt;addr:<span class="keyword">string</span>,height:<span class="keyword">double</span>,birth:<span class="built_in">date</span>&gt; <span class="keyword">COMMENT</span> <span class="string">'结构类型'</span>,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="string">'表注释'</span></span><br><span class="line">PARTITIONED <span class="keyword">BY</span>(</span><br><span class="line"><span class="built_in">date</span> <span class="keyword">STRING</span> <span class="keyword">COMMENT</span> <span class="string">'日期分区'</span>, </span><br><span class="line">sex <span class="keyword">STRING</span> <span class="keyword">COMMENT</span> <span class="string">'性别分区'</span></span><br><span class="line">)</span><br><span class="line">CLUSTERED <span class="keyword">BY</span>(<span class="keyword">id</span>) SORTED <span class="keyword">BY</span>(<span class="keyword">num</span>) <span class="keyword">INTO</span> <span class="number">32</span> BUCKETS</span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span> <span class="string">'\t'</span></span><br><span class="line">   <span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\t'</span></span><br><span class="line"><span class="keyword">STORED</span> <span class="keyword">AS</span> SEQUENCEFILE;</span><br><span class="line">LOCATION 'hdfs_path';</span><br><span class="line"></span><br><span class="line"><span class="comment">--加上EXTERNAL时，建立外部表</span></span><br><span class="line"><span class="comment">--PARTITIONED BY 关键字建分区表</span></span><br><span class="line"><span class="comment">--CLUSTERED BY 关键字建Bucket表</span></span><br><span class="line"><span class="comment">--STORED AS 存储类型&#123;SEQUENCEFILE:需要压缩,TEXTFILE:纯文本,RCFILE&#125;</span></span><br><span class="line"><span class="comment">--LOCATION添加外部表存储路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------创建空表，复制表结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] empty_tablename</span><br><span class="line"><span class="keyword">LIKE</span> other_tablename;</span><br><span class="line"><span class="comment">--------直接导入数据</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] table_name</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> ...;</span><br><span class="line"><span class="comment">--------删除表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] table_name;</span><br></pre></td></tr></table></figure><h2 id="修改表结构"><a class="markdownIt-Anchor" href="#修改表结构"></a> 修改表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">COLUMNS</span> (column_name [<span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'新列'</span>],...),</span><br><span class="line"><span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] column_name,</span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">TO</span> new_name,                      <span class="comment">--重命名表名</span></span><br><span class="line"><span class="keyword">CHANGE</span> column_name new_name new_type,</span><br><span class="line"><span class="keyword">REPLACE</span> <span class="keyword">COLUMNS</span> (...);                   <span class="comment">--替换表中所有字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--添加/删除分区</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line"><span class="keyword">ADD</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="keyword">PARTITION</span> (y=<span class="string">'2018'</span>,m=<span class="string">'07'</span>),</span><br><span class="line"><span class="keyword">DROP</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] <span class="keyword">PARTITION</span> (y=<span class="string">'2018'</span>,m=<span class="string">'07'</span>)；</span><br><span class="line"></span><br><span class="line"><span class="comment">--重命名分区</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">PARTITION</span> (y=<span class="string">'2018'</span>,m=<span class="string">'07'</span>) </span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">TO</span> <span class="keyword">PARTITION</span> (y=<span class="string">'18'</span>,m=<span class="string">'07'</span>);</span><br></pre></td></tr></table></figure><h2 id="导入导出数据"><a class="markdownIt-Anchor" href="#导入导出数据"></a> 导入导出数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--LOAD命令可以导入本地数据或者hdfs数据</span></span><br><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> [<span class="keyword">LOCAL</span>] INPATH <span class="string">'filepath'</span> [OVERWRITE] <span class="keyword">INTO</span> <span class="keyword">TABLE</span> table_name </span><br><span class="line"><span class="keyword">PARTITION</span> (</span><br><span class="line"><span class="built_in">date</span>=<span class="string">'2018-07-03'</span>, </span><br><span class="line">sex=<span class="string">'M'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--LOCAL是标识符指定本地路径。它是可选的</span></span><br><span class="line"><span class="comment">--OVERWRITE是可选的，覆盖表中的数据</span></span><br><span class="line"><span class="comment">--PARTITION分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--将hive数据导出到本地</span></span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE <span class="keyword">LOCAL</span> <span class="keyword">DIRECTORY</span> <span class="string">'hdfs_path'</span>  </span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\t'</span> </span><br><span class="line"><span class="keyword">select</span> ...;</span><br><span class="line"></span><br><span class="line"><span class="comment">--将hive数据放到hdfs文件系统中</span></span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE  <span class="keyword">DIRECTORY</span> <span class="string">'hdfs_path'</span> </span><br><span class="line"><span class="keyword">SELECT</span> ...;</span><br></pre></td></tr></table></figure><h2 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--将查询结果插入Hive表</span></span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE|<span class="keyword">INTO</span>  <span class="keyword">table</span> table_name </span><br><span class="line"><span class="keyword">PARTITION</span> (y=<span class="string">'2018'</span>,m=<span class="string">'07'</span>)</span><br><span class="line"><span class="keyword">SELECT</span> ...;</span><br><span class="line"></span><br><span class="line"><span class="comment">--插入单条数据 （Hive 已支持单条插入）</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name  <span class="keyword">VALUES</span>(<span class="string">'num'</span>,<span class="number">10086</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--将查询结果写入HDFS文件系统</span></span><br><span class="line"><span class="keyword">INSERT</span> OVERWRITE <span class="keyword">DIRECTORY</span> <span class="string">'hdfs_path'</span> </span><br><span class="line"><span class="keyword">SELECT</span> ...;</span><br></pre></td></tr></table></figure><h2 id="查询语句"><a class="markdownIt-Anchor" href="#查询语句"></a> 查询语句</h2><p>select查询支持正则表达式（select `patt`)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>] select_expr, select_expr, ... </span><br><span class="line"><span class="keyword">FROM</span> table_reference </span><br><span class="line">[<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> col_list]</span><br><span class="line">[<span class="keyword">HAVING</span> having_condition] <span class="comment">--可筛选聚合后结果</span></span><br><span class="line">[CLUSTER <span class="keyword">BY</span> col_list | [<span class="keyword">DISTRIBUTE</span> <span class="keyword">BY</span> col_list] [<span class="keyword">SORT</span> <span class="keyword">BY</span> col_list]] </span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> col_list]</span><br><span class="line">[<span class="keyword">LIMIT</span> <span class="built_in">number</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">#hive特殊用法，提出部分字段</span></span><br><span class="line"><span class="keyword">set</span> hive.support.quoted.identifiers=<span class="keyword">none</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="string">`(y|m|d)?+.+`</span> <span class="keyword">from</span>  employee;</span><br></pre></td></tr></table></figure><h2 id="表连接"><a class="markdownIt-Anchor" href="#表连接"></a> 表连接</h2><p><strong>只支持等值连接</strong></p><img alt="join" width="60%" data-src="https://img-blog.csdnimg.cn/20181223145448951.jpg"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">column</span>,... <span class="keyword">from</span> tableA</span><br><span class="line"><span class="comment">--内连接</span></span><br><span class="line">[<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> tableB [<span class="keyword">ON</span> join_condition]</span><br><span class="line"><span class="comment">--左/右/全连接</span></span><br><span class="line">&#123;<span class="keyword">LEFT</span>|<span class="keyword">RIGHT</span>|<span class="keyword">FULL</span>&#125; [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> tableB <span class="keyword">ON</span> join_condition</span><br><span class="line"><span class="comment">--差集连接</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">SEMI</span> <span class="keyword">JOIN</span> tableB <span class="keyword">ON</span> join_condition</span><br><span class="line"><span class="comment">--笛卡儿积（on语句可以去除）</span></span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> tableB [<span class="keyword">ON</span> join_condition]</span><br></pre></td></tr></table></figure><p><strong>Example</strong></p><p>购物记录表(shopping_records)，节假日表(holidays)，输出节假日购物记录</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; SELECT * FROM shopping_records limit 3;</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br><span class="line">| id   | userid | channel     | date       | amount |</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br><span class="line">| 001  | u1005  | wechart     | 2018-11-11 |   1024 |</span><br><span class="line">| 002  | u1005  | alipay      | 2018-10-03 |   5050 |</span><br><span class="line">| 003  | u1203  | credit_card | 2018-12-12 |   2048 |</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br><span class="line">hive&gt; SELECT * FROM holidays limit 3;</span><br><span class="line">+<span class="comment">-----------------+------------+------------+</span></span><br><span class="line">| name            | start_date | end_date   |</span><br><span class="line">+<span class="comment">-----------------+------------+------------+</span></span><br><span class="line">| Spring Festival | 2018-02-15 | 2018-02-21 |</span><br><span class="line">| National Day    | 2018-10-01 | 2018-10-07 |</span><br><span class="line">| New Year's Day  | 2017-12-30 | 2018-01-01 |</span><br><span class="line">+<span class="comment">-----------------+------------+------------+</span></span><br><span class="line">hive&gt; --JOIN...ON语句</span><br><span class="line">hive&gt; SELECT DISTINCT a.*</span><br><span class="line">hive&gt; FROM shopping_records a</span><br><span class="line">hive&gt; JOIN holidays b ON 1=1 --ON语句可以省略</span><br><span class="line">hive&gt; WHERE date BETWEEN start_date AND end_date;</span><br><span class="line"></span><br><span class="line">hive&gt; --CROSS JOIN笛卡儿积</span><br><span class="line">hive&gt; SELECT DISTINCT a.*</span><br><span class="line">hive&gt; FROM shopping_records a</span><br><span class="line">hive&gt; CROSS JOIN holidays b</span><br><span class="line">hive&gt; WHERE date BETWEEN start_date AND end_date;</span><br><span class="line"></span><br><span class="line">hive&gt; --直接select笛卡儿积</span><br><span class="line">hive&gt; SELECT DISTINCT a.* FROM shopping_records a,holidays b</span><br><span class="line">hive&gt; WHERE date BETWEEN start_date AND end_date;</span><br><span class="line"></span><br><span class="line">hive&gt; --输出</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br><span class="line">| id   | userid | channel     | date       | amount |</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br><span class="line">| 002  | u1005  | alipay      | 2018-10-03 |   5050 |</span><br><span class="line">| ...  | ...    | ...         | ...        |   ...  |</span><br><span class="line">+<span class="comment">------+--------+-------------+------------+--------+</span></span><br></pre></td></tr></table></figure><h2 id="表联合"><a class="markdownIt-Anchor" href="#表联合"></a> 表联合</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--联合语句（加上all不会自动去重）</span></span><br><span class="line">select_statement </span><br><span class="line">UNION [ALL] select_statement </span><br><span class="line">UNION [ALL] select_statement</span><br><span class="line">... ... ;</span><br></pre></td></tr></table></figure><h2 id="其他常用命令"><a class="markdownIt-Anchor" href="#其他常用命令"></a> 其他常用命令</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>/<span class="keyword">TABLES</span>;    <span class="comment">--查看数据库/表</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>/<span class="keyword">TABLES</span> <span class="keyword">LIKE</span> <span class="string">"*keyword*"</span>；</span><br><span class="line"><span class="keyword">USE</span> db_name;             <span class="comment">--连接数据库db_name</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PARTITIONS</span> test_table;   <span class="comment">--查看分区</span></span><br><span class="line"><span class="keyword">SHOW</span> FUNCTIONS;             <span class="comment">--查看内置函数</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name;  <span class="comment">-- 查看建表语句</span></span><br><span class="line">DESC table_name;           <span class="comment">-- 表结构</span></span><br><span class="line">DESC formatted table_name  <span class="comment">--查看表更新时间</span></span><br><span class="line">DESC formatted table_name partition(name=value) <span class="comment">--查看分区更新时间</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">select</span> * <span class="keyword">from</span> dual;    <span class="comment">-- 解释语句</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table_name;     <span class="comment">-- 清空表</span></span><br></pre></td></tr></table></figure><h1 id="hive常用内置函数"><a class="markdownIt-Anchor" href="#hive常用内置函数"></a> Hive常用内置函数</h1><blockquote><p><a href="https://www.cnblogs.com/MOBIN/p/5618747.html" target="_blank" rel="noopener">Hive2.0函数大全(中文版)</a></p></blockquote><table><thead><tr><th style="text-align:left">创建</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">array(value1,value2,…)</td><td style="text-align:left">创建数组</td></tr><tr><td style="text-align:left">map(key1,value1,key2,value2,…)</td><td style="text-align:left">创建字典</td></tr></tbody></table><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--将学生按score随机平均分配班级</span></span><br><span class="line">hive&gt; desc students;</span><br><span class="line">idstring</span><br><span class="line">scorestring</span><br><span class="line"></span><br><span class="line">hive&gt; create table tmp</span><br><span class="line">hive&gt; as</span><br><span class="line">hive&gt; select id,score,</span><br><span class="line">hive&gt; case when score='A' then array('class 1','class 2')</span><br><span class="line">hive&gt;      when score='B' then array('class 3','class 4')</span><br><span class="line">hive&gt;      when score='C' then array('class 5','class 6')</span><br><span class="line">hive&gt; else null end as class</span><br><span class="line">hive&gt; from students;</span><br><span class="line"></span><br><span class="line">hive&gt; select id,score,</span><br><span class="line">hive&gt; case when rn%2=0 then class[0] else class[1] end as class</span><br><span class="line">hive&gt; from</span><br><span class="line">hive&gt; (select *,row_number() over(partition by score order by rand()) as rn from tmp) a</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">数学函数</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">count/sum/max/min/avg</td><td style="text-align:left">聚合函数</td></tr><tr><td style="text-align:left">exp(a)</td><td style="text-align:left">e<sup>a</sup></td></tr><tr><td style="text-align:left">pow(a,b)</td><td style="text-align:left">a<sup>b</sup></td></tr><tr><td style="text-align:left">sqrt(a)</td><td style="text-align:left">平方根</td></tr><tr><td style="text-align:left">ln/log2/log10/log(base,a)</td><td style="text-align:left">对数</td></tr><tr><td style="text-align:left">round(num,n)</td><td style="text-align:left">四舍五入</td></tr><tr><td style="text-align:left">floor(num)</td><td style="text-align:left">地板</td></tr><tr><td style="text-align:left">ceil(num)</td><td style="text-align:left">天花板</td></tr><tr><td style="text-align:left">rand(), rand(int,seed)</td><td style="text-align:left">随机数</td></tr><tr><td style="text-align:left">abs(a)</td><td style="text-align:left">绝对值</td></tr><tr><td style="text-align:left">sign(a)</td><td style="text-align:left">如果a是正数则返回1.0，是负数则返回-1.0，否则返回0.0</td></tr><tr><td style="text-align:left">e()/pi()</td><td style="text-align:left">常数e/pi</td></tr><tr><td style="text-align:left">greatest(T v1, T v2, …)</td><td style="text-align:left">最大值</td></tr><tr><td style="text-align:left">least(T v1, T v2, …)</td><td style="text-align:left">最小值</td></tr></tbody></table><table><thead><tr><th style="text-align:left">集合函数</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>size(Map&lt;K.V&gt;)</code></td><td style="text-align:left">它返回在映射类型的元素的数量。</td></tr><tr><td style="text-align:left"><code>size(Array&lt;T&gt;)</code></td><td style="text-align:left">它返回在数组类型元素的数量。</td></tr><tr><td style="text-align:left">collect_set(col)</td><td style="text-align:left">行转数组(去重)</td></tr><tr><td style="text-align:left">collect_list(col)</td><td style="text-align:left">行转数组(不去重)</td></tr><tr><td style="text-align:left"><code>array_contains(Array&lt;T&gt;, value)</code></td><td style="text-align:left">数组中是否包含value</td></tr><tr><td style="text-align:left">explode(ARRAY)</td><td style="text-align:left">数组转行</td></tr><tr><td style="text-align:left"><code>explode(Map&lt;K.V&gt;)</code></td><td style="text-align:left">每行对应每个map的key-value，返回key,value两个字段</td></tr><tr><td style="text-align:left"><code>map_keys(Map&lt;K.V&gt;)</code></td><td style="text-align:left">返回所有的keys</td></tr><tr><td style="text-align:left"><code>map_values(Map&lt;K.V&gt;)</code></td><td style="text-align:left">返回所有的values</td></tr><tr><td style="text-align:left"><code>sort_array(Array&lt;T&gt;)</code></td><td style="text-align:left">对数据进行排序返回</td></tr><tr><td style="text-align:left">concat_ws(sep,array)</td><td style="text-align:left">将array中的元素合并成字符</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; desc student;</span><br><span class="line">idstring</span><br><span class="line">chinesefloat</span><br><span class="line">mathfloat</span><br><span class="line">english float</span><br><span class="line"></span><br><span class="line">hive&gt; desc student2;</span><br><span class="line">col_namedata_type<span class="keyword">comment</span></span><br><span class="line"><span class="keyword">id</span><span class="keyword">string</span></span><br><span class="line">course<span class="keyword">string</span></span><br><span class="line">score<span class="built_in">float</span></span><br><span class="line"></span><br><span class="line">hive&gt; <span class="keyword">select</span> <span class="keyword">id</span>,<span class="built_in">array</span>(chinese,math,english) <span class="keyword">as</span> score <span class="keyword">from</span> student1;</span><br><span class="line">idscore</span><br><span class="line">001[90,95,80]</span><br><span class="line">002[70,65,83]</span><br><span class="line">... ...</span><br><span class="line">hive&gt; select id,map('c',chinese,'m',math,'e',english) as score from student1;</span><br><span class="line">idscore</span><br><span class="line">001&#123;'c':90,'m':95,'e':80&#125;</span><br><span class="line">002&#123;'c':70,'m':65,'e':83&#125;</span><br><span class="line">... ...</span><br><span class="line">hive&gt; select id,collect_set(score) as score from student2; --行收集成数组</span><br><span class="line">idscore</span><br><span class="line">001[90,95,80]</span><br><span class="line">002[70,65,83]</span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line">hive&gt; SELECT id, avg(score) FROM </span><br><span class="line">hive&gt; (select id,array(chinese,math,english) as score from student1) a</span><br><span class="line">hive&gt; LATERAL VIEW explode(score) adTable AS score GROUP BY id; --数组分解成行，并聚合运算</span><br><span class="line"></span><br><span class="line">hive&gt; select id,course,score from</span><br><span class="line">hive&gt; (select id,map('c',chinese,'m',math,'e',english) as dict from student1) a</span><br><span class="line">hive&gt; LATERAL VIEW explode(dict) adTable AS course,score; </span><br><span class="line">hive&gt; ---分解字典并转行，重命名时逗号分隔（union函数替代品）</span><br><span class="line">idcoursescore</span><br><span class="line">001c90</span><br><span class="line">001m95</span><br><span class="line">001e80</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">常用</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">corr(col1, col2)</td><td style="text-align:left">相关系数</td></tr><tr><td style="text-align:left">length(string)</td><td style="text-align:left">字符串长度</td></tr><tr><td style="text-align:left">concat(string A, string B,…)</td><td style="text-align:left">它返回从A后串联B产生的字符串</td></tr><tr><td style="text-align:left">concat_ws(sep,string A, string B,…)</td><td style="text-align:left">指定分隔符合并</td></tr><tr><td style="text-align:left">concat_ws(sep,array)</td><td style="text-align:left">将array中的元素合并成字符</td></tr><tr><td style="text-align:left">substr(string A, int start, int length)</td><td style="text-align:left">取子集</td></tr><tr><td style="text-align:left">upper(string A)/lower</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">trim(string A)</td><td style="text-align:left">删除两侧空格</td></tr><tr><td style="text-align:left">ltrim(string A)/rtrim(string A)</td><td style="text-align:left">删除左/右空格</td></tr><tr><td style="text-align:left">regexp_replace(string A, string B, string C)</td><td style="text-align:left">用C替换B</td></tr><tr><td style="text-align:left">split(str,pat)</td><td style="text-align:left">分割字符串，返回array</td></tr><tr><td style="text-align:left">percentile_approx(col, p，B)</td><td style="text-align:left">百分位数</td></tr><tr><td style="text-align:left"><code>cast(&lt;expr&gt; as &lt;type&gt;)</code></td><td style="text-align:left">将表达式的结果转换类型</td></tr><tr><td style="text-align:left">case when … then…else…end</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">between…and…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">if(condition,valueTrue,valueFalseorNull)</td><td style="text-align:left">条件判断</td></tr><tr><td style="text-align:left">nvl(value,default_value)</td><td style="text-align:left">如果value值为NULL就返回default_value,否则返回value</td></tr><tr><td style="text-align:left">coalesce(T v1, T v2, …)</td><td style="text-align:left">返回第一非null的值，如果全部都为NULL就返回NUL</td></tr><tr><td style="text-align:left">isnull( a )/isnotnull( a )</td><td style="text-align:left">判断返回boolean</td></tr><tr><td style="text-align:left">row_number() over</td><td style="text-align:left">分组排序</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *,row_number() <span class="keyword">OVER</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptid <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rk <span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 备份</span></span><br><span class="line">empl=(`hive -e "show partitions employee;"`)</span><br><span class="line">emp2=(`hive -e "show partitions employee_backup;"`)</span><br><span class="line">for((i=1;i&lt;$&#123;#empl[@]&#125;;i++))</span><br><span class="line">do</span><br><span class="line">  update=$&#123;#empl[@]&#125;</span><br><span class="line">  tmp=(`echo $&#123;emp2[@]&#125; | grep $&#123;update&#125;`)</span><br><span class="line"></span><br><span class="line">  if [ -z $&#123;tmp&#125; ]</span><br><span class="line">  then</span><br><span class="line">    hive "</span><br><span class="line">    insert overwrite table tmp2 partition($&#123;update&#125;)</span><br><span class="line">    select `(y|m|d)?+.+` from  employee where $&#123;update&#125;</span><br><span class="line">    ;" </span><br><span class="line">    printf "%-20s\n" $&#123;update&#125; &gt; info </span><br><span class="line">  fi </span><br><span class="line">done</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">日期时间函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">from_unixtime(int unixtime)</td><td style="text-align:left">转换的秒数从Unix纪元(1970-01-0100:00:00 UTC)</td></tr><tr><td style="text-align:left">to_date(string timestamp)</td><td style="text-align:left">返回一个字符串时间戳的日期部分</td></tr><tr><td style="text-align:left">date_format(date,format)</td><td style="text-align:left">按制定格式返回日期<br><a href="https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_blank" rel="noopener">Format参考文献</a></td></tr><tr><td style="text-align:left">year(string date)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">quarter(string date)</td><td style="text-align:left">季度</td></tr><tr><td style="text-align:left">month(string date)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">day(string date)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">current_date()</td><td style="text-align:left">当前日期</td></tr><tr><td style="text-align:left">weekofyear(string date)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">datediff(start，end)</td><td style="text-align:left">返回相差天数</td></tr><tr><td style="text-align:left">months_between(date,date)</td><td style="text-align:left">相差月份</td></tr><tr><td style="text-align:left">date_add()/date_sub()</td><td style="text-align:left">日期加/减若干天数</td></tr><tr><td style="text-align:left">add_months(date,int)</td><td style="text-align:left">日期加若干月</td></tr><tr><td style="text-align:left">last_day(date)</td><td style="text-align:left">这个月最后一天</td></tr><tr><td style="text-align:left">trunc(date,format)</td><td style="text-align:left">年（“YY”）或月（“MM”）的第一天</td></tr><tr><td style="text-align:left">next_day(date,string day_of_week)</td><td style="text-align:left">下个周X对应的日期</td></tr><tr><td style="text-align:left">get_json_object(string json_string, string path)</td><td style="text-align:left"></td></tr></tbody></table><h1 id="hive视图和索引"><a class="markdownIt-Anchor" href="#hive视图和索引"></a> Hive视图和索引</h1><ul><li><strong>视图：</strong> 逻辑表，不存储实际数据</li><li><strong>索引：</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--创建视图</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] view_name </span><br><span class="line">(column_name <span class="keyword">COMMENT</span> <span class="string">'列说明'</span>, ...)</span><br><span class="line">TBLPROPERTIES (property_name = property_value, ...)</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="string">'视图注释'</span></span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> ...;</span><br><span class="line"><span class="comment">--删除试图</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建索引</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> index_name</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> base_table_name (col_name, ...)</span><br><span class="line"><span class="keyword">AS</span> <span class="string">'index.handler.class.name'</span></span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">DEFERRED</span> <span class="keyword">REBUILD</span>]</span><br><span class="line">[IDXPROPERTIES (property_name=property_value, ...)]</span><br><span class="line">[<span class="keyword">IN</span> <span class="keyword">TABLE</span> index_table_name]</span><br><span class="line">[PARTITIONED <span class="keyword">BY</span> (col_name, ...)]</span><br><span class="line">[ <span class="keyword">ROW</span> <span class="keyword">FORMAT</span> ...] [<span class="keyword">STORED</span> <span class="keyword">AS</span> ...| <span class="keyword">STORED</span> <span class="keyword">BY</span> ...]</span><br><span class="line">[LOCATION hdfs_path]</span><br><span class="line">[TBLPROPERTIES (...)];</span><br><span class="line"><span class="comment">--删除索引</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;index_name&gt; <span class="keyword">ON</span> &lt;table_name&gt;</span><br></pre></td></tr></table></figure><h1 id="hive-中变量的使用"><a class="markdownIt-Anchor" href="#hive-中变量的使用"></a> Hive 中变量的使用</h1><ul><li><p>shell中设置变量，hive -e中直接使用</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">tablename="student"</span><br><span class="line">limitcount="8"</span><br><span class="line"> </span><br><span class="line">hive -e "select * from $&#123;tablename&#125; limit $&#123;limitcount&#125;;"</span><br></pre></td></tr></table></figure></li><li><p>使用-hiveconf定义，在SQL文件中使用</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive -hiveconf tablename='student' -hiveconf limitcount=8 -f test.sql</span><br></pre></td></tr></table></figure><p>SQL文件内容如下</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> $&#123;hiveconf:tablename&#125; <span class="keyword">limit</span> $&#123;hiveconf:limitcount&#125;;</span><br></pre></td></tr></table></figure><p>注意，hiveconf不能在 hive -e中使用</p></li><li><p>使用用户自定义变量 hivevar</p> <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hive &gt; set hivevar: tablename="student";</span><br><span class="line">hive &gt; set hivevar: limitcount="8";</span><br><span class="line">hive &gt; set $&#123;hivevar: tablename&#125;;  --hivevar 使用前缀查看变量</span><br><span class="line">tablename="student"</span><br><span class="line">hive &gt; select * from $&#123;tablename&#125; limit $&#123;limitcount&#125;; --不使用前缀也可以引用使用</span><br></pre></td></tr></table></figure><p>hiveconf 变量也可以在SQL文件中以类似的方式设置，引用时必须加上hiveconf前缀</p></li></ul><h1 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h1><p><a href="https://blog.csdn.net/myproudcodelife/article/details/45372467" target="_blank" rel="noopener">Hive性能调优</a><br><a href="https://blog.csdn.net/m0_38003171/article/details/79086780" target="_blank" rel="noopener">部分Hadoop命令</a></p><p>参考链接：<br><a href="https://www.yiibai.com/hive" target="_blank" rel="noopener">易百教程 | Hive教程</a><br><a href="https://blog.csdn.net/u012386109/article/details/78214894" target="_blank" rel="noopener">HiveQL基础知识及常用语句总结</a><br><a href="https://www.cnblogs.com/skyl/p/4736129.html" target="_blank" rel="noopener">Hive Shell常用操作</a></p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> hive </tag>
            
            <tag> SQL </tag>
            
            <tag> hiveQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据手册(Spark)--Spark安装配置</title>
      <link href="/posts/big-data/BigDataNotebook(Spark)--Spark-installation.html"/>
      <url>/posts/big-data/BigDataNotebook(Spark)--Spark-installation.html</url>
      
        <content type="html"><![CDATA[<p>Apache Spark 是专为大规模数据处理而设计的快速通用的计算引擎。</p><p>Spark 是一种与 Hadoop 相似的开源集群计算环境，但是两者之间还存在一些不同之处，这些有用的不同之处使 Spark 在某些工作负载方面表现得更加优越，换句话说，Spark 启用了内存分布数据集，除了能够提供交互式查询外，它还可以优化迭代工作负载。</p><a id="more"></a><h1 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h1><ul><li>安装spark <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">运行环境 jdk</a></li><li>如果使用python API，安装运行环境 <a href="https://www.python.org/getit/" target="_blank" rel="noopener">python2或python3</a></li><li>如果使用scala语言，安装运行环境（<a href="https://www.scala-lang.org/download/" target="_blank" rel="noopener">官网链接</a>）</li><li>安装spark服务器，配置<a href="https://blog.csdn.net/qq_41518277/article/details/80720390" target="_blank" rel="noopener">免密登陆</a></li></ul><h1 id="spark下载和安装"><a class="markdownIt-Anchor" href="#spark下载和安装"></a> Spark下载和安装</h1><ul><li><a href="http://spark.apache.org/downloads.html" target="_blank" rel="noopener">官网下载spark文件</a>（搭建spark不需要hadoop，如果已经有Hadoop集群，可下载相应的版本）</li><li>解压到指定目录</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf spark-2.3.1-bin-hadoop2.7.tgz -C /usr/<span class="built_in">local</span>/</span><br></pre></td></tr></table></figure><h1 id="配置spark环境变量"><a class="markdownIt-Anchor" href="#配置spark环境变量"></a> 配置spark环境变量</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义spark_home并把路径加到path参数中</span></span><br><span class="line">SPARK_HOME=/usr/<span class="built_in">local</span>/spark-2.3.1-bin-hadoop2.7</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$SPARK_HOME</span>/bin:<span class="variable">$SPARK_HOME</span>/sbin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义Scala_home目录，不使用scala语言时无需进行配置</span></span><br><span class="line">SCALA_HOME=/usr/<span class="built_in">local</span>/scala-2.10</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$SCALA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#加载配置文件，可在任意位置启动pyspark,spark-shell,sparkR</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h1 id="spark配置文件"><a class="markdownIt-Anchor" href="#spark配置文件"></a> Spark配置文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#--------切换到spark配置目录-------</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/spark-2.3.1-bin-hadoop2.7/conf/</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------配置文件spark-enc.sh--------</span></span><br><span class="line">mv spark-env.sh.template spark-env.sh  <span class="comment">#重命名文件</span></span><br><span class="line">vi spark-env.sh   </span><br><span class="line"><span class="comment"># 在文件末尾添加环境，保存并退出</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk1.8.0_171  <span class="comment">#指定jdk位置</span></span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_IP=master       <span class="comment">#master主机IP（单机为localhost,ifconfig命令查看本机IP）</span></span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_PORT=7077       <span class="comment">#master主机端口</span></span><br><span class="line"><span class="comment"># 使用Scala语言时配置</span></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/scala-2.10</span><br><span class="line"><span class="comment"># 已有Hadoop集群时配置</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/hadoop/hadoop-2.7.3</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/usr/hadoop/hadoop-2.7.3/etc/hadoop</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------配置文件slaves--------</span></span><br><span class="line">mv slaves.template slaves  <span class="comment">#重命名文件</span></span><br><span class="line">vi slaves    </span><br><span class="line"><span class="comment">#在该文件中添加子节点的IP或主机名（worker节点），保存并退出</span></span><br><span class="line">node01</span><br><span class="line">node02</span><br><span class="line"></span><br><span class="line"><span class="comment">#------将配置好的spark拷贝到其他节点上------</span></span><br><span class="line">scp -r spark-2.3.1-bin-hadoop2.7/ node01:/usr/</span><br><span class="line">scp -r spark-2.3.1-bin-hadoop2.7/ node02:/usr/</span><br></pre></td></tr></table></figure><h1 id="启动spark集群"><a class="markdownIt-Anchor" href="#启动spark集群"></a> 启动Spark集群</h1><p>spark集群配置完毕，目前是1个master，2个worker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#----------在master上启动集群------------</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/spark-2.3.1-bin-hadoop2.7/sbin/</span><br><span class="line">bash start-all.sh     <span class="comment">#或者bash start-master.sh + bash start-slaves.sh</span></span><br><span class="line"><span class="comment">#----------查看进程-----------------</span></span><br><span class="line">jps</span><br><span class="line"><span class="comment">#----------查看集群状态----------</span></span><br><span class="line">master任意浏览器登陆：http://master:8080/</span><br></pre></td></tr></table></figure><h1 id="启动shell界面"><a class="markdownIt-Anchor" href="#启动shell界面"></a> 启动Shell界面</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/spark-2.3.1-bin-hadoop2.7/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment">#-------------选择一种编程环境启动-----------------</span></span><br><span class="line">bash spark-shell    <span class="comment"># 启动Scala shell</span></span><br><span class="line">bash pyspark        <span class="comment"># 启动python shell</span></span><br><span class="line">bash sparkR         <span class="comment"># 启动R shell</span></span><br><span class="line"><span class="comment">#启动时若Java版本报错，安装需要的版本即可</span></span><br><span class="line">sudo apt-get install openjdk-8-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动成功会出现</span></span><br><span class="line">Welcome to</span><br><span class="line">      ____              __</span><br><span class="line">     / __/__  ___ _____/ /__</span><br><span class="line">    _\ \/ _ \/ _ <span class="string">'/ __/  '</span>_/</span><br><span class="line">   /___/ .__/\_,_/_/ /_/\_\   version 2.3.1</span><br><span class="line">      /_/</span><br><span class="line"></span><br><span class="line">Using Scala version 2.10.4 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_71)</span><br><span class="line">Type <span class="keyword">in</span> expressions to have them evaluated.</span><br><span class="line">Type :<span class="built_in">help</span> <span class="keyword">for</span> more information.</span><br><span class="line">….</span><br><span class="line">18/06/17 23:17:53 INFO BlockManagerMaster: Registered BlockManager</span><br><span class="line">18/06/17 23:17:53 INFO SparkILoop: Created spark context..</span><br><span class="line">Spark context available as sc.</span><br></pre></td></tr></table></figure><h1 id="spark集群配置免密钥登陆"><a class="markdownIt-Anchor" href="#spark集群配置免密钥登陆"></a> Spark集群配置免密钥登陆</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在每个节点生成公钥文件</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh                      <span class="comment">#进到当前用户的隐藏目录</span></span><br><span class="line">ssh-keygen -t rsa              <span class="comment">#用rsa生成密钥，一路回车</span></span><br><span class="line">cp id_rsa.pub authorized_keys   <span class="comment">#把公钥复制一份，并改名为authorized_keys</span></span><br><span class="line"><span class="comment">#这步执行完后，在当前机器执行ssh localhost可以无密码登录本机了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#每个节点的公钥文件复制到master节点</span></span><br><span class="line">scp authorized_keys master@master：~/download/note01_keys   <span class="comment">#重命名公钥便于整合</span></span><br><span class="line">scp authorized_keys master@master：~/download/note01_keys</span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line"> <span class="comment">#进入master节点，整合公钥文件分发到所有节点覆盖</span></span><br><span class="line">cat ~/download/note01_keys &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">cat ~/download/note02_keys &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">... ...</span><br><span class="line">scp ~/.ssh/authorized_keys node01@node01：~/.ssh/authorized_keys</span><br><span class="line">scp ~/.ssh/authorized_keys node02@node02：~/.ssh/authorized_keys</span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#在每个节点更改公钥的权限</span></span><br><span class="line">chmod 600 authorized_keys</span><br></pre></td></tr></table></figure><p>参考链接：<a href="https://blog.csdn.net/weixin_36394852/article/details/76030317" target="_blank" rel="noopener">spark-2.2.0安装和部署——Spark集群学习日记</a></p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Python Basics)--Python面向对象</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--Python-Object-Oriented.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--Python-Object-Oriented.html</url>
      
        <content type="html"><![CDATA[<p>Python从设计之初就已经是一门面向对象的语言，正因为如此，在Python中创建一个类和对象是很容易的。本章节我们将详细介绍Python的面向对象编程。</p><a id="more"></a><h1 id="面向对象object-orientedoo"><a class="markdownIt-Anchor" href="#面向对象object-orientedoo"></a> 面向对象(Object Oriented,OO)</h1><ul><li><strong>类(Class)</strong>: 用来描述具有相同的属性和方法的对象的集合。对象是类的实例。</li><li><strong>属性和方法</strong>：类中定义的变量和函数。加双下划线<code>__</code>私有化属性和方法，<code>__private_attrs</code>,<code>__private_method</code></li><li><strong>继承</strong>：派生类（derived class）自动共享基类（base class）数据结构和方法的机制，这是类之间的一种关系。python支持多继承性。</li><li><strong>多态</strong>：指相同的操作或函数、过程可作用于多种类型的对象上并获得不同的结果。不同的对象，收到同一消息可以产生不同的结果，这种现象称为多态性。</li><li><code>dir(object)</code>：输出类的属性列表</li></ul><p><a href="http://www.runoob.com/python3/python3-class.html" target="_blank" rel="noopener">面向对象参考链接</a></p><h1 id="定义类"><a class="markdownIt-Anchor" href="#定义类"></a> 定义类</h1><blockquote><p>定义属性，方法，方法装饰器等</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span>:</span></span><br><span class="line">    &lt;statement<span class="number">-1</span>&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span>:</span></span><br><span class="line"></span><br><span class="line">cls_attr=<span class="number">0</span>  <span class="comment"># 类本身的属性，所有实例均可调用</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,...)</span>:</span> <span class="comment"># 初始化（需要传递初始化参数）</span></span><br><span class="line">    self.attr=<span class="number">1</span>   <span class="comment"># 初始化实例属性</span></span><br><span class="line">    self._x=<span class="string">'read only'</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">method</span><span class="params">(self,...)</span>:</span> <span class="comment"># 方法，第一个参数self代表实例</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="meta"> @staticmethod  #静态方法（纯粹定义在类内的函数），无self参数，无法访问类属性及方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">static_fun</span><span class="params">(...)</span>:</span> <span class="comment">#不需要实例化，可直接调用，实例化后也可调用</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@classmethod   # 定义类的方法，可直接调用，不需要实例化</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cls_fun</span><span class="params">(cls,...)</span>:</span>  <span class="comment">#第一个参数cls代表类本身（可调用及修改类本身）</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@property # 很容易的操作只读属性</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_x</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Get the current voltage."""</span></span><br><span class="line"><span class="keyword">return</span> self._x</span><br><span class="line"><span class="comment">#property 的 getter,setter 和 deleter 方法同样可以用作装饰器</span></span><br><span class="line"><span class="comment"># @x.setter,@x.deleter</span></span><br></pre></td></tr></table></figure><p>调用类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ClassName.cls_attr <span class="comment"># 调用类属性</span></span><br><span class="line">ClassName.static_fun(...) <span class="comment">#调用静态方法</span></span><br><span class="line">ClassName.cls_fun(...) <span class="comment">#调用类方法</span></span><br><span class="line"></span><br><span class="line">x = ClassName(...)  <span class="comment">#实例化类</span></span><br><span class="line">x.attr <span class="comment">#访问属性</span></span><br><span class="line">x.method(...) <span class="comment">#调用方法</span></span><br><span class="line">super(base,x).method(...) <span class="comment">#调用父类的方法</span></span><br></pre></td></tr></table></figure><h1 id="内建函数"><a class="markdownIt-Anchor" href="#内建函数"></a> 内建函数</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getattr(obj, name[, default]) <span class="comment">#访问对象的属性。</span></span><br><span class="line">hasattr(obj,name) <span class="comment">#检查是否存在一个属性。</span></span><br><span class="line">setattr(obj,name,value) <span class="comment">#设置一个属性。如果属性不存在，会创建一个新属性。</span></span><br><span class="line">delattr(obj, name)  <span class="comment">#删除属性。</span></span><br><span class="line"></span><br><span class="line">type(object) <span class="comment">#判断类别，不考虑继承关系</span></span><br><span class="line">isinstance(object, classinfo) <span class="comment">#判断类别，考虑继承关系，classinfo可以传递tuple</span></span><br><span class="line">issubclass(class, classinfo)</span><br></pre></td></tr></table></figure><h1 id="继承"><a class="markdownIt-Anchor" href="#继承"></a> 继承</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DerivedClassName</span><span class="params">(Base1, Base2, ...)</span>:</span></span><br><span class="line">    &lt;statement<span class="number">-1</span>&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure><h1 id="面向对象实例"><a class="markdownIt-Anchor" href="#面向对象实例"></a> 面向对象实例</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------类定义---------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    count = <span class="number">0</span>  <span class="comment"># 所有子类通用属性</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, weight)</span>:</span>     <span class="comment"># 定义构造方法（初始化）</span></span><br><span class="line">        <span class="comment">#用类名来定义类属性</span></span><br><span class="line">        People.count+=<span class="number">1</span>  <span class="comment">#每次初始执行，可以用来统计子类数量</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">#self代表实例而不是类</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self._age = age  <span class="comment"># 私有属性，可以访问</span></span><br><span class="line">        self.__weight = weight  <span class="comment"># 私有属性，不能直接访问</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod  # 定义类的方法，可直接调用，不需要实例化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_sex</span><span class="params">(cls)</span>:</span>  <span class="comment"># cls代表类本身</span></span><br><span class="line">        <span class="keyword">return</span> cls.sex</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property  </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"My name is &#123;:s&#125;, my age is &#123;:d&#125; ."</span>.format(self.name, self._age))</span><br><span class="line">        </span><br><span class="line"><span class="comment">#------实例化</span></span><br><span class="line">Tim = People(<span class="string">"Tim"</span>, <span class="number">25</span>, <span class="number">80</span>)  </span><br><span class="line">print(Tim._age)      <span class="comment">#25 </span></span><br><span class="line">print(Tim.get_name)  <span class="comment">#'Tim'</span></span><br><span class="line">print(Tim.speak())   <span class="comment">#'My name is Tim, my age is 25 .'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'count:'</span>+str(People.count))   <span class="comment"># count: 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-----添加，修改，删除属性</span></span><br><span class="line">Tim.sex = <span class="string">'male'</span>  <span class="comment"># 添加一个sex属性</span></span><br><span class="line">Tim.age = <span class="number">8</span>  <span class="comment"># 修改age属性</span></span><br><span class="line"><span class="keyword">del</span> Tim.sex  <span class="comment"># 删除sex属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------继承---------</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(People)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#子类不重写 __init__，实例化子类时，会自动调用父类定义的 __init__</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, weight, grade)</span>:</span></span><br><span class="line">        <span class="comment"># 调用父类的构造函数（多继承的话也需要调用其他父类的构造函数）</span></span><br><span class="line">        People.__init__(self, name=name, age=age, weight=weirht)  </span><br><span class="line">        self.grade = grade</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span>  <span class="comment"># 覆写父类的方法</span></span><br><span class="line">        print(<span class="string">"My name is &#123;:s&#125;, my age is &#123;:d&#125;,I'm a student."</span>.format(self.name, self._age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#-----------实例化</span></span><br><span class="line">print(dir(People)</span><br><span class="line">Lucy = Student(<span class="string">"Lucy"</span>, <span class="number">18</span>, <span class="number">45</span>, <span class="number">3</span>)</span><br><span class="line">print(Lucy.name)      <span class="comment">#'Lucy'</span></span><br><span class="line">print(Lucy.get_name)  <span class="comment">#'Lucy'</span></span><br><span class="line">print(Lucy.speak())   <span class="comment">#'My name is Lucy, my age is 18,I'm a student.'</span></span><br><span class="line">print(super(People,Lucy).speak())  <span class="comment">#My name is Lucy, my age is 18 .</span></span><br></pre></td></tr></table></figure><h1 id="类的内置属性"><a class="markdownIt-Anchor" href="#类的内置属性"></a> 类的内置属性</h1><table><thead><tr><th>内置属性</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td><code>__dict__</code> :</td><td style="text-align:left">类的属性（包含一个字典，由类的数据属性组成）</td></tr><tr><td><code>__doc__</code></td><td style="text-align:left">类的文档（字符串）</td></tr><tr><td><code>__name__</code></td><td style="text-align:left">类名</td></tr><tr><td><code>__module__</code>:</td><td style="text-align:left">类定义所在的模块（类的全名是<code>__main__.className</code>，如果类位于一个导入模块mymod中，那么<code>className.__module__</code> 等于 mymod）</td></tr><tr><td><code>__bases__</code> :</td><td style="text-align:left">类的所有父类构成元素（包含了一个由所有父类组成的元组）</td></tr></tbody></table><h1 id="类的魔术方法magic-methods"><a class="markdownIt-Anchor" href="#类的魔术方法magic-methods"></a> 类的魔术方法(magic methods)</h1><table><thead><tr><th>魔术方法</th><th style="text-align:left">说明</th><th style="text-align:left">调用方法</th></tr></thead><tbody><tr><td><code>__init__( self,[,args...] )</code></td><td style="text-align:left">构造函数，在生成对象时调用</td><td style="text-align:left">obj = className(args)</td></tr><tr><td><code>__del__(self)</code></td><td style="text-align:left">析构函数，释放对象时使用</td><td style="text-align:left">del obj</td></tr><tr><td><code>__dir__(self)</code></td><td style="text-align:left">控制<code>dir()</code>输出</td><td style="text-align:left"></td></tr><tr><td><code>__setitem__(self)</code></td><td style="text-align:left">按照索引赋值</td><td style="text-align:left"></td></tr><tr><td><code>__getitem__(self)</code></td><td style="text-align:left">按照索引获取值</td><td style="text-align:left"></td></tr><tr><td><code>__len__(self)</code></td><td style="text-align:left">获得长度</td><td style="text-align:left"></td></tr><tr><td><code>__call__(self)</code></td><td style="text-align:left">函数调用</td><td style="text-align:left"></td></tr><tr><td><strong>转换成字符串</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td><code>__repr__(self)</code></td><td style="text-align:left">打印，转换</td><td style="text-align:left">repr(obj)</td></tr><tr><td><code>__str__(self)</code></td><td style="text-align:left">转换成字符，print对象时会调用此方法</td><td style="text-align:left">str(obj)</td></tr><tr><td><code>__unicode__(self)</code></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th><strong>算术运算符</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td><code>__add__</code></td><td style="text-align:left">+</td></tr><tr><td><code>__sub__</code></td><td style="text-align:left">-</td></tr><tr><td><code>__mul__</code></td><td style="text-align:left">*</td></tr><tr><td><code>__div__</code></td><td style="text-align:left">/</td></tr><tr><td><code>__mod__</code></td><td style="text-align:left">%</td></tr><tr><td><code>__pow__</code></td><td style="text-align:left">**</td></tr><tr><td><strong>比较运算符</strong></td><td style="text-align:left"></td></tr><tr><td><code>__cmp__</code></td><td style="text-align:left">比较运算</td></tr><tr><td><code>__eq__</code></td><td style="text-align:left">==</td></tr><tr><td><code>__lt__</code></td><td style="text-align:left">&gt;</td></tr><tr><td><code>__gt__</code></td><td style="text-align:left">&lt;</td></tr><tr><td><strong>逻辑运算符</strong></td><td style="text-align:left"></td></tr><tr><td><code>__and__</code></td><td style="text-align:left">and</td></tr><tr><td><code>__or__</code></td><td style="text-align:left">or</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">num</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,num)</span>:</span></span><br><span class="line">        self.num=num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self,other)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(other,num):</span><br><span class="line">            <span class="keyword">return</span> self.num+other.num</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"The type of object must be num"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__dir__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__dict__.keys()</span><br><span class="line"></span><br><span class="line">print(num(<span class="number">10</span>)+num(<span class="number">2</span>))   <span class="comment">#12</span></span><br><span class="line">print(num(<span class="number">10</span>)==num(<span class="number">2</span>))  <span class="comment">#False</span></span><br><span class="line">print(dir(num(<span class="number">2</span>)))      <span class="comment">#['num']</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面向对象 </tag>
            
            <tag> python </tag>
            
            <tag> 数据类型 </tag>
            
            <tag> 类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据手册(Linux)--Linux shell教程</title>
      <link href="/posts/big-data/BigDataNotebook(Linux)--Linux-shell.html"/>
      <url>/posts/big-data/BigDataNotebook(Linux)--Linux-shell.html</url>
      
        <content type="html"><![CDATA[<h1 id="shell简介"><a class="markdownIt-Anchor" href="#shell简介"></a> Shell简介</h1><p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。<br>Shell 注释以&quot;#&quot;开头的行就是注释，会被解释器忽略。sh里没有多行注释，只能每一行加一个#号。</p><div class="note warning">            <p>由于Hexo不能正常编译，文档中的 <code>{ #</code> 一律去掉中间空格</p>          </div><h1 id="shell-变量"><a class="markdownIt-Anchor" href="#shell-变量"></a> Shell 变量</h1><ul><li>定义变量时，变量名和等号之间<strong>不能有空格</strong></li><li>还可以用控制/循环语句给变量赋值</li><li>使用变量，只要在变量名前面加美元符号<code>$</code>即可</li><li>变量名外面加<code>{}</code>，可以识别边界</li><li><code>readonly</code> 命令可以将变量定义为只读变量</li><li><code>unset</code> 命令可以删除变量</li></ul><p><strong>example</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">"runoob.com"</span>  <span class="comment">#赋值定义</span></span><br><span class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"I am good at <span class="variable">$&#123;skill&#125;</span>Script"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">readonly</span> your_name  <span class="comment">#只读</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$your_name</span>  <span class="comment">#引用变量</span></span><br><span class="line"><span class="built_in">unset</span> your_name  <span class="comment">#删除变量</span></span><br></pre></td></tr></table></figure><h1 id="shell-字符串"><a class="markdownIt-Anchor" href="#shell-字符串"></a> Shell 字符串</h1><p>字符串可以用单引号，也可以用双引号，也可以不用引号。</p><ul><li>单引号里的任何字符都会<strong>原样输出</strong></li><li>单引号字符串中的<strong>变量是无效的</strong></li><li>双引号里可以有<strong>变量</strong></li><li>双引号里可以出现<strong>转义字符</strong></li><li>获取字符串长度 ${ #string}</li><li>字符串切片(length可以省略)<code>${string:start:length}</code></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">'string'</span></span><br><span class="line">greeting=<span class="string">"hello, <span class="variable">$&#123;str&#125;</span> !\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123; #str&#125;</span> <span class="comment"># 输出6</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str:1:4&#125;</span> <span class="comment"># 输出 trin</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str:4&#125;</span> <span class="comment">#输出 ng</span></span><br></pre></td></tr></table></figure><p>字符串切割的几种方法</p><ul><li>利用shell 中 变量 的字符串替换<br><code>${parameter//pattern/string}</code>用string来替换parameter变量中所有匹配的pattern</li><li>设置分隔符，通过 IFS 变量<br>由于只是对单个字符进行的替换，则可以用  <code>echo args | tr &quot;oldSpilt&quot; &quot;newSpilt&quot;</code>  的方式实现</li><li>利用tr 指令实现字符替换  （！只能针对单个分隔符）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"hello,shell,split,test"</span>  </span><br><span class="line">array=(<span class="variable">$&#123;string//,/ &#125;</span>)</span><br><span class="line"></span><br><span class="line">partitions=(`hive -e <span class="string">"show partitions employee;"</span>`)</span><br><span class="line"><span class="keyword">for</span> partition <span class="keyword">in</span> partitions</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    part=(<span class="variable">$&#123;partition////,&#125;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;part:2&#125;</span></span><br><span class="line">  <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h1 id="shell-数组"><a class="markdownIt-Anchor" href="#shell-数组"></a> Shell 数组</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array_name=(value0 value1 ... valuen) <span class="comment">#空格或换行定义数组</span></span><br><span class="line">array_name[n]=valuen  <span class="comment">#单独定义数组分量</span></span><br></pre></td></tr></table></figure><ul><li><code>${array_name[n]}</code>引用数组元素</li><li><code>${array_name[@]}</code>引用整个数组</li><li>${ #array_name[@]} or ${ #array_name[*]} 获取数组长度</li><li>${ #array_name[n]} 获取数组元素的长度</li></ul><h1 id="shell-传递参数"><a class="markdownIt-Anchor" href="#shell-传递参数"></a> Shell 传递参数</h1><p><a href="http://www.runoob.com/linux/linux-shell-passing-arguments.html" target="_blank" rel="noopener">参考链接</a></p><p>我们可以在<strong>命令行</strong>执行 <strong>Shell 脚本</strong>时，向脚本传递参数，<strong>脚本内</strong>获取参数的格式为：$n。n 代表一个数字，0为脚本名，1为传递的第一个参数，2 为传递第二个参数，以此类推……</p><ul><li>新建脚本test.sh脚本，内容如下：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"执行的文件名：<span class="variable">$0</span>"</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"第一个参数为：<span class="variable">$1</span>"</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"第二个参数为：<span class="variable">$2</span>"</span>;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"第三个参数为：<span class="variable">$3</span>"</span>;</span><br></pre></td></tr></table></figure><ul><li><a href="http://xn--shelltest-9u8rx33bqy1d3pkx1ho72a.sh" target="_blank" rel="noopener">shell终端执行脚本test.sh</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.sh </span><br><span class="line">./test.sh a b c  <span class="comment">#传递参数a,b,c 给脚本</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出内容如下：</span></span><br><span class="line">执行的文件名：./test.sh</span><br><span class="line">第一个参数为：a</span><br><span class="line">第二个参数为：b</span><br><span class="line">第三个参数为：c</span><br></pre></td></tr></table></figure><h1 id="shell-基本运算符"><a class="markdownIt-Anchor" href="#shell-基本运算符"></a> Shell 基本运算符</h1><ul><li>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</li><li>完整的表达式要被 ` 包含</li><li>表达式和运算符之间要有<strong>空格</strong>，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">val=`expr 2 + 2`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"两数之和为 : <span class="variable">$val</span>"</span></span><br><span class="line"><span class="built_in">let</span> b=val*2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">算术运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td style="text-align:left">+</td><td>加法</td><td><code>expr $a + $b</code></td></tr><tr><td style="text-align:left">-</td><td>减法</td><td><code>expr $a - $b</code></td></tr><tr><td style="text-align:left">*</td><td>乘法</td><td><code>expr $a * $b</code></td></tr><tr><td style="text-align:left">/</td><td>除法</td><td><code>expr $b / $a</code></td></tr><tr><td style="text-align:left">%</td><td>取余</td><td><code>expr $b % $a</code></td></tr><tr><td style="text-align:left">=</td><td>赋值</td><td><code>a=$b</code></td></tr><tr><td style="text-align:left">==</td><td>相等</td><td><code>[ 10 == 20 ]</code> 返回false</td></tr><tr><td style="text-align:left">!=</td><td>不相等</td><td><code>[ 10 != 20 ]</code> 返回true</td></tr></tbody></table><table><thead><tr><th>关系运算符</th><th>数字</th><th>字符串</th></tr></thead><tbody><tr><td>相等</td><td><code>[a -eq b] or [a == b]</code></td><td><code>[str1 = str2]</code></td></tr><tr><td>不等</td><td><code>[a -ne b] or [a != b]</code></td><td><code>[str1 != str2]</code></td></tr><tr><td>大于</td><td><code>[a -gt b]</code></td><td></td></tr><tr><td>小于</td><td><code>[a -lt b]</code></td><td></td></tr><tr><td>大于等于</td><td><code>[a -ge b]</code></td><td></td></tr><tr><td>小于等于</td><td><code>[a -le b]</code></td><td></td></tr><tr><td>字符串长度为0</td><td></td><td><code>[ -z str ]</code></td></tr><tr><td>字符串长度不为0</td><td></td><td><code>[ -n str ]</code></td></tr><tr><td>字符串为空</td><td></td><td><code>[str $a ]</code></td></tr></tbody></table><table><thead><tr><th>布尔运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>！</td><td>非运算</td><td><code>[ ! true ]</code> 返回false</td></tr><tr><td>-o</td><td>或运算</td><td><code>[ 10 -lt 20 -o 20 -gt 100 ]</code> 返回 true</td></tr><tr><td>-a</td><td>与运算</td><td><code>[ 10 -lt 20 -a 20 -gt 100 ]</code> 返回 false</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -lt 100 -a <span class="variable">$b</span> -gt 15 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 true"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> 小于 100 且 <span class="variable">$b</span> 大于 15 : 返回 false"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>逻辑运算符</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td><code>&amp;&amp;</code></td><td>逻辑的 AND</td><td><code>[[ 10 -lt 100 &amp;&amp; 20 -gt 100 ]]</code> 返回 false</td></tr><tr><td><code>||</code></td><td>逻辑的 OR</td><td><code>[[ 10 -lt 100 \|\| 20 -gt 100 ]]</code> 返回 true</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -lt 100 &amp;&amp; <span class="variable">$b</span> -gt 100 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"返回 true"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"返回 false"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>文件测试运算符</th><th>说明</th></tr></thead><tbody><tr><td><code>[ -d file ]</code></td><td>检测文件是否是目录</td></tr><tr><td><code>[ -f file ]</code></td><td>检测文件是否是普通文件（既不是目录，也不是设备文件）</td></tr><tr><td><code>[ -r file ]</code></td><td>检测文件是否可读</td></tr><tr><td><code>[ -w file ]</code></td><td>检测文件是否可写</td></tr><tr><td><code>[ -x file ]</code></td><td>检测文件是否可执行</td></tr><tr><td><code>[ -s file ]</code></td><td>检测文件是否为空（文件大小是否大于0）</td></tr><tr><td><code>[ -e file ]</code></td><td>检测文件（包括目录）是否存在</td></tr></tbody></table><h1 id="shell-流程控制"><a class="markdownIt-Anchor" href="#shell-流程控制"></a> Shell 流程控制</h1><h2 id="if-语句"><a class="markdownIt-Anchor" href="#if-语句"></a> if 语句</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    command1</span><br><span class="line"><span class="keyword">elif</span> condition2 </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    command2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 单行if语句</span></span><br><span class="line"><span class="keyword">if</span> condition; <span class="keyword">then</span> <span class="built_in">command</span>; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id="for-循环"><a class="markdownIt-Anchor" href="#for-循环"></a> for 循环</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN; <span class="keyword">do</span> command1; command2… <span class="keyword">done</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------类C语法</span></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;=10;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># -----------------------数字序列</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10)  </span><br><span class="line"><span class="keyword">do</span>   </span><br><span class="line"><span class="built_in">echo</span> $(expr <span class="variable">$i</span> \* 3 + 1);  </span><br><span class="line"><span class="keyword">done</span>   </span><br><span class="line"><span class="comment"># --------------------整数序列  </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;  </span><br><span class="line"><span class="keyword">do</span>  </span><br><span class="line"><span class="built_in">echo</span> $(expr <span class="variable">$i</span> \* 3 + 1);  </span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line"><span class="comment"># -------------------遍历目录</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `ls`;  </span><br><span class="line"><span class="keyword">do</span>   </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$i</span> is file name\! ;  </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份一个hive表</span></span><br><span class="line">empl=(`hive -e <span class="string">"show partitions employee;"</span>`)</span><br><span class="line">emp2=(`hive -e <span class="string">"show partitions employee_backup;"</span>`)</span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;<span class="variable">$&#123; #empl[@]&#125;</span>;i++))</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    update=<span class="variable">$&#123; #empl[@]&#125;</span></span><br><span class="line">    tmp=(`<span class="built_in">echo</span> <span class="variable">$&#123;emp2[@]&#125;</span> | grep <span class="variable">$&#123;update&#125;</span>`)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="variable">$&#123;tmp&#125;</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">      hive <span class="string">"</span></span><br><span class="line"><span class="string">      insert overwrite table tmp2 partition(<span class="variable">$&#123;update&#125;</span>)</span></span><br><span class="line"><span class="string">      select `(y|m|d)?+.+` from  employee where <span class="variable">$&#123;update&#125;</span></span></span><br><span class="line"><span class="string">      ;"</span> </span><br><span class="line">      <span class="built_in">printf</span> <span class="string">"%-20s\n"</span> <span class="variable">$&#123;update&#125;</span> &gt; info </span><br><span class="line">    <span class="keyword">fi</span> </span><br><span class="line">  <span class="keyword">done</span></span><br></pre></td></tr></table></figure><blockquote><p>参考链接： <a href="https://www.cnblogs.com/EasonJim/p/8315939.html" target="_blank" rel="noopener">Linux下Shell的for循环语句</a></p></blockquote><h2 id="while-语句"><a class="markdownIt-Anchor" href="#while-语句"></a> while 语句</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="until-循环"><a class="markdownIt-Anchor" href="#until-循环"></a> until 循环</h2><p>until 循环执行一系列命令直至条件为 true 时停止。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="case语句"><a class="markdownIt-Anchor" href="#case语句"></a> case语句</h2><p>Shell case语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> values <span class="keyword">in</span></span><br><span class="line">val1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">val2）</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h2 id="跳出循环"><a class="markdownIt-Anchor" href="#跳出循环"></a> 跳出循环</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">break</span> <span class="comment">#跳出所有循环</span></span><br><span class="line"><span class="built_in">continue</span> <span class="comment">#跳出当前循环</span></span><br></pre></td></tr></table></figure><h1 id="shell-函数"><a class="markdownIt-Anchor" href="#shell-函数"></a> Shell 函数</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> funname ()</span><br><span class="line">&#123;</span><br><span class="line">    action;</span><br><span class="line">    <span class="built_in">return</span> int;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>linux shell 可以用户定义函数，然后在shell脚本中可以随便调用。</li><li>可以不带关键字<code>function</code></li><li>参数的传递方法和使用脚本一样，<code>$1,$2</code>等</li><li>参数可以隐式加载</li><li><code>return</code>可以省略（将以最后一条命令运行结果）</li></ul>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据手册(Linux)--Linux基础知识</title>
      <link href="/posts/big-data/BigDataNotebook(Linux)--Linux-base.html"/>
      <url>/posts/big-data/BigDataNotebook(Linux)--Linux-base.html</url>
      
        <content type="html"><![CDATA[<h1 id="linux简介"><a class="markdownIt-Anchor" href="#linux简介"></a> Linux简介</h1><p>Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。</p><a id="more"></a><p>目前市面上较知名的发行版有：Ubuntu、RedHat、CentOS、Debian、Fedora、SuSE、OpenSUSE、Arch Linux、SolusOS 等。</p><p>今天各种场合都有使用各种Linux发行版，从嵌入式设备到超级计算机，并且在服务器领域确定了地位，通常服务器使用LAMP（Linux + Apache + MySQL + PHP）或LNMP（Linux + Nginx+ MySQL + PHP）组合。</p><blockquote><p>Ubuntu18内置GNOME ，发音/noʊm/<br>即GNU网络对象模型环境 (The GNU Network Object Model Environment)计划的一部分，开放源码运动的一个重要组成部分。是一种让使用者容易操作和设定电脑环境的工具。</p></blockquote><h2 id="linux-关机"><a class="markdownIt-Anchor" href="#linux-关机"></a> Linux 关机</h2><table><thead><tr><th>关机</th><th>说明</th></tr></thead><tbody><tr><td>sync</td><td>将数据由内存同步到硬盘中</td></tr><tr><td>init 0</td><td>关闭系统</td></tr><tr><td>Shutdown –h now</td><td>立马关机</td></tr><tr><td>Shutdown –h 20:25</td><td>系统会在今天20:25关机</td></tr><tr><td>Shutdown –h +10</td><td>十分钟后关机</td></tr><tr><td><strong>重启</strong></td><td></td></tr><tr><td>init 6</td><td>重启系统</td></tr><tr><td>Shutdown –r now</td><td>系统立马重启</td></tr><tr><td>Shutdown –r +10</td><td>系统十分钟后重启</td></tr><tr><td>reboot</td><td>就是重启，等同于 shutdown –r now</td></tr><tr><td><strong>注销</strong></td><td></td></tr><tr><td>logout</td><td>注销</td></tr></tbody></table><h2 id="远程登陆"><a class="markdownIt-Anchor" href="#远程登陆"></a> 远程登陆</h2><ul><li>SSH 为安全外壳协议 (Secure Shell) 的缩写，建立在应用层基础上的安全协议。</li><li>SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。</li><li>SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</li></ul><p>服务器上安装ssh终端，在mac、Linux上通过ssh命令即可访问，windows上用power shell或安装内置Ubuntu子系统，或安装putty、Xshell、SecureCRT等软件也可访问。</p><blockquote><p>Tips<br>SecureCRT修改默认配置文件（默认模式，编码格式等）：<br>安装目录/config/session/default.ini</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server #安装ssh服务终端</span><br><span class="line"></span><br><span class="line">ssh username@192.168.0.1  #linux、mac、powershell通过用户名和IP访问</span><br><span class="line">exit   #注销登陆</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">-----------免密码登陆-----------</span></span><br><span class="line"><span class="meta">#</span><span class="bash">在控制端建立public key，共享到服务器</span></span><br><span class="line">ssh-keygen  #在Mac终端或Windows PowerShell 生成key</span><br><span class="line">ssh-copy-id username@192.168.0.1   #共享到服务器端</span><br><span class="line">ssh username@192.168.0.1  #免密登陆</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------上传下载文件---------</span></span><br><span class="line">scp file username@192.168.0.1:~/Document/  #上传</span><br><span class="line">scp username@192.168.0.1:~/Document/ ~/file  #下载</span><br></pre></td></tr></table></figure><h2 id="linux上传和下载命令用法"><a class="markdownIt-Anchor" href="#linux上传和下载命令用法"></a> Linux上传和下载命令用法</h2><p>rz，sz是Linux/Unix同Windows进行ZModem文件传输的命令行工具。</p><p>sz（Send Zmodem）：将选定的文件发送（send）到本地机器<br>rz（Receive Zmodem）：运行该命令会弹出一个文件选择窗口，从本地选择文件上传到Linux服务器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install lrzsz  #安装工具</span><br><span class="line">sz filename   #从服务端发送文件到客户端</span><br><span class="line">rz            #从客户端上传文件到服务端，在弹出的框中选择文件</span><br></pre></td></tr></table></figure><p>SecureCRT设置默认路径：Options -&gt; Session Options -&gt; Terminal -&gt; Xmodem/Zmodem -&gt;Directories<br>Xshell设置默认路径：右键会话 -&gt; 属性 -&gt; ZMODEM -&gt; 接收文件夹</p><h1 id="linux-重要系统目录"><a class="markdownIt-Anchor" href="#linux-重要系统目录"></a> Linux 重要系统目录</h1><ul><li><strong>/home</strong>：用户的主目录</li><li><strong>/root</strong>：该目录为系统管理员，也称作超级权限者的用户主目录。</li><li><strong>/bin</strong>：bin是Binary的缩写, 常用的可执行文件</li><li><strong>/sbin</strong>：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。</li><li><strong>/boot</strong>：启动Linux时使用的一些核心文件</li><li><strong>/dev</strong> ：Device(设备), 该目录下存放的是Linux的外部设备</li><li><strong>/etc</strong>：系统管理所需要的配置文件和子目录。</li><li><strong>/lib</strong>：这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。</li><li><strong>/lost+found</strong>：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。</li><li><strong>/proc</strong>：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。</li><li><strong>/tmp</strong>：这个目录是用来存放一些临时文件的。</li><li><strong>/usr</strong>： 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。</li></ul><h1 id="linux-文件与目录管理"><a class="markdownIt-Anchor" href="#linux-文件与目录管理"></a> Linux 文件与目录管理</h1><h2 id="文件和目录"><a class="markdownIt-Anchor" href="#文件和目录"></a> 文件和目录</h2><ul><li><code>/</code> 最顶级的根目录</li><li><code>~</code> home目录</li><li><code>..</code> 上层目录</li><li><code>../..</code>上两级目录</li><li><code>.</code> 当前目录</li><li>隐藏目录或者文件名以 <code>.</code> 开始</li><li>绝对路径必须以<code>/</code>开头，相对路径则较短</li><li><code>--help</code>参数或前面加<code>man</code>，获取帮助文档</li></ul><h2 id="文件和目录常用操作命令"><a class="markdownIt-Anchor" href="#文件和目录常用操作命令"></a> 文件和目录常用操作命令</h2><table><thead><tr><th>ls</th><th>列出目录</th></tr></thead><tbody><tr><td>ls -a</td><td>显示隐藏文件</td></tr><tr><td>ls -l</td><td>显示详细内容</td></tr><tr><td>ls -d</td><td>显示目录本身的属性</td></tr><tr><td><strong>cd</strong></td><td><strong>切换目录(Change Directory)</strong></td></tr><tr><td>cd dir</td><td>dir 为相对路径或绝对路径</td></tr><tr><td><strong>pwd</strong></td><td><strong>显示当前目录</strong>(Print Working Directory)</td></tr><tr><td>pwd -P</td><td>显示出确实的路径，而非使用连结 (link) 路径</td></tr></tbody></table><table><thead><tr><th>创建目录或文件</th><th>说明</th></tr></thead><tbody><tr><td>mkdir [-mp] dir</td><td>创建新目录</td></tr><tr><td>touch [options] files</td><td>创建文件</td></tr><tr><td><strong>复制文件或目录</strong></td><td></td></tr><tr><td>cp [options] source1 source2 source3 … directory</td><td></td></tr><tr><td>参数：<br>-f<br>-i<br>-r</td><td><br>强制复制，若已存在目录则覆盖<br>交互复制<br>递归复制目录</td></tr><tr><td><strong>移除文件或目录</strong></td><td></td></tr><tr><td>rm [options] file_or_dir</td><td>移除文件或目录</td></tr><tr><td>参数：<br>-f<br>-i<br>-r</td><td><br>强制删除<br>交互删除<br>递归删除目录</td></tr><tr><td>rmdir [-p] dir</td><td>删除一个空的目录</td></tr><tr><td><strong>移动文件与目录，或重命名</strong></td><td></td></tr><tr><td>mv [options] source1 source2 source3 … directory</td><td></td></tr><tr><td>参数：<br>-f<br>-i<br>-u</td><td><br>强制移动<br>交互移动<br>升级(update)</td></tr></tbody></table><table><thead><tr><th>文件内容查看</th><th>说明</th></tr></thead><tbody><tr><td>cat [options] file</td><td>由第一行开始显示文件内容</td></tr><tr><td>tac [options] file</td><td>从最后一行开始显示</td></tr><tr><td>参数：<br>-b<br>-n</td><td><br>列出行号，包括空白行<br>列出行号，不包括空白行</td></tr><tr><td>nl [options] file</td><td>显示行号输出</td></tr><tr><td>more file</td><td>分页显示</td></tr><tr><td>less file</td><td>分页显示</td></tr><tr><td>head [-n number]</td><td>显示前number行</td></tr><tr><td>tail [-n number]</td><td>显示后number行</td></tr></tbody></table><h2 id="linux文件权限"><a class="markdownIt-Anchor" href="#linux文件权限"></a> Linux文件权限</h2><p>Linux使用user和group控制使用者对文件的权限，每个文件或程序都有ower和group<br><img alt="file" data-src="https://img-blog.csdn.net/20180617190503602"></p><p><code>ls -l</code> 显示文件详细信息<br><code>chmod [options] mode file</code> 修改文件权限</p><blockquote><p>mode参数 : 权限设定字串，<code>[ugoa...][+-=][rwxX]</code></p><p>u 表示用户，g 表示群组，o 其他人，a 表示全部<br><code>+</code> 表示增加权限，<code>-</code> 表示取消权限，<code>=</code> 表示唯一设定权限。<br>r(read)只读，w(write)写入，x(execute)  可执行</p></blockquote><h2 id="文件的压缩和打包"><a class="markdownIt-Anchor" href="#文件的压缩和打包"></a> 文件的压缩和打包</h2><p>Linux支持的压缩格式</p><ul><li>Z：compress程序压缩文件</li><li>gz：gzip程序压缩文件</li><li>bz2：bzip2程序压缩文件</li><li>tar：tar程序打包文件，并未压缩</li><li>tar.gz：tar程序打包文件，gzip程序压缩文件</li><li>tar.bz2：tar程序打包文件，bzip2程序压缩文件</li></ul><p><code>gzip [-cdtv#] file</code></p><blockquote><p>参数：<br>-c：压缩的数据输出到屏幕<br>-d：解压缩的参数<br>-t：进行文件一致性校验，看是否损坏<br>-v：显示和源文件对比的压缩比<br>-#：压缩等级，-1最快，-9最慢，默认-6</p></blockquote><p><code>bzip2 [-cdkzv#] file</code></p><blockquote><p>参数：<br>-k：保留源文件<br>-z：压缩的参数，该参数代表时执行压缩操作<br>其他参数同gzip</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar [-jcvf]  filename.tar.bz2 dir #bz2程序打包并压缩</span><br><span class="line">tar [-jxvf]  filename.tar.bz2 -C dir #bz2程序解压缩</span><br></pre></td></tr></table></figure><blockquote><p>参数：<br>-c：建立打包档案<br>-t：查看打包文件的文件名<br>-x：解压缩或解打包文件，和-C配合<br>-j：通过bz2程序操作<br>-z：通过gzip程序操作<br>-v：将正在处理的文件名显示出来<br>dir：要压缩或解压的目录</p></blockquote><h2 id="文件编辑"><a class="markdownIt-Anchor" href="#文件编辑"></a> 文件编辑</h2><p><a href="http://www.runoob.com/linux/linux-vim.html" target="_blank" rel="noopener">参考链接 Linux vi/vim</a></p><h1 id="用户和群组"><a class="markdownIt-Anchor" href="#用户和群组"></a> 用户和群组</h1><table><thead><tr><th style="text-align:left">命令</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">useradd [options] username</td><td style="text-align:left">添加用户<br>{-d:用户主目录,-m:创建主目录,-g:用户组,-G:附加组,-s:用户的登录Shell,-u:用户号}</td></tr><tr><td style="text-align:left">userdel [-r] username</td><td style="text-align:left">删除用户，-r连同主目录一起删除</td></tr><tr><td style="text-align:left">usermod [options] username</td><td style="text-align:left">修改用户，选项同<code>useradd</code></td></tr><tr><td style="text-align:left">passwd [options] username</td><td style="text-align:left">口令管理<br>-l:锁定口令，即禁用账号,-u:口令解锁,-d:使账号无口令,-f:强迫用户下次登录时修改口令</td></tr><tr><td style="text-align:left">groupadd [-go] groupname</td><td style="text-align:left">添加用户组</td></tr><tr><td style="text-align:left">groupdel  groupname</td><td style="text-align:left">删除用户组</td></tr><tr><td style="text-align:left">groupmod [-gon] groupname</td><td style="text-align:left">修改用户组</td></tr></tbody></table><h1 id="shell基础"><a class="markdownIt-Anchor" href="#shell基础"></a> Shell基础</h1><p>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。Linux 的 Shell 种类众多，常见的有：</p><p>Bourne Shell（/usr/bin/sh或/bin/sh）<br>Bourne Again Shell（/bin/bash）<br>C Shell（/usr/bin/csh）<br>K Shell（/usr/bin/ksh）<br>Shell for Root（/sbin/sh）<br>… …</p><h2 id="运行-shell-脚本"><a class="markdownIt-Anchor" href="#运行-shell-脚本"></a> 运行 Shell 脚本</h2><p><strong>作为可执行程序</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.sh  #使脚本具有执行权限</span><br><span class="line">./test.sh  #在子shell中执行脚本</span><br></pre></td></tr></table></figure><p><strong>作为解释器参数（子shell中执行）</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh</span><br><span class="line">php test.php</span><br></pre></td></tr></table></figure><p><strong>加载shell脚本（在本shell中加载执行）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> test.sh   <span class="comment">#脚本中的变量可被引用</span></span><br></pre></td></tr></table></figure><h2 id="shell-输入输出重定向"><a class="markdownIt-Anchor" href="#shell-输入输出重定向"></a> Shell 输入/输出重定向</h2><ul><li>标准输入(stdin)，代码0</li><li>标准输出(stdout)是指令成功时返回的结果，代码是1</li><li>标准错误输出(stderr)是指令执行失败返回的错误信息，代码是2</li></ul><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>command &gt; file</td><td>把 stdout 重定向到 file 文件中</td></tr><tr><td>command &gt;&gt; file</td><td>stdout 重定向到 file 文件中(追加)</td></tr><tr><td>command 2&gt; file</td><td>把 stderr 重定向到 file 文件中；</td></tr><tr><td>command 2&gt;&gt; file</td><td>把 stderr 重定向到 file 文件中(追加)；</td></tr><tr><td>command &lt; file</td><td>command 命令以 file 文件作为 stdin</td></tr><tr><td>command &gt; file 2&gt;&amp;1</td><td>把 stdout 和 stderr 一起重定向到 file 文件中；</td></tr><tr><td>command &gt;&gt; file 2&gt;&amp;1</td><td>把 stdout 和 stderr 一起重定向到 file 文件中(追加)；</td></tr><tr><td>command1 &lt; infile &gt; outfile</td><td>command 命令以 infile 文件作为 stdin，以 outfile 文件作为 stdout；</td></tr><tr><td>cat &lt;&gt;file</td><td>以读写的方式打开 file</td></tr><tr><td><code>&gt;&amp;n</code></td><td>使用系统调用 dup2复制文件描述符 n 并把结果用作标准输出</td></tr><tr><td><code>&lt;&amp;n</code></td><td>标准输入复制自文件描述符 n</td></tr><tr><td><code>&lt;&amp;-</code></td><td>关闭标准输入（键盘）</td></tr><tr><td><code>&gt;&amp;-</code></td><td>关闭标准输出</td></tr><tr><td><code>n&lt;&amp;-</code></td><td>表示将 n 号输入关闭</td></tr><tr><td><code>n&gt;&amp;-</code></td><td>表示将 n 号输出关闭</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="string">'hello'</span> &gt; file.txt</span><br><span class="line">cat &lt; file.txt</span><br></pre></td></tr></table></figure><h2 id="管道操作"><a class="markdownIt-Anchor" href="#管道操作"></a> 管道操作</h2><p>Linux管道符<code>|</code>处理经由前面一个指令传出的正确输出信息（对错误信息信息没有直接处理能力）传递给下一个命令，作为标准的输入。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last_part=`hive -e "show partitions employee;" | tail -1`</span><br></pre></td></tr></table></figure><h1 id="ubuntu包管理工具"><a class="markdownIt-Anchor" href="#ubuntu包管理工具"></a> Ubuntu包管理工具</h1><h2 id="dpkg"><a class="markdownIt-Anchor" href="#dpkg"></a> dpkg</h2><p>dpkg(Debian Package Management System) 是ubuntu/Debian下的二进制包(.deb格式)管理系统，包括安装、删除、查询等。</p><table><thead><tr><th>dpkg常用命令</th><th>说明</th></tr></thead><tbody><tr><td>dpkg -i pkgname.deb</td><td>安装软件</td></tr><tr><td>dpkg -r pkgname</td><td>删除软件</td></tr><tr><td>dpkg --info pkgname.deb</td><td>查询软件包信息</td></tr><tr><td>dpkg --status pkgname</td><td></td></tr><tr><td>dpkg --listfiles pkgname</td><td>查询软件包所含文件</td></tr><tr><td>dpkg --contents pkgname.deb</td><td></td></tr><tr><td>dpkg --seach filename</td><td>查询文件归属</td></tr><tr><td>dpkg -l</td><td>查询系统中的包</td></tr></tbody></table><h2 id="apt"><a class="markdownIt-Anchor" href="#apt"></a> apt</h2><p>apt(Advanced Packaging Tool)是ubuntu/debian及派生发行版的软件包管理工具，可以自动下载，配置，安装二进制或者源代码格式的软件包。</p><table><thead><tr><th>apt常用命令</th><th>说明</th></tr></thead><tbody><tr><td>apt-get install pkg</td><td>安装软件</td></tr><tr><td>apt-get remove pkg</td><td>删除软件</td></tr><tr><td>apt-cache show pkg</td><td>查询包信息</td></tr><tr><td>apt-file list pkg</td><td>查询软件包所含文件</td></tr><tr><td>apt-file search filename</td><td>查询文件归属</td></tr><tr><td>apt-cache pkg</td><td>查询系统中的包</td></tr></tbody></table><h2 id="添加或删除软件源"><a class="markdownIt-Anchor" href="#添加或删除软件源"></a> 添加或删除软件源</h2><p><a href="https://blog.csdn.net/u012481692/article/details/78740406" target="_blank" rel="noopener">给ubuntu16.04更新软件源</a><br><a href="%E5%9C%A8Ubuntu%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4PPA%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%BA%90">在Ubuntu中添加和删除PPA的软件源</a></p><h2 id="安装常用软件"><a class="markdownIt-Anchor" href="#安装常用软件"></a> 安装常用软件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mysql</span></span><br><span class="line">sudo apt-get install mysql-client</span><br><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><h1 id="linux常用操作"><a class="markdownIt-Anchor" href="#linux常用操作"></a> Linux常用操作</h1><h2 id="常用命令"><a class="markdownIt-Anchor" href="#常用命令"></a> 常用命令</h2><table><thead><tr><th>常用命令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>echo string</td><td>输出字符串</td><td><code>echo &quot;It is a test&quot;</code></td></tr><tr><td>locate filename</td><td>查找子目录和文件</td><td></td></tr><tr><td>sudo command</td><td>以系统管理者的身份执行指令</td><td></td></tr><tr><td>date +format</td><td>显示当前完整的时间<br>转换格式<br>日期加减运算</td><td><code>date '+%D'</code><br><code>date -d '2018-08-05' '+%Y%m'</code><br><code>date -d '+2 months 2018-08-05'</code></td></tr><tr><td>ifconfig</td><td>查看局域网IP</td><td></td></tr><tr><td>curl <a href="http://ifconfig.me" target="_blank" rel="noopener">ifconfig.me</a></td><td>查看外网IP</td><td></td></tr><tr><td>scp file1 file2</td><td>上传或下载文件</td><td></td></tr><tr><td>exit n</td><td>退出当前脚本，参数n为默认约定，0表示成功，非0表示失败</td><td></td></tr><tr><td>grep patern files</td><td>在file中查找pattern</td><td></td></tr><tr><td>printf  format-string  [arguments…]</td><td>指定格式输出</td><td><code>printf &quot;%-10s %-8s %-4s\n&quot; 姓名 性别 体重kg</code></td></tr><tr><td>jobs -l</td><td>显示任务详情</td><td></td></tr><tr><td>kill -9 id</td><td>结束任务id</td><td></td></tr><tr><td>nohup command &gt; log 2&gt;&amp;1 &amp;</td><td><a href="https://blog.csdn.net/liuyanfeier/article/details/62422742" target="_blank" rel="noopener">linux后台执行命令</a>，必须转化为Linux格式运行</td><td></td></tr></tbody></table><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">today=`date +"%Y%m%d"`</span><br><span class="line">last_date=``date -d "-1 day $&#123;today:0:6&#125;01" +"%Y%m%d"</span><br><span class="line">sed -i "1d" filename #删除第一行</span><br></pre></td></tr></table></figure><h2 id="定期执行程序"><a class="markdownIt-Anchor" href="#定期执行程序"></a> 定期执行程序</h2><p>linux任务调度的工作主要分为以下两类：</p><p><strong>系统执行的工作</strong>：系统周期性所要执行的工作，如备份系统数据、清理缓存<br><strong>个人执行的工作</strong>：某个用户定期要做的工作，例如每隔10分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab [ -u user ] file</span><br></pre></td></tr></table></figure><blockquote><p>参数说明：<br>file：时程表文件<br>-e : 执行文字编辑器来设定时程表（默认vi）<br>-r : 删除目前的时程表<br>-l : 列出目前的时程表</p></blockquote><p><strong>时程表文件格式：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minute hour day month dayofweek command</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">组件</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">minute</td><td>0-60</td></tr><tr><td style="text-align:left">hour</td><td>0-23</td></tr><tr><td style="text-align:left">day</td><td>1-31</td></tr><tr><td style="text-align:left">month</td><td>1-12</td></tr><tr><td style="text-align:left">dayofweek</td><td>0-6</td></tr><tr><td style="text-align:left">command</td><td>要执行的程序</td></tr><tr><td style="text-align:left">*</td><td>代表任意时间</td></tr><tr><td style="text-align:left">*/n</td><td>代表每隔n时间</td></tr><tr><td style="text-align:left">a-b</td><td>代表a到b这段区间</td></tr><tr><td style="text-align:left">a, b, c,…</td><td>分别在a, b, c,… 时间执行</td></tr></tbody></table><p><strong>example</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 * * * * /bin/ls              #每小时的0分钟执行ls</span><br><span class="line">0 6-12/3 * 12 * cd /usr/bin/ &amp;&amp; sh backup &gt; log 2&gt;&amp;1 &amp; #12月每天6-12点每隔3小时执行一次backup</span><br></pre></td></tr></table></figure><h2 id="linux系统自定义shell命令以pycharm为例"><a class="markdownIt-Anchor" href="#linux系统自定义shell命令以pycharm为例"></a> Linux系统自定义shell命令（以pycharm为例）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打开配置文件</span></span><br><span class="line">sudo vim ~/.bashrc   </span><br><span class="line"><span class="comment">#添加pycharm.sh所在的路径</span></span><br><span class="line"><span class="built_in">alias</span> pycharm = <span class="string">"bash /download/pycharm-community-2018.1.4/bin/pycharm.sh"</span></span><br><span class="line"><span class="comment">#重新加载</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc </span><br><span class="line"><span class="comment">#运行</span></span><br><span class="line">pycharm</span><br></pre></td></tr></table></figure><h2 id="shell中的参数传入r或python脚本"><a class="markdownIt-Anchor" href="#shell中的参数传入r或python脚本"></a> shell中的参数传入R或Python脚本</h2><p><a href="https://blog.csdn.net/crystal_tyan/article/details/42214339" target="_blank" rel="noopener">shell中调用R语言并传入参数的两种方法</a><br><a href="https://www.cnblogs.com/aland-1415/p/6613449.html" target="_blank" rel="noopener">Python中 sys.argv的用法简明解释</a></p><h2 id="ubuntu下jdk和openjdk"><a class="markdownIt-Anchor" href="#ubuntu下jdk和openjdk"></a> <a href="https://blog.csdn.net/z5234032/article/details/62886879" target="_blank" rel="noopener">Ubuntu下JDK和openJDK</a></h2><h2 id="ubuntulinux桌面添加快捷方式"><a class="markdownIt-Anchor" href="#ubuntulinux桌面添加快捷方式"></a> <a href="https://jingyan.baidu.com/article/5553fa82c641ba65a23934a5.html" target="_blank" rel="noopener">ubuntu/linux桌面添加快捷方式</a></h2><h1 id="错误处理"><a class="markdownIt-Anchor" href="#错误处理"></a> 错误处理</h1><ul><li><p><strong>安装R包报错处理</strong><br>安装R包报错时，通常都会显示错误信息，只要按提示的错误信息安装对应的软件包即可。<br><code>sudo apt-get install libxml2-dev</code><br><img alt="r" data-src="https://img-blog.csdn.net/20180617192240424"></p></li><li><p><strong>pycharm</strong><br>打开脚本报错Gtk-Message: Failed to load module “canberra-gtk-module”<br>解决方法：<code>sudo apt-get install libcanberra-gtk-module</code></p></li></ul><p>参考链接：</p><p><a href="www.runoob.com/linux/linux-system-contents.html">Linux入门教程链接</a><br><a href="https://www.bilibili.com/video/av15976434" target="_blank" rel="noopener">Linux 简易教学 (机器学习/深度学习 莫烦 Python 教程)-bilibili</a><br><a href="http://blog.fens.me/rhadoop-linux-basic/" target="_blank" rel="noopener">RHadoop培训 之 Linux基础课</a><br><a href="https://blog.csdn.net/strugglm/article/details/78608940?locationNum=9&amp;fps=1" target="_blank" rel="noopener">在win10系统下安装ubuntu17.10以及基本配置</a></p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数据 </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Visualise)--REmap</title>
      <link href="/posts/R/RNotebook(Visualise)--REmap.html"/>
      <url>/posts/R/RNotebook(Visualise)--REmap.html</url>
      
        <content type="html"><![CDATA[<p><strong>REmap</strong>:（简单动态地图）Create html maps by Echarts</p><p>REmap是一个基于Echarts <a href="http://echarts.baidu.com" target="_blank" rel="noopener">http://echarts.baidu.com</a> 的一个R包.主要的目的是为广大数据玩家提供一个简便的,可交互的地图数据可视化工具.目前托管在github, <a href="https://github.com/lchiffon/REmap" target="_blank" rel="noopener">https://github.com/lchiffon/REmap</a></p><p><a href="http://langdawei.com/REmap/2015/07/intro" target="_blank" rel="noopener">REmap官网链接（中文）</a></p><a id="more"></a><h1 id="获取经纬度"><a class="markdownIt-Anchor" href="#获取经纬度"></a> 获取经纬度</h1><p><code>get_geo_position(city_vec)</code> 获得城市向量的经纬度</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">city_vec = c(<span class="string">"北京"</span>,<span class="string">"Shanghai"</span>,<span class="string">"广州"</span>)</span><br><span class="line">get_geo_position (city_vec)</span><br><span class="line">        lon      lat     city</span><br><span class="line"><span class="number">1</span>  <span class="number">116.6212</span> <span class="number">40.06107</span>     北京</span><br><span class="line"><span class="number">2</span>  <span class="number">121.4786</span> <span class="number">31.21562</span> Shanghai</span><br><span class="line"><span class="number">3</span>  <span class="number">113.3094</span> <span class="number">23.39237</span>     广州</span><br></pre></td></tr></table></figure><h1 id="迁移图无缩放中国地图"><a class="markdownIt-Anchor" href="#迁移图无缩放中国地图"></a> 迁移图（无缩放中国地图）</h1><p><code>remap(mapdata,title = &quot;&quot;, subtitle = &quot;&quot;, theme = get_theme(&quot;Dark&quot;))</code></p><blockquote><p>参数<br>mapdata格式：data.frame(出发地, 目的地)<br>theme：Dark/Bright/Sky</p></blockquote><h1 id="填色地图迁移图"><a class="markdownIt-Anchor" href="#填色地图迁移图"></a> 填色地图（+迁移图）</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mapNames(mapType) <span class="comment"># 获得所有的maptype（china/world/省份名）</span></span><br><span class="line"></span><br><span class="line">remapC(data,                     <span class="comment">#data.frame(地名, 数值)</span></span><br><span class="line">  maptype = <span class="string">'china'</span>,             <span class="comment">#china/world/省份名</span></span><br><span class="line">  color = c(<span class="string">'1e90ff'</span>,<span class="string">'f0ffff'</span>),  <span class="comment">#填充色阶(“skyblue”,etc)</span></span><br><span class="line">  theme = get_theme(<span class="string">"Bright"</span>),</span><br><span class="line">  title = <span class="string">""</span>,subtitle = <span class="string">""</span>,</span><br><span class="line">  markLineData = <span class="literal">NULL</span>,            <span class="comment">#data.frame(出发地, 目的地)</span></span><br><span class="line">  markPointData = <span class="literal">NULL</span>,           <span class="comment">#地名向量</span></span><br><span class="line">  markLineTheme = markLineControl(),</span><br><span class="line">  markPointTheme = markPointControl() )</span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data = data.frame(country = mapNames(<span class="string">"world"</span>),</span><br><span class="line">                   value = <span class="number">5</span>*sample(<span class="number">178</span>)+<span class="number">200</span>)</span><br><span class="line">remapC(data,maptype = <span class="string">"world"</span>,color = <span class="string">'skyblue'</span>)</span><br><span class="line"></span><br><span class="line">remapC(chinaIphone,</span><br><span class="line">        title = <span class="string">"remapC实例地图"</span>,</span><br><span class="line">        theme = get_theme(<span class="string">'none'</span>,backgroundColor = <span class="string">'#fff'</span>,</span><br><span class="line">                          titleColor = <span class="string">"#1b1b1b"</span>,</span><br><span class="line">                          pointShow = <span class="literal">T</span>),</span><br><span class="line">        max = <span class="number">2000</span>,</span><br><span class="line">        markLineData = demoC,</span><br><span class="line">        markPointData = demoC[,<span class="number">2</span>])</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/echarts/remap_world.png"><img alt data-src="/images/echarts/remap_china.png"></p><h1 id="调用baiduapi绘图"><a class="markdownIt-Anchor" href="#调用baiduapi绘图"></a> 调用baiduAPI绘图</h1><p><code>remapB</code> 是用于创建一个以百度地图为底图的recharts效果，有以下特点:</p><ul><li>支持滚轮缩放,拖拽地图</li><li>详细的地图效果</li><li>可视化主要以标线与标点的形式做出</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">remapB(center = c(lon,lat)   <span class="comment">#地图中心向量</span></span><br><span class="line">  zoom = <span class="number">5</span>,                  <span class="comment">#地图尺寸(country :5, city:15)</span></span><br><span class="line">  color = <span class="string">"Bright"</span>,title = <span class="string">""</span>,subtitle = <span class="string">""</span>,</span><br><span class="line">  color,                    <span class="comment">#color: Bright", "Blue", "light", "dark", "redalert", "googlelite", "grassgreen", "midnight", "pink", "darkgreen", "bluish", "grayscale", "hardedge"</span></span><br><span class="line">  markLineData = <span class="literal">NA</span>,        <span class="comment">#data.frame(出发地, 目的地)</span></span><br><span class="line">  markPointData = <span class="literal">NA</span>,       <span class="comment">#地名向量</span></span><br><span class="line">  markLineTheme = markLineControl(),</span><br><span class="line">  markPointTheme = markPointControl(),</span><br><span class="line">  geoData = <span class="literal">NA</span>)              <span class="comment">#similar as get_geo_position()</span></span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">remapB(title = <span class="string">"Remap:  百度迁徙模拟"</span>, markPointData = demoC[,<span class="number">2</span>])</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/echarts/baidumap.png"></p><h1 id="for-shiny"><a class="markdownIt-Anchor" href="#for-shiny"></a> For shiny</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REmapOutput(outputId, inline = <span class="literal">FALSE</span>, container,<span class="keyword">...</span>)`</span><br><span class="line"></span><br><span class="line">renderREmap(expr, env = parent.frame(),height = "800px", width = "100%", quoted = FALSE, func = NULL)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> REmap </tag>
            
            <tag> 地图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(NLP)--text2vec</title>
      <link href="/posts/R/RNotebook(NLP)--text2vec.html"/>
      <url>/posts/R/RNotebook(NLP)--text2vec.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://cndocr.github.io/text2vec-doc-cn/index.html" target="_blank" rel="noopener"><strong>text2vec</strong></a> 这个 R 包提供了高性能和简洁的 API 来进行文本分析、自然语言处理。</p><a id="more"></a><h1 id="分词器"><a class="markdownIt-Anchor" href="#分词器"></a> 分词器</h1><p><code>word_tokenizer(strings)</code> 英语分词器<br><code>jieba&lt;-jiebaR::worker()</code>中文分词器</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RUN THIS EXAMPLE:</span></span><br><span class="line">jieba&lt;-jiebaR::worker()</span><br><span class="line">tok_fun &lt;-<span class="keyword">function</span>(strings) </span><br><span class="line">  llply(strings, segment, jieba)</span><br></pre></td></tr></table></figure><h1 id="io-处理迭代器支持create_type函数"><a class="markdownIt-Anchor" href="#io-处理迭代器支持create_type函数"></a> I/O 处理(迭代器)：支持<code>create_&lt;type&gt;</code>函数</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RUN THIS EXAMPLE:</span></span><br><span class="line">itoken(strings, </span><br><span class="line"> preprocessor = identity,       <span class="comment">#预处理函数集（去空格，去数字等）</span></span><br><span class="line"> tokenizer = space_tokenizer,   <span class="comment">#分词器</span></span><br><span class="line"> progressbar = interactive())   <span class="comment">#进度条</span></span><br><span class="line">it_train &lt;- itoken(doc, tokenizer = tok_fun)</span><br></pre></td></tr></table></figure><h1 id="向量化"><a class="markdownIt-Anchor" href="#向量化"></a> 向量化</h1><ul><li><strong>创建词汇表：</strong>(N-grams参数)</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RUN THIS EXAMPLE:</span></span><br><span class="line">stop_words &lt;- c(<span class="string">"在"</span>, <span class="string">"又"</span>, <span class="string">"你"</span> )       <span class="comment">#停止词创建</span></span><br><span class="line">vocab &lt;- create_vocabulary(it_train, stopwords = stop_words)</span><br></pre></td></tr></table></figure><ul><li><strong>修剪词汇：</strong></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prune_vocabulary(vocabulary,  <span class="comment">#词汇表</span></span><br><span class="line"> term_count_min = <span class="number">1L</span>,         <span class="comment">#最小次数</span></span><br><span class="line"> term_count_max = <span class="literal">Inf</span>, </span><br><span class="line"> doc_proportion_min = <span class="number">0</span>,      <span class="comment">#最小比例</span></span><br><span class="line"> doc_proportion_max = <span class="number">1</span>,</span><br><span class="line"> max_number_of_terms = <span class="literal">Inf</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RUN THIS EXAMPLE:</span></span><br><span class="line">pruned_vocab &lt;- prune_vocabulary(vocab,term_count_min = <span class="number">10</span>,doc_proportion_max = <span class="number">0.5</span>,doc_proportion_min = <span class="number">0.001</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>词汇向量化：</strong><code>vocab_vectorizer()</code> , <code>hash_vectorizer()</code></li></ul><p><code>vectorizer &lt;- vocab_vectorizer(pruned_vocab)</code></p><ul><li><strong>DTM,TCM</strong>: (Document-Term matrices, Term co-occurence matrices)</li></ul><p><code>dtm_train &lt;- create_dtm(it_train, vectorizer)</code><br><code>tcm_train &lt;- create_tcm(it_train, vectorizer)</code></p><h1 id="主题模型"><a class="markdownIt-Anchor" href="#主题模型"></a> 主题模型</h1><ul><li><strong>处理模型的统一规范</strong></li></ul><p><code>model$new(...)</code>生成一个模型对象，设置初始化参数。<br><code>model$fit(x, ...)</code>拟合模型<br><code>model$fit_transform(x, ...)</code>拟合模型并转换数据<br><code>model$transform(x_new, ...)</code>使用已经训练好的模型转换数据</p><p>Tf-idf 转换，Global Vectors (GloVe) 词向量</p><ul><li><strong>常用模型</strong></li></ul><p><code>LSA$new()</code>潜在语义分析(LSA)<br><code>LDA$new()</code>潜在Dirichlet分配模型(LDA)</p><ul><li><strong>文档相似性和距离</strong>（不相似性）</li></ul><p><code>sim2(x, y, method)</code>矩阵x和y，每一行的使用指定方法的相似性<br><code>dist2(x, y, method)</code>矩阵x和y，每一行的使用指定方法的距离<br><code>psim2(x, y, method)</code>,  <code>dist2(x, y, method)</code>并行计算</p><blockquote><p>参数method：“cosine”, “euclidean”, “jaccard”<br>余弦距离，欧式距离，Jaccard距离，RelaxedWordMover’sDistance</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> text2vec </tag>
            
            <tag> NLP </tag>
            
            <tag> 分词 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(NLP)--wordcloud2</title>
      <link href="/posts/R/RNotebook(NLP)--wordcloud2.html"/>
      <url>/posts/R/RNotebook(NLP)--wordcloud2.html</url>
      
        <content type="html"><![CDATA[<p><strong>wordcloud2</strong> :R interface to wordcloud for data visualization</p><p>Wordcloud2主要包括两个函数：</p><ol><li><code>wordcloud2</code>：用HTML5提供传统的wordcloud</li><li><code>letterCloud</code>：用选定的单词（字母）提供wordcloud</li></ol><a id="more"></a><h1 id="wordlcoud2函数"><a class="markdownIt-Anchor" href="#wordlcoud2函数"></a> wordlcoud2函数</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wordcloud2(data, size = <span class="number">1</span>, minSize = <span class="number">0</span>, gridSize =  <span class="number">0</span>,</span><br><span class="line">    fontFamily = <span class="string">'Segoe UI'</span>, fontWeight = <span class="string">'bold'</span>,</span><br><span class="line">    color = <span class="string">'random-dark'</span>, backgroundColor = <span class="string">"white"</span>,</span><br><span class="line">    minRotation = -pi/<span class="number">4</span>, maxRotation = pi/<span class="number">4</span>, shuffle = <span class="literal">TRUE</span>,</span><br><span class="line">    rotateRatio = <span class="number">0.4</span>, shape = <span class="string">'circle'</span>, ellipticity = <span class="number">0.65</span>,</span><br><span class="line">    widgetsize = <span class="literal">NULL</span>, figPath = <span class="literal">NULL</span>, hoverFunction = <span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li>data：包含每列中的word和freq的数据帧，按照word出现的顺序由内向外画图（可以按照freq降序美化wordcloud）。</li><li>size：字体大小，默认为1。较大的大小意味着较大的单词。</li><li>fontFamily：要使用的字体。</li><li>fontWeight：字体重量，例如<code>normal, bold or 600</code></li><li>color：文本的颜色，可以使用关键字<code>random-dark</code>和<code>random-light</code>。也支持颜色矢量。</li><li>minSize：字幕的字符串</li><li>backgroundColor：背景的颜色。</li><li>gridSize：用于标记画布可用性的网格大小，网格大小越大，单词之间的差距越大。</li><li>minRotation：文本应该旋转的最小旋转（以rad为单位）。</li><li>maxRotation：文本应旋转的最大旋转（以rad为单位）。</li><li>rotateRatio：单词旋转的概率。将数字设置为1以始终旋转。</li><li>shape：绘制“云”的形状。 ‘circle’ (default), ‘cardioid’ (心形’，苹果或心形曲线，最知名的极坐标方程), ‘diamond’ (菱形), ‘triangle-forward’(三角形前移), ‘triangle’(三角形), ‘pentagon’(五角形), and ‘star’。</li><li>ellipticity：平坦度</li><li>figPath：画布路径</li><li>widgetsize：小部件的大小</li></ul><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">head(demoFreq)</span><br><span class="line"><span class="comment">##          word freq</span></span><br><span class="line"><span class="comment">## oil       oil   85</span></span><br><span class="line"><span class="comment">## said     said   73</span></span><br><span class="line"><span class="comment">## prices prices   48</span></span><br><span class="line"><span class="comment">## opec     opec   42</span></span><br><span class="line"><span class="comment">## mln       mln   31</span></span><br><span class="line"><span class="comment">## the       the   26</span></span><br><span class="line">wordcloud2(demoFreq, color = <span class="string">"random-light"</span>, backgroundColor = <span class="string">"grey"</span>) <span class="comment">#颜色和背景</span></span><br><span class="line">wordcloud2(demoFreq, size = <span class="number">1</span>,shape = <span class="string">'star'</span>) <span class="comment">#形状</span></span><br><span class="line">wordcloud2(demoFreq, size = <span class="number">2</span>, minRotation = -pi/<span class="number">6</span>, maxRotation = -pi/<span class="number">6</span>,rotateRatio = <span class="number">1</span>) <span class="comment">#旋转</span></span><br><span class="line">wordcloud2(demoFreqC, size = <span class="number">2</span>, fontFamily = <span class="string">"微软雅黑"</span>,</span><br><span class="line">           color = <span class="string">"random-light"</span>, backgroundColor = <span class="string">"grey"</span>) <span class="comment">#支持中文</span></span><br><span class="line"><span class="comment">#自定义画布</span></span><br><span class="line">figPath = system.file(<span class="string">"examples/t.png"</span>,package = <span class="string">"wordcloud2"</span>)</span><br><span class="line">wordcloud2(demoFreq, figPath = figPath, size = <span class="number">1.5</span>,color = <span class="string">"skyblue"</span>)</span><br></pre></td></tr></table></figure><p><img style="zoom:50%;" data-src="/images/wordcloud2/Wordcloud1.png"><img style="zoom:50%;" data-src="/images/wordcloud2/Wordcloud2.png"><img style="zoom:50%;" data-src="/images/wordcloud2/Wordcloud3.png"><img style="zoom:50%;" data-src="/images/wordcloud2/Wordcloud4.png"><img style="zoom:50%;" data-src="/images/wordcloud2/Wordcloud5.png"></p><h1 id="lettercloud函数"><a class="markdownIt-Anchor" href="#lettercloud函数"></a> letterCloud函数</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letterCloud(data, word, wordSize = <span class="number">0</span>, letterFont = <span class="literal">NULL</span>, <span class="keyword">...</span>)</span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li>data：包含每列中的word和freq的数据帧</li><li>word：一个单词，为wordcloud创造形状。</li><li>wordSize：单词大小的参数，默认为2。</li><li>letterFont：字母的字体</li><li>…</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letterCloud(demoFreq, word = <span class="string">"WORDCLOUD2"</span>, wordSize = <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/wordcloud2/Wordcloud6.png"></p><h1 id="shiny支持"><a class="markdownIt-Anchor" href="#shiny支持"></a> shiny支持</h1><p>See Example:</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">require</span>(shiny))&#123;</span><br><span class="line">  <span class="keyword">library</span>(wordcloud2)</span><br><span class="line">   <span class="comment"># Global variables can go here</span></span><br><span class="line">   n &lt;- <span class="number">1</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the UI</span></span><br><span class="line">   ui &lt;- bootstrapPage(</span><br><span class="line">      numericInput(<span class="string">'size'</span>, <span class="string">'Size of wordcloud'</span>, n),</span><br><span class="line">     wordcloud2Output(<span class="string">'wordcloud2'</span>)</span><br><span class="line">   )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment"># Define the server code</span></span><br><span class="line">   server &lt;- <span class="keyword">function</span>(input, output) &#123;</span><br><span class="line">      output$wordcloud2 &lt;- renderWordcloud2(&#123;</span><br><span class="line">      <span class="comment"># wordcloud2(demoFreqC, size=input$size)</span></span><br><span class="line">        wordcloud2(demoFreq, size=input$size)</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment"># Return a Shiny app object</span></span><br><span class="line">   <span class="comment"># Sys.setlocale("LC_CTYPE","chs") #if you use Chinese character</span></span><br><span class="line">   <span class="comment">## Do not Run!</span></span><br><span class="line">   shinyApp(ui = ui, server = server)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> NLP </tag>
            
            <tag> wordcloud2 </tag>
            
            <tag> 词云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Time Series)--zoo</title>
      <link href="/posts/R/RNotebook(Time-Series)--zoo.html"/>
      <url>/posts/R/RNotebook(Time-Series)--zoo.html</url>
      
        <content type="html"><![CDATA[<p>zoo和xts是对日期型数据进行清洗的R包</p><a id="more"></a><h1 id="zoo"><a class="markdownIt-Anchor" href="#zoo"></a> zoo</h1><h2 id="基础对象"><a class="markdownIt-Anchor" href="#基础对象"></a> 基础对象</h2><p><code>zoo(x = NULL, order.by = index(x), frequency = NULL)</code>有序的时间序列对象<br><code>zooreg(data, start = 1, end = numeric(), frequency = 1)</code>规则的的时间序列对象，继承zoo对象<br><code>as.zoo(x)</code>把一个对象转型为zoo类型，泛型函数<br><code>is.regular(x, strict = FALSE)</code>检查是否是规则的序列</p><h2 id="ggplot2扩展"><a class="markdownIt-Anchor" href="#ggplot2扩展"></a> ggplot2扩展</h2><p><code>autoplot(object, geom = &quot;line&quot;, facets, ...)</code><br><code>fortify(model, data, melt = FALSE, …)</code>数据操作</p><h2 id="数据清洗"><a class="markdownIt-Anchor" href="#数据清洗"></a> 数据清洗</h2><p><code>read.zoo(file, format = &quot;&quot;, index.column = 1, drop = TRUE)</code><br><code>write.zoo(x, file = &quot;&quot;, index.name = &quot;Index&quot;, row.names = FALSE, col.names = NULL)</code><br><code>coredata(x)</code>提取/替换zoo数据部分<br><code>index(x)</code>提取/替换zoo索引部分<br><code>window(x, index. = index(x), start = NULL, end = NULL)</code>按时间筛选数据<br><code>merge()</code>合并多个zoo对象<br><code>aggregate(x, by, FUN = sum)</code>分类计算<br><code>lag(x, k = 1, na.pad = FALSE, ...)</code>计算步长<br><code>diff(x, lag = 1, differences = 1)</code>计算分差<br><code>rollapply(data, width, FUN)</code>对zoo数据的滚动处理</p><blockquote><p>rollmean, rollmax, rollmedian, rollsum,etc</p></blockquote><p><code>MATCH(x, table)</code>值匹配<br><code>ORDER(x)</code>值排序，输出索引</p><h2 id="缺失值处理"><a class="markdownIt-Anchor" href="#缺失值处理"></a> 缺失值处理</h2><p><code>na.fill(object, fill)</code>NA值的填充<br><code>na.locf(object, na.rm = TRUE, fromLast=FALSE)</code>最近值替换NA<br><code>na.aggregate(object,by = 1,FUN = mean,na.rm = FALSE)</code>计算统计值替换NA<br><code>na.approx(object)</code>计算插值替换NA<br><code>na.StructTS(object,na.rm=FALSE)</code>计算seasonalKalmanfilter替换NA<br><code>na.trim(object)</code>过滤有NA的记录</p><h2 id="显示控制"><a class="markdownIt-Anchor" href="#显示控制"></a> 显示控制</h2><p><code>yearqtr</code>以年季度显示时间<br><code>yearmon</code>以年月显示时间</p>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Time Series </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 数据清洗 </tag>
            
            <tag> 时间序列 </tag>
            
            <tag> zoo </tag>
            
            <tag> 日期和时间 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--forcats</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--forcats.html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--forcats.html</url>
      
        <content type="html"><![CDATA[<p>forcats: 分类变量数据处理</p><a id="more"></a><h1 id="forcats-for-factor"><a class="markdownIt-Anchor" href="#forcats-for-factor"></a> forcats:  for factor</h1><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>factor(x,levels,labels,ordered)</td><td></td></tr><tr><td>as_factor(x)</td><td></td></tr><tr><td>fct_expand(f, …)</td><td>添加更多级别</td></tr><tr><td>fct_explicit_na(f, na_level = “(Missing)”)</td><td>为缺失值提供因子水平</td></tr><tr><td>fct_c(…)</td><td>组合factor</td></tr><tr><td>fct_count(f, sort = FALSE)</td><td>统计各水平记录数</td></tr><tr><td>fct_unify(fs, levels = lvls_union(fs))</td><td>统一一系列factor中的水平</td></tr><tr><td>fct_drop(f, only)</td><td>删除未使用的水平</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> forcats </tag>
            
            <tag> factor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--tidyr</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--tidyr.html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--tidyr.html</url>
      
        <content type="html"><![CDATA[<p><strong>tidyr</strong>: Easily tidy data with spread and gather functions.</p><a id="more"></a><h1 id="reshape-data"><a class="markdownIt-Anchor" href="#reshape-data"></a> Reshape Data</h1><ul><li><strong>gather将多列聚集成键值对(key-value pairs)</strong> <em>(reshap2::melt)</em><br><code>gather(data,key, value, ..., na.rm = FALSE, convert = FALSE,factor_key = FALSE)</code></li></ul><blockquote><p>参数：<br><strong>key, value:</strong> 要聚合成的新key,value列的名字<br><strong>… :</strong>  要gather的列名. （选择x到z的所有列 <code>x:z</code>, 除了y  <code>-y</code>）</p></blockquote><ul><li><strong>spread 将key扩展成多列，value为要显示的值</strong>  <em>(reshap2::dcast)</em><br><code>spread(data, key, value, fill = NA , drop = TRUE,sep = NULL)</code></li></ul><blockquote><p>说明：</p><ol><li>若行和key组成的索引不唯一，报错</li><li>sep: If NULL, 列名为变量key的值. If non-NULL, 列名为 <code>&lt;key_name&gt;&lt;sep&gt;&lt;key_value&gt;</code></li></ol></blockquote><h1 id="split-or-unit-cells"><a class="markdownIt-Anchor" href="#split-or-unit-cells"></a> Split or Unit Cells</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">separate(data, col, into, sep, remove = <span class="literal">TRUE</span>)  <span class="comment">#单列分割成多列</span></span><br><span class="line">separate_rows(data, <span class="keyword">...</span>, sep = <span class="string">"[^[:alnum:].]+"</span>, convert = <span class="literal">FALSE</span>)  <span class="comment">#当列分裂成多行</span></span><br><span class="line">unite(data,col,sep =”_”,remove = <span class="literal">TRUE</span>)  <span class="comment">#多列联合成单列</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line">table3 %&gt;% </span><br><span class="line">  separate(rate, into = c(<span class="string">"cases"</span>, <span class="string">"population"</span>), convert = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><h1 id="handle-missing-values"><a class="markdownIt-Anchor" href="#handle-missing-values"></a> Handle Missing Values</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">replace_na(data, replace = list() )</span><br><span class="line">drop_na(data)</span><br><span class="line">fill(data, <span class="keyword">...</span>, .direction = c(<span class="string">"down"</span>, <span class="string">"up"</span>))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 数据清洗 </tag>
            
            <tag> tidyr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Common)--R语言入门</title>
      <link href="/posts/R/RNotebook(Common)--R-base.html"/>
      <url>/posts/R/RNotebook(Common)--R-base.html</url>
      
        <content type="html"><![CDATA[<p>**说明：**本节中大部分内容摘自书籍《R语言实战（第2版）》</p><a id="more"></a><h1 id="rstudio-take-control-of-your-r-code"><a class="markdownIt-Anchor" href="#rstudio-take-control-of-your-r-code"></a> RStudio: Take control of your R code</h1><p><img alt="rstudio" data-src="/images/rstudio.png"></p><p>RStudio是R的集成开发环境（IDE）。它包括一个控制台，支持直接代码执行的语法高亮编辑器，以及绘图，历史记录，调试和工作区管理工具。</p><p>RStudio可用于开源和商业版本，并可在桌面（Windows，Mac和Linux）或连接到RStudio Server或RStudio Server Pro（Debian / Ubuntu，RedHat / CentOS和SUSE Linux）的浏览器上运行。</p><p><a href="https://blog.csdn.net/qingchongxinshuru/article/details/52003704" target="_blank" rel="noopener">在 RStudio 下使用 R 的基本功能</a><br><a href="https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf" target="_blank" rel="noopener">RStudio参考卡片</a></p><h1 id="数据处理一般流程"><a class="markdownIt-Anchor" href="#数据处理一般流程"></a> 数据处理一般流程</h1><p><img alt="1" data-src="/images/Rflow.png"></p><h1 id="r-数据结构"><a class="markdownIt-Anchor" href="#r-数据结构"></a> R 数据结构</h1><p>R拥有许多用于存储数据的对象类型，包括标量、向量、矩阵、数组、数据框和列表。<br><img alt="数据结构" data-src="/images/R2.png"></p><p><strong>1. 向量</strong><br>向量是用于存储数值型、字符型或逻辑型数据的一维数组。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">6</span>, -<span class="number">2</span>, <span class="number">4</span>) </span><br><span class="line">b &lt;- c(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>)</span><br><span class="line">c &lt;- c(<span class="literal">TRUE</span>, <span class="literal">TRUE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>) </span><br><span class="line"></span><br><span class="line">d&lt;-<span class="number">1</span>:<span class="number">10</span> <span class="comment">#生成1-10整数向量</span></span><br></pre></td></tr></table></figure><p><strong>2. 矩阵</strong><br>矩阵是一个二维数组，只是每个元素都拥有相同的模式（数值型、字符型或逻辑型）。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myymatrix &lt;- matrix(vector, nrow=number_of_rows,ncol=number_of_columns, byrow=logical_value, </span><br><span class="line">  dimnames=list(char_vector_rownames, char_vector_colnames))</span><br></pre></td></tr></table></figure><p><strong>3. 数组</strong><br>数组（array）与矩阵类似，但是维度可以大于2。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myarray &lt;- array(vector, dimensions, dimnames)</span><br></pre></td></tr></table></figure><p><strong>4. 数据框</strong><br>由于不同的列可以包含不同模式（数值型、字符型等）的数据，数据框的概念较矩阵来说更 为一般。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mydata &lt;- data.frame(col1, col2, col3,<span class="keyword">...</span>)</span><br></pre></td></tr></table></figure><p><strong>5. 因子</strong><br>变量可归结为名义型、有序型或连续型变量。名义型变量是没有顺序之分的类别 变量。有序型变量表示一种顺序关系，而非数量关系。<br>类别（名义型）变量和有序类别（有序型）变量在R中称为因子（factor）。因子在R中非 常重要，因为它决定了数据的分析方式以及如何进行视觉呈现。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">factor(x = character(), levels, labels = levels,</span><br><span class="line">       exclude = <span class="literal">NA</span>, ordered = is.ordered(x), nmax = <span class="literal">NA</span>)</span><br></pre></td></tr></table></figure><p><strong>6. 列表</strong></p><p>列表（list）是R的数据类型中为复杂的一种。一般来说，列表就是一些对象（或成分， component）的有序集合。列表允许你整合若干（可能无关的）对象到单个对象名下。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mylist &lt;- list(object1, object2, <span class="keyword">...</span>)</span><br></pre></td></tr></table></figure><p><strong>7. 日期值</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">as.Date(x, <span class="string">"input_format"</span>)</span><br></pre></td></tr></table></figure><p>日期值的默认输入格式为<code>yyyy-mm-dd</code>。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mydates &lt;- as.Date(c(<span class="string">"2007-06-22"</span>, <span class="string">"2004-02-13"</span>),<span class="string">"%Y-%m-%d"</span>)</span><br></pre></td></tr></table></figure><p>format符号| 含义 |示例<br>::------|::------|::------<br>%d |数字表示的日期（0~31） |01~31<br>%a |缩写的星期名| Mon<br>%A |非缩写星期名 |Monday<br>%m |月份（00~12）| 00~12<br>%b |缩写的月份 |Jan<br>%B |非缩写月份 |January<br>%y |两位数的年份 |07<br>%Y |四位数的年份 |2007</p><p><strong>8. 索引和切片</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以data.frame为例</span></span><br><span class="line">df&lt;-data.frame(x=<span class="number">1</span>:<span class="number">10</span>,y=rnorm(<span class="number">10</span>, mean=<span class="number">0</span>, sd=<span class="number">1</span>))</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">用法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>df[3,5]</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>df['x']</code></td><td style="text-align:left">返回x列，data.frame类型</td></tr><tr><td style="text-align:left"><code>df$x , df[[x]]</code></td><td style="text-align:left">返回向量类型</td></tr><tr><td style="text-align:left"><code>df[c(1,3,5), ]</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>df[-(1:5),]</code></td><td style="text-align:left">除了1-5列（R 中<code>-</code>是排除的意思）</td></tr><tr><td style="text-align:left"><code>df[x&gt;3,]</code></td><td style="text-align:left">逻辑索引</td></tr><tr><td style="text-align:left"><code>df[x %in% c(3,5))]</code></td><td style="text-align:left"></td></tr></tbody></table><h1 id="r-运算符"><a class="markdownIt-Anchor" href="#r-运算符"></a> R 运算符</h1><table><thead><tr><th style="text-align:left">数学运算</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>+, -, *, /</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>^, **</code></td><td style="text-align:left">求幂</td></tr><tr><td style="text-align:left"><code>x%%y</code></td><td style="text-align:left">求余（x mod y）。5%%2 的结果为 1</td></tr><tr><td style="text-align:left"><code>x%/%y</code></td><td style="text-align:left">整数除法。5%/%2 的结果为 2</td></tr></tbody></table><table><thead><tr><th style="text-align:left">逻辑运算</th></tr></thead><tbody><tr><td style="text-align:left"><code>&lt; ,&lt;=</code></td></tr><tr><td style="text-align:left"><code>&gt; , &gt;=</code></td></tr><tr><td style="text-align:left"><code>== , !=</code></td></tr></tbody></table><h1 id="概率函数"><a class="markdownIt-Anchor" href="#概率函数"></a> 概率函数</h1><p>在R中，概率函数统一格式为：<code>[dpqr]distribution_abbreviation()</code><br>其中第一个字母表示其所指分布的某一方面</p><table><thead><tr><th style="text-align:left">首字母</th><th style="text-align:left">说明</th><th style="text-align:left">主参数</th><th style="text-align:left">返回值</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left">p</td><td style="text-align:left">分布函数(distribution function)</td><td style="text-align:left">分位数x值</td><td style="text-align:left">概率值F(x)=P{X&lt;=x}</td><td style="text-align:left">pnorm(q)</td></tr><tr><td style="text-align:left">d</td><td style="text-align:left">密度函数(density)</td><td style="text-align:left">分位数x值</td><td style="text-align:left">密度值f(x)=dF/dx</td><td style="text-align:left">dnorm(x)</td></tr><tr><td style="text-align:left">q</td><td style="text-align:left">分位数函数(quantile function)</td><td style="text-align:left">概率P值</td><td style="text-align:left">分位数x</td><td style="text-align:left">qnorm§</td></tr><tr><td style="text-align:left">r</td><td style="text-align:left">生成随机数</td><td style="text-align:left">随机数n</td><td style="text-align:left">随机向量密度值</td><td style="text-align:left">rnorm(n)</td></tr></tbody></table><p><strong>概率分布</strong></p><table><thead><tr><th style="text-align:left">分布名称</th><th style="text-align:left">缩写</th><th style="text-align:left">分布名称</th><th style="text-align:left">缩写</th></tr></thead><tbody><tr><td style="text-align:left">Beta 分布</td><td style="text-align:left">beta</td><td style="text-align:left">Logistic 分布</td><td style="text-align:left">logis</td></tr><tr><td style="text-align:left">二项分布</td><td style="text-align:left">binom</td><td style="text-align:left">多项分布</td><td style="text-align:left">multinom</td></tr><tr><td style="text-align:left">柯西分布</td><td style="text-align:left">cauchy</td><td style="text-align:left">负二项分布</td><td style="text-align:left">nbinom</td></tr><tr><td style="text-align:left">(非中心)卡方分布</td><td style="text-align:left">chsiq</td><td style="text-align:left">正态分布</td><td style="text-align:left">norm</td></tr><tr><td style="text-align:left">指数分布</td><td style="text-align:left">exp</td><td style="text-align:left">泊松分布</td><td style="text-align:left">pois</td></tr><tr><td style="text-align:left">F分布</td><td style="text-align:left">f</td><td style="text-align:left">Wilcoxon 符号秩分布</td><td style="text-align:left">signrank</td></tr><tr><td style="text-align:left">Gamma分布</td><td style="text-align:left">gamma</td><td style="text-align:left">t分布</td><td style="text-align:left">t</td></tr><tr><td style="text-align:left">几何分布</td><td style="text-align:left">geom</td><td style="text-align:left">均匀分布</td><td style="text-align:left">unif</td></tr><tr><td style="text-align:left">超几何分布</td><td style="text-align:left">hyper</td><td style="text-align:left">Weibull 分布</td><td style="text-align:left">weibull</td></tr><tr><td style="text-align:left">对数正态分布</td><td style="text-align:left">lnorm</td><td style="text-align:left">Wilcoxon 秩和分布</td><td style="text-align:left">wilcox</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">runif(n, min=<span class="number">0</span>, max=<span class="number">1</span>) <span class="comment">#均匀分布</span></span><br><span class="line">rnorm(n, mean=<span class="number">0</span>, sd=<span class="number">1</span>) <span class="comment">#正态分布</span></span><br></pre></td></tr></table></figure><h1 id="控制语句与循环语句"><a class="markdownIt-Anchor" href="#控制语句与循环语句"></a> 控制语句与循环语句</h1><p><strong>控制语句</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if(cond) expr</span><br><span class="line">if(cond) cons.expr else alt.expr</span><br><span class="line">if...else if...else</span><br><span class="line">ifelse(test, yes, no)</span><br><span class="line"></span><br><span class="line">switch(expr, ...)</span><br><span class="line">  expr：可以为一个数字或字符串</span><br><span class="line">  ...:为一系列选择项列</span><br><span class="line">  若expr为字符串，...列表项为name_i=expr_i</span><br><span class="line">  若expr为数字，...列表项按顺序输出</span><br></pre></td></tr></table></figure><p><strong>循环语句</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var in seq) expr</span><br><span class="line">while(cond) expr</span><br><span class="line">repeat expr</span><br></pre></td></tr></table></figure><p><strong>循环语句关键字</strong></p><p><code>break</code>：跳出整个循环语句<br><code>continue</code>: 跳出本次循环<br><code>next</code>：跳出本次loop</p><h1 id="自定义函数"><a class="markdownIt-Anchor" href="#自定义函数"></a> 自定义函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function( arglist ) &#123;</span><br><span class="line">  expr</span><br><span class="line">  return(object) &#125;</span><br></pre></td></tr></table></figure><blockquote><p>… (dot-dot-dot)：此特殊参数可以捕获任何数量的参数</p></blockquote><p>example:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;&quot;%s*%&quot; &lt;- function(x,y) rep(x,y) #自定义二元符号</span><br><span class="line">&gt;&gt;&gt;&quot;a&quot;%s*%5</span><br><span class="line">&gt;&gt;&gt;&quot;aaaaa&quot;</span><br></pre></td></tr></table></figure><h1 id="调试"><a class="markdownIt-Anchor" href="#调试"></a> 调试</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">用法</th></tr></thead><tbody><tr><td style="text-align:left">stop(message)</td><td style="text-align:left">停止执行当前表达式返回message(常与if配合检查自定义函数参数)</td></tr><tr><td style="text-align:left">stopifnot(logit1,logit2,logit3…)</td><td style="text-align:left">检查每个参数为TRUE，否则停止执行当前表达式返回message</td></tr></tbody></table><h1 id="拟合线性模型formula"><a class="markdownIt-Anchor" href="#拟合线性模型formula"></a> 拟合线性模型formula</h1><p>在R中，拟合线性模型基本的函数就是lm()，格式为：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myfit &lt;- lm(formula, data)</span><br></pre></td></tr></table></figure><blockquote><p>formula指要拟合的模型形式，<br>data是一个数据框，包含了用于拟合模型的数据。<br>结果对象（本例中是myfit）存储在一个列表中，包含了所拟合模型的大量信息。</p></blockquote><p>表达式（formula） 形式如下： <code>Y ~ X1 + X2 + ... + Xk</code><br><code>~</code>左边为响应变量，右边为各个预测变量，预测变量之间用<code>+</code>符号分隔。</p><table><thead><tr><th style="text-align:left">formula常用符号</th><th style="text-align:left">说明</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td style="text-align:left">~</td><td style="text-align:left">分隔符，左边为响应变量，右边为解释变量</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">+</td><td style="text-align:left">预测变量分隔符</td><td style="text-align:left">y~x+y</td></tr><tr><td style="text-align:left">:</td><td style="text-align:left">预测变量交互项</td><td style="text-align:left">y~x+y+x:y</td></tr><tr><td style="text-align:left">*</td><td style="text-align:left">包含所有交互项的简洁方式</td><td style="text-align:left">代码y~ x * z可展开为y ~ x + z + x:z</td></tr><tr><td style="text-align:left">^</td><td style="text-align:left">交互项的最高次数</td><td style="text-align:left">代码 y ~ (x + z + w)^2 可展开为 y ~ x + z + w + x:z + x:w + z:w</td></tr><tr><td style="text-align:left">.(dot)</td><td style="text-align:left">除因变量外的所有变量</td><td style="text-align:left">y~.</td></tr><tr><td style="text-align:left">-</td><td style="text-align:left">移除一项</td><td style="text-align:left">y~x<em>z</em>w–x:z:w可展开为 y ~ (x + z + w)^2</td></tr><tr><td style="text-align:left">-1</td><td style="text-align:left">移除截距</td><td style="text-align:left">y~x-1</td></tr><tr><td style="text-align:left">I()</td><td style="text-align:left">算术</td><td style="text-align:left">y~x+I(x^2)</td></tr><tr><td style="text-align:left">function</td><td style="text-align:left">数学函数</td><td style="text-align:left">log(y) ~ x + z + w</td></tr></tbody></table><h1 id="r语言可视化"><a class="markdownIt-Anchor" href="#r语言可视化"></a> R语言可视化</h1><p>除了基础图形，grid、lattice和ggplot2软件包也提供了图形系统，它们克服了R基础图 形系统的低效性，大大扩展了R的绘图能力。</p><ul><li>grid图形系统可以很容易地控制图形基础单元，给予编程者创作图形的极大灵活性。</li><li>lattice包通过一维、二维或三维条件绘图，即所谓的网格图形（trellis graph）来对多元变量关 系进行直观展示。</li><li>ggplot2包极大地扩展 了R绘图的范畴，提高了图形的质量。</li></ul><table><thead><tr><th style="text-align:left">系统</th><th style="text-align:left">基础安装中是否包含</th><th style="text-align:left">是否需要显式加载</th></tr></thead><tbody><tr><td style="text-align:left">base</td><td style="text-align:left">是</td><td style="text-align:left">否</td></tr><tr><td style="text-align:left">grid</td><td style="text-align:left">是</td><td style="text-align:left">是</td></tr><tr><td style="text-align:left">lattice</td><td style="text-align:left">是</td><td style="text-align:left">是</td></tr><tr><td style="text-align:left">ggplot2</td><td style="text-align:left">否</td><td style="text-align:left">是</td></tr></tbody></table><h1 id="datatable-和-tidyverse"><a class="markdownIt-Anchor" href="#datatable-和-tidyverse"></a> data.table 和 tidyverse</h1><p><strong>data.table</strong><br>R语言data.table包是自带包data.frame的升级版，用于数据框格式数据的处理，最大的特点快。<br>包括两个方面，一方面是写的快，代码简洁，只要一行命令就可以完成诸多任务。<br>另一方面是处理快，内部处理的步骤进行了程序上的优化，使用多线程，甚至很多函数是使用C写的，大大加快数据运行速度。因此，在对大数据处理上，使用data.table无疑具有极高的效率。</p><p><strong>tidyverse</strong><br><img alt="hadley" data-src="/images/Hadley.png"></p><p>tidyverse是一系列包的组合，构建了一套完整的数据分析生态链，提供了一套整洁的数据导入，分析和建模方法，刷新了R语言原有的数据科学体系。</p><p>作者[<strong>Hadley Wickham</strong>][hd]在R语言数据科学领域是个鼎鼎有名的大人物，被称为<strong>一个改变了R的人</strong>。<br>[hd]: <a href="http://hadley.nz/" target="_blank" rel="noopener">http://hadley.nz/</a></p>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Common </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(IDE)--常用的Python IDE</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--common-editor.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--common-editor.html</url>
      
        <content type="html"><![CDATA[<p>集成开发环境（IDE，Integrated Development Environment ）是用于提供程序开发环境的应用程序，一般包括代码编辑器、编译器、调试器和图形用户界面等工具。</p><a id="more"></a><blockquote><p>本文内容摘自MOOC.北京理工大学Python课程</p></blockquote><p>常用的 Python IDE 主要有以下几款（本文主要介绍其中四款）：</p><table><thead><tr><th style="text-align:left">文本工具类IDE</th><th style="text-align:left">集成工具类IDE</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Python IDLE</strong></td><td style="text-align:left"><strong>PyCharm</strong></td></tr><tr><td style="text-align:left">Notepad++</td><td style="text-align:left">Wing</td></tr><tr><td style="text-align:left"><strong>Sublime Text</strong></td><td style="text-align:left">PyDev &amp; Eclipse</td></tr><tr><td style="text-align:left">Vim &amp; Emacs</td><td style="text-align:left">Visual Studio</td></tr><tr><td style="text-align:left">Atom</td><td style="text-align:left"><strong>Anaconda</strong></td></tr><tr><td style="text-align:left">Komodo Edit</td><td style="text-align:left">Canopy</td></tr></tbody></table><hr><p><a href="https://www.python.org/downloads/" target="_blank" rel="noopener"><strong>Python IDLE</strong></a><img width="20%" height="20%" align="right" data-src="/images/python.png"></p><p>适用于</p><ul><li>Python入门</li><li>功能简单直接</li><li>少量代码</li></ul><p><a href="http://www.sublimetext.com/" target="_blank" rel="noopener"><strong>Sublime Text</strong></a><img width="10%" height="10%" align="right" data-src="/images/sublime.jpg"></p><ul><li>专为程序员开发的第三方专用编程工具</li><li>专业编程体验（支持自动补全、提示、语法高亮等插件）</li><li>多种编程风格（主题丰富）</li><li>工具非注册免费使用</li></ul><p><a href="https://www.jetbrains.com/pycharm/" target="_blank" rel="noopener"><strong>PyCharm</strong></a><img width="10%" height="10%" align="right" data-src="/images/pc.jpg"></p><ul><li>JetBrains 公司开发，社区版免费</li><li>简单，集成度高</li><li>适合较复杂工程</li></ul><blockquote><p><strong>Linux系统自定义pycharm命令</strong></p><ol><li>shell窗口打开配置文件<code>sudo ~/.bashrc</code></li><li>添加语句<code>alias pycharm = &quot;bash /download/pycharm-community-2018.1.4/bin/pycharm.sh&quot;</code>(<strong>pycharm.sh所在的路径</strong>)</li><li>重新加载<code>source ~/.bashrc</code></li><li>shell命令行输入<code>pycharn</code>即可打开</li></ol></blockquote><p><a href="https://www.anaconda.com/download/" target="_blank" rel="noopener"><strong>Anaconda</strong></a><img width="15%" height="15%" align="right" data-src="/images/anaconda.png"></p><ul><li>开源的Python发行版本。</li><li>其包含了conda、Python等180多个科学包及其依赖项。</li><li>内含Anaconda Prompt，命令交互窗口，不需要设置路径。</li><li>集成Jupyter Notebook 和 Spyder等主流工具</li><li>适合数据计算领域开发</li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> IDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Communicate)--shiny</title>
      <link href="/posts/R/RNotebook(Communicate)--shiny.html"/>
      <url>/posts/R/RNotebook(Communicate)--shiny.html</url>
      
        <content type="html"><![CDATA[<p>Shiny是来自RStudio的软件包，它使得用R构建交互式Web应用程序变得非常简单。</p><a id="more"></a><h1 id="build-an-app"><a class="markdownIt-Anchor" href="#build-an-app"></a> Build an App</h1><p>A <strong>Shiny app</strong> is a web page (<strong>UI</strong>) connected to a<br>computer running a live R session (<strong>Server</strong>)</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(shiny)</span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> numericInput(inputId = <span class="string">"n"</span>,  </span><br><span class="line"> <span class="string">"Sample size"</span>, value = <span class="number">25</span>),  </span><br><span class="line"> plotOutput(outputId = <span class="string">"hist"</span>) </span><br><span class="line"> )</span><br><span class="line">server &lt;- <span class="keyword">function</span>(input, output) &#123;</span><br><span class="line"> output$hist &lt;- renderPlot(&#123;   </span><br><span class="line"> hist(rnorm(input$n)) &#125;)    </span><br><span class="line"> &#125;</span><br><span class="line">shinyApp(ui = ui, server = server)</span><br></pre></td></tr></table></figure><ol><li><strong>Define UI ----(支持HTML标签语法)</strong></li></ol><ul><li><code>ui &lt;- fluidPage()</code>定义HTML用户界面</li><li>添加input到ui ，用<code>&lt;type&gt;Input</code>系列函数</li><li>添加output到ui，用<code>&lt;type&gt;Output</code>系列函数</li></ul><ol start="2"><li><strong>Define server logic</strong></li></ol><ul><li><code>server &lt;- function(input, output){}</code>定义R对象和UI组件的连接方式</li><li>用<code>input$&lt;inputId&gt;</code>或<code>output$&lt;outputId&gt;</code>提供数据给UI组件</li><li><code>render&lt;type&gt;</code>赋值给<code>output$&lt;id&gt;</code>输出给UI output 组件</li></ul><ol start="3"><li><strong>Run the app</strong></li></ol><ul><li>combines ui and server</li><li>Run <code>shinyApp(ui = ui, server = server)</code></li></ul><ol start="4"><li><p><strong>Save</strong><br>保存成一个<strong>app.R</strong> 或者拆分成 <strong>ui.R</strong> 和<strong>serve.R</strong>（shinyApp不需要保存）</p></li><li><p><strong>Share your APP</strong></p></li></ol><ul><li>注册免费或者专业账户 <a href="http://shinyapps.io" target="_blank" rel="noopener">http://shinyapps.io</a></li><li>在RStudio IDE点击<strong>Publish</strong> 按钮或者运行代码：<br><code>rsconnect::deployApp(&quot;&lt;path to directory&gt;&quot;)</code></li></ul><h1 id="inputs"><a class="markdownIt-Anchor" href="#inputs"></a> Inputs</h1><p>使用<code>input$&lt;inputId&gt;</code>获取input当前value</p><table><thead><tr><th style="text-align:left">input</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">actionButton(inputId, label, icon,…)</td><td style="text-align:left">按钮</td></tr><tr><td style="text-align:left">submitButton(text, icon)</td><td style="text-align:left">提交按钮</td></tr><tr><td style="text-align:left">radioButtons(inputId, label,choices, selected, inline)</td><td style="text-align:left">单选按钮</td></tr><tr><td style="text-align:left">checkboxGroupInput(inputId, label,choices, selected, inline)</td><td style="text-align:left">复选框组合</td></tr><tr><td style="text-align:left">checkboxInput(inputId, label,value)</td><td style="text-align:left">单个复选框</td></tr><tr><td style="text-align:left">dateInput(inputId, label, value, min,max, format, <br>startview, weekstart,language)</td><td style="text-align:left">日期单选</td></tr><tr><td style="text-align:left">dateRangeInput(inputId, label,start, end, min, max, format,<br>startview, weekstart, language,separator)</td><td style="text-align:left">日期复选</td></tr><tr><td style="text-align:left">numericInput(inputId, label, value,min, max, step)</td><td style="text-align:left">数字输入文本框</td></tr><tr><td style="text-align:left">passwordInput(inputId, label,value)</td><td style="text-align:left">密码输入文本框</td></tr><tr><td style="text-align:left">textInput(inputId, label, value)</td><td style="text-align:left">文本输入框</td></tr><tr><td style="text-align:left">selectInput(inputId, label, choices,selected, multiple, <br>selectize, width,size)</td><td style="text-align:left">(also selectizeInput())下拉列表</td></tr><tr><td style="text-align:left">sliderInput(inputId, label, min, max,value, step, <br>round, format, locale,ticks, animate, width, sep, pre,post)</td><td style="text-align:left">滚动条</td></tr><tr><td style="text-align:left">actionLink(inputId, label, icon, …)</td><td style="text-align:left">链接</td></tr><tr><td style="text-align:left">fileInput(inputId, label, multiple,accept)</td><td style="text-align:left">文件选择</td></tr></tbody></table><h1 id="outputs"><a class="markdownIt-Anchor" href="#outputs"></a> Outputs</h1><p><code>render&lt;type&gt;()</code> and <code>&lt;type&gt;Output()</code> functions work together to add R output to the UI</p><table><thead><tr><th style="text-align:left"><code>render&lt;type&gt;()</code></th><th style="text-align:left"><code>&lt;type&gt;Output()</code></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">DT::renderDataTable(expr, options,callback, escape, env, quoted)</td><td style="text-align:left">dataTableOutput(outputId, icon, …)</td><td style="text-align:left">dataTable</td></tr><tr><td style="text-align:left">renderImage(expr, env, quoted,deleteFile)</td><td style="text-align:left">imageOutput(outputId, width, height,<br>click, dblclick, hover, hoverDelay, inline,<br>hoverDelayType, brush, clickId, hoverId)</td><td style="text-align:left">图片</td></tr><tr><td style="text-align:left">renderPlot(expr, width, height, res, …,env, quoted, func)</td><td style="text-align:left">plotOutput(outputId, width, height, click,<br>dblclick, hover, hoverDelay, inline,<br>hoverDelayType, brush, clickId, hoverId)</td><td style="text-align:left">作图</td></tr><tr><td style="text-align:left">renderPrint(expr, env, quoted, func,width)</td><td style="text-align:left">verbatimTextOutput(outputId)</td><td style="text-align:left">打印</td></tr><tr><td style="text-align:left">renderTable(expr,…, env, quoted, func)</td><td style="text-align:left">tableOutput(outputId)</td><td style="text-align:left">表格输出</td></tr><tr><td style="text-align:left">renderText(expr, env, quoted, func)</td><td style="text-align:left">textOutput(outputId, container, inline)</td><td style="text-align:left">文本标签输出</td></tr><tr><td style="text-align:left">renderUI(expr, env, quoted, func)</td><td style="text-align:left">uiOutput(outputId, inline, container, …)<br>htmlOutput(outputId, inline, container, …)</td><td style="text-align:left"></td></tr></tbody></table><h1 id="layouts布局"><a class="markdownIt-Anchor" href="#layouts布局"></a> Layouts(布局)</h1><p>合并多个元素为单一元素</p><table><thead><tr><th style="text-align:left">panel</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">absolutePanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">conditionalPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">fixedPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">headerPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">inputPanel()</td><td style="text-align:left">输入面板</td></tr><tr><td style="text-align:left">mainPanel()</td><td style="text-align:left">主面板</td></tr><tr><td style="text-align:left">navlistPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sidebarPanel()</td><td style="text-align:left">工具栏面板</td></tr><tr><td style="text-align:left">tabPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">tabsetPanel()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">titlePanel()</td><td style="text-align:left">标题面板</td></tr><tr><td style="text-align:left">wellPanel()</td><td style="text-align:left"></td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wellPanel(</span><br><span class="line">  dateInput(<span class="string">"a"</span>, <span class="string">""</span>),</span><br><span class="line">  submitButton()</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>UI布局</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fluidRow()</span></span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> fluidRow(column(width = <span class="number">4</span>),column(width = <span class="number">2</span>, offset = <span class="number">3</span>)),</span><br><span class="line"> fluidRow(column(width = <span class="number">12</span>))</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_fluid.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flowLayout</span></span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> flowLayout( <span class="comment"># object 1,</span></span><br><span class="line"> <span class="comment"># object 2, # object 3 )</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_flow.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sidebarLayout</span></span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> sidebarLayout(</span><br><span class="line"> sidebarPanel(),  <span class="comment"># 侧边栏</span></span><br><span class="line"> mainPanel()      <span class="comment"># 主面板</span></span><br><span class="line"> )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_panel.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># splitLayout</span></span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> splitLayout( <span class="comment"># object 1,</span></span><br><span class="line"> <span class="comment"># object 2</span></span><br><span class="line"> )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_split.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># verticalLayout</span></span><br><span class="line">ui &lt;- fluidPage(</span><br><span class="line"> verticalLayout( <span class="comment"># object 1,</span></span><br><span class="line"> <span class="comment"># object 2,</span></span><br><span class="line"> <span class="comment"># object 3</span></span><br><span class="line"> )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_vertical.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tabPanel</span></span><br><span class="line">ui &lt;- fluidPage( tabsetPanel(</span><br><span class="line"> tabPanel(<span class="string">"tab 1"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 2"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 3"</span>, <span class="string">"contents"</span>)))</span><br><span class="line">ui &lt;- fluidPage( navlistPanel(</span><br><span class="line"> tabPanel(<span class="string">"tab 1"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 2"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 3"</span>, <span class="string">"contents"</span>)))</span><br><span class="line">ui &lt;- navbarPage(title = <span class="string">"Page"</span>,</span><br><span class="line"> tabPanel(<span class="string">"tab 1"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 2"</span>, <span class="string">"contents"</span>),</span><br><span class="line"> tabPanel(<span class="string">"tab 3"</span>, <span class="string">"contents"</span>))</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/shiny_tabs.png"></p><h1 id="reactivity反应"><a class="markdownIt-Anchor" href="#reactivity反应"></a> Reactivity(反应)</h1><table><thead><tr><th style="text-align:left">Reactivity</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>input$&lt;inputId&gt;</code> functions<br>reactiveValues(…)</td><td style="text-align:left">input接收的值被储存在<code>input$&lt;inputId&gt;</code>中</td></tr><tr><td style="text-align:left"><code>render&lt;type&gt;()</code> functions<br><code>output$&lt;outputId&gt;</code></td><td style="text-align:left">将结果保存到<code>output$&lt;outputId&gt;</code></td></tr><tr><td style="text-align:left">isolate(expr)</td><td style="text-align:left">抑制反应</td></tr><tr><td style="text-align:left">observeEvent(eventExpr, handlerExpr,…)</td><td style="text-align:left">触发主观代码</td></tr><tr><td style="text-align:left">reactive(x, env, quoted,label, domain)</td><td style="text-align:left">模块化反应机制</td></tr><tr><td style="text-align:left">eventReactive(eventExpr,valueExpr,…)</td><td style="text-align:left">延迟反应</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Communicate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> shiny </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Visualise)--matplotlib</title>
      <link href="/posts/python/PythonNotebook(Visualise)--matplotlib.html"/>
      <url>/posts/python/PythonNotebook(Visualise)--matplotlib.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://matplotlib.org/api/index.html" target="_blank" rel="noopener">Matplotlib</a> 是一个Python 2D绘图库，它可以在各种平台上以各种硬拷贝格式和交互式环境生成出具有出版品质的图形。 Matplotlib可用于Python脚本，Python和IPython shell，Jupyter笔记本，Web应用程序服务器和四个图形用户界面工具包</p><a id="more"></a><p><img alt="figure" data-src="/images/matplotlib/figure.jpg"></p><h1 id="pyplot"><a class="markdownIt-Anchor" href="#pyplot"></a> Pyplot</h1><p>matplotlib.pyplot是matplotlib的基于状态的接口。它提供了类似MATLAB的绘图方式。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matploblib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure><h2 id="workflow"><a class="markdownIt-Anchor" href="#workflow"></a> Workflow</h2><ul><li>Step 1 Prepare data</li><li>Step 2 Create figure</li><li>Step 3 Add axes</li><li>Step 4 Customize plot</li><li>Step 5 Save plot</li><li>Step 6 Show plot</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">30</span>] </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fig = plt.figure() </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax = fig.add_subplot(<span class="number">111</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax.plot(x, y, color=<span class="string">'lightblue'</span>, linewidth=<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax.set_xlim(<span class="number">1</span>, <span class="number">6.5</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.savefig(<span class="string">'foo.png'</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.show()</span><br></pre></td></tr></table></figure><h2 id="figure-and-axes"><a class="markdownIt-Anchor" href="#figure-and-axes"></a> Figure and Axes</h2><p><img alt="figure2" data-src="/images/matplotlib/figure2.png"><br>一般通过<code>get_&lt;part&gt;</code>方法获得组件属性，<code>set_&lt;part&gt;</code>方法重设组件。</p><h2 id="create-figure"><a class="markdownIt-Anchor" href="#create-figure"></a> Create Figure</h2><p><code>plt.figure(num=None, figsize=None, dpi=None, facecolor=None, edgecolor,...)</code></p><blockquote><p>Parameters:<br>num : (integer or string) figure编号<br>figsize : (tuple of integers) figure尺寸<br>dpi : (integer) 分辨率</p></blockquote><h2 id="add-axes"><a class="markdownIt-Anchor" href="#add-axes"></a> Add Axes</h2><p><code>fig.add_subplot(nrows, ncols, plot_number)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig=plt.figure()</span><br><span class="line">fig.add_subplot(<span class="number">221</span>) <span class="comment"># row-col-num</span></span><br></pre></td></tr></table></figure><blockquote><p>nrows, ncols, plot_number: 分割figure行数和列数，axes的位置</p></blockquote><p><code>fig.add_axes(rect)</code> 可以添加图中图</p><blockquote><p>Parameters:<br>rect : [left, bottom, width, height]<br>projection :   [‘aitoff’ | ‘hammer’ | ‘lambert’ | ‘mollweide’ | ‘polar’ | ‘rectilinear’], optional<br>polar : boolean, optional</p></blockquote><p><code>plt.subplot2grid(shape, loc, rowspan=1, colspan=1)</code> 建造不规则axes</p><blockquote><p>Parameters:<br>shape: figue分割<br>loc: 原点位置，基于shape分割结果<br>rowspan, colspan: 行或列的跨度</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ax1 = plt.subplot2grid((<span class="number">3</span>,<span class="number">3</span>), (<span class="number">0</span>,<span class="number">0</span>), colspan=<span class="number">3</span>)  </span><br><span class="line">ax2 = plt.subplot2grid((<span class="number">3</span>,<span class="number">3</span>), (<span class="number">1</span>,<span class="number">0</span>), colspan=<span class="number">2</span>)  </span><br><span class="line">ax3 = plt.subplot2grid((<span class="number">3</span>,<span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>), rowspan=<span class="number">2</span>)  </span><br><span class="line">ax4 = plt.subplot2grid((<span class="number">3</span>,<span class="number">3</span>), (<span class="number">2</span>, <span class="number">0</span>))  </span><br><span class="line">ax5 = plt.subplot2grid((<span class="number">3</span>,<span class="number">3</span>), (<span class="number">2</span>, <span class="number">1</span>))  </span><br><span class="line">plt.suptitle(<span class="string">"subplot2grid"</span>)</span><br></pre></td></tr></table></figure><p><img alt="subplot2grid" data-src="/images/matplotlib/subplot2grid.png"></p><p><strong>plt.subplots</strong><br><code>plt.subplots(nrows=1, ncols=1, sharex=False, sharey=False,...)</code> Create a figure and a set of subplots</p><blockquote><p>Parameters:<br>nrows, ncols : (int) 分割figure行数和列数<br>sharex, sharey : bool or {‘none’, ‘all’, ‘row’, ‘col’}, 是否共享坐标轴</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(<span class="number">2</span>,<span class="number">2</span>) </span><br><span class="line">f, (ax1, ax2) = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, sharey=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="plot"><a class="markdownIt-Anchor" href="#plot"></a> Plot</h2><table><thead><tr><th style="text-align:left">常用图形</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">plot(x,y,data)</td><td style="text-align:left">默认折线图</td></tr><tr><td style="text-align:left">scatter(x, y, s, c, marker, cmap)</td><td style="text-align:left">散点图{s:size,c:color}</td></tr><tr><td style="text-align:left">hist(x, bins)</td><td style="text-align:left">直方图</td></tr><tr><td style="text-align:left">bar(x, height, width, fill)</td><td style="text-align:left">柱状图</td></tr><tr><td style="text-align:left">barh(y, height, width, fill)</td><td style="text-align:left">横向柱状图</td></tr><tr><td style="text-align:left">boxplot(y)</td><td style="text-align:left">箱线图</td></tr><tr><td style="text-align:left">violinplot(y)</td><td style="text-align:left">小提琴</td></tr><tr><td style="text-align:left">axhline(y)</td><td style="text-align:left">水平线</td></tr><tr><td style="text-align:left">axvline(x)</td><td style="text-align:left">垂直线</td></tr><tr><td style="text-align:left">contourf(X,Y,Z,N,cmap)</td><td style="text-align:left">等高线填充</td></tr><tr><td style="text-align:left">contour(X,Y,Z,N)</td><td style="text-align:left">等高线线条</td></tr><tr><td style="text-align:left">imshow()</td><td style="text-align:left">热图</td></tr><tr><td style="text-align:left">quiver()</td><td style="text-align:left">2D箭头场</td></tr><tr><td style="text-align:left">streamplot()</td><td style="text-align:left">2D矢量场</td></tr><tr><td style="text-align:left">pie(x, explode, labels, colors)</td><td style="text-align:left">饼图</td></tr><tr><td style="text-align:left">acorr(x)</td><td style="text-align:left">自相关</td></tr><tr><td style="text-align:left">fill(x,y)</td><td style="text-align:left">填充多边形</td></tr><tr><td style="text-align:left">fill_between(x,y)</td><td style="text-align:left">两曲线间填充</td></tr></tbody></table><blockquote><p>Parameters:<br>Alpha<br>Colors©, Color Bars &amp; Color Maps(cmap)<br>Markers: marker , size<br>Line: linestyle(ls), linewidth</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">y=[<span class="number">0</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">0</span>]</span><br><span class="line">fig, axes = plt.subplots(<span class="number">2</span>,<span class="number">2</span>) </span><br><span class="line">axes[<span class="number">0</span>,<span class="number">0</span>].bar([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">axes[<span class="number">1</span>,<span class="number">0</span>].axhline(<span class="number">0.5</span>)</span><br><span class="line">axes[<span class="number">0</span>,<span class="number">1</span>].fill(x,y,color=<span class="string">'blue'</span>)</span><br><span class="line">axes[<span class="number">1</span>,<span class="number">1</span>].fill_between(x,y,color=<span class="string">'yellow'</span>)</span><br></pre></td></tr></table></figure><p><img alt="图形" data-src="/images/matplotlib/img.png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">x=np.linspace(<span class="number">-1</span>,<span class="number">5</span>,<span class="number">500</span>)</span><br><span class="line">y=np.linspace(<span class="number">-5</span>,<span class="number">5</span>,<span class="number">500</span>)</span><br><span class="line">X,Y=np.meshgrid(x, y)</span><br><span class="line">Height=<span class="number">10</span>*np.sin(X)/X-Y**<span class="number">2</span>+X*Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.contourf(X, Y, Height,<span class="number">8</span>, alpha = <span class="number">0.6</span>) <span class="comment"># 填充颜色</span></span><br><span class="line">C = plt.contour(X, Y, Height, <span class="number">8</span>,colors = <span class="string">'black'</span>) <span class="comment"># 绘制等高线</span></span><br><span class="line">plt.clabel(C, inline = <span class="literal">True</span>, fontsize = <span class="number">10</span>) <span class="comment"># 显示各等高线的数据标签</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img alt="等高线" data-src="/images/matplotlib/contourf.png"></p><h2 id="parts-of-axes"><a class="markdownIt-Anchor" href="#parts-of-axes"></a> Parts of Axes</h2><table><thead><tr><th style="text-align:left">Axis(x axis)</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">ax.set_xlabel(xlabel, fontdict=None, labelpad=None)</td><td style="text-align:left">x轴标签</td></tr><tr><td style="text-align:left">ax.set_xticks(ticks, minor=False)</td><td style="text-align:left">x轴刻度</td></tr><tr><td style="text-align:left">ax.set_xticklabels(labels, fontdict=None, minor=False)</td><td style="text-align:left">x轴刻度标签</td></tr><tr><td style="text-align:left">ax.set_xlim(left=None, right=None)</td><td style="text-align:left">x轴限制</td></tr><tr><td style="text-align:left">ax.axis(‘scaled’)</td><td style="text-align:left">xy轴标准</td></tr><tr><td style="text-align:left">ax.set_title(label, fontdict=None, loc=‘center’)</td><td style="text-align:left">loc : {‘center’, ‘left’, ‘right’}, str, optional</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># x轴刻度标签属性设置，其他组件属性设置基本相同</span></span><br><span class="line">xlabel=ax.get_xticklabels()</span><br><span class="line">label.set_fontsize(...)</span><br><span class="line">label.set_bbox(...)</span><br></pre></td></tr></table></figure><p><strong>Spines</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax.spines[<span class="string">'left'</span>].set_color(<span class="string">'b'</span>) <span class="comment"># 左侧线条修改为蓝色</span></span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_visible(<span class="literal">False</span>) <span class="comment"># 使顶层线条不可见</span></span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'outward'</span>,<span class="number">10</span>) <span class="comment"># 使底层线条外移10</span></span><br></pre></td></tr></table></figure><blockquote><p>spines: {left,right,top,bottom}</p></blockquote><p><strong>Legend</strong><br><code>ax.legend(loc='best', handles,labels)</code></p><blockquote><p>handles:图例控制对象<br>labels:图例标签<br>loc: string or 0:10</p></blockquote><p><strong>Grid</strong><br><code>ax.grid(b=None, which='major', axis='both')</code></p><blockquote><p>Parameters:<br>which: ‘major’ (default), ‘minor’, or ‘both’<br>axis: ‘both’ (default), ‘x’, or ‘y’</p></blockquote><p><strong>annotate  and Text</strong></p><p><code>ax.annotate()</code></p><blockquote><p>Parameters:<br>s : str<br>xy : iterable<br>xytext : iterable, optional<br>xycoords : str, Artist, Transform, callable or tuple, optional<br>textcoords : str, <code>Artist</code>, <code>Transform</code>, callable or tuple, optional<br>fontsize:<br>arrowprops : dict, optional</p></blockquote><p><code>ax.text(x, y, s, fontdict=None, withdash=False)</code></p><h2 id="save-and-show"><a class="markdownIt-Anchor" href="#save-and-show"></a> Save and Show</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig.savefig(fname) <span class="comment"># or plt.savefig</span></span><br><span class="line">fig.show(warn=<span class="literal">True</span>) <span class="comment"># or plt.show</span></span><br></pre></td></tr></table></figure><p><strong>example</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------------------拉格朗日中值定理</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> fsolve</span><br><span class="line"><span class="keyword">import</span> mpl_toolkits.axisartist <span class="keyword">as</span> axisartist</span><br><span class="line"></span><br><span class="line">xlim=(<span class="number">0.5</span>,<span class="number">5</span>)</span><br><span class="line">x = np.linspace(xlim[<span class="number">0</span>],xlim[<span class="number">1</span>], <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span>+<span class="number">10</span>*np.sin(x)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">df</span><span class="params">(x,const)</span>:</span> <span class="comment">#导数方程</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*x+<span class="number">10</span>*np.cos(x)-const</span><br><span class="line"></span><br><span class="line">a,b=<span class="number">0.7</span>,<span class="number">4.8</span></span><br><span class="line">slope=(f(b)-f(a))/(b-a) <span class="comment">#AB斜率</span></span><br><span class="line">c=fsolve(df,<span class="number">1</span>,args=slope) <span class="comment">#解非线性方程</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">y</span><span class="params">(x)</span>:</span><span class="comment">#切线方程y-y0=k(x-x0)</span></span><br><span class="line">    <span class="keyword">return</span> slope*(x-c)+f(c)</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加画布</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = axisartist.Subplot(fig, <span class="number">111</span>)<span class="comment">#引入坐标轴对象</span></span><br><span class="line">fig.add_axes(ax)<span class="comment">#添加坐标轴</span></span><br><span class="line">ax.axis[:].set_visible(<span class="literal">False</span>)<span class="comment">#隐藏原坐标</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加箭头坐标</span></span><br><span class="line">ax.axis[<span class="string">"x"</span>] = ax.new_floating_axis(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">ax.axis[<span class="string">"x"</span>].set_axisline_style(<span class="string">"-|&gt;"</span>,size = <span class="number">1</span>)</span><br><span class="line">ax.axis[<span class="string">"y"</span>] = ax.new_floating_axis(<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line">ax.axis[<span class="string">"y"</span>].set_axisline_style(<span class="string">"-|&gt;"</span>, size = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加xOy标签</span></span><br><span class="line">ax.axis(<span class="string">'scaled'</span>)</span><br><span class="line">ax.set_xlim(<span class="number">-0.5</span>,xlim[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">xlim=ax.get_xlim()[<span class="number">1</span>]</span><br><span class="line">ylim=ax.get_ylim()[<span class="number">1</span>]</span><br><span class="line">xstep=xlim/<span class="number">10</span></span><br><span class="line">ystep=ylim/<span class="number">10</span></span><br><span class="line">ax.text(-xstep,-ystep,<span class="string">'$O$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(xlim,xstep/<span class="number">2</span>,<span class="string">'$x$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(ystep/<span class="number">2</span>,ylim,<span class="string">'$y$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line"><span class="comment">#隐藏刻度</span></span><br><span class="line">ax.set_xticks([])</span><br><span class="line">ax.set_yticks([])</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加曲线</span></span><br><span class="line">ax.plot(x,f(x))</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加辅助线</span></span><br><span class="line">ax.plot([a,b],[f(a),f(b)],marker=<span class="string">'o'</span>)</span><br><span class="line">ax.plot([a,a],[<span class="number">0</span>,f(a)],<span class="string">'--'</span>)</span><br><span class="line">ax.plot([b,b],[<span class="number">0</span>,f(b)],<span class="string">'--'</span>)</span><br><span class="line">ax.plot([c,c],[<span class="number">0</span>,f(c)],<span class="string">'--'</span>)</span><br><span class="line">delta=<span class="number">1</span></span><br><span class="line">ax.plot([c-delta,c+delta],[y(c-delta),y(c+delta)])<span class="comment"># 切线</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加注释</span></span><br><span class="line">ax.text(a<span class="number">-0.3</span>,<span class="number">-2</span>,<span class="string">'$a$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(b<span class="number">-0.3</span>,<span class="number">-2</span>,<span class="string">'$b$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(a<span class="number">-0.3</span>,f(a),<span class="string">'$A$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(b<span class="number">-0.3</span>,f(b),<span class="string">'$B$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(c<span class="number">-0.3</span>,<span class="number">-2</span>,<span class="string">r'$\xi$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.text(c<span class="number">-0.3</span>,f(c),<span class="string">r'$C$'</span>,fontsize=<span class="number">20</span>)</span><br><span class="line">ax.set_title(<span class="string">'Lagrange Mean Value Theorem'</span>,fontsize=<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img alt="拉格朗日中值定理" data-src="/images/matplotlib/lagrange.png"></p><h1 id="patches"><a class="markdownIt-Anchor" href="#patches"></a> Patches</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> patches <span class="comment">#图块</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">部分类</th><th style="text-align:left">图形</th></tr></thead><tbody><tr><td style="text-align:left">Arc</td><td style="text-align:left">弧度</td></tr><tr><td style="text-align:left">Arrow</td><td style="text-align:left">箭头</td></tr><tr><td style="text-align:left">Circle</td><td style="text-align:left">圆</td></tr><tr><td style="text-align:left">CirclePolygon</td><td style="text-align:left">多边形近似</td></tr><tr><td style="text-align:left">Ellipse</td><td style="text-align:left">椭圆</td></tr><tr><td style="text-align:left">Polygon</td><td style="text-align:left">多边形</td></tr><tr><td style="text-align:left">Rectangle</td><td style="text-align:left">矩形</td></tr><tr><td style="text-align:left">RegularPolygon</td><td style="text-align:left">正多边形</td></tr><tr><td style="text-align:left">Shadow</td><td style="text-align:left">阴影</td></tr></tbody></table><h1 id="path"><a class="markdownIt-Anchor" href="#path"></a> Path</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.path <span class="keyword">import</span> Path</span><br><span class="line"><span class="comment"># 设定四个点来限定一个四边形的界限</span></span><br><span class="line">p = Path([(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>)])</span><br><span class="line"><span class="comment">#判断点是否在多边形内</span></span><br><span class="line">p.contains_points([(<span class="number">0.1</span>, <span class="number">0.1</span>)])</span><br></pre></td></tr></table></figure><h1 id="axes3d"><a class="markdownIt-Anchor" href="#axes3d"></a> Axes3D</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">X = np.arange(<span class="number">-5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(<span class="number">-5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)</span><br><span class="line">R = np.sqrt(X**<span class="number">2</span> + Y**<span class="number">2</span>)</span><br><span class="line">Z = np.sin(R)</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = Axes3D(fig)</span><br><span class="line">ax.plot_surface(X, Y, Z, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=cm.viridis)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img alt="3D" data-src="/images/matplotlib/3d.png"></p><h1 id="animation"><a class="markdownIt-Anchor" href="#animation"></a> Animation</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.animation <span class="keyword">as</span> animation</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">2</span>*np.pi, <span class="number">0.01</span>)</span><br><span class="line">line, = ax.plot(x, np.sin(x))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">()</span>:</span>  <span class="comment"># only required for blitting to give a clean slate.</span></span><br><span class="line">    line.set_ydata([np.nan] * len(x))</span><br><span class="line">    <span class="keyword">return</span> line,</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">animate</span><span class="params">(i)</span>:</span></span><br><span class="line">    line.set_ydata(np.sin(x + i / <span class="number">100</span>))  <span class="comment"># update the data.</span></span><br><span class="line">    <span class="keyword">return</span> line,</span><br><span class="line">ani = animation.FuncAnimation(</span><br><span class="line">    fig, animate, init_func=init, interval=<span class="number">2</span>, blit=<span class="literal">True</span>, save_count=<span class="number">50</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> matplotlib </tag>
            
            <tag> 可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Python Basics)--Python标准库</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--Python-Standard-Library.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--Python-Standard-Library.html</url>
      
        <content type="html"><![CDATA[<p>Python 标准库非常庞大，所提供的组件涉及范围十分广泛，正如以下内容目录所显示的。这个库包含了多个内置模块 (以 C 编写)，Python 程序员必须依靠它们来实现系统级功能。</p><a id="more"></a><h1 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h1><p><code>s='Hello World'</code></p><h2 id="字符串方法"><a class="markdownIt-Anchor" href="#字符串方法"></a> 字符串方法</h2><table><thead><tr><th style="text-align:left">计数</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">s.count(substr,beg=0,end=len(string))</td><td style="text-align:left">返回substr出现的次数</td></tr><tr><td style="text-align:left"><strong>去空格</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.lstrip(chars)</td><td style="text-align:left">删除str左边的字符（或空格）</td></tr><tr><td style="text-align:left">s.rstrip(chars)</td><td style="text-align:left">删除str右边的字符（或空格）</td></tr><tr><td style="text-align:left">s.strip(chars)</td><td style="text-align:left">删除str两边的字符（或空格）</td></tr><tr><td style="text-align:left"><strong>字符串补齐</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.center(width,fillchar)</td><td style="text-align:left">返回str居中，宽度为width的字符串(fillchar为填充字符)</td></tr><tr><td style="text-align:left">s.ljust(width,fillchar)</td><td style="text-align:left">str左对齐</td></tr><tr><td style="text-align:left">s.rjust(width,fillchar)</td><td style="text-align:left">str右对齐</td></tr><tr><td style="text-align:left">s.zfill (width)</td><td style="text-align:left">str右对齐，前面填充0</td></tr><tr><td style="text-align:left"><strong>大小写转换</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.capitalize()</td><td style="text-align:left">str的第一个字符大写</td></tr><tr><td style="text-align:left">s.title()</td><td style="text-align:left">每个单词首字母大写</td></tr><tr><td style="text-align:left">s.lower()</td><td style="text-align:left">小写</td></tr><tr><td style="text-align:left">s.upper()</td><td style="text-align:left">大写</td></tr><tr><td style="text-align:left">s.swapcase()</td><td style="text-align:left">大小写互换</td></tr><tr><td style="text-align:left"><strong>字符串条件判断</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.isalnum()</td><td style="text-align:left">所有字符都是字母或数字</td></tr><tr><td style="text-align:left">s.isalpha()</td><td style="text-align:left">所有字符都是字母</td></tr><tr><td style="text-align:left">s.isdigit()</td><td style="text-align:left">所有字符都是数字</td></tr><tr><td style="text-align:left">s.isnumeric()</td><td style="text-align:left">只包含数字字符</td></tr><tr><td style="text-align:left">s.isspace()</td><td style="text-align:left">只包含空白</td></tr><tr><td style="text-align:left">s.istitle()</td><td style="text-align:left">字符串是标题化</td></tr><tr><td style="text-align:left">s.islower()</td><td style="text-align:left">都是小写</td></tr><tr><td style="text-align:left">s.isupper()</td><td style="text-align:left">都是大写</td></tr><tr><td style="text-align:left">s.startswith(substr)</td><td style="text-align:left">以substr开头</td></tr><tr><td style="text-align:left">s.endswith(substr)</td><td style="text-align:left">以substr结尾</td></tr><tr><td style="text-align:left"><strong>字符串搜索定位与替换</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.find(substr)</td><td style="text-align:left">返回substr的索引位置，如果找不到，返回-1</td></tr><tr><td style="text-align:left">s.rfind(str)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.index(substr)</td><td style="text-align:left">返回substr的索引位置，如果找不到，返回异常</td></tr><tr><td style="text-align:left">s.rindex(str)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.replace(old,new,max)</td><td style="text-align:left">字符串替换，不超过 max 次（默认为1）。</td></tr><tr><td style="text-align:left"><strong>字符串分割变换</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.join(seq)</td><td style="text-align:left">以str分隔符，合并seq中所有的元素</td></tr><tr><td style="text-align:left">s.split(sep=&quot;&quot;,num)</td><td style="text-align:left">分割str，num=str.count(sep)默认</td></tr><tr><td style="text-align:left">s.splitlines(keepends)</td><td style="text-align:left">按照行(’\r’,’\r\n’,\n’)分隔，参数 keepends为False则不包含换行符</td></tr><tr><td style="text-align:left"><strong>字符串编码与解码</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">s.encode(encoding=‘UTF-8’)</td><td style="text-align:left">以 encoding 指定的编码格式编码字符串</td></tr></tbody></table><p>实例：KaTeX 源码替换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> filedialog</span><br><span class="line"></span><br><span class="line">greek=[</span><br><span class="line">    [<span class="string">'A'</span>,<span class="string">r'\Alpha'</span>],[<span class="string">'α'</span>,<span class="string">r'\alpha'</span>],</span><br><span class="line">    [<span class="string">'B'</span>,<span class="string">r'\Beta'</span>],[<span class="string">'β'</span>,<span class="string">r'\beta'</span>],</span><br><span class="line">    [<span class="string">'Γ'</span>,<span class="string">r'\Gamma'</span>],[<span class="string">'γ'</span>,<span class="string">r'\gamma'</span>],</span><br><span class="line">    [<span class="string">'Δ'</span>,<span class="string">r'\Delta'</span>],[<span class="string">'δ'</span>,<span class="string">r'\delta'</span>],</span><br><span class="line">    [<span class="string">'E'</span>,<span class="string">r'\Epsilon'</span>],[<span class="string">'ϵ'</span>,<span class="string">r'\epsilon'</span>],</span><br><span class="line">    [<span class="string">'Z'</span>,<span class="string">r'\Zeta'</span>],[<span class="string">'ζ'</span>,<span class="string">r'\zeta'</span>],</span><br><span class="line">    [<span class="string">'H'</span>,<span class="string">r'\Eta'</span>],[<span class="string">'η'</span>,<span class="string">r'\eta'</span>],</span><br><span class="line">    [<span class="string">'Θ'</span>,<span class="string">r'\Theta'</span>],[<span class="string">'θ'</span>,<span class="string">r'\theta'</span>],[<span class="string">'Θ'</span>,<span class="string">r'\varTheta'</span>],[<span class="string">'ϑ'</span>,<span class="string">r'\vartheta'</span>],</span><br><span class="line">    [<span class="string">'I'</span>,<span class="string">r'\Iota'</span>],[<span class="string">'ι'</span>,<span class="string">r'\iota'</span>],</span><br><span class="line">    [<span class="string">'K'</span>,<span class="string">r'\Kappa'</span>],[<span class="string">'κ'</span>,<span class="string">r'\kappa'</span>],</span><br><span class="line">    [<span class="string">'Λ'</span>,<span class="string">r'\Lambda'</span>],[<span class="string">'λ'</span>,<span class="string">r'\lambda'</span>],</span><br><span class="line">    [<span class="string">'M'</span>,<span class="string">r'\Mu'</span>],[<span class="string">'μ'</span>,<span class="string">r'\mu'</span>],</span><br><span class="line">    [<span class="string">'N'</span>,<span class="string">r'\Nu'</span>],[<span class="string">'ν'</span>,<span class="string">r'\nu'</span>],</span><br><span class="line">    [<span class="string">'Ξ'</span>,<span class="string">r'\Xi'</span>],[<span class="string">'ξ'</span>,<span class="string">r'\xi'</span>],</span><br><span class="line">    [<span class="string">'O'</span>,<span class="string">r'\Omicron'</span>],[<span class="string">'ο'</span>,<span class="string">r'\omicron'</span>],</span><br><span class="line">    [<span class="string">'Π'</span>,<span class="string">r'\Pi'</span>],[<span class="string">'π'</span>,<span class="string">r'\pi'</span>],[<span class="string">'Π'</span>,<span class="string">r'\varPi'</span>],[<span class="string">'ϖ'</span>,<span class="string">r'\varpi'</span>],</span><br><span class="line">    [<span class="string">'R'</span>,<span class="string">r'\Rho'</span>],[<span class="string">'ρ'</span>,<span class="string">r'\rho'</span>],</span><br><span class="line">    [<span class="string">'Σ'</span>,<span class="string">r'\Sigma'</span>],[<span class="string">'σ'</span>,<span class="string">r'\sigma'</span>],[<span class="string">'Σ'</span>,<span class="string">r'\varSigma'</span>],[<span class="string">'ς'</span>,<span class="string">r'\varsigma'</span>],</span><br><span class="line">    [<span class="string">'T'</span>,<span class="string">r'\Tau'</span>],[<span class="string">'τ'</span>,<span class="string">r'\tau'</span>],</span><br><span class="line">    [<span class="string">'Υ'</span>,<span class="string">r'\Upsilon'</span>],[<span class="string">'υ'</span>,<span class="string">r'\upsilon'</span>],</span><br><span class="line">    [<span class="string">'Φ'</span>,<span class="string">r'\Phi'</span>],[<span class="string">'ϕ'</span>,<span class="string">r'\phi'</span>],[<span class="string">'Φ'</span>,<span class="string">r'\varPhi'</span>],[<span class="string">'φ'</span>,<span class="string">r'\varphi'</span>],</span><br><span class="line">    [<span class="string">'X'</span>,<span class="string">r'\Chi'</span>],[<span class="string">'χ'</span>,<span class="string">r'\chi'</span>],</span><br><span class="line">    [<span class="string">'Ψ'</span>,<span class="string">r'\Psi'</span>],[<span class="string">'ψ'</span>,<span class="string">r'\psi'</span>],</span><br><span class="line">    [<span class="string">'Ω'</span>,<span class="string">r'\Omega'</span>],[<span class="string">'ω'</span>,<span class="string">r'\omega'</span>]</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">others=[</span><br><span class="line">         [<span class="string">'∇'</span>,<span class="string">r'\nabla'</span>],</span><br><span class="line">         [<span class="string">'∂'</span>,<span class="string">r'\partial'</span>],</span><br><span class="line">         [<span class="string">'∪'</span>,<span class="string">r'\cup'</span>],[<span class="string">'∩'</span>,<span class="string">r'\cap'</span>],</span><br><span class="line">         [<span class="string">'∀'</span>,<span class="string">r'\forall'</span>],</span><br><span class="line">         [<span class="string">'∁'</span>,<span class="string">r'\complement'</span>],</span><br><span class="line">         [<span class="string">'∃'</span>,<span class="string">r'\exists'</span>], [<span class="string">'∃'</span>,<span class="string">r'\exist'</span>],</span><br><span class="line">         [<span class="string">'⊂'</span>,<span class="string">r'\subset'</span>],[<span class="string">'⊂'</span>,<span class="string">r'\sub'</span>],</span><br><span class="line">         [<span class="string">'⊃'</span>,<span class="string">r'\supset'</span>],[<span class="string">'⊃'</span>,<span class="string">r'\sup'</span>], </span><br><span class="line">         [<span class="string">'⊆'</span>,<span class="string">r'\subseteq'</span>], [<span class="string">'⊇'</span>,<span class="string">r'\supseteq'</span>],</span><br><span class="line">         [<span class="string">'×'</span>,<span class="string">r'\times'</span>],</span><br><span class="line">         [<span class="string">'±'</span>,<span class="string">r'\pm'</span>], [<span class="string">'∓'</span>,<span class="string">r'\mp'</span>],</span><br><span class="line">         [<span class="string">'⩽'</span>,<span class="string">r'\leqslant'</span>], [<span class="string">'⩾'</span>,<span class="string">r'\geqslant'</span>],</span><br><span class="line">         [<span class="string">'∞'</span>,<span class="string">r'\infty'</span>],</span><br><span class="line">         [<span class="string">'∼'</span>,<span class="string">r'\sim'</span>]</span><br><span class="line">         ]</span><br><span class="line">         </span><br><span class="line">root=tk.Tk()</span><br><span class="line">root.withdraw()</span><br><span class="line"></span><br><span class="line">filename = filedialog.askopenfilename()</span><br><span class="line">f1 = open(<span class="string">'Probability &amp; Statistics.md'</span>,<span class="string">'r+'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">f2 = open(<span class="string">'new.md'</span>,<span class="string">'w+'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">symbols_replace</span><span class="params">(katex,old)</span>:</span></span><br><span class="line">    new=old</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> katex:</span><br><span class="line">        new=new.replace(i[<span class="number">1</span>],i[<span class="number">0</span>])   </span><br><span class="line">    <span class="keyword">return</span> new</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> old <span class="keyword">in</span> f1.readlines():</span><br><span class="line">    new=symbols_replace(greek,old)</span><br><span class="line">    new=symbols_replace(others,new)</span><br><span class="line">    f2.write(new)</span><br><span class="line">f1.close()</span><br><span class="line">f2.close()</span><br></pre></td></tr></table></figure><h2 id="格式化字符串"><a class="markdownIt-Anchor" href="#格式化字符串"></a> 格式化字符串</h2><p>格式字符串由 <code>{}</code>包围的<code>replacement_field</code> 和任何不包含在大括号中的普通文本组成。由 <code>s.format()</code> 方法传递参数。</p><p><code>replacement_field</code>简单组成： <code>{field_name:format_spec}</code></p><ul><li><p><strong>field_name</strong> : 是一个数字，表示位置参数（element_index），如果<code>field_name</code>依次为<code>0,1,2，...</code>，则它们可以全部省略，并且数字<code>0,1,2，...</code>将按照该顺序自动插入。<br>或者关键字（attribute_name）,<code>str.format()</code>可通过关键字传递参数。</p></li><li><p><strong>format_spec</strong>：<code>[width][.precision][type]</code><br><code>width</code>：（数字）表示宽度<br><code>.precision</code>：（dot+数字）小数位数<br><code>type</code>：表示类型<br><code>s</code>：表示字符格式<br><code>d</code>：十进制整数<br><code>f</code>：固定精度<br><code>e</code>：科学记数法<br><code>n</code>：数字<br><code>%</code>：百分比显示</p></li></ul><p>for example</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'Life is short, &#123;&#125; need &#123;&#125;'</span>.format(<span class="string">'You'</span>,<span class="string">'Python'</span>))  <span class="comment"># 忽略数字</span></span><br><span class="line">print(<span class="string">'Life is short, &#123;0&#125; need &#123;1&#125;'</span>.format(<span class="string">'You'</span>,<span class="string">'Python'</span>))  <span class="comment"># 带数字编号</span></span><br><span class="line">print(<span class="string">'Life is short, &#123;1&#125; need &#123;0&#125;'</span>.format(<span class="string">'Python'</span>,<span class="string">'You'</span>))  <span class="comment"># 打乱顺序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#上面代码统一输出为: 'Life is short, You need Python'</span></span><br><span class="line">print(<span class="string">'Life is short, &#123;name&#125; need &#123;language&#125;'</span>.format(name=<span class="string">'You'</span>,language=<span class="string">'R Language'</span>))  <span class="comment"># 关键字</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">print(<span class="string">'r=&#123;r:.1e&#125;'</span>.format(r=<span class="number">10</span>**<span class="number">5</span>))</span><br><span class="line">print(<span class="string">'π=&#123;pi:.2f&#125;'</span>.format(pi=math.pi))</span><br><span class="line">print(<span class="string">'e/PI=&#123;percent:.2%&#125;'</span>.format(percent=math.e/math.pi))</span><br></pre></td></tr></table></figure><h2 id="字符串常量"><a class="markdownIt-Anchor" href="#字符串常量"></a> 字符串常量</h2><table><thead><tr><th>标准库</th><th><code>import string</code></th></tr></thead><tbody><tr><td>string.digits</td><td>数字0~9</td></tr><tr><td>string.letters</td><td>所有字母（大小写）</td></tr><tr><td>string.lowercase</td><td>所有小写字母</td></tr><tr><td>string.printable</td><td>可打印字符的字符串</td></tr><tr><td>string.punctuation</td><td>所有标点</td></tr><tr><td>string.uppercase</td><td>所有大写字母</td></tr></tbody></table><h1 id="file-对象"><a class="markdownIt-Anchor" href="#file-对象"></a> file 对象</h1><blockquote><p>参考链接：<a href="http://www.runoob.com/python/file-methods.html" target="_blank" rel="noopener">http://www.runoob.com/python/file-methods.html</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f=open(file, mode=<span class="string">'r'</span>, encoding=<span class="literal">None</span>)  <span class="comment"># 返回file对象</span></span><br><span class="line">f.close()                              <span class="comment"># 关闭</span></span><br></pre></td></tr></table></figure><p>mode参数:<br><code>r</code> 只读<br><code>r+</code> 读写<br><code>w</code> 写入<br><code>w+</code> 读写<br><code>a</code> 追加<br><code>a+</code> 读写追加</p><blockquote><p>默认为文本模式，如果要以二进制模式打开，加上 <code>b</code> 。<br>注意：使用 open() 方法一定要保证关闭文件对象，即调用 close() 方法。</p></blockquote><p>若配合 <code>with</code> 使用，读取完可自动关闭</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"/tmp/python.csv"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = f.read()</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">f.closed</td><td style="text-align:left">返回true如果文件已被关闭，否则返回false。</td></tr><tr><td style="text-align:left">f.mode</td><td style="text-align:left">返回被打开文件的访问模式。</td></tr><tr><td style="text-align:left"><a href="http://f.name" target="_blank" rel="noopener">f.name</a></td><td style="text-align:left">返回文件的名称。</td></tr><tr><td style="text-align:left">f.softspace</td><td style="text-align:left">如果用print输出后，必须跟一个空格符，则返回false。否则返回true。</td></tr></tbody></table><table><thead><tr><th style="text-align:left">方法</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">f.close()</td><td style="text-align:left">关闭文件</td></tr><tr><td style="text-align:left">f.next()</td><td style="text-align:left">返回文件下一行，迭代时使用</td></tr><tr><td style="text-align:left">f.read([size])</td><td style="text-align:left">从文件中读取的字节数</td></tr><tr><td style="text-align:left">f.readline([size])</td><td style="text-align:left">读取整行，包括 “\n” 字符</td></tr><tr><td style="text-align:left">f.readlines([sizeint])</td><td style="text-align:left">读取所有行并返回列表</td></tr><tr><td style="text-align:left">f.seek(offset[, whence])</td><td style="text-align:left">设置文件当前位置</td></tr><tr><td style="text-align:left">f.tell()</td><td style="text-align:left">返回文件当前位置</td></tr><tr><td style="text-align:left">f.write(str)</td><td style="text-align:left">将字符串写入文件，返回的是写入的字符长度。</td></tr><tr><td style="text-align:left">f.writelines(sequence)</td><td style="text-align:left">向文件写入一个序列字符串列表，如果需要换行则要自己加入每行的换行符。</td></tr></tbody></table><h1 id="os-模块"><a class="markdownIt-Anchor" href="#os-模块"></a> os 模块</h1><p>提供了很多与操作系统交互的函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()      <span class="comment"># Return the current working directory</span></span><br><span class="line"><span class="string">'C:\\Python35'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.chdir(<span class="string">'/server/accesslogs'</span>)   <span class="comment"># Change current working directory</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.system(<span class="string">'mkdir today'</span>)   <span class="comment"># Run the command mkdir in the system shell</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>path=os.path.abspath(__file__) <span class="comment">#返回脚本运行绝对路径</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dirname,filename=os.path.split(path) <span class="comment">#分离出路径和脚本名</span></span><br></pre></td></tr></table></figure><h1 id="命令行参数"><a class="markdownIt-Anchor" href="#命令行参数"></a> 命令行参数</h1><p>通用工具脚本经常调用命令行参数。这些命令行参数以链表形式存储于 sys 模块的 argv 变量。例如在命令行中执行 <code>python demo.py one two three</code> 后可以得到以下输出结果:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(sys.argv)</span><br><span class="line">[<span class="string">'demo.py'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]</span><br></pre></td></tr></table></figure><h1 id="错误输出重定向和程序终止"><a class="markdownIt-Anchor" href="#错误输出重定向和程序终止"></a> 错误输出重定向和程序终止</h1><p>sys 还有 stdin， stdout 和 stderr 属性，即使在 stdout 被重定向时，后者也可以用于显示警告和错误信息:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.stderr.write(<span class="string">'Warning, log file not found starting a new one\n'</span>)</span><br><span class="line">Warning, log file <span class="keyword">not</span> found starting a new one</span><br></pre></td></tr></table></figure><p>大多数脚本的直接终止都使用 <code>sys.exit()</code></p><h1 id="数据压缩"><a class="markdownIt-Anchor" href="#数据压缩"></a> 数据压缩</h1><p>以下模块直接支持通用的数据打包和压缩格式：zlib， gzip， bz2， lzma， zipfile 以及 tarfile。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> zlib</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">b'witch which has which witches wrist watch'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(s)</span><br><span class="line"><span class="number">41</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = zlib.compress(s)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(t)</span><br><span class="line"><span class="number">37</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zlib.decompress(t)</span><br><span class="line"><span class="string">b'witch which has which witches wrist watch'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zlib.crc32(s)</span><br><span class="line"><span class="number">226805979</span></span><br></pre></td></tr></table></figure><h1 id="性能度量"><a class="markdownIt-Anchor" href="#性能度量"></a> 性能度量</h1><p>有些用户对了解解决同一问题的不同方法之间的性能差异很感兴趣。Python 提供了一个度量工具，为这些问题提供了直接答案。</p><p>例如，使用元组封装和拆封来交换元素看起来要比使用传统的方法要诱人的多。timeit 证明了后者更快一些:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> timeit <span class="keyword">import</span> Timer</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Timer(<span class="string">'t=a; a=b; b=t'</span>, <span class="string">'a=1; b=2'</span>).timeit()</span><br><span class="line"><span class="number">0.57535828626024577</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Timer(<span class="string">'a,b = b,a'</span>, <span class="string">'a=1; b=2'</span>).timeit()</span><br><span class="line"><span class="number">0.54962537085770791</span></span><br></pre></td></tr></table></figure><p>相对于 timeit 的细粒度，profile 和 pstats 模块提供了针对更大代码块的时间度量工具。</p><h1 id="十进制浮点数算法"><a class="markdownIt-Anchor" href="#十进制浮点数算法"></a> 十进制浮点数算法</h1><p>decimal 模块提供了一个 Decimal 数据类型用于浮点数计<br>Decimal 的结果总是保有结尾的 0，自动从两位精度延伸到4位。Decimal 重现了手工的数学运算，这就确保了二进制浮点数无法精确保有的数据精度。</p><p>高精度使 Decimal 可以执行二进制浮点数无法进行的模运算和等值测试:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'1.00'</span>) % Decimal(<span class="string">'.10'</span>)</span><br><span class="line">Decimal(<span class="string">'0.00'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1.00</span> % <span class="number">0.10</span></span><br><span class="line"><span class="number">0.09999999999999995</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum([Decimal(<span class="string">'0.1'</span>)]*<span class="number">10</span>) == Decimal(<span class="string">'1.0'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum([<span class="number">0.1</span>]*<span class="number">10</span>) == <span class="number">1.0</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p>decimal 提供了必须的高精度算法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>getcontext().prec = <span class="number">36</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="number">1</span>) / Decimal(<span class="number">7</span>)</span><br><span class="line">Decimal(<span class="string">'0.142857142857142857142857142857142857'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 文件读写 </tag>
            
            <tag> os </tag>
            
            <tag> 命令行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Time Series)--pandas(Time Series)</title>
      <link href="/posts/python/PythonNotebook(Time-Series)--pandas(TimeSeries).html"/>
      <url>/posts/python/PythonNotebook(Time-Series)--pandas(TimeSeries).html</url>
      
        <content type="html"><![CDATA[<p>时间序列（time series）数据是一种重要的结构化数据形式，具体的应用场景，主要有以下几种：</p><ul><li>时间戳（timestamp），特定的时刻。</li><li>固定时期（period），如2007年1月或2010年全年。</li><li>时间间隔（interval），由起始和结束时间戳表示。时期（period）可以被看做间隔（interval）的特例。</li><li>实验或过程时间，每个时间点都是相对于特定起始时间的一个度量。例如，从放入烤箱时起，每秒钟饼干的直径。</li></ul><a id="more"></a><h1 id="时间序列概述"><a class="markdownIt-Anchor" href="#时间序列概述"></a> 时间序列概述</h1><blockquote><p>pandas最基本的时间序列类型就是以时间戳（通常以Python字符串或datatime对象表示）为索引的Series。<br>NaT（Not a Time）是pandas中时间戳数据的null值。</p></blockquote><p>下表显示了pandas可以处理的时间相关类的类型以及如何创建它们：</p><table><thead><tr><th>Class</th><th>Remarks</th><th>How to create</th></tr></thead><tbody><tr><td>Timestamp</td><td>Represents a single timestamp</td><td>to_datetime, Timestamp</td></tr><tr><td>DatetimeIndex</td><td>Index of Timestamp</td><td>to_datetime, date_range, bdate_range, DatetimeIndex</td></tr><tr><td>Period</td><td>Represents a single time span</td><td>Period</td></tr><tr><td>PeriodIndex</td><td>Index of Period</td><td>period_range, PeriodIndex</td></tr></tbody></table><h1 id="时间戳和时间区间"><a class="markdownIt-Anchor" href="#时间戳和时间区间"></a> 时间戳和时间区间</h1><p><code>pd.Timestamp and pd.Period</code></p><blockquote><p>pandas用NumPy的datetime64数据类型以纳秒形式存储时间戳</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pd.Timestamp</span></span><br><span class="line">In [<span class="number">8</span>]: pd.Timestamp(datetime(<span class="number">2012</span>, <span class="number">5</span>, <span class="number">1</span>))</span><br><span class="line">In [<span class="number">9</span>]: pd.Timestamp(<span class="string">'2012-05-01'</span>)</span><br><span class="line">In [<span class="number">10</span>]: pd.Timestamp(<span class="number">2012</span>, <span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># Out : Timestamp('2012-05-01 00:00:00')</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pd.Period</span></span><br><span class="line">In [<span class="number">11</span>]: pd.Period(<span class="string">'2011-01'</span>)</span><br><span class="line">Out[<span class="number">11</span>]: Period(<span class="string">'2011-01'</span>, <span class="string">'M'</span>)</span><br><span class="line">In [<span class="number">12</span>]: pd.Period(<span class="string">'2012-05'</span>, freq=<span class="string">'D'</span>)</span><br><span class="line">Out[<span class="number">12</span>]: Period(<span class="string">'2012-05-01'</span>, <span class="string">'D'</span>)</span><br></pre></td></tr></table></figure><p><code>pd.to_datetime(arg) #Converting to Timestamps</code></p><blockquote><p>arg : integer, float, string, datetime, list, tuple, 1-d array, Series or DataFrame/dict-like</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Providing a Format Argument</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_datetime(<span class="string">'2010/11/12'</span>, format=<span class="string">'%Y/%m/%d'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_datetime(<span class="string">'13000101'</span>, format=<span class="string">'%Y%m%d'</span>, errors=<span class="string">'ignore'</span>)</span><br><span class="line">datetime.datetime(<span class="number">1300</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># from Multiple DataFrame Columns</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df = pd.DataFrame(&#123;<span class="string">'year'</span>: [<span class="number">2015</span>, <span class="number">2016</span>],</span><br><span class="line">                       <span class="string">'month'</span>: [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                       <span class="string">'day'</span>: [<span class="number">4</span>, <span class="number">5</span>]&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_datetime(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># integer, float</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_datetime(<span class="number">1490195805</span>, unit=<span class="string">'s'</span>)</span><br><span class="line">Timestamp(<span class="string">'2017-03-22 15:16:45'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Using the origin Parameter(default,origin=970-01-01 00:00:00)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_datetime([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], unit=<span class="string">'D'</span>,</span><br><span class="line">                   origin=pd.Timestamp(<span class="string">'1960-01-01'</span>))</span><br></pre></td></tr></table></figure><h1 id="日期索引和切片"><a class="markdownIt-Anchor" href="#日期索引和切片"></a> 日期索引和切片</h1><p><code>DatetimeIndex and PeriodIndex</code></p><p>pd.Timestamp and pd.Period对象是以DatetimeIndex and PeriodIndex的格式存储在Series的索引中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: dates = [pd.Timestamp(<span class="string">'2012-05-01'</span>), pd.Timestamp(<span class="string">'2012-05-02'</span>), pd.Timestamp(<span class="string">'2012-05-03'</span>)]</span><br><span class="line">In [<span class="number">14</span>]: ts = pd.Series(np.random.randn(<span class="number">3</span>), dates)</span><br><span class="line">In [<span class="number">16</span>]: ts.index</span><br><span class="line">Out[<span class="number">16</span>]: DatetimeIndex([<span class="string">'2012-05-01'</span>, <span class="string">'2012-05-02'</span>, <span class="string">'2012-05-03'</span>], dtype=<span class="string">'datetime64[ns]'</span>, freq=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><p>DatetimeIndex 可以像常规索引一样使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ts[<span class="string">'2011-01-05'</span>:]</span><br></pre></td></tr></table></figure><p>日期和解析为时间戳的字符串可以作为索引参数传递</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ts[<span class="string">'1/10/2011'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ts[<span class="string">'20110110'</span>]</span><br></pre></td></tr></table></figure><p>对于较长的时间序列，只需传入“年”或“年月”即可轻松选取数据的切片：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>longer_ts[<span class="string">'2001'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>longer_ts[<span class="string">'2001-05'</span>]</span><br></pre></td></tr></table></figure><p>datetime对象也可以进行切片：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ts[datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>):]</span><br></pre></td></tr></table></figure><p>截断方法<br><code>ts.truncate(before=None, after=None, axis=None, copy=True)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ts.truncate(after=<span class="string">'1/9/2011'</span>)</span><br></pre></td></tr></table></figure><h1 id="日期范围"><a class="markdownIt-Anchor" href="#日期范围"></a> 日期范围</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日历日</span></span><br><span class="line">pd.date_range(start=<span class="literal">None</span>, end=<span class="literal">None</span>, periods=<span class="literal">None</span>, freq=<span class="string">'D'</span>, </span><br><span class="line">   tz=<span class="literal">None</span>, normalize=<span class="literal">False</span>, name=<span class="literal">None</span>, closed=<span class="literal">None</span>, **kwargs) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作日</span></span><br><span class="line">pd.bdate_range(start=<span class="literal">None</span>, end=<span class="literal">None</span>, periods=<span class="literal">None</span>, freq=<span class="string">'B'</span>, </span><br><span class="line">   tz=<span class="literal">None</span>, normalize=<span class="literal">True</span>, name=<span class="literal">None</span>, closed=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure><blockquote><p>返回DatetimeIndex对象<br>默认会保留起始和结束时间戳的时间信息（如果有的话）<br>normalize参数：被规范化（normalize）到午夜的时间戳。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">50</span>]: start = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">In [<span class="number">51</span>]: end = datetime(<span class="number">2012</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">In [<span class="number">52</span>]: index = pd.date_range(start, end)</span><br><span class="line">In [<span class="number">56</span>]: pd.date_range(start, periods=<span class="number">100</span>, freq=<span class="string">'M'</span>)</span><br><span class="line">In [<span class="number">58</span>]: pd.date_range(start, end, freq=<span class="string">'BM'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义频率</span></span><br><span class="line">In [<span class="number">62</span>]: weekmask = <span class="string">'Mon Wed Fri'</span></span><br><span class="line">In [<span class="number">63</span>]: holidays = [datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">5</span>), datetime(<span class="number">2011</span>, <span class="number">3</span>, <span class="number">14</span>)]</span><br><span class="line">In [<span class="number">64</span>]: pd.bdate_range(start, end, freq=<span class="string">'C'</span>, weekmask=weekmask, holidays=holidays)</span><br></pre></td></tr></table></figure><h1 id="dateoffset-对象"><a class="markdownIt-Anchor" href="#dateoffset-对象"></a> DateOffset 对象</h1><h2 id="offset基本用法"><a class="markdownIt-Anchor" href="#offset基本用法"></a> offset基本用法</h2><p>前面的DatetimeIndex通过将频率字符串（ 如’M’，‘W’和’BM’）传递给freq参数来创建各种频率的对象。这些频率字符串被翻译成一个DateOffset实例，代表一个常规的频率增量。***(<code>from pandas.tseries.offsets</code>)***</p><table><thead><tr><th style="text-align:left">别名</th><th style="text-align:left">Offset类型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">B</td><td style="text-align:left">BDay</td><td style="text-align:left">工作日</td></tr><tr><td style="text-align:left">C</td><td style="text-align:left">CDay</td><td style="text-align:left">定制工作日</td></tr><tr><td style="text-align:left">D</td><td style="text-align:left">Day</td><td style="text-align:left">日历日</td></tr><tr><td style="text-align:left">W</td><td style="text-align:left">Week</td><td style="text-align:left">每周</td></tr><tr><td style="text-align:left">M</td><td style="text-align:left">MonthEnd</td><td style="text-align:left">每月最后一个日历日</td></tr><tr><td style="text-align:left">SM</td><td style="text-align:left">SemiMonthEnd</td><td style="text-align:left">每月15日和最后一个日历日</td></tr><tr><td style="text-align:left">BM</td><td style="text-align:left">BMonthEnd</td><td style="text-align:left">每月15日和最后一个工作日</td></tr><tr><td style="text-align:left">CBM</td><td style="text-align:left">CBMonthEnd</td><td style="text-align:left">定制每月最后一个日历日</td></tr><tr><td style="text-align:left">MSS</td><td style="text-align:left">MonthBegin</td><td style="text-align:left">每月第一个日历日</td></tr><tr><td style="text-align:left">SMS</td><td style="text-align:left">SemiMonthBegin</td><td style="text-align:left">每月1日和15日</td></tr><tr><td style="text-align:left">BMS</td><td style="text-align:left">BMonthBegin</td><td style="text-align:left">每月第一个工作日</td></tr><tr><td style="text-align:left">CBMS</td><td style="text-align:left">CBMonthBegin</td><td style="text-align:left">定制每月第一个工作日</td></tr><tr><td style="text-align:left">Q</td><td style="text-align:left">QuarterEnd</td><td style="text-align:left">每季度最后一个日历日</td></tr><tr><td style="text-align:left">BQ</td><td style="text-align:left">BQuarterEnd</td><td style="text-align:left">每季度最后一个工作日</td></tr><tr><td style="text-align:left">QS</td><td style="text-align:left">QuarterBegin</td><td style="text-align:left">每季度第一个日历日</td></tr><tr><td style="text-align:left">BQS</td><td style="text-align:left">BQuarterBegin</td><td style="text-align:left">每季度第一个工作日</td></tr><tr><td style="text-align:left">A,Y</td><td style="text-align:left">YearEnd</td><td style="text-align:left">每年最后一个日历日</td></tr><tr><td style="text-align:left">BA,BY</td><td style="text-align:left">BYearEnd</td><td style="text-align:left">每年最后一个工作日</td></tr><tr><td style="text-align:left">AS,YS</td><td style="text-align:left">YearBegin</td><td style="text-align:left">每年第一个日历日</td></tr><tr><td style="text-align:left">BAS,BYS</td><td style="text-align:left">BYearBegin</td><td style="text-align:left">每年第一个工作日</td></tr><tr><td style="text-align:left">H</td><td style="text-align:left">Hour</td><td style="text-align:left">每小时</td></tr><tr><td style="text-align:left">BH</td><td style="text-align:left">BusinessHour</td><td style="text-align:left">每工作小时</td></tr><tr><td style="text-align:left">T,min</td><td style="text-align:left">Minute</td><td style="text-align:left">每分钟</td></tr><tr><td style="text-align:left">S</td><td style="text-align:left">Second</td><td style="text-align:left">每秒</td></tr><tr><td style="text-align:left">L,ms</td><td style="text-align:left">Milli</td><td style="text-align:left">毫秒</td></tr><tr><td style="text-align:left">U,us</td><td style="text-align:left">Micro</td><td style="text-align:left">微秒</td></tr><tr><td style="text-align:left">N</td><td style="text-align:left">Nano</td><td style="text-align:left">纳秒</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>锚定偏移量</strong></th><th style="text-align:left"></th><th style="text-align:left">这些频率所描述的时间点并不是均匀分隔的</th></tr></thead><tbody><tr><td style="text-align:left">W-SUN,W-MON,…,W-SAT</td><td style="text-align:left">Week</td><td style="text-align:left">每周从指定日期算起(MON,TUE,WEN,THU,FRI,SAT,SUN)</td></tr><tr><td style="text-align:left">WOM-1MON,WOM-2MON,…</td><td style="text-align:left">WeekOfMonth</td><td style="text-align:left">每月第x个星期y</td></tr><tr><td style="text-align:left">Q-JAN,Q-FEB,…</td><td style="text-align:left">QuarterEnd</td><td style="text-align:left">以指定月份（最后一个日历日）结束季度</td></tr><tr><td style="text-align:left">BQ-JAN,BQ-FEB,…</td><td style="text-align:left">BQuarterBegin</td><td style="text-align:left">以指定月份（最后一个工作日）结束季度</td></tr><tr><td style="text-align:left">QS-JAN,QS-FEB,…</td><td style="text-align:left">QuarterBegin</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">BQS-JAN,BQS-FEB,…</td><td style="text-align:left">BQuarterBegin</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">A-JAN,A-FEB,…</td><td style="text-align:left">YearEnd</td><td style="text-align:left">以指定月份（最后一个日历日）结束年度</td></tr><tr><td style="text-align:left">BA-JAN,BA-FEB,…</td><td style="text-align:left">BYearEnd</td><td style="text-align:left">以指定月份（最后一个工作日）结束年度</td></tr><tr><td style="text-align:left">AS-JAN,AS-FEB,…</td><td style="text-align:left">YearBegin</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">BAS-JAN,BAS-FEB,…</td><td style="text-align:left">BYearBegin</td><td style="text-align:left"></td></tr></tbody></table><p>Examples</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">112</span>]: d = datetime(<span class="number">2008</span>, <span class="number">8</span>, <span class="number">18</span>, <span class="number">9</span>, <span class="number">0</span>)</span><br><span class="line">In [<span class="number">114</span>]: <span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">In [<span class="number">82</span>]: hour = Hour()</span><br><span class="line">In [<span class="number">84</span>]: four_hours = Hour(<span class="number">4</span>) <span class="comment"># 传入一个整数即可定义偏移量的倍数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一般来说，无需明确创建这样的对象，只需使用诸如"H"或"4H"这样的字符串别名即可</span></span><br><span class="line">In [<span class="number">86</span>]: pd.date_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-01-03 23:59'</span>, freq=<span class="string">'4h'</span>)</span><br><span class="line">In [<span class="number">87</span>]: Hour(<span class="number">2</span>) + Minute(<span class="number">30</span>) <span class="comment"># 数学运算</span></span><br><span class="line">Out[<span class="number">87</span>]: &lt;<span class="number">150</span> * Minutes&gt;</span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, periods=<span class="number">10</span>, freq=<span class="string">'2h30min'</span>) <span class="comment"># 字符串"2h30min"</span></span><br></pre></td></tr></table></figure><h2 id="wom日期"><a class="markdownIt-Anchor" href="#wom日期"></a> WOM日期</h2><p>WOM（Week Of Month）是一种非常实用的频率类，它以WOM开头。它使你能获得诸如“每月第3个星期五”之类的日期。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2012-01-01'</span>, <span class="string">'2012-09-01'</span>, freq=<span class="string">'WOM-3FRI'</span>)</span><br></pre></td></tr></table></figure><h1 id="移动超前和滞后数据"><a class="markdownIt-Anchor" href="#移动超前和滞后数据"></a> 移动（超前和滞后）数据</h1><h2 id="shift方法"><a class="markdownIt-Anchor" href="#shift方法"></a> shift方法</h2><p><code>ts.shift(periods=1, freq=None, axis=0)</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [91]: ts = pd.Series(np.random.randn(4),</span><br><span class="line">   ....:                index=pd.date_range(&apos;1/1/2000&apos;, periods=4, freq=&apos;M&apos;))</span><br><span class="line">In [94]: ts.shift(-2)</span><br><span class="line">In [96]: ts.shift(3, freq=&apos;D&apos;)</span><br></pre></td></tr></table></figure><h2 id="通过offset对日期进行位移"><a class="markdownIt-Anchor" href="#通过offset对日期进行位移"></a> 通过Offset对日期进行位移</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">98</span>]: <span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> Day, MonthEnd</span><br><span class="line">In [<span class="number">99</span>]: now = datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">17</span>)</span><br><span class="line">In [<span class="number">100</span>]: now + <span class="number">3</span> * Day()</span><br><span class="line">Out[<span class="number">100</span>]: Timestamp(<span class="string">'2011-11-20 00:00:00'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果加的是锚定偏移量（比如MonthEnd），第一次增量会将原日期向前滚动到符合频率规则的下一个日期</span></span><br><span class="line">In [<span class="number">102</span>]: now + MonthEnd(<span class="number">2</span>)</span><br><span class="line">Out[<span class="number">102</span>]: Timestamp(<span class="string">'2011-12-31 00:00:00'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 锚定偏移量的rollforward和rollback方法，可明确地将日期向前或向后“滚动”</span></span><br><span class="line">In [<span class="number">103</span>]: offset = MonthEnd()</span><br><span class="line">In [<span class="number">104</span>]: offset.rollforward(now)</span><br><span class="line">Out[<span class="number">104</span>]: Timestamp(<span class="string">'2011-11-30 00:00:00'</span>)</span><br><span class="line">In [<span class="number">105</span>]: offset.rollback(now)</span><br><span class="line">Out[<span class="number">105</span>]: Timestamp(<span class="string">'2011-10-31 00:00:00'</span>)</span><br></pre></td></tr></table></figure><h1 id="时期及其算术运算"><a class="markdownIt-Anchor" href="#时期及其算术运算"></a> 时期及其算术运算</h1><h2 id="period"><a class="markdownIt-Anchor" href="#period"></a> Period</h2><p><code>pd.Period(value=None, freq=None, ordinal=None, year=None, month=None, quarter=None, day=None, hour=None, minute=None, second=None)</code><br>时期（period）表示的是时间区间，比如数日、数月、数季、数年等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">149</span>]: p = pd.Period(<span class="number">2007</span>, freq=<span class="string">'A-DEC'</span>)</span><br><span class="line">In [<span class="number">150</span>]: p</span><br><span class="line">Out[<span class="number">150</span>]: Period(<span class="string">'2007'</span>, <span class="string">'A-DEC'</span>)</span><br><span class="line">In [<span class="number">151</span>]: p + <span class="number">5</span></span><br><span class="line">Out[<span class="number">151</span>]: Period(<span class="string">'2012'</span>, <span class="string">'A-DEC'</span>)</span><br><span class="line">In [<span class="number">153</span>]: pd.Period(<span class="string">'2014'</span>, freq=<span class="string">'A-DEC'</span>) - p</span><br><span class="line">Out[<span class="number">153</span>]: <span class="number">7</span></span><br></pre></td></tr></table></figure><h2 id="periodindex-and-period_range"><a class="markdownIt-Anchor" href="#periodindex-and-period_range"></a> PeriodIndex and period_range</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># period_range函数可用于创建规则的时期范围，返回PeriodIndex对象</span></span><br><span class="line">pd.period_range(start=<span class="literal">None</span>, end=<span class="literal">None</span>, periods=<span class="literal">None</span>, freq=<span class="string">'D'</span>, name=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">pd.PeriodIndex(data=<span class="literal">None</span>, ordinal=<span class="literal">None</span>, freq=<span class="literal">None</span>, start=<span class="literal">None</span>, end=<span class="literal">None</span>, </span><br><span class="line">   periods=<span class="literal">None</span>, copy=<span class="literal">False</span>, name=<span class="literal">None</span>, tz=<span class="literal">None</span>, dtype=<span class="literal">None</span>, **kwargs)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">154</span>]: rng = pd.period_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-06-30'</span>, freq=<span class="string">'M'</span>)</span><br><span class="line">In [<span class="number">155</span>]: rng</span><br><span class="line">Out[<span class="number">155</span>]: PeriodIndex([<span class="string">'2000-01'</span>, <span class="string">'2000-02'</span>, <span class="string">'2000-03'</span>, <span class="string">'2000-04'</span>, <span class="string">'2000-05'</span>, <span class="string">'20</span></span><br><span class="line"><span class="string">00-06'</span>], dtype=<span class="string">'period[M]'</span>, freq=<span class="string">'M'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 作为时间序列索引引用</span></span><br><span class="line">In [<span class="number">156</span>]: pd.Series(np.random.randn(<span class="number">6</span>), index=rng)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pd.PeriodIndex</span></span><br><span class="line">In [<span class="number">157</span>]: values = [<span class="string">'2001Q3'</span>, <span class="string">'2002Q2'</span>, <span class="string">'2003Q1'</span>]</span><br><span class="line">In [<span class="number">158</span>]: index = pd.PeriodIndex(values, freq=<span class="string">'Q-DEC'</span>)</span><br><span class="line">In [<span class="number">159</span>]: index</span><br><span class="line">Out[<span class="number">159</span>]: PeriodIndex([<span class="string">'2001Q3'</span>, <span class="string">'2002Q2'</span>, <span class="string">'2003Q1'</span>], dtype=<span class="string">'period[Q-DEC]'</span>, freq</span><br><span class="line">=<span class="string">'Q-DEC'</span>)</span><br></pre></td></tr></table></figure><h2 id="时期的频率转换"><a class="markdownIt-Anchor" href="#时期的频率转换"></a> 时期的频率转换</h2><p>Period和PeriodIndex对象都可以通过其asfreq方法被转换成别的频率。<br><code>p.asfreq(freq,how='end')</code></p><blockquote><p>freq : string<br>how : {‘E’, ‘S’, ‘end’, ‘start’}, default ‘end’<br>Start or end of the timespan</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">160</span>]: p = pd.Period(<span class="string">'2007'</span>, freq=<span class="string">'A-DEC'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">162</span>]: p.asfreq(<span class="string">'M'</span>, how=<span class="string">'start'</span>)</span><br><span class="line">Out[<span class="number">162</span>]: Period(<span class="string">'2007-01'</span>, <span class="string">'M'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">163</span>]: p.asfreq(<span class="string">'M'</span>, how=<span class="string">'end'</span>)</span><br><span class="line">Out[<span class="number">163</span>]: Period(<span class="string">'2007-12'</span>, <span class="string">'M'</span>)</span><br></pre></td></tr></table></figure><p><img alt="时期的频率转换" data-src="/images/period.png"></p><h2 id="按季度计算的时期频率"><a class="markdownIt-Anchor" href="#按季度计算的时期频率"></a> 按季度计算的时期频率</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2012Q4</span></span><br><span class="line">In [<span class="number">175</span>]: p = pd.Period(<span class="string">'2012Q4'</span>, freq=<span class="string">'Q-JAN'</span>)</span><br><span class="line">In [<span class="number">176</span>]: p</span><br><span class="line">Out[<span class="number">176</span>]: Period(<span class="string">'2012Q4'</span>, <span class="string">'Q-JAN'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2012Q4是从11月到1月（ freq='Q-JAN'）</span></span><br><span class="line">In [<span class="number">177</span>]: p.asfreq(<span class="string">'D'</span>, <span class="string">'start'</span>)</span><br><span class="line">Out[<span class="number">177</span>]: Period(<span class="string">'2011-11-01'</span>, <span class="string">'D'</span>)</span><br><span class="line">In [<span class="number">178</span>]: p.asfreq(<span class="string">'D'</span>, <span class="string">'end'</span>)</span><br><span class="line">Out[<span class="number">178</span>]: Period(<span class="string">'2012-01-31'</span>, <span class="string">'D'</span>)</span><br></pre></td></tr></table></figure><p><img alt="按季度计算的时期频率" data-src="/images/period2.png"></p><h2 id="timestamp和period户型给转换"><a class="markdownIt-Anchor" href="#timestamp和period户型给转换"></a> Timestamp和Period户型给转换</h2><p><code>Timestamp.to_period(freq=None)</code><br><code>Period.to_timestamp(freq,how)</code></p><blockquote><p>freq : string or DateOffset, default is ‘D’<br>how: str, default ‘S’ (start): ‘Start’, ‘Finish’, ‘Begin’, ‘End’</p></blockquote><h1 id="重采样及频率转换"><a class="markdownIt-Anchor" href="#重采样及频率转换"></a> 重采样及频率转换</h1><p>重采样（resampling）指的是将时间序列从一个频率转换到另一个频率的处理过程。将高频率数据聚合到低频率称为降采样（downsampling），而将低频率数据转换到高频率则称为升采样（upsampling）。</p><p>pandas对象都带有一个resample方法，它是各种频率转换工作的主力函数。resample有一个类似于groupby的API，调用resample可以分组数据，然后会调用一个聚合函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ts.resample(rule, how=<span class="literal">None</span>, axis=<span class="number">0</span>, fill_method=<span class="literal">None</span>, closed=<span class="literal">None</span>, label=<span class="literal">None</span>, </span><br><span class="line">   convention=<span class="string">'start'</span>, kind=<span class="literal">None</span>, loffset=<span class="literal">None</span>, limit=<span class="literal">None</span>, base=<span class="number">0</span>, on=<span class="literal">None</span>, level=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><blockquote><p>Parameters:<br>rule :  表示重采样频率的字符串或Offset<br>axis : int, optional, default 0<br>fill_method: {’'ffill,‘bfill’}，插值方法<br>limit: 向前或向后填充的最大区间<br>kind: {‘period’,‘timestamp’}，默认聚合的时间序列的索引类型<br>closed : {‘right’, ‘left’}，降采样中时间段的哪一端闭合<br>label : {‘right’, ‘left’}，降采样中如何设置聚合值的标签<br>convention : {‘start’, ‘end’, ‘s’, ‘e’}，低频周期到高频周期的惯用法<br>loffset : timedelta，面元标签的时间校正值</p></blockquote><h2 id="降采样"><a class="markdownIt-Anchor" href="#降采样"></a> 降采样</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">213</span>]: rng = pd.date_range(<span class="string">'2000-01-01'</span>, periods=<span class="number">12</span>, freq=<span class="string">'T'</span>)</span><br><span class="line">In [<span class="number">214</span>]: ts = pd.Series(np.arange(<span class="number">12</span>), index=rng)</span><br><span class="line">In [<span class="number">216</span>]: ts.resample(<span class="string">'5min'</span>, closed=<span class="string">'right'</span>).sum()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过loffset设置一个字符串或日期偏移量对索引进行位移</span></span><br><span class="line">In [<span class="number">219</span>]: ts.resample(<span class="string">'5min'</span>, closed=<span class="string">'right'</span>,</span><br><span class="line">   .....:             label=<span class="string">'right'</span>, loffset=<span class="string">'-1s'</span>).sum()</span><br><span class="line">Out[<span class="number">219</span>]: </span><br><span class="line"><span class="number">1999</span><span class="number">-12</span><span class="number">-31</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span>     <span class="number">0</span></span><br><span class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">04</span>:<span class="number">59</span>    <span class="number">15</span></span><br></pre></td></tr></table></figure><h2 id="ohlc重采样"><a class="markdownIt-Anchor" href="#ohlc重采样"></a> OHLC重采样</h2><p>金融领域中有一种无所不在的时间序列聚合方式，即计算各面元的四个值：第一个值（open，开盘）、最后一个值（close，收盘）、最大值（high，最高）以及最小值（low，最低）。传入how='ohlc’即可得到一个含有这四种聚合值的DataFrame。整个过程很高效，只需一次扫描即可计算出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">220</span>]: ts.resample(<span class="string">'5min'</span>).ohlc()</span><br><span class="line">Out[<span class="number">220</span>]: </span><br><span class="line">                     open  high  low  close</span><br><span class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>     <span class="number">0</span>     <span class="number">4</span>    <span class="number">0</span>      <span class="number">4</span></span><br><span class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">05</span>:<span class="number">00</span>     <span class="number">5</span>     <span class="number">9</span>    <span class="number">5</span>      <span class="number">9</span></span><br><span class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">10</span>:<span class="number">00</span>    <span class="number">10</span>    <span class="number">11</span>   <span class="number">10</span>     <span class="number">11</span></span><br></pre></td></tr></table></figure><h2 id="升采样和插值"><a class="markdownIt-Anchor" href="#升采样和插值"></a> 升采样和插值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">221</span>]: frame = pd.DataFrame(np.random.randn(<span class="number">2</span>, <span class="number">4</span>),</span><br><span class="line">   .....:                      index=pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">2</span>,freq=<span class="string">'W-WED'</span>),</span><br><span class="line">   .....:                      columns=[<span class="string">'Colorado'</span>, <span class="string">'Texas'</span>, <span class="string">'New York'</span>, <span class="string">'Ohio'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">226</span>]: frame.resample(<span class="string">'D'</span>).ffill(limit=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h1 id="移动窗口函数"><a class="markdownIt-Anchor" href="#移动窗口函数"></a> 移动窗口函数</h1><h2 id="移动窗口函数-2"><a class="markdownIt-Anchor" href="#移动窗口函数-2"></a> 移动窗口函数</h2><p><code>ts.rolling(window, min_periods=None, freq=None, center=False, win_type=None, on=None, axis=0, closed=None)</code></p><blockquote><p>window : int, or offset</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts.rolling(<span class="number">250</span>).mean().plot() <span class="comment"># 移动窗口平均值作图</span></span><br></pre></td></tr></table></figure><h2 id="指数加权函数"><a class="markdownIt-Anchor" href="#指数加权函数"></a> 指数加权函数</h2><p>另一种使用固定大小窗口及相等权数观测值的办法是，定义一个衰减因子（decay factor）常量，以便使近期的观测值拥有更大的权数。衰减因子的定义方式有很多，比较流行的是使用时间间隔（span），它可以使结果兼容于窗口大小等于时间间隔的简单移动窗口（simple moving window）函数。</p><p><code>ts.ewm(com=None, span=None, halflife=None, alpha=None, min_periods=0, freq=None, adjust=True, ignore_na=False, axis=0)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts.ewm(span=<span class="number">30</span>).mean().plot()</span><br></pre></td></tr></table></figure><h2 id="二元移动窗口函数"><a class="markdownIt-Anchor" href="#二元移动窗口函数"></a> 二元移动窗口函数</h2><p>有些统计运算（如相关系数和协方差）需要在两个时间序列上执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设你想要一次性计算多只股票与标准普尔500指数的相关系数</span></span><br><span class="line">In [<span class="number">262</span>]: corr = returns.rolling(<span class="number">125</span>, min_periods=<span class="number">100</span>).corr(spx_rets)</span><br><span class="line">In [<span class="number">263</span>]: corr.plot()</span><br></pre></td></tr></table></figure><p><img alt="二元移动窗口函数" data-src="/images/corr.png"></p><h2 id="用户定义的移动窗口函数"><a class="markdownIt-Anchor" href="#用户定义的移动窗口函数"></a> 用户定义的移动窗口函数</h2><p>rolling_apply函数使你能够在移动窗口上应用自己设计的数组函数。唯一要求的就是：该函数要能从数组的各个片段中产生单个值（即约简）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">265</span>]: <span class="keyword">from</span> scipy.stats <span class="keyword">import</span> percentileofscore</span><br><span class="line">In [<span class="number">266</span>]: score_at_2percent = <span class="keyword">lambda</span> x: percentileofscore(x, <span class="number">0.02</span>)</span><br><span class="line">In [<span class="number">267</span>]: result = returns.AAPL.rolling(<span class="number">250</span>).apply(score_at_2percent)</span><br><span class="line">In [<span class="number">268</span>]: result.plot()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> pandas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 时间序列 </tag>
            
            <tag> python </tag>
            
            <tag> pandas </tag>
            
            <tag> 日期 </tag>
            
            <tag> 时间 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Visualise)--seaborn</title>
      <link href="/posts/python/PythonNotebook(Visualise)--seaborn.html"/>
      <url>/posts/python/PythonNotebook(Visualise)--seaborn.html</url>
      
        <content type="html"><![CDATA[<p><strong>Seaborn</strong>是基于matplotlib的Python可视化库。它提供了一个高级界面来绘制有吸引力的统计图形。</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure><p>参考链接：<a href="https://blog.csdn.net/ice_martin/article/details/61617053" target="_blank" rel="noopener">Matplotlib进阶：Seaborn教程</a></p><h2 id="style-frontend前端样式"><a class="markdownIt-Anchor" href="#style-frontend前端样式"></a> Style frontend(前端样式)</h2><p>Seaborn将matplotlib参数分成两个独立的组。第一组设定美学样式，第二组规定图形的各种元素，以便它可以很容易地融入不同的情境。</p><table><thead><tr><th style="text-align:left">美学样式</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">sns.axes_style(style=None, rc=None)</td><td style="text-align:left">获取当前样式，返回参数字典</td></tr><tr><td style="text-align:left">sns.set_style(style=None, rc=None)</td><td style="text-align:left">自定义seaborn样式，将参数字典传递给<code>rc</code>参数<br><strong>seaborn主题（style参数）：</strong><br><code>{darkgrid(default), whitegrid, dark, white, ticks}</code></td></tr><tr><td style="text-align:left"><strong>绘图元素</strong></td><td style="text-align:left">设置绘图元素大小</td></tr><tr><td style="text-align:left">sns.plotting_context(context=None, font_scale=1, rc=None)</td><td style="text-align:left">获取当前设置，返回参数字典</td></tr><tr><td style="text-align:left">sns.set_context(context=None, font_scale=1, rc=None)</td><td style="text-align:left">控制着绘图元素的比例，四种预设，按相对大小的顺序，依次是<code>{paper, notebook(default), talk, poster}</code></td></tr></tbody></table><blockquote><ul><li>要切换到seaborn默认值，只需调用该<code>set()</code>函数即可。<br><code>sns.set(context='notebook', style='darkgrid', palette='deep', font='sans-serif', font_scale=1, color_codes=False, rc=None)</code></li><li>暂时设置图形样式：嵌套<code>with</code>语句</li></ul></blockquote><p>Examples:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sns.set_style(<span class="string">"whitegrid"</span>) <span class="comment"># seaborn主题</span></span><br><span class="line">sns.despine(left=<span class="literal">True</span>) <span class="comment"># 控制边框</span></span><br><span class="line">sns.set_style(<span class="string">"darkgrid"</span>, &#123;<span class="string">"axes.facecolor"</span>: <span class="string">".9"</span>&#125;) <span class="comment"># 自定义样式</span></span><br><span class="line">sns.set_context(<span class="string">"notebook"</span>, font_scale=<span class="number">1.5</span>, rc=&#123;<span class="string">"lines.linewidth"</span>: <span class="number">2.5</span>&#125;) <span class="comment"># 控制绘图元素大小</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 临时设置模块</span></span><br><span class="line">iris = sns.load_dataset(<span class="string">"iris"</span>)</span><br><span class="line"><span class="keyword">with</span> sns.axes_style(<span class="string">"darkgrid"</span>):</span><br><span class="line">    plt.subplot(<span class="number">211</span>)</span><br><span class="line">    iris.plot()</span><br></pre></td></tr></table></figure><h2 id="color-palettes调色板"><a class="markdownIt-Anchor" href="#color-palettes调色板"></a> Color palettes(调色板)</h2><table><thead><tr><th style="text-align:left">调色板</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>sns.color_palette(palette=None, n_colors=None, desat=None)</code></td><td style="text-align:left">创建调色板</td></tr><tr><td style="text-align:left"><code>sns.set_palette(palette, n_colors=None, desat=None, color_codes=False)</code></td><td style="text-align:left">设置默认调色板</td></tr></tbody></table><blockquote><p>Parameters:<br>palette: None, string, or  list of colors, optional<br>n_colors : int, optional<br>desat : float, optional</p></blockquote><table><thead><tr><th style="text-align:left">分类调色板</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">sns.color_palette()</td><td style="text-align:left">6分类主题<code>palette: {deep, muted, bright, pastel, dark, colorblind}</code><br>多分类调色<code>palette: {hls, husl,Paired,Set2}</code></td></tr><tr><td style="text-align:left">sns.hls_palette(n_colors=6, h=0.01, l=0.6, s=0.65)</td><td style="text-align:left">l: 亮度<br>s: 饱和度</td></tr><tr><td style="text-align:left">sns.husl_palette(n_colors=6, h=0.01, s=0.9, l=0.65)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sns.xkcd_palette(colors)</td><td style="text-align:left">传递已命名颜色字符列表</td></tr><tr><td style="text-align:left"><strong>连续调色板</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sns.color_palette(‘Blues’)</td><td style="text-align:left">单颜色字符（添加<code>_r</code>后缀，反转调色板，也可以添加<code>_d</code>后缀创建’dark’调色板）</td></tr><tr><td style="text-align:left">sns.cubehelix_palette()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sns.light_palette()<br>sns.dark_palette()</td><td style="text-align:left">from light/dark to color<br>默认参数：color, n_colors=6, reverse=False, as_cmap, …</td></tr><tr><td style="text-align:left"><strong>发散调色板</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">color_palette()</td><td style="text-align:left"><code>palette: {BRBG, RdBu_r,coolwarm,...}</code></td></tr><tr><td style="text-align:left">sns.diverging_palette()</td><td style="text-align:left">自定义发散调色板</td></tr><tr><td style="text-align:left"><strong>调色板工具</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sns.choose_colorbrewer_palette(data_type, as_cmap=False)</td><td style="text-align:left"><code>data_type:{'sequential', 'diverging', 'qualitative'}</code><br><code>as_cmap : bool</code>是否离散</td></tr><tr><td style="text-align:left">choose_light_palette()<br>choose_dark_palette()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">choose_cubehelix_palette()</td><td style="text-align:left"></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分类</span></span><br><span class="line">sns.palplot(sns.color_palette(<span class="string">"husl"</span>, <span class="number">8</span>))</span><br><span class="line">sns.palplot(sns.color_palette(<span class="string">"Set2"</span>, <span class="number">10</span>))</span><br><span class="line">colors = [<span class="string">"windows blue"</span>, <span class="string">"amber"</span>, <span class="string">"greyish"</span>, <span class="string">"faded green"</span>, <span class="string">"dusty purple"</span>]</span><br><span class="line">sns.palplot(sns.xkcd_palette(colors))</span><br><span class="line"><span class="comment"># 连续</span></span><br><span class="line">sns.palplot(sns.color_palette(<span class="string">"GnBu_d"</span>))</span><br><span class="line"><span class="comment"># 发散</span></span><br><span class="line">sns.palplot(sns.color_palette(<span class="string">"coolwarm"</span>, <span class="number">7</span>))</span><br></pre></td></tr></table></figure><p><img alt="colors" data-src="/images/matplotlib/color.png"></p><h2 id="distribution-plots分布图"><a class="markdownIt-Anchor" href="#distribution-plots分布图"></a> Distribution plots(分布图)</h2><p><code>sns.distplot(a,bins, hist, kde, rug, fit)</code> 单变量分布图</p><blockquote><p>Parameters:<br>a : Series, 1d-array, or list.<br>hist, kde, rug: (bool, optional) 直方图，核密度图，地毯图</p></blockquote><p><code>sns.jointplot(x,y,data, kind, stat_func)</code> 双变量分布图</p><blockquote><p>Parameters:<br>x, y : strings or vectors<br>data : DataFrame, optional<br>kind : { “scatter” | “reg” | “resid” | “kde” | “hex” }, optional</p></blockquote><p><code>kdeplot(data,data2, shade, vertical)</code> 核密度图</p><blockquote><p>Parameters:<br>data2: 1d array-like, optional<br>kernel : {‘gau’ | ‘cos’ | ‘biw’ | ‘epa’ | ‘tri’ | ‘triw’ }, optional<br>bw : {‘scott’ | ‘silverman’ | scalar | pair of scalars }, optional</p></blockquote><p><code>rugplot(a, height, axis, ax)</code>地毯图</p><h2 id="categorical-plots分类图"><a class="markdownIt-Anchor" href="#categorical-plots分类图"></a> Categorical plots(分类图)</h2><p><code>stripplot(x, y, hue, data, order)</code> 分类散点图<br><code>swarmplot(x, y, hue, data, order)</code>非重叠分类散点图</p><blockquote><p>Parameters:<br>x, y, hue : (names of variables in data or vector data, optional) x, y, hue 映射变量<br>data : DataFrame, array, or list of arrays, optional<br>jitter : float, 点重叠设置<br>palette : 调色板<br>order: 图排列顺序</p></blockquote><p><code>sns.boxplot(x, y, hue, data, order)</code> 箱线图<br><code>sns.violinplot(x, y, hue, data, order)</code>小提琴图</p><blockquote><p>notch : boolean, optional</p></blockquote><p><code>sns.barplot(x, y, hue, data, order)</code>柱状图<br><code>sns.countplot(x, y, hue, data, order)</code>柱状图<br><code>sns.pointplot(x, y, hue, data, order)</code>折线图<br><code>sns.lvplot(x, y, hue, data, order)</code> 字母值图</p><h2 id="regression-plots回归图"><a class="markdownIt-Anchor" href="#regression-plots回归图"></a> Regression plots(回归图)</h2><p><code>sns.regplot(x,y,data,x_estimator, x_bins)</code><br><code>sns.residplot(x,y,data, lowess, x_partial)</code><br><code>lmplot(x, y, data, hue, col, row, palette)</code></p><h2 id="matrix-plots矩阵图"><a class="markdownIt-Anchor" href="#matrix-plots矩阵图"></a> Matrix plots(矩阵图)</h2><p><code>sns.heatmap(data,vmin, vmax, cmap, center,)</code><br><code>sns.clustermap(data,pivot_kws, method)</code></p><blockquote><p>data : rectangular dataset<br>vmin, vmax : floats, optional<br>cmap : matplotlib colormap name or object, or list of colors, optional<br>center : float, optional<br>xticklabels, yticklabels : “auto”, bool, list-like, or int, optional</p></blockquote><h2 id="axis-grids网格图"><a class="markdownIt-Anchor" href="#axis-grids网格图"></a> Axis grids(网格图)</h2><p><code>sns.FacetGrid(data[, row, col, hue, col_wrap, ...])</code><br><code>sns.factorplot([x, y, hue, data, row, col, ...])</code> 分类变量网格图</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = sns.FacetGrid(tips, col=<span class="string">"time"</span>,  row=<span class="string">"smoker"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = g.map(plt.hist, <span class="string">"total_bill"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.add_legend()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exercise = sns.load_dataset(<span class="string">"exercise"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = sns.factorplot(x=<span class="string">"time"</span>, y=<span class="string">"pulse"</span>, hue=<span class="string">"kind"</span>,</span><br><span class="line"><span class="meta">... </span>                   data=exercise, kind=<span class="string">"violin"</span>)</span><br></pre></td></tr></table></figure><p><code>sns.PairGrid(data[, hue, hue_order, palette, ...])</code> 配对矩阵<br><code>sns.pairplot(data[, hue, hue_order, palette, ...])</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, diag_kind=<span class="string">"kde"</span>)</span><br><span class="line"></span><br><span class="line">g = sns.PairGrid(iris)</span><br><span class="line">g.map_diag(plt.hist) <span class="comment">#对角线</span></span><br><span class="line">g.map_offdiag(plt.scatter) <span class="comment"># 非对角线</span></span><br><span class="line">g.map_upper(plt.scatter) <span class="comment"># 上方区域</span></span><br><span class="line">g.map_lower(sns.kdeplot, cmap=<span class="string">"Blues_d"</span>)</span><br></pre></td></tr></table></figure><p><code>sns.JointGrid(x, y[, data, size, ratio, space, ...])</code><br><code>sns.jointplot(x, y[, data, kind, stat_func, ...])</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = sns.JointGrid(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, data=tips, space=<span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = g.plot_joint(sns.kdeplot, cmap=<span class="string">"Blues_d"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = g.plot_marginals(sns.kdeplot, shade=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="timeseries-plots时间序列"><a class="markdownIt-Anchor" href="#timeseries-plots时间序列"></a> Timeseries plots(时间序列)</h2><p><code>tsplot(data, time, unit, condition, value)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>gammas = sns.load_dataset(<span class="string">"gammas"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ax = sns.tsplot(time=<span class="string">"timepoint"</span>, value=<span class="string">"BOLD signal"</span>,</span><br><span class="line"><span class="meta">... </span>                unit=<span class="string">"subject"</span>, condition=<span class="string">"ROI"</span>,</span><br><span class="line"><span class="meta">... </span>                data=gammas)</span><br></pre></td></tr></table></figure><h2 id="other-functions其他函数"><a class="markdownIt-Anchor" href="#other-functions其他函数"></a> Other functions(其他函数)</h2><ul><li><code>sns.despine()</code>    移除边框线</li></ul><blockquote><p>参数：<br><code>fig</code>: current figure(default)<br><code>ax</code>: matplotlib axes(optional)<br><code>top, right, left, bottom</code> : (boolean, optional) If True, remove that spine<br><code>offset</code> : (int or dict, optional) 移除的距离<br><code>trim</code> : (bool, optional) If True, 最大化</p></blockquote><ul><li><code>palplot(pal, size=1)</code> 横向绘制调色板函数</li><li><code>sns.desaturate(color, prop)</code>降低某种颜色的饱和度通道百分比。</li><li><code>sns.saturate(color)</code>用相同的色调返回完全饱和的颜色。</li><li><code>sns.set_hls_values(color, h=None, l=None, s=None)</code>独立操作颜色的h，l或s通道。</li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 可视化 </tag>
            
            <tag> seaborn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Machine Learning)--sklearn</title>
      <link href="/posts/python/PythonNotebook(Machine-Learning)--sklearn.html"/>
      <url>/posts/python/PythonNotebook(Machine-Learning)--sklearn.html</url>
      
        <content type="html"><![CDATA[<p><strong>Scikit-Learn</strong> : The most popular and widely used library for machine learning in Python.</p><ul><li>分类：SVM、近邻、随机森林、逻辑回归等等。</li><li>回归：Lasso、岭回归等等。</li><li>聚类：k-均值、谱聚类等等。</li><li>降维：PCA、特征选择、矩阵分解等等。</li><li>选型：网格搜索、交叉验证、度量。</li><li>预处理：特征提取、标准化。</li></ul><a id="more"></a><h1 id="建模流程the-simplest-sklearn-workflow"><a class="markdownIt-Anchor" href="#建模流程the-simplest-sklearn-workflow"></a> 建模流程(The simplest sklearn workflow)</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">X_train,y_train,x_test,y_test=getData() <span class="comment"># 训练集和测试集</span></span><br><span class="line">model=somemodel()<span class="comment"># 定义模型</span></span><br><span class="line">model.fit(X_train,y_train)<span class="comment"># 拟合模型 </span></span><br><span class="line">predictions=model.predict(x_test) <span class="comment">#模型预测</span></span><br><span class="line">model.get_params() <span class="comment"># 获得这个模型的参数</span></span><br><span class="line">score=model.score(x_test,y_test) <span class="comment"># 为模型进行打分</span></span><br></pre></td></tr></table></figure><p><strong>Model Fitting</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Supervised learning </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lr.fit(X, y) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>svc.fit(X_train, y_train)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Unsupervised Learning </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>k_means.fit(X_train) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pca_model = pca.fit_transform(X_train)</span><br></pre></td></tr></table></figure><p><strong>Prediction</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Supervised Estimators </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y_pred = svc.predict(np.random.random((<span class="number">2</span>,<span class="number">5</span>))) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y_pred = lr.predict(X_test) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y_pred = knn.predict_proba(X_test)   </span><br><span class="line"></span><br><span class="line"><span class="comment"># Unsupervised Estimators </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y_pred = k_means.predict(X_test)</span><br></pre></td></tr></table></figure><h1 id="数据集datasets"><a class="markdownIt-Anchor" href="#数据集datasets"></a> 数据集(Datasets)</h1><p>import sklearn.datasets</p><h2 id="加载示例数据集"><a class="markdownIt-Anchor" href="#加载示例数据集"></a> 加载示例数据集</h2><table><thead><tr><th>加载</th><th>适用类型</th></tr></thead><tbody><tr><td>datasets.load_iris()</td><td>分类</td></tr><tr><td>datasets.load_boston()</td><td>回归</td></tr><tr><td>datasets.load_didits()</td><td>分类(数字图片)</td></tr></tbody></table><h2 id="创建数据集"><a class="markdownIt-Anchor" href="#创建数据集"></a> 创建数据集</h2><p><code>datasets.make_classification()</code>创建分类数据集<br><code>datasets.make_regression()</code>创建回归数据集</p><blockquote><p>参数：<br>n_samples：指定样本数<br>n_features：指定特征数<br>n_classes：指定几分类</p></blockquote><h1 id="回归和分类regression-and-classification"><a class="markdownIt-Anchor" href="#回归和分类regression-and-classification"></a> 回归和分类(Regression and Classification)</h1><h2 id="线性模型"><a class="markdownIt-Anchor" href="#线性模型"></a> 线性模型</h2><table><thead><tr><th>sklearn.linear_model</th><th>线性模型</th></tr></thead><tbody><tr><td>LinearRegression</td><td>普通最小二乘法</td></tr><tr><td>Ridge</td><td>岭回归</td></tr><tr><td>Lasso</td><td>估计稀疏系数的线性模型回归</td></tr><tr><td>MultiTaskLasso</td><td>多任务 Lasso 回归</td></tr><tr><td>LogisticRegression</td><td>logistic 回归</td></tr><tr><td>SGDRegressor</td><td>随机梯度下降回归</td></tr><tr><td>SGDClassifier</td><td>随机梯度下降分类</td></tr><tr><td>ElasticNetCV</td><td>弹性网络回归</td></tr><tr><td>MultiTaskElasticNet</td><td>多任务弹性网络回归</td></tr></tbody></table><h2 id="支持向量机"><a class="markdownIt-Anchor" href="#支持向量机"></a> 支持向量机</h2><table><thead><tr><th>sklearn.svm</th><th>支持向量机</th></tr></thead><tbody><tr><td>SVC</td><td>支持向量机分类</td></tr><tr><td>SVR</td><td>支持向量机回归</td></tr></tbody></table><h2 id="最近邻算法"><a class="markdownIt-Anchor" href="#最近邻算法"></a> 最近邻算法</h2><table><thead><tr><th>sklearn.neighbors</th><th>最近邻算法</th></tr></thead><tbody><tr><td>NearestNeighbors</td><td>无监督最近邻</td></tr><tr><td>KNeighborsClassifier</td><td>k-近邻分类</td></tr><tr><td>RadiusNeighborsClassifier</td><td>固定半径近邻分类</td></tr><tr><td>KNeighborsRegressor</td><td>最近邻回归</td></tr><tr><td>RadiusNeighborsRegressor</td><td></td></tr><tr><td>NearestCentroid</td><td>最近质心分类</td></tr></tbody></table><h2 id="高斯过程"><a class="markdownIt-Anchor" href="#高斯过程"></a> 高斯过程</h2><table><thead><tr><th>sklearn.gaussian_process</th><th>高斯过程</th></tr></thead><tbody><tr><td>GaussianProcessRegressor</td><td>高斯过程回归（GPR）</td></tr><tr><td>GaussianProcessClassifier</td><td>高斯过程分类（GPC）</td></tr><tr><td>Kernel</td><td>高斯过程内核</td></tr></tbody></table><h2 id="决策树"><a class="markdownIt-Anchor" href="#决策树"></a> 决策树</h2><table><thead><tr><th>sklearn.tree</th><th>决策树</th></tr></thead><tbody><tr><td>DecisionTreeClassifier</td><td>决策树分类</td></tr><tr><td>DecisionTreeRegressor</td><td>决策树回归</td></tr></tbody></table><h2 id="内核岭回归"><a class="markdownIt-Anchor" href="#内核岭回归"></a> 内核岭回归</h2><table><thead><tr><th>sklearn.kernel_ridge</th><th>内核岭回归</th></tr></thead><tbody><tr><td>KernelRidge</td><td>内核岭回归</td></tr></tbody></table><h2 id="等式回归"><a class="markdownIt-Anchor" href="#等式回归"></a> 等式回归</h2><table><thead><tr><th>sklearn.isotonic.IsotonicRegression</th><th>等式回归</th></tr></thead><tbody><tr><td>IsotonicRegression</td><td></td></tr></tbody></table><h2 id="多类多标签算法"><a class="markdownIt-Anchor" href="#多类多标签算法"></a> 多类多标签算法</h2><table><thead><tr><th>sklearn.multiclass</th><th>多类多标签算法</th></tr></thead><tbody><tr><td>multiclass</td><td></td></tr></tbody></table><h2 id="朴素贝叶斯分类器"><a class="markdownIt-Anchor" href="#朴素贝叶斯分类器"></a> 朴素贝叶斯分类器</h2><table><thead><tr><th>sklearn.naive_bayes</th><th>朴素贝叶斯分类器</th></tr></thead><tbody><tr><td>GaussianNB</td><td>高斯朴素贝叶斯</td></tr><tr><td>MultinomialNB</td><td>多项分布朴素贝叶斯</td></tr><tr><td>BernoulliNB</td><td>伯努利朴素贝叶斯</td></tr></tbody></table><h2 id="集成方法"><a class="markdownIt-Anchor" href="#集成方法"></a> 集成方法</h2><table><thead><tr><th>sklearn.ensemble</th><th>集成方法</th></tr></thead><tbody><tr><td>BaggingClassifier</td><td>Bagging</td></tr><tr><td>BaggingRegressor</td><td></td></tr><tr><td>RandomForestClassifier</td><td>随机森林</td></tr><tr><td>RandomForestRegressor</td><td></td></tr><tr><td>ExtraTreesClassifier</td><td>极限随机树</td></tr><tr><td>ExtraTreesRegressor</td><td></td></tr><tr><td>AdaBoostClassifier</td><td>AdaBoost</td></tr><tr><td>AdaBoostRegressor</td><td></td></tr><tr><td>GradientBoostingClassifier</td><td>Gradient Tree Boosting (梯度树提升)</td></tr><tr><td>GradientBoostingRegressor</td><td></td></tr><tr><td>VotingClassifier</td><td>投票分类器</td></tr></tbody></table><h2 id="神经网络"><a class="markdownIt-Anchor" href="#神经网络"></a> 神经网络</h2><table><thead><tr><th>sklearn.neural_network</th><th>神经网络</th></tr></thead><tbody><tr><td>MLPClassifier</td><td>多层感知器(MLP)</td></tr><tr><td>MLPRegressor</td><td></td></tr></tbody></table><h2 id="高斯混合模型"><a class="markdownIt-Anchor" href="#高斯混合模型"></a> 高斯混合模型</h2><table><thead><tr><th>sklearn.mixture</th><th>高斯混合模型</th></tr></thead><tbody><tr><td>GaussianMixture</td><td>高斯混合</td></tr><tr><td>BayesianGaussianMixture</td><td>变分贝叶斯高斯混合</td></tr></tbody></table><h1 id="聚类clustering"><a class="markdownIt-Anchor" href="#聚类clustering"></a> 聚类(Clustering)</h1><table><thead><tr><th>sklearn.cluster</th><th>聚类</th></tr></thead><tbody><tr><td>KMeans</td><td>K-means聚类</td></tr><tr><td>AffinityPropagation</td><td>AP聚类</td></tr><tr><td>MeanShift</td><td></td></tr><tr><td>SpectralClustering</td><td></td></tr><tr><td>AgglomerativeClustering</td><td>层次聚类</td></tr><tr><td>DBSCAN</td><td></td></tr><tr><td>Birch</td><td></td></tr><tr><td><strong>sklearn.cluster.bicluster</strong></td><td>双聚类</td></tr><tr><td>SpectralCoclustering</td><td></td></tr><tr><td>SpectralBiclustering</td><td></td></tr></tbody></table><h1 id="降维dimensionalityreduction"><a class="markdownIt-Anchor" href="#降维dimensionalityreduction"></a> 降维(DimensionalityReduction)</h1><h2 id="矩阵分解sklearndecomposition"><a class="markdownIt-Anchor" href="#矩阵分解sklearndecomposition"></a> 矩阵分解(sklearn.decomposition)</h2><table><thead><tr><th>主成分分析（PCA）</th><th></th></tr></thead><tbody><tr><td>PCA</td><td>准确的PCA和概率解释</td></tr><tr><td>IncrementalPCA</td><td>增量PCA</td></tr><tr><td>KernelPCA</td><td>核 PCA</td></tr><tr><td>SparsePCA</td><td>稀疏主成分分析</td></tr><tr><td>MiniBatchSparsePCA</td><td>小批量稀疏 PCA</td></tr><tr><td><strong>截断奇异值分解</strong></td><td></td></tr><tr><td>TruncatedSVD</td><td></td></tr><tr><td><em>词典学习：</em></td><td></td></tr><tr><td>SparseCoder</td><td>带有预计算词典的稀疏编码</td></tr><tr><td>DictionaryLearning</td><td>通用词典学习</td></tr><tr><td>MiniBatchDictionaryLearning</td><td>小批量字典学习</td></tr><tr><td><strong>因子分析</strong></td><td></td></tr><tr><td>FactorAnalysis</td><td>高斯分布</td></tr><tr><td>FastICA</td><td>隐变量基于非高斯分布</td></tr><tr><td><strong>独立成分分析（ICA）</strong></td><td></td></tr><tr><td>FastICA</td><td></td></tr><tr><td><strong>非负矩阵分解(NMF 或 NNMF)</strong></td><td></td></tr><tr><td>NMF</td><td></td></tr><tr><td><strong>隐 Dirichlet 分配（LDA）</strong></td><td></td></tr><tr><td>LatentDirichletAllocation</td><td></td></tr></tbody></table><h2 id="流形学习sklearnmanifold"><a class="markdownIt-Anchor" href="#流形学习sklearnmanifold"></a> 流形学习(sklearn.manifold)</h2><table><thead><tr><th>sklearn.manifold</th><th>流形学习，是一种非线性降维方法</th></tr></thead><tbody><tr><td>Isomap</td><td>等距映射（Isometric Mapping）</td></tr><tr><td>LocallyLinearEmbedding</td><td>局部线性嵌入</td></tr><tr><td>SpectralEmbedding</td><td>谱嵌入</td></tr><tr><td>MDS</td><td>多维尺度分析</td></tr><tr><td>TSNE</td><td>t 分布随机邻域嵌入（t-SNE）</td></tr></tbody></table><h1 id="模型选择modelselection"><a class="markdownIt-Anchor" href="#模型选择modelselection"></a> 模型选择(ModelSelection)</h1><p>import sklearn.model_selection</p><h2 id="数据集拆分train_test_split"><a class="markdownIt-Anchor" href="#数据集拆分train_test_split"></a> 数据集拆分(train_test_split)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection  <span class="keyword">import</span> train_test_split</span><br><span class="line">X_train, X_test, y_train,   y_test = train_test_split(X, y, test_size=<span class="literal">None</span>,train_size=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><blockquote><p>参数test_size：float(样本比例,默认0.25), int(样本量)</p></blockquote><h2 id="交叉验证"><a class="markdownIt-Anchor" href="#交叉验证"></a> 交叉验证</h2><ul><li>交叉验证-单指标(cross_val_score)</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scores=model_selection.cross_val_score(model,X,y,</span><br><span class="line">  scoring=<span class="literal">None</span>,cv=<span class="literal">None</span>,</span><br><span class="line">  n_jobs=<span class="number">1</span>,verbose=<span class="number">0</span>,fit_params=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">scores.mean()</span><br></pre></td></tr></table></figure><blockquote><p>return ndarray(包含所有的结果)<br>scoring：评分方法<br>cv(Cross-validation)：cv数量<br>n_jobs：并行数</p></blockquote><ul><li>交叉验证-多度量评估(cross_validate)：用法同cross_val_score</li><li>通过交叉验证获取预测(cross_val_predict)</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">predicted=cross_val_predict(model,X,y,cv=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><h2 id="调整估计器的超参数"><a class="markdownIt-Anchor" href="#调整估计器的超参数"></a> 调整估计器的超参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">estimator.get_params()  <span class="comment"># 获取估计器参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 网格搜索</span></span><br><span class="line">GridSearchCV(model,param_grid,scoring=<span class="literal">None</span>,verbose=<span class="number">0</span>) </span><br><span class="line"><span class="comment"># param_grid:dict or list</span></span><br><span class="line"><span class="comment"># verbose：日志冗长度，int：冗长度，0：不输出训练过程，1：偶尔输出，&gt;1：对每个子模型都输出。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机搜索</span></span><br><span class="line">RandomizedSearchCV()</span><br></pre></td></tr></table></figure><blockquote><p><strong>评分参数</strong>：<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/model_evaluation.html" target="_blank" rel="noopener">sklearn.metrics</a></p></blockquote><p>Examples:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>iris =   datasets.load_iris()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parameters =   &#123;<span class="string">'kernel'</span>:(<span class="string">'linear'</span>, <span class="string">'rbf'</span>), <span class="string">'C'</span>:[<span class="number">1</span>, <span class="number">10</span>]&#125; <span class="comment">#超参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>svc = svm.SVC()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf =   GridSearchCV(svc, parameters)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.fit(iris.data, iris.target)</span><br><span class="line"><span class="comment"># 属性：</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.best_params_      <span class="comment">#最优参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.best_estimator_   <span class="comment">#最优估计器</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>clf.best_score_       <span class="comment">#最优得分</span></span><br></pre></td></tr></table></figure><h2 id="验证曲线-绘制得分曲线以评估模型-validation_curve"><a class="markdownIt-Anchor" href="#验证曲线-绘制得分曲线以评估模型-validation_curve"></a> 验证曲线: 绘制得分曲线以评估模型 (validation_curve)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>param_range=logspace(<span class="number">-6</span>,<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证曲线</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>train_scores,valid_scores=validation_curve(</span><br><span class="line">      model, X, y,</span><br><span class="line">      param_name, param_range=param_range, <span class="comment">#参数名字和参数设定范围</span></span><br><span class="line">      cv=<span class="literal">None</span>, scoring=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得分</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>train_scores_mean=np.mean(train_scores,axis=<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>valid_scores_mean=np.mean(valid_scores,axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.plot(param_range,train_scores_mean,colur=<span class="string">'r'</span>,label=<span class="string">'training'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.plot(param_range,valid_scores_mean,colur=<span class="string">'g'</span>,label=<span class="string">'Cross-validation'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plt.show()</span><br></pre></td></tr></table></figure><h2 id="学习曲线learning_curve"><a class="markdownIt-Anchor" href="#学习曲线learning_curve"></a> 学习曲线(learning_curve)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_sizes,train_scores,valid_scores = learning_curve(model, X, y, train_sizes, cv=<span class="literal">None</span>, scoring=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><h2 id="模型评分metric"><a class="markdownIt-Anchor" href="#模型评分metric"></a> 模型评分<a href="http://sklearn.apachecn.org/cn/0.19.0/modules/model_evaluation.html" target="_blank" rel="noopener">(Metric)</a></h2><p><code>import sklearn.metrics</code></p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td>accuracy_score</td><td>分类：准确率</td></tr><tr><td>log_loss</td><td>分类：损失</td></tr><tr><td>roc_auc_score</td><td>分类：auc值(ROC曲线下面积）</td></tr><tr><td>confusion_matrix</td><td>分类：混淆矩阵</td></tr><tr><td>mean_absolute_error</td><td>回归：平均绝对误差</td></tr><tr><td>mean_squared_error</td><td>回归</td></tr><tr><td>r2_score</td><td>回归：R^2</td></tr><tr><td>label_ranking_loss</td><td>排序度量</td></tr><tr><td>mutual_info_scor</td><td>聚类</td></tr><tr><td>adjusted_rand_score</td><td>聚类：调整rand指数</td></tr><tr><td>homogeneity_score</td><td>聚类</td></tr><tr><td>v_measure_score</td><td>聚类</td></tr></tbody></table><h2 id="模型持久化"><a class="markdownIt-Anchor" href="#模型持久化"></a> 模型持久化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pickle</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#已有建好的模型model</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pickle</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'model.pickle'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    pickle.dumps(model,f)  <span class="comment">#保存</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'model.pickle'</span>,<span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    clf = pickle.loads(f)  <span class="comment">#读取</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># joblib</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span>  sklearn.externals <span class="keyword">import</span> joblib</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>joblib.dump(model, <span class="string">'filename.pkl'</span>)  <span class="comment"># 保存</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>model = joblib.load(<span class="string">'filename.pkl'</span>)  <span class="comment"># 导入</span></span><br></pre></td></tr></table></figure><h1 id="特征选择sklearnfeature_selection"><a class="markdownIt-Anchor" href="#特征选择sklearnfeature_selection"></a> 特征选择(sklearn.feature_selection)</h1><table><thead><tr><th>sklearn.feature_selection</th><th></th></tr></thead><tbody><tr><td>VarianceThreshold</td><td>移除低方差特征，单变量特征选择</td></tr><tr><td>SelectKBest</td><td>移除那些除了评分最高的 K 个特征之外的所有特征</td></tr><tr><td>SelectPercentile</td><td>移除除了用户指定的最高得分百分比之外的所有特征</td></tr><tr><td>GenericUnivariateSelect</td><td>允许使用可配置方法来进行单变量特征选择。它允许超参数搜索评估器来选择最好的单变量特征</td></tr><tr><td>RFECV</td><td>递归式特征消除</td></tr></tbody></table><blockquote><p>检验：<br>对于回归: f_regression , mutual_info_regression<br>对于分类: chi2 , f_classif , mutual_info_classif</p></blockquote><h1 id="预处理pre-processing"><a class="markdownIt-Anchor" href="#预处理pre-processing"></a> 预处理(Pre-Processing)</h1><p>import sklearn.preprocessing</p><h2 id="标准化"><a class="markdownIt-Anchor" href="#标准化"></a> 标准化</h2><ul><li>标准化</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X_scaled =   preprocessing.scale(X_train)</span><br></pre></td></tr></table></figure><ul><li>将特征缩放至特定范围内</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MinMaxScaler</span></span><br><span class="line">min_max_scaler =   preprocessing.MinMaxScaler()</span><br><span class="line">X_train_minmax =   min_max_scaler.fit_transform(X_train)</span><br><span class="line">X_test_minmax =   min_max_scaler.transform(X_test)</span><br><span class="line"><span class="comment"># X_std   =(X-X.min)/(X.max-X.min)</span></span><br><span class="line"><span class="comment"># X_scaled = X_std * (max -   min) + min</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MaxAbsScaler</span></span><br><span class="line">max_abs_scaler   = preprocessing.MaxAbsScaler()</span><br><span class="line">X_train_maxabs =   max_abs_scaler.fit_transform(X_train)</span><br><span class="line">X_test_maxabs =   max_abs_scaler.transform(X_test)</span><br><span class="line"><span class="comment"># X_std =X/X.max</span></span><br></pre></td></tr></table></figure><ul><li>缩放有离群值的数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RobustScaler =   preprocessing.RobustScaler()</span><br><span class="line">X_train_RobustScaler =   RobustScaler.fit_transform(X_train)</span><br><span class="line">X_test_RobustScaler =   RobustScaler.transform(X_test)</span><br></pre></td></tr></table></figure><h2 id="非线性转换无参数转换"><a class="markdownIt-Anchor" href="#非线性转换无参数转换"></a> 非线性转换(无参数转换)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">quantile_transformer =   preprocessing.QuantileTransformer(random_state=<span class="number">0</span>)</span><br><span class="line">X_train_trans =   quantile_transformer.fit_transform(X_train)</span><br><span class="line">X_test_trans =   quantile_transformer.transform(X_test)</span><br></pre></td></tr></table></figure><h2 id="归一化"><a class="markdownIt-Anchor" href="#归一化"></a> 归一化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X_normalized =   preprocessing.normalize(X, norm=<span class="string">'l2'</span>)</span><br></pre></td></tr></table></figure><h2 id="二值化"><a class="markdownIt-Anchor" href="#二值化"></a> 二值化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">binarizer =   preprocessing.Binarizer(threshold=<span class="number">0.0</span>)</span><br><span class="line">binarizer.transform(X)</span><br></pre></td></tr></table></figure><h2 id="分类特征编码"><a class="markdownIt-Anchor" href="#分类特征编码"></a> 分类特征编码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enc =   preprocessing.OneHotEncoder(n_values=<span class="string">'auto'</span>, categorical_features=<span class="string">'all'</span>)</span><br><span class="line">enc.fit(X_train)</span><br><span class="line">enc.transform(X_test).toarray()</span><br></pre></td></tr></table></figure><h2 id="缺失值插补"><a class="markdownIt-Anchor" href="#缺失值插补"></a> 缺失值插补</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">imp =   preprocessing.Imputer(missing_values=<span class="string">'NaN'</span>, strategy=<span class="string">'mean'</span>, axis=<span class="number">0</span>)</span><br><span class="line">imp.fit(X_train)</span><br><span class="line">imp.transform(X_test)</span><br></pre></td></tr></table></figure><blockquote><p>参数：strategy :{‘mean’,‘median’,‘most_frequent’}</p></blockquote><h2 id="生成多项式特征"><a class="markdownIt-Anchor" href="#生成多项式特征"></a> 生成多项式特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">X=[X1,X2]</span><br><span class="line">poly = preprocessing.PolynomialFeatures(degree=<span class="number">2</span>, interaction_only=<span class="literal">False</span>)</span><br><span class="line">poly.fit_transform(X)</span><br></pre></td></tr></table></figure><blockquote><p>参数：<br>degree=2：X   的特征从[X1,X2]转换为[1,X1,X2,X1<sup>2,X1X2,X2</sup>2]<br>interaction_only：只有交互项[1,X1,X2,X1X2]</p></blockquote><h1 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h1><h2 id="协方差估计sklearncovariance"><a class="markdownIt-Anchor" href="#协方差估计sklearncovariance"></a> 协方差估计(sklearn.covariance)</h2><p><code>empirical_covariance</code>  经验协方差</p><h2 id="特征提取sklearnfeature_extraction"><a class="markdownIt-Anchor" href="#特征提取sklearnfeature_extraction"></a> 特征提取(sklearn.feature_extraction)</h2><p>可用于提取符合机器学习算法支持的特征，比如文本和图片。</p><h2 id="概率校准sklearncalibration"><a class="markdownIt-Anchor" href="#概率校准sklearncalibration"></a> 概率校准(sklearn.calibration)</h2><p>CalibratedClassifierCV</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Machine Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> python </tag>
            
            <tag> sklearn </tag>
            
            <tag> 回归 </tag>
            
            <tag> 分类 </tag>
            
            <tag> 聚类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Scientific Computing)--SciPy</title>
      <link href="/posts/python/PythonNotebook(Scientific-Computing)--scipy.html"/>
      <url>/posts/python/PythonNotebook(Scientific-Computing)--scipy.html</url>
      
        <content type="html"><![CDATA[<p><strong>SciPy</strong>（发音为<code>Sigh Pie</code>）是基于Python的Numpy扩展构建的数学算法和便利函数的集合，是一组专门解决科学计算中各种标准问题域的包的集合，主要包括下面这些包：</p><a id="more"></a><table><thead><tr><th style="text-align:left">子包</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">cluster</td><td style="text-align:left">聚类算法</td></tr><tr><td style="text-align:left">constants</td><td style="text-align:left">物理和数学常数</td></tr><tr><td style="text-align:left">fftpack</td><td style="text-align:left">快速傅立叶变换程序</td></tr><tr><td style="text-align:left">integrate</td><td style="text-align:left">积分和常微分方程求解器</td></tr><tr><td style="text-align:left">interpolate</td><td style="text-align:left">插值和平滑样条</td></tr><tr><td style="text-align:left">io</td><td style="text-align:left">输入和输出</td></tr><tr><td style="text-align:left">linalg</td><td style="text-align:left">线性代数和矩阵分解</td></tr><tr><td style="text-align:left">ndimage</td><td style="text-align:left">N维图像处理</td></tr><tr><td style="text-align:left">odr</td><td style="text-align:left">正交距离回归</td></tr><tr><td style="text-align:left">optimize</td><td style="text-align:left">函数优化和根查找算法</td></tr><tr><td style="text-align:left">signal</td><td style="text-align:left">信号处理</td></tr><tr><td style="text-align:left">sparse</td><td style="text-align:left">稀疏矩阵和求解器</td></tr><tr><td style="text-align:left">spatial</td><td style="text-align:left">空间数据结构和算法</td></tr><tr><td style="text-align:left">special</td><td style="text-align:left">特殊函数（如伽马函数）</td></tr><tr><td style="text-align:left">stats</td><td style="text-align:left">统计分布和函数</td></tr></tbody></table><hr><p>参考链接：<br><a href="https://docs.scipy.org" target="_blank" rel="noopener">SciPy官方链接</a><br><a href="https://www.yiibai.com/scipy" target="_blank" rel="noopener">易百Scipy教程</a><br><a href="https://docs.huihoo.com/scipy/scipy-zh-cn/scipy_intro.html#" target="_blank" rel="noopener">用Python做科学计算</a>：内容详尽，整洁<br><a href="https://www.jianshu.com/p/1a3db06e786d" target="_blank" rel="noopener">Scipy简书链接</a><br><a href="http://blog.sina.com.cn/s/blog_5f234d47010133gx.html" target="_blank" rel="noopener">科学计算：Python VS. MATLAB（6）----物理常数</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Scientific Computing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 科学计算 </tag>
            
            <tag> scipy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Data Analysis)--pandas</title>
      <link href="/posts/python/PythonNotebook(Data-Analysis)--pandas.html"/>
      <url>/posts/python/PythonNotebook(Data-Analysis)--pandas.html</url>
      
        <content type="html"><![CDATA[<p>pandas兼具NumPy高性能的数组计算功能，提供高性能，易用的数据结构和数据分析工具。Pandas库有两个主要数据结构：Series和DataFrame。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="series"><a class="markdownIt-Anchor" href="#series"></a> Series</h1><p>由一维数组和对应的索引组成</p><h2 id="创建series"><a class="markdownIt-Anchor" href="#创建series"></a> 创建Series</h2><div class="tabs" id="series"><ul class="nav-tabs"><li class="tab active"><a href="#series-1">array like</a></li><li class="tab"><a href="#series-2">dict</a></li></ul><div class="tab-content"><div class="tab-pane active" id="series-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s=pd.Series(data,index=<span class="literal">None</span>,dtype=<span class="literal">None</span>) </span><br></pre></td></tr></table></figure><blockquote><p>data：tuple,list,dict,ndarray<br>index：list对象赋值索引</p></blockquote></div><div class="tab-pane" id="series-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(dict)</span><br></pre></td></tr></table></figure><blockquote><p>赋值方法 ：index=dict.keys,  data=dict.values</p></blockquote></div></div></div><h2 id="属性"><a class="markdownIt-Anchor" href="#属性"></a> 属性</h2><p>算术运算(<code>+,-,...</code>)自动匹配索引标签(full  join)</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">可赋值修改</th></tr></thead><tbody><tr><td style="text-align:left">s.dtype</td><td style="text-align:left">数据类型</td></tr><tr><td style="text-align:left">s.index</td><td style="text-align:left">返回index对象</td></tr><tr><td style="text-align:left">s.values</td><td style="text-align:left">返回ndarrary对象</td></tr><tr><td style="text-align:left">s.size</td><td style="text-align:left">元素个数</td></tr><tr><td style="text-align:left"><a href="http://s.index.name" target="_blank" rel="noopener">s.index.name</a></td><td style="text-align:left">索引名字</td></tr></tbody></table><h2 id="索引和切片"><a class="markdownIt-Anchor" href="#索引和切片"></a> 索引和切片</h2><table><thead><tr><th style="text-align:left">索引和切片</th><th style="text-align:left">可赋值修改</th></tr></thead><tbody><tr><td style="text-align:left"><code>s[index]</code></td><td style="text-align:left">num  or str</td></tr><tr><td style="text-align:left"><code>s[[index]]</code></td><td style="text-align:left">获得数值</td></tr><tr><td style="text-align:left"><code>s[start:stop:step]</code></td><td style="text-align:left">slice</td></tr><tr><td style="text-align:left"><code>s[index_list]</code></td><td style="text-align:left">花式索引</td></tr><tr><td style="text-align:left"><code>s2[(s2&gt;0)&amp;(s2&lt;12)]</code></td><td style="text-align:left">逻辑索引</td></tr><tr><td style="text-align:left"><code>s.str</code></td><td style="text-align:left">Series的str属性可访问字符串的方法，<code>data.str.contains('gmail')</code></td></tr></tbody></table><blockquote><p>切片格式：<code>start:stop:step</code><br>当切片由数字组成时：左闭右开区间  s[:10]<br>当切片由数字组成时：左右都是闭区间  s[‘a’:‘n’]</p></blockquote><h2 id="series部分方法"><a class="markdownIt-Anchor" href="#series部分方法"></a> Series部分方法</h2><blockquote><p>DataFrame的方法，Series基本都能用，下表摘取了有别于DataFrame的部分方法</p></blockquote><table><thead><tr><th style="text-align:left">方法</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">s.astype(dtype,copy=True)</td><td style="text-align:left">数据类型转换</td></tr><tr><td style="text-align:left">s.append(to_append,ignore_index=False)</td><td style="text-align:left">追加，to_append : Series or list/tuple of Series</td></tr><tr><td style="text-align:left">s.unique()</td><td style="text-align:left">唯一值</td></tr><tr><td style="text-align:left">s.map(func)</td><td style="text-align:left">func映射至每个元素</td></tr><tr><td style="text-align:left">s.isin(values)</td><td style="text-align:left">成员判断</td></tr></tbody></table><h1 id="dataframe"><a class="markdownIt-Anchor" href="#dataframe"></a> DataFrame</h1><h2 id="创建dataframe"><a class="markdownIt-Anchor" href="#创建dataframe"></a> 创建DataFrame</h2><div class="tabs" id="dataframe"><ul class="nav-tabs"><li class="tab active"><a href="#dataframe-1">array like</a></li><li class="tab"><a href="#dataframe-2">dict</a></li></ul><div class="tab-content"><div class="tab-pane active" id="dataframe-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df=pd.DataFrame(data,index,columns,dtype,copy=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><blockquote><p>data：tuple,list,dict,ndarray,Series ,DataFrame<br>index,  columns：list赋值</p></blockquote></div><div class="tab-pane" id="dataframe-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.DataFrame(dict)</span><br></pre></td></tr></table></figure><ul><li><code>dict={key1:value1,...}</code> 单层字典创建(<em>columns.name=dict.keys,data=dict.values</em> )</li><li><code>dict={key1:{key:value},...}</code> 嵌套字典创建 (<em>外层字典的键作为列索引，内层键则作为行索引</em>)</li></ul></div></div></div><h2 id="属性-2"><a class="markdownIt-Anchor" href="#属性-2"></a> 属性</h2><p>默认情况下，DataFrame和Series之间的算术运算(<code>+,-,*,...</code>)会将Series的索引匹配到DataFrame的列，然后沿着行一直向下广播</p><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">可赋值修改</th></tr></thead><tbody><tr><td style="text-align:left">df.dtypes</td><td style="text-align:left">元素类型，极为精细</td></tr><tr><td style="text-align:left">df.index</td><td style="text-align:left">返回index对象（不可变），允许包含重复标签</td></tr><tr><td style="text-align:left">df.columns</td><td style="text-align:left">返回index对象，所有列名</td></tr><tr><td style="text-align:left">df.values</td><td style="text-align:left">返回values（二维ndarrary，统一化dtype）</td></tr><tr><td style="text-align:left"><a href="http://df.index.name" target="_blank" rel="noopener">df.index.name</a></td><td style="text-align:left">索引名字</td></tr><tr><td style="text-align:left"><a href="http://df.columns.name" target="_blank" rel="noopener">df.columns.name</a></td><td style="text-align:left">columns的name属性</td></tr><tr><td style="text-align:left">df.shape</td><td style="text-align:left">维度信息tupple</td></tr><tr><td style="text-align:left">df.ndim</td><td style="text-align:left">维度数量</td></tr><tr><td style="text-align:left">df.size</td><td style="text-align:left">元素总个数</td></tr><tr><td style="text-align:left">df.T</td><td style="text-align:left">转置</td></tr></tbody></table><h2 id="索引和切片-2"><a class="markdownIt-Anchor" href="#索引和切片-2"></a> 索引和切片</h2><table><thead><tr><th style="text-align:left">索引和切片</th><th style="text-align:left">建议用iloc,loc,ix方法赋值修改</th></tr></thead><tbody><tr><td style="text-align:left"><code>df['index','columns']</code></td><td style="text-align:left">筛选（str or num）</td></tr><tr><td style="text-align:left"><code>df['columns']['index']</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>df['column']</code></td><td style="text-align:left">返回列Series</td></tr><tr><td style="text-align:left"><code>df.column</code></td><td style="text-align:left">返回列Series</td></tr><tr><td style="text-align:left"><code>df.loc['index']</code></td><td style="text-align:left">返回行Series</td></tr><tr><td style="text-align:left"><code>df.iloc[index_num]</code></td><td style="text-align:left">返回行Series</td></tr><tr><td style="text-align:left"><code>df.loc['index','columns']</code></td><td style="text-align:left">字符筛选</td></tr><tr><td style="text-align:left"><code>df.iloc[index_num,columns_num]</code></td><td style="text-align:left">数字筛选，与bool类型不可混用</td></tr><tr><td style="text-align:left"><code>df.ix[]</code></td><td style="text-align:left">混合筛选（不建议用）</td></tr><tr><td style="text-align:left"><code>df.filter(items=None,like=None,regex=None, axis=None)</code></td><td style="text-align:left">筛选方法，like: 字符列表</td></tr><tr><td style="text-align:left"><code>df.query(expr,inplace=False)</code></td><td style="text-align:left">逻辑筛选<br><code>df.query('c1==&quot;auto&quot; &amp; c2&gt;=5')</code></td></tr></tbody></table><p><img alt="df" data-src="/images/df.png"></p><h2 id="方法"><a class="markdownIt-Anchor" href="#方法"></a> 方法</h2><blockquote><p>axis参数：0 ( ‘index’) 代表行,  1 (‘columns’)  代表列</p></blockquote><table><thead><tr><th style="text-align:left"><strong>索引</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.reindex(index,column,method,fill_value)</td><td style="text-align:left">重命名轴索引<br>method:重新索引时缺失插补方式<br>fill_value:重新索引时填充值</td></tr><tr><td style="text-align:left">df.rename(index,columns,inplace=False)</td><td style="text-align:left">重命名<br><code>data.rename(index=str.title, columns=str.upper)</code><br><code>data.rename(index={'oldname': 'newname'})</code> 字典赋值参数</td></tr><tr><td style="text-align:left">df.set_index(keys, drop=True, append=False, inplace=False)</td><td style="text-align:left">将其一个或多个列转换为行索引</td></tr><tr><td style="text-align:left">df.reset_index(level=None, drop=False, inplace=False, col_level=0, col_fill=’’)</td><td style="text-align:left">层次化索引级别被转移到列里面</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>数据预览</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left"><a href="http://df.info" target="_blank" rel="noopener">df.info</a>()</td><td style="text-align:left">df 结构信息</td></tr><tr><td style="text-align:left">df.head(n=5)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">df.tail(n=5)</td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>合并、插入和删除</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.append(other,ignore_index=True)</td><td style="text-align:left">other:DataFrame,Series,…(列表格式)</td></tr><tr><td style="text-align:left">df.insert(loc, column, value, allow_duplicates=False)</td><td style="text-align:left">插入列，loc(int)</td></tr><tr><td style="text-align:left">df.combine_first(other)</td><td style="text-align:left">合并重叠数据</td></tr><tr><td style="text-align:left">df.pop(column)</td><td style="text-align:left">删除列，返回删除的列</td></tr><tr><td style="text-align:left">df.drop(labels,axis=0,inplace=False)</td><td style="text-align:left">删除行/列</td></tr><tr><td style="text-align:left">del df[column]</td><td style="text-align:left">del关键字删除列</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>描述和汇总统计</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.describe()</td><td style="text-align:left">针对0轴统计汇总</td></tr><tr><td style="text-align:left">df.mean(axis)</td><td style="text-align:left">平均值</td></tr><tr><td style="text-align:left">df.median(axis)</td><td style="text-align:left">中位数</td></tr><tr><td style="text-align:left">df.count(axis)</td><td style="text-align:left">计数</td></tr><tr><td style="text-align:left">df.nunique()</td><td style="text-align:left">去重后计数</td></tr><tr><td style="text-align:left">df.quantile(q=0.5, axis=0)</td><td style="text-align:left">百分位数（默认中位数）</td></tr><tr><td style="text-align:left">df.mad(axis)</td><td style="text-align:left">平均绝对离差</td></tr><tr><td style="text-align:left">df.var(axis)</td><td style="text-align:left">方差</td></tr><tr><td style="text-align:left">df.std(axis)</td><td style="text-align:left">标准差</td></tr><tr><td style="text-align:left">df.skew(axis)</td><td style="text-align:left">偏度</td></tr><tr><td style="text-align:left">df.kurt(axis)</td><td style="text-align:left">峰度</td></tr><tr><td style="text-align:left">df.cov(min_periods=None)</td><td style="text-align:left">协方差矩阵</td></tr><tr><td style="text-align:left">df.corr(method=‘pearson’, min_periods=1)</td><td style="text-align:left">method : {‘pearson’, ‘kendall’,  ‘spearman’}</td></tr><tr><td style="text-align:left">df.corrwith(other, axis=0, drop=False)</td><td style="text-align:left">配对相关系数</td></tr><tr><td style="text-align:left">df.diff(periods=1, axis=0)</td><td style="text-align:left">一阶差分（对时间序列很有用）</td></tr><tr><td style="text-align:left">df.pct_change(periods=1, fill_method=‘pad’)</td><td style="text-align:left">百分数变化</td></tr><tr><td style="text-align:left">df.sum(axis)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">df.idmax()/df.idmin()</td><td style="text-align:left">最大值/最小值的索引</td></tr><tr><td style="text-align:left">df.cumsum(axis)</td><td style="text-align:left">累积求和</td></tr><tr><td style="text-align:left">df.cumprod(axis)</td><td style="text-align:left">累积求积</td></tr><tr><td style="text-align:left">df.cummax(axis)</td><td style="text-align:left">累积最大值</td></tr><tr><td style="text-align:left">df.cummin(axis)</td><td style="text-align:left">累积最小值</td></tr><tr><td style="text-align:left">df.rolling(window,axis).mean()</td><td style="text-align:left">移动平均值</td></tr><tr><td style="text-align:left">df.rolling(window,axis).min()</td><td style="text-align:left">移动最小值</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>缺失值处理</strong></th><th style="text-align:left">NaN（np.nan, Not a Number）</th></tr></thead><tbody><tr><td style="text-align:left">df.isnull()</td><td style="text-align:left">缺失值bool数组</td></tr><tr><td style="text-align:left">df.notnull()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">df.dropna(axis=0, how=‘any’, thresh=None, subset=None, inplace=False)</td><td style="text-align:left">how:{‘any’,‘all’}<br> thresh: int,非NaN的最小值</td></tr><tr><td style="text-align:left">df.fillna(value, method, axis, inplace=False, limit)</td><td style="text-align:left">value:填充的标量值或字典<br>method :  {‘backfill’, ‘bfill’, ‘pad’, ‘ffill’, None} <br>limit: 可以连续填充的最大数量</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.dropna(thresh=<span class="number">4</span>)</span><br><span class="line">df.dropna(axis=<span class="number">1</span>, how=<span class="string">'all'</span>)</span><br><span class="line"></span><br><span class="line">df.fillna(method=<span class="string">'ffill'</span>)</span><br><span class="line">df.fillna(value=&#123;<span class="string">'A'</span>:np.mean(df.A), <span class="string">'B'</span>: <span class="number">1</span>, <span class="string">'C'</span>: <span class="number">2</span>, <span class="string">'D'</span>: <span class="number">3</span>&#125;, limit=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left"><strong>替换</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.replace(to_replace, value, inplace=False, limit=None, regex=False, method=‘pad’, axis=None)</td><td style="text-align:left"></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data.replace([<span class="number">-999</span>, <span class="number">-1000</span>], [np.nan, <span class="number">0</span>]`)</span><br><span class="line">data.replace(&#123;<span class="number">-999</span>: np.nan, <span class="number">-1000</span>: <span class="number">0</span>&#125;)   <span class="comment">#参数为字典</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left"><strong>数据转换</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.transform(func)</td><td style="text-align:left">数据转换，返回的形状和df完全一样<br><code>df.transform(lambda x: (x - x.mean()) / x.std())</code></td></tr><tr><td style="text-align:left">df.astype(dtype,copy=False)</td><td style="text-align:left">数据类型转换</td></tr><tr><td style="text-align:left">df[‘column’].str.title()</td><td style="text-align:left">转换成首字母大写（字符的属性和方法对pandas适用）</td></tr><tr><td style="text-align:left">df[‘datetime’].dt.day</td><td style="text-align:left">获取日期（datetime类的属性和方法对pandas适用）</td></tr><tr><td style="text-align:left">df.round()</td><td style="text-align:left">保留小数位数</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>重复值</strong></th><th style="text-align:left">默认判断全部列</th></tr></thead><tbody><tr><td style="text-align:left">df.duplicated(subset=None, keep=‘first’,inplace=False)</td><td style="text-align:left">返回重复值布尔型Series<br>keep : {‘first’, ‘last’, False}</td></tr><tr><td style="text-align:left">df.drop_duplicates(subset=None, keep=‘first’, inplace=False)</td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>排序</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.sort_index(axis=0,ascending=True)</td><td style="text-align:left">索引排序</td></tr><tr><td style="text-align:left">df.sort_values(by,axis=0,ascending=True)</td><td style="text-align:left">按列数值排序</td></tr><tr><td style="text-align:left">df.rank(axis=0,method=‘average’,ascending=True)</td><td style="text-align:left">排名，method : {‘average’, ‘min’, ‘max’, ‘first’, ‘dense’}</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>抽样</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.sample(n, frac, replace=False)</td><td style="text-align:left">随机抽样</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>轴向旋转</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">df.stack(level=-1, dropna=True)</td><td style="text-align:left">把最内层列转换成行</td></tr><tr><td style="text-align:left">df.unstack(level=-1, fill_value=None)</td><td style="text-align:left">stack逆运算，把行转换成最内层列</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>融合和重构</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">pd.melt(frame, id_vars, value_vars, var_name, value_name=‘value’, col_level=None)</td><td style="text-align:left">宽格式变长格式</td></tr><tr><td style="text-align:left">df.pivot(index=None, columns=None, values=None)</td><td style="text-align:left">reshape</td></tr><tr><td style="text-align:left">df.apply(func,axis=0)</td><td style="text-align:left">单函数聚合</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>分组和聚合</strong></th><th style="text-align:left">(介绍分组时举例)</th></tr></thead><tbody><tr><td style="text-align:left">df.groupby()</td><td style="text-align:left">分组</td></tr><tr><td style="text-align:left">df.applymap(func)</td><td style="text-align:left">映射至每个元素</td></tr><tr><td style="text-align:left">df.agg(func,axis=0)</td><td style="text-align:left">多函数聚合</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df=pd.DataFrame(np.random.rand(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">df.applymap(<span class="keyword">lambda</span> x:format(x,<span class="string">'.2%'</span>))</span><br><span class="line"></span><br><span class="line">Out[<span class="number">10</span>]: </span><br><span class="line">        <span class="number">0</span>       <span class="number">1</span>       <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">0</span>  <span class="number">89.19</span>%  <span class="number">85.37</span>%  <span class="number">60.62</span>%  <span class="number">42.64</span>%</span><br><span class="line"><span class="number">1</span>  <span class="number">89.50</span>%  <span class="number">36.88</span>%  <span class="number">27.67</span>%  <span class="number">92.65</span>%</span><br><span class="line"><span class="number">2</span>   <span class="number">2.88</span>%  <span class="number">15.81</span>%  <span class="number">56.87</span>%  <span class="number">37.50</span>%</span><br></pre></td></tr></table></figure><p><strong>透视表</strong><br><code>df.pivot_table(values=None, index=None, columns=None, aggfunc='mean', fill_value=None, margins=False, dropna=True, margins_name='All')</code></p><blockquote><p>margins: (boolean, default False) 分类汇总</p></blockquote><h1 id="index对象"><a class="markdownIt-Anchor" href="#index对象"></a> Index对象</h1><h2 id="创建索引"><a class="markdownIt-Anchor" href="#创建索引"></a> 创建索引</h2><div class="tabs" id="index"><ul class="nav-tabs"><li class="tab active"><a href="#index-1">index</a></li><li class="tab"><a href="#index-2">periods</a></li></ul><div class="tab-content"><div class="tab-pane active" id="index-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Index(data=<span class="literal">None</span>, dtype=<span class="literal">None</span>, copy=<span class="literal">False</span>, name=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><blockquote><p>dtype : NumPy dtype (default: object)</p></blockquote></div><div class="tab-pane" id="index-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.date_range(start, end, periods, freq=<span class="string">'D'</span>, normalize=<span class="literal">False</span>, name=<span class="literal">None</span>)</span><br><span class="line">pd.DatetimeIndex(data, freq, start, end, periods, copy=<span class="literal">False</span>, name)</span><br></pre></td></tr></table></figure></div></div></div><h2 id="index方法"><a class="markdownIt-Anchor" href="#index方法"></a> Index方法</h2><table><thead><tr><th style="text-align:left">方法</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">a.to_frame()</td><td style="text-align:left">转化为DataFrame</td></tr><tr><td style="text-align:left">a.to_series()</td><td style="text-align:left">转化为series</td></tr><tr><td style="text-align:left">a.append(b)</td><td style="text-align:left">追加，生成副本</td></tr><tr><td style="text-align:left">a.difference(b)</td><td style="text-align:left">差集，生成副本</td></tr><tr><td style="text-align:left">a.intersec(b)</td><td style="text-align:left">交集，生成副本</td></tr><tr><td style="text-align:left">a.union(b)</td><td style="text-align:left">并集，生成副本</td></tr><tr><td style="text-align:left">a.isin(b)</td><td style="text-align:left">返回bool数组</td></tr><tr><td style="text-align:left">a.delete(loc)</td><td style="text-align:left">删除索引loc处元素，生成副本</td></tr><tr><td style="text-align:left">a.insert(loc,item)</td><td style="text-align:left">在索引loc出插入元素iterm，生成副本</td></tr><tr><td style="text-align:left">a.is_unique()</td><td style="text-align:left">索引是否唯一</td></tr></tbody></table><h2 id="层次化索引"><a class="markdownIt-Anchor" href="#层次化索引"></a> 层次化索引</h2><p>层次化索引（hierarchical indexing）是pandas的一项重要功能，它使你能在一个轴上拥有多个（两个以上）索引级别。</p><table><thead><tr><th style="text-align:left">创建</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">pd.MultiIndex(levels=None, labels=None, sortorder=None, names=None, copy=False)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pd.MultiIndex.from_arrays(arrays, sortorder=None, names=None)</td><td style="text-align:left">由数组创建</td></tr><tr><td style="text-align:left">pd.MultiIndex.from_product(iterables, sortorder=None, names=None)</td><td style="text-align:left">生成笛卡儿积</td></tr><tr><td style="text-align:left">pd.MultiIndex.from_tuples(tuples, sortorder=None, names=None)</td><td style="text-align:left"></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">columns = pd.MultiIndex.from_arrays([[<span class="string">'US'</span>, <span class="string">'US'</span>, <span class="string">'US'</span>, <span class="string">'JP'</span>, <span class="string">'JP'</span>],</span><br><span class="line">                                    [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>]],</span><br><span class="line">                                     names=[<span class="string">'cty'</span>, <span class="string">'tenor'</span>])</span><br><span class="line">hier_df = pd.DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">5</span>), columns=columns)</span><br><span class="line"></span><br><span class="line">df.swaplevel(i=<span class="number">-2</span>, j=<span class="number">-1</span>, axis=<span class="number">0</span>) <span class="comment">#交换层次化的索引级别</span></span><br><span class="line"></span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),</span><br><span class="line">  index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]],</span><br><span class="line">  columns=[[<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>],</span><br><span class="line">  [<span class="string">'Green'</span>, <span class="string">'Red'</span>, <span class="string">'Green'</span>]])</span><br><span class="line">frame.swaplevel(<span class="string">'key1'</span>, <span class="string">'key2'</span>).sort_index(level=<span class="number">0</span>) <span class="comment"># 重排与分级排序</span></span><br><span class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</span><br><span class="line">frame.sum(level=<span class="string">'key2'</span>) <span class="comment"># 根据级别汇总统计</span></span><br></pre></td></tr></table></figure><h1 id="分组和聚合"><a class="markdownIt-Anchor" href="#分组和聚合"></a> 分组和聚合</h1><blockquote><p>split-apply-combine（拆分－应用－合并）<br>本节<code>obj</code> 代表pandas对象(<code>Series or DataFrame</code>)</p></blockquote><h2 id="分组groupby"><a class="markdownIt-Anchor" href="#分组groupby"></a> 分组(groupby)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj.groupby(by=<span class="literal">None</span>, axis=<span class="number">0</span>, level=<span class="literal">None</span>, as_index=<span class="literal">True</span>, </span><br><span class="line">    sort=<span class="literal">True</span>, group_keys=<span class="literal">True</span>, squeeze=<span class="literal">False</span>, **kwargs)</span><br></pre></td></tr></table></figure><blockquote><p><strong>Return GroupBy object</strong><br>Parameters:<br><strong>by</strong> : (mapping, function, str, or iterable) 分组<br><strong>axis</strong> :(int, default 0) 索引轴<br><strong>level</strong> :(int, level name, or sequence of such) 根据层次化索引级别分组<br><strong>as_index</strong> : (boolean, default True) 以行索引形式返回<br><strong>sort</strong> : (boolean, default True) 索引排序<br><strong>group_keys</strong> : (boolean, default True)<br><strong>squeeze</strong> : (boolean, default False) 减少返回类型的维度</p></blockquote><p>Examples:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'key1'</span> : [<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>],</span><br><span class="line">                   <span class="string">'key2'</span> : [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>],</span><br><span class="line">                   <span class="string">'mapping'</span>: list(<span class="string">'ABCDE'</span>),</span><br><span class="line">                   <span class="string">'data1'</span> : np.random.randn(<span class="number">5</span>),</span><br><span class="line">                   <span class="string">'data2'</span> : np.random.randn(<span class="number">5</span>)&#125;)</span><br><span class="line"><span class="comment"># 列表或数组对象（其长度与待分组的轴一样）</span></span><br><span class="line">states = np.array([<span class="string">'Ohio'</span>, <span class="string">'California'</span>, <span class="string">'California'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>])</span><br><span class="line">years = np.array([<span class="number">2005</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2005</span>, <span class="number">2006</span>])</span><br><span class="line">df[<span class="string">'data1'</span>].groupby([states, years]).mean()</span><br><span class="line"><span class="comment"># 索引或列名列表</span></span><br><span class="line">df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>]).size()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过字典或Series进行分组</span></span><br><span class="line">mapping = &#123;<span class="string">'A'</span>: <span class="string">'red'</span>, <span class="string">'B'</span>: <span class="string">'red'</span>, <span class="string">'C'</span>: <span class="string">'blue'</span>,<span class="string">'D'</span>: <span class="string">'blue'</span>, <span class="string">'E'</span>: <span class="string">'red'</span>&#125;</span><br><span class="line">df.groupby(mapping, axis=<span class="number">1</span>)</span><br><span class="line">map_series = pd.Series(mapping)</span><br><span class="line">df.groupby(map_series, axis=<span class="number">1</span>).count()</span><br><span class="line"><span class="comment"># 函数，用于处理轴索引或索引中的各个标签</span></span><br><span class="line">df.index=[<span class="string">'Joe'</span>,<span class="string">'Steve'</span>,<span class="string">'Wes'</span>,<span class="string">'Jim'</span>,<span class="string">'Travis'</span>]</span><br><span class="line">df.groupby(df.dtypes, axis=<span class="number">1</span>).size()</span><br><span class="line">df.groupby(len).sum()</span><br><span class="line"><span class="comment"># 将函数跟数组、列表、字典、Series混合使用也不是问题，因为任何东西在内部都会被转换为数组</span></span><br><span class="line">people.groupby([len, states]).min()</span><br><span class="line"><span class="comment"># 根据层次化索引级别分组</span></span><br><span class="line">df2=df.set_index([<span class="string">'key1'</span>,<span class="string">'key2'</span>])</span><br><span class="line">df2.groupby(level=<span class="string">'key1'</span>).mean()</span><br></pre></td></tr></table></figure><h2 id="对分组进行迭代"><a class="markdownIt-Anchor" href="#对分组进行迭代"></a> 对分组进行迭代</h2><p>GroupBy对象支持迭代，可以产生一组二元元组（由分组名和数据块组成），对于多重键的情况，元组的第一个元素将会是由键值组成的元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name, group <span class="keyword">in</span> df.groupby(<span class="string">'key1'</span>):</span><br><span class="line">     print(name)</span><br><span class="line">     print(group)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (k1, k2), group <span class="keyword">in</span> df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>]):</span><br><span class="line">     print((k1, k2))</span><br><span class="line">     print(group)</span><br></pre></td></tr></table></figure><h2 id="数据聚合groupby对象"><a class="markdownIt-Anchor" href="#数据聚合groupby对象"></a> 数据聚合(GroupBy对象)</h2><p>不能被聚合的列，将会被剔除。<br><code>grouped=df.groupby(key)</code></p><table><thead><tr><th style="text-align:left"><strong>聚合方法</strong></th><th style="text-align:left">说明（非NA值）</th></tr></thead><tbody><tr><td style="text-align:left">size</td><td style="text-align:left">每组的大小（包括NA）</td></tr><tr><td style="text-align:left">count, sum, prod, mean, median</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">std, var</td><td style="text-align:left">无偏标准差和方差</td></tr><tr><td style="text-align:left">min, max</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">first, last</td><td style="text-align:left">第一个和最后一个</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SELECT count(distinct CLIENTCODE) FROM table GROUP BY YEARMONTH</span></span><br><span class="line">table.groupby(<span class="string">'YEARMONTH'</span>).CLIENTCODE.nunique()</span><br></pre></td></tr></table></figure><p><strong>apply聚合方法</strong>: 调用任意函数 split-apply-combine（拆分－应用－合并）<br><code>grouped.apply(func, *args, **kwargs)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">top</span><span class="params">(df, n=<span class="number">5</span>, column)</span>:</span></span><br><span class="line">     <span class="keyword">return</span> df.sort_values(by=column)[-n:]</span><br><span class="line">df.groupby([<span class="string">'key1'</span>, <span class="string">'key2'</span>]).apply(top, n=<span class="number">1</span>, column=<span class="string">'data1'</span>)</span><br></pre></td></tr></table></figure><p><strong>agg聚合方法</strong></p><p><code>grouped.agg(arg)</code></p><blockquote><p><strong>Parameters: arg</strong>(聚合函数)<br>string function name<br>function, list of functions<br>rename:  <code>[(name1,func1),(name2,func2),...]</code><br>dict of column names: <code>{'colname1':func1, 'colname2':func2,...}</code></p></blockquote><p>Examples:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数，函数名混合列表</span></span><br><span class="line">grouped.agg([<span class="string">'mean'</span>, <span class="string">'std'</span>, sum])</span><br><span class="line">grouped[<span class="string">'num'</span>].agg([<span class="string">'mean'</span>, <span class="string">'std'</span>, sum])</span><br><span class="line"><span class="comment"># (name,function)元组组成的列表，则各元组的第一个元素就会被用作DataFrame的列名</span></span><br><span class="line">grouped.agg([(<span class="string">'name1'</span>, <span class="string">'mean'</span>), (<span class="string">'name2'</span>, np.std)])</span><br><span class="line"></span><br><span class="line">iris.groupby(<span class="string">'Species'</span>)[<span class="string">'Sepal.Length'</span>].agg(&#123;<span class="string">'count'</span>:len,<span class="string">'sum'</span>:np.sum,<span class="string">'mean'</span>:np.mean&#125;)</span><br></pre></td></tr></table></figure><h2 id="桶bucket分析"><a class="markdownIt-Anchor" href="#桶bucket分析"></a> 桶(bucket)分析</h2><p>pandas有一些能根据指定面元或样本分位数将数据拆分成多块的工具（比如cut和qcut），将这些函数跟groupby结合起来分析。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">82</span>]: frame = pd.DataFrame(&#123;<span class="string">'data1'</span>: np.random.randn(<span class="number">1000</span>),</span><br><span class="line">   ....:                       <span class="string">'data2'</span>: np.random.randn(<span class="number">1000</span>)&#125;)</span><br><span class="line">In [<span class="number">85</span>]: <span class="function"><span class="keyword">def</span> <span class="title">get_stats</span><span class="params">(group)</span>:</span></span><br><span class="line">   ....:     <span class="keyword">return</span> &#123;<span class="string">'min'</span>: group.min(), <span class="string">'max'</span>: group.max(),</span><br><span class="line">   ....:             <span class="string">'count'</span>: group.count(), <span class="string">'mean'</span>: group.mean()&#125;</span><br><span class="line">In [<span class="number">86</span>]: grouped = frame.data2.groupby(quartiles)</span><br><span class="line">In [<span class="number">87</span>]: grouped.apply(get_stats).unstack()</span><br><span class="line">Out[<span class="number">87</span>]: </span><br><span class="line">                 count       max      mean       min</span><br><span class="line">data1                                               </span><br><span class="line">(<span class="number">-2.956</span>, <span class="number">-1.23</span>]   <span class="number">95.0</span>  <span class="number">1.670835</span> <span class="number">-0.039521</span> <span class="number">-3.399312</span></span><br><span class="line">(<span class="number">-1.23</span>, <span class="number">0.489</span>]   <span class="number">598.0</span>  <span class="number">3.260383</span> <span class="number">-0.002051</span> <span class="number">-2.989741</span></span><br><span class="line">(<span class="number">0.489</span>, <span class="number">2.208</span>]   <span class="number">297.0</span>  <span class="number">2.954439</span>  <span class="number">0.081822</span> <span class="number">-3.745356</span></span><br><span class="line">(<span class="number">2.208</span>, <span class="number">3.928</span>]    <span class="number">10.0</span>  <span class="number">1.765640</span>  <span class="number">0.024750</span> <span class="number">-1.929776</span></span><br></pre></td></tr></table></figure><h2 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h2><p><strong>用特定于分组的值填充缺失值</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">102</span>]: fill_mean = <span class="keyword">lambda</span> g: g.fillna(g.mean())</span><br><span class="line">In [<span class="number">103</span>]: data.groupby(group_key).apply(fill_mean)</span><br><span class="line"></span><br><span class="line">In [<span class="number">104</span>]: fill_values = &#123;<span class="string">'A'</span>: <span class="number">0.5</span>, <span class="string">'B'</span>: <span class="number">-1</span>&#125;</span><br><span class="line">In [<span class="number">105</span>]: fill_func = <span class="keyword">lambda</span> g: g.fillna(fill_values[g.name])</span><br><span class="line">In [<span class="number">106</span>]: data.groupby(group_key).apply(fill_func)</span><br></pre></td></tr></table></figure><p><strong>随机采样和排列</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hearts, Spades, Clubs, Diamonds</span></span><br><span class="line">In [<span class="number">103</span>   ]: suits = [<span class="string">'H'</span>, <span class="string">'S'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>]</span><br><span class="line">In [<span class="number">104</span>]: card_val = (list(range(<span class="number">1</span>, <span class="number">11</span>)) + [<span class="number">10</span>] * <span class="number">3</span>) * <span class="number">4</span></span><br><span class="line">In [<span class="number">105</span>]: base_names = [<span class="string">'A'</span>] + list(range(<span class="number">2</span>, <span class="number">11</span>)) + [<span class="string">'J'</span>, <span class="string">'K'</span>, <span class="string">'Q'</span>]</span><br><span class="line">In [<span class="number">106</span>]: cards = []</span><br><span class="line">In [<span class="number">107</span>]: <span class="keyword">for</span> suit <span class="keyword">in</span> [<span class="string">'H'</span>, <span class="string">'S'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>]:</span><br><span class="line">   .....:    cards.extend(str(num) + suit <span class="keyword">for</span> num <span class="keyword">in</span> base_names)</span><br><span class="line"></span><br><span class="line">In [<span class="number">108</span>]: deck = pd.Series(card_val, index=cards)</span><br><span class="line"></span><br><span class="line">In [<span class="number">109</span>]: <span class="function"><span class="keyword">def</span> <span class="title">draw</span><span class="params">(deck, n=<span class="number">5</span>)</span>:</span></span><br><span class="line">   .....:     <span class="keyword">return</span> deck.sample(n)</span><br><span class="line">In [<span class="number">111</span>]: get_suit = <span class="keyword">lambda</span> card: card[<span class="number">-1</span>] <span class="comment"># last letter is suit</span></span><br><span class="line">In [<span class="number">112</span>]: deck.groupby(get_suit).apply(draw, n=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><strong>分组加权平均数</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">114</span>]: df = pd.DataFrame(&#123;<span class="string">'category'</span>: [<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>,</span><br><span class="line">   .....:                                 <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>],</span><br><span class="line">   .....:                    <span class="string">'data'</span>: np.random.randn(<span class="number">8</span>),</span><br><span class="line">   .....:                    <span class="string">'weights'</span>: np.random.rand(<span class="number">8</span>)&#125;)</span><br><span class="line">In [<span class="number">116</span>]: grouped = df.groupby(<span class="string">'category'</span>)</span><br><span class="line">In [<span class="number">117</span>]: get_wavg = <span class="keyword">lambda</span> g: np.average(g[<span class="string">'data'</span>], weights=g[<span class="string">'weights'</span>])</span><br><span class="line">In [<span class="number">118</span>]: grouped.apply(get_wavg)</span><br></pre></td></tr></table></figure><p><strong>组级别的线性回归</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">regress</span><span class="params">(data, yvar, xvars)</span>:</span></span><br><span class="line">    Y = data[yvar]</span><br><span class="line">    X = data[xvars]</span><br><span class="line">    X[<span class="string">'intercept'</span>] = <span class="number">1.</span></span><br><span class="line">    result = sm.OLS(Y, X).fit()</span><br><span class="line">    <span class="keyword">return</span> result.params</span><br><span class="line"></span><br><span class="line">In [<span class="number">129</span>]: by_year.apply(regress, <span class="string">'AAPL'</span>, [<span class="string">'SPX'</span>])</span><br></pre></td></tr></table></figure><h1 id="分类数据"><a class="markdownIt-Anchor" href="#分类数据"></a> 分类数据</h1><p>用整数表示字符数据的方法称为分类或字典编码表示法。表示分类的整数值称为分类编码或简单地称为编码。</p><h2 id="创建分类变量pandascategorical"><a class="markdownIt-Anchor" href="#创建分类变量pandascategorical"></a> 创建分类变量(pandas.Categorical)</h2><ul><li><strong><code>df.take</code>方法</strong><br><code>df.take(indices, axis=0, convert=True, is_copy=True, **kwargs)</code><blockquote><p><strong>Parameters：</strong><br>indices : (list / array of ints) 字符变量<br>axis : int, default 0<br>convert : translate neg to pos indices (default)<br>is_copy : 副本</p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">values = np.random.randint(<span class="number">2</span>,size=<span class="number">100</span>)</span><br><span class="line">factor = pd.Series([<span class="string">'apple'</span>, <span class="string">'orange'</span>])</span><br><span class="line">cat=factor.take(values)</span><br></pre></td></tr></table></figure><ul><li><strong><code>pd.Categorical</code>函数</strong><br><code>pd.Categorical(values, categories=None, ordered=False, fastpath=False)</code><br><code>pd.Categorical.from_codes(codes, categories, ordered=False)</code><blockquote><p><strong>Parameters:</strong><br>values : (list-like) 字符变量<br>codes: (array-like, integers) 编码变量<br>categories : Index-like (unique, optional) 类别标签<br>ordered : boolean, (default False) 有序</p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_cats = pd.Categorical([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>])</span><br><span class="line"></span><br><span class="line">categories = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br><span class="line">codes = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">my_cats2 = pd.Categorical.from_codes(codes, categories)</span><br></pre></td></tr></table></figure><ul><li><strong>astype方法</strong><br><code>df['col'].astype('category')</code></li></ul><h2 id="pdcategorical对象属性"><a class="markdownIt-Anchor" href="#pdcategorical对象属性"></a> pd.Categorical对象属性</h2><p><code>my_cat = pd.Categorical(values)</code><br><code>my_cat.values.categories</code> : (Index) 类别<br><code>my_cat.values.codes</code> : (ndarray) 编码<br><code>my_cat.values.ordered</code> : boolean</p><h2 id="分类方法"><a class="markdownIt-Anchor" href="#分类方法"></a> 分类方法</h2><p><code>my_cat = pd.Categorical(values)</code><br><code>pd.Categorical</code> 对象的cat属性提供了分类方法的入口</p><table><thead><tr><th style="text-align:left">方法（<code>my_cat.cat</code> 属性）</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">add_categories(new_categories, inplace=False)</td><td style="text-align:left">添加新的分类</td></tr><tr><td style="text-align:left">as_ordered(inplace=False)</td><td style="text-align:left">使分类有序</td></tr><tr><td style="text-align:left">as_unordered(inplace=False)</td><td style="text-align:left">使分类无序</td></tr><tr><td style="text-align:left">remove_categories(removals, inplace=False)</td><td style="text-align:left">移除分类</td></tr><tr><td style="text-align:left">remove_unused_categories(inplace=False)</td><td style="text-align:left">移除任意不出现在数据中的分类</td></tr><tr><td style="text-align:left">rename_categories(new_categories, inplace=False)</td><td style="text-align:left">重命名分类</td></tr><tr><td style="text-align:left">reorder_categories(new_categories, ordered=None, inplace=False)</td><td style="text-align:left">重排序分类</td></tr><tr><td style="text-align:left">set_categories(new_categories, ordered=None, rename=False, inplace=False)</td><td style="text-align:left">重新设置分类</td></tr></tbody></table><h2 id="为建模创建虚拟变量"><a class="markdownIt-Anchor" href="#为建模创建虚拟变量"></a> 为建模创建虚拟变量</h2><p><strong>one-hot编码</strong>：将分类变量转换为哑变量<br><code>pd.get_dummies(data, prefix=None, prefix_sep='_', dummy_na=False, columns=None, sparse=False, drop_first=False)</code></p><blockquote><p><strong>Parameters:</strong><br>data : (array-like, Series, or DataFrame) 数据<br>prefix : (string, list of strings, or dict of strings) 列名<br>prefix_sep : (string) 列名分隔符<br>dummy_na : (bool) 是否删除NA<br>columns : (list-like) 选择列<br>sparse : bool, default False<br>drop_first : (bool) 去除第一个类别</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In : s = pd.Series(list(<span class="string">'abca'</span>))</span><br><span class="line">In : pd.get_dummies(s)</span><br><span class="line">Out : </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>  <span class="number">0</span>  <span class="number">0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">0</span>  <span class="number">1</span>  <span class="number">0</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1</span>  <span class="number">0</span>  <span class="number">0</span></span><br></pre></td></tr></table></figure><h1 id="绘图和可视化"><a class="markdownIt-Anchor" href="#绘图和可视化"></a> 绘图和可视化</h1><p><code>import matplotlib.pyplot as plt</code><br><code>df.plot()</code></p><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">label</td><td style="text-align:left">图例标签</td></tr><tr><td style="text-align:left">ax</td><td style="text-align:left">matplotlib subplot对象（位置）</td></tr><tr><td style="text-align:left">style</td><td style="text-align:left">matploblib风格</td></tr><tr><td style="text-align:left">alpha</td><td style="text-align:left">图表的透明度</td></tr><tr><td style="text-align:left">kind</td><td style="text-align:left">{‘line’,‘bar’,‘barh’,‘kde’}</td></tr><tr><td style="text-align:left">use_index</td><td style="text-align:left">将对象的索引用作刻度标签</td></tr><tr><td style="text-align:left">rot</td><td style="text-align:left">旋转刻度标签（0：360）</td></tr><tr><td style="text-align:left">xsticks/ysticks</td><td style="text-align:left">x/y刻度</td></tr><tr><td style="text-align:left">xlim/ylim</td><td style="text-align:left">x/y界限</td></tr><tr><td style="text-align:left">grid</td><td style="text-align:left">显示网格线</td></tr></tbody></table><table><thead><tr><th style="text-align:left">可视化</th><th></th></tr></thead><tbody><tr><td style="text-align:left">s.hist(bins)</td><td>直方图</td></tr><tr><td style="text-align:left">s.plot.kde()/s.plot.density()</td><td>Kernel Density Estimate，核密度估计）</td></tr><tr><td style="text-align:left">df.plot.bar(stacked)</td><td>条形图（参数stacked=True设置堆叠）</td></tr><tr><td style="text-align:left">df.plot.barh(stacked)</td><td>水平条形图</td></tr><tr><td style="text-align:left">df.plot.line(x,y)</td><td>线图</td></tr><tr><td style="text-align:left">df.plot.scatter(x,y,s=None,c=None)</td><td>散点图，s(size)，c(color)</td></tr><tr><td style="text-align:left">df.plot.hexbin(x, y, C=None)</td><td>六角形分箱图</td></tr><tr><td style="text-align:left">df.plot.hist(bins)</td><td>bins指定直方图宽度</td></tr><tr><td style="text-align:left">df.plot.box(by)</td><td>箱线图</td></tr><tr><td style="text-align:left">df.plot.area(x,y)</td><td></td></tr><tr><td style="text-align:left">df.plot.pie(y)</td><td></td></tr></tbody></table><table><thead><tr><th style="text-align:left">Plotting Tools函数</th><th>import pandas.plotting</th></tr></thead><tbody><tr><td style="text-align:left">scatter_matrix()</td><td>散点图矩阵</td></tr><tr><td style="text-align:left">andrews_curves()</td><td>Andrews Curves</td></tr><tr><td style="text-align:left">Parallel Coordinates()</td><td>平行坐标</td></tr><tr><td style="text-align:left">lag_plot()</td><td>滞积</td></tr><tr><td style="text-align:left">autocorrelation_plot()</td><td>自相关图</td></tr><tr><td style="text-align:left">bootstrap_plot()</td><td>Bootstrap</td></tr><tr><td style="text-align:left">radviz()</td><td></td></tr></tbody></table><h1 id="pandas函数"><a class="markdownIt-Anchor" href="#pandas函数"></a> Pandas函数</h1><p>NumPy的ufuncs（元素级数组函数）也可用于操作pandas对象（例如<code>np.abs(df)</code>）</p><h2 id="导入导出"><a class="markdownIt-Anchor" href="#导入导出"></a> 导入导出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pd.read_csv(filepath_or_buffer, sep=<span class="string">','</span>,encoding,index_col)</span><br><span class="line">df.to_csv(path_or_buf, sep=<span class="string">',columns=None, header=True, index=True) </span></span><br><span class="line"><span class="string">pd.read_excel(io,sheetname,header,skiprows,na_value)</span></span><br><span class="line"><span class="string">df.to_excel(excel_writer, sheet_name='</span>Sheet1<span class="string">', columns=None, header=True, index=True,startrow=0, startcol=0) </span></span><br><span class="line"><span class="string">read_table, read_json, read_html, read_pickle, read_sas,...</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取中文路径文件</span></span><br><span class="line">f=open(<span class="string">"中文路径.csv"</span>)</span><br><span class="line">df=pd.read_csv(f)</span><br><span class="line"></span><br><span class="line"><span class="comment">#excel追加</span></span><br><span class="line">writer = pd.ExcelWriter(<span class="string">'output.xlsx'</span>)</span><br><span class="line">df1.to_excel(writer, <span class="string">'Sheet1'</span>)</span><br><span class="line">df2.to_excel(writer, <span class="string">'Sheet2'</span>)</span><br><span class="line">writer.save()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> ExcelWriter(<span class="string">'foo.xlsx'</span>) <span class="keyword">as</span> writer:</span><br><span class="line">    df.to_excel(writer, <span class="string">'Data 0'</span>)</span><br><span class="line">    df2.to_excel(writer, <span class="string">'Data 1'</span>)</span><br></pre></td></tr></table></figure><p><strong>MemoryError问题</strong>：<br><a href="https://blog.csdn.net/weixin_39750084/article/details/81501395" target="_blank" rel="noopener">参考链接</a><br>pandas设计时应该是早就考虑到了这些可能存在的问题，所以在read功能中设计了块读取的功能，也就是不会一次性把所有的数据都放到内存中来，而是分块读到内存中，最后再将块合并到一起，形成一个完整的DataFrame。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(path, sep=<span class="string">','</span>,engine = <span class="string">'python'</span>,iterator=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_csv</span><span class="params">(data,chunkSize = <span class="number">100000</span>)</span></span></span><br><span class="line">  loop = True  </span><br><span class="line">  chunks = []</span><br><span class="line">  index = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> loop:</span><br><span class="line">      <span class="keyword">try</span>:</span><br><span class="line">          print(<span class="string">'reading'</span>)</span><br><span class="line">          print(index+<span class="string">' chunk'</span>)</span><br><span class="line">          chunk = data.get_chunk(chunkSize)</span><br><span class="line">          chunks.append(chunk)</span><br><span class="line">          index += <span class="number">1</span></span><br><span class="line">  </span><br><span class="line">      <span class="keyword">except</span> StopIteration:</span><br><span class="line">          loop = <span class="literal">False</span></span><br><span class="line">          print(<span class="string">"Iteration is stopped."</span>)</span><br><span class="line">  print(<span class="string">'concat chunks ...'</span>)</span><br><span class="line">  <span class="keyword">return</span> pd.concat(chunks, ignore_index= <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">data = read_csv(data,chunkSize = <span class="number">100000</span>)</span><br></pre></td></tr></table></figure><h2 id="合并和匹配"><a class="markdownIt-Anchor" href="#合并和匹配"></a> 合并和匹配</h2><p><code>pd.concat(objs, axis=0, join='outer',ignore_index=False,keys=None)</code><br>pandas合并,自动匹配</p><blockquote><p>keys:层次化索引<br>join:{‘inner’,‘outer’}<br>ignore_index：重新生成索引   |</p></blockquote><p><code>pd.merge(left,right,how='inner',on=None,indicator,suffixes=('_x', '_y'),left_index,right_index)</code><br>pandas匹配</p><blockquote><p>how:{‘left’,‘right’,‘inner’,‘outer’}<br>indicator:{‘left_only’,‘right_only’,‘both’}<br>suffixes：列名前缀<br>left_index,right_index：索引匹配</p></blockquote><h2 id="离散化和面元划分"><a class="markdownIt-Anchor" href="#离散化和面元划分"></a> 离散化和面元划分</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回pandas.Categorical对象</span></span><br><span class="line">pd.cut(x, bins, right=<span class="literal">True</span>, labels=<span class="literal">None</span>) <span class="comment"># 按指定宽度或者数量分割面元&lt;br&gt;bins: 整数（面元数量） or 面元边界序列 or 区间索引|</span></span><br><span class="line">pd.qcut(x, q, labels=<span class="literal">None</span>, duplicates=<span class="string">'raise'</span>) <span class="comment"># 分割的面元每组数量一致  &lt;br&gt;q : 整数(面元数量) or 分位数序列|</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ID=np.random.randint(<span class="number">100</span>,<span class="number">500</span>,<span class="number">1000</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>score=np.random.randn(<span class="number">1000</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>score=(score-score.min())/(score.max()-score.min())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#均匀宽度分组cut或者均匀数量分组qcut</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cuts=pd.cut(score,bins=<span class="number">10</span>,right=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>qcuts=pd.qcut(score,q=<span class="number">10</span>,duplicates=<span class="string">'drop'</span>) <span class="comment">#删除重复分位数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df.groupby(cuts).ID.nunique() <span class="comment">#去重计数</span></span><br><span class="line">[<span class="number">0.0</span>, <span class="number">0.1</span>)        <span class="number">6</span></span><br><span class="line">[<span class="number">0.1</span>, <span class="number">0.2</span>)       <span class="number">21</span></span><br><span class="line">[<span class="number">0.2</span>, <span class="number">0.3</span>)       <span class="number">49</span></span><br><span class="line">[<span class="number">0.3</span>, <span class="number">0.4</span>)      <span class="number">109</span></span><br><span class="line">[<span class="number">0.4</span>, <span class="number">0.5</span>)      <span class="number">161</span></span><br><span class="line">[<span class="number">0.5</span>, <span class="number">0.6</span>)      <span class="number">177</span></span><br><span class="line">[<span class="number">0.6</span>, <span class="number">0.7</span>)      <span class="number">156</span></span><br><span class="line">[<span class="number">0.7</span>, <span class="number">0.8</span>)       <span class="number">96</span></span><br><span class="line">[<span class="number">0.8</span>, <span class="number">0.9</span>)       <span class="number">36</span></span><br><span class="line">[<span class="number">0.9</span>, <span class="number">1.001</span>)     <span class="number">10</span></span><br><span class="line">Name: ID, dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df.groupby(qcuts).ID.nunique()</span><br><span class="line">(<span class="number">-0.001</span>, <span class="number">0.32</span>]    <span class="number">85</span></span><br><span class="line">(<span class="number">0.32</span>, <span class="number">0.402</span>]     <span class="number">95</span></span><br><span class="line">(<span class="number">0.402</span>, <span class="number">0.457</span>]    <span class="number">88</span></span><br><span class="line">(<span class="number">0.457</span>, <span class="number">0.496</span>]    <span class="number">85</span></span><br><span class="line">(<span class="number">0.496</span>, <span class="number">0.535</span>]    <span class="number">85</span></span><br><span class="line">(<span class="number">0.535</span>, <span class="number">0.578</span>]    <span class="number">87</span></span><br><span class="line">(<span class="number">0.578</span>, <span class="number">0.618</span>]    <span class="number">89</span></span><br><span class="line">(<span class="number">0.618</span>, <span class="number">0.675</span>]    <span class="number">88</span></span><br><span class="line">(<span class="number">0.675</span>, <span class="number">0.736</span>]    <span class="number">86</span></span><br><span class="line">(<span class="number">0.736</span>, <span class="number">1.0</span>]      <span class="number">86</span></span><br><span class="line">Name: ID, dtype: int64</span><br></pre></td></tr></table></figure><h2 id="透视表pivot-table"><a class="markdownIt-Anchor" href="#透视表pivot-table"></a> 透视表(pivot table)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.pivot_table(data, values=<span class="literal">None</span>, index=<span class="literal">None</span>, columns=<span class="literal">None</span>, aggfunc=<span class="string">'mean'</span>, </span><br><span class="line">    fill_value=<span class="literal">None</span>, margins=<span class="literal">False</span>, dropna=<span class="literal">True</span>, margins_name=<span class="string">'All'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>Parameters:<br><strong>data</strong> : DataFrame<br><strong>values</strong> : 要聚合的列（可选）<br><strong>index</strong> : 分组的列名或其他分组键，透视表的行<br><strong>columns</strong> : 分组的列名或其他分组键，透视表的列<br><strong>aggfunc</strong> : 聚合函数或函数列表，可以是任何对groupby有效的函数<br><strong>fill_value</strong> : 替换表中的缺失值<br><strong>margins</strong> : boolean, 分类汇总<br><strong>dropna</strong> : boolean, default True<br><strong>margins_name</strong> : string, default ‘All’, 分类汇总名字</p></blockquote><h2 id="交叉表cross-tabulation"><a class="markdownIt-Anchor" href="#交叉表cross-tabulation"></a> 交叉表(cross-tabulation)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(index, columns, values=<span class="literal">None</span>, rownames=<span class="literal">None</span>, colnames=<span class="literal">None</span>, </span><br><span class="line">    aggfunc=<span class="literal">None</span>, margins=<span class="literal">False</span>, dropna=<span class="literal">True</span>, normalize=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><blockquote><p>Parameters:<br><strong>index</strong> : array-like, Series, or list of arrays/Series<br><strong>columns</strong> : array-like, Series, or list of arrays/Series<br><strong>values</strong> : array-like, optional<br><strong>aggfunc</strong> : function, optional<br><strong>rownames</strong> : sequence, default None<br><strong>colnames</strong> : sequence, default None<br><strong>margins</strong> : boolean, default False<br><strong>dropna</strong> : boolean, default True<br><strong>normalize</strong> : boolean, {‘all’, ‘index’, ‘columns’}, or {0,1}, default False<br>Normalize by dividing all values by the sum of values.</p></blockquote><ul><li>If passed ‘all’ or <code>True</code>, will normalize over all values.</li><li>If passed ‘index’ will normalize over each row.</li><li>If passed ‘columns’ will normalize over each column.</li><li>If margins is <code>True</code>, will also normalize margin values.</li></ul><h1 id="链式编程技术"><a class="markdownIt-Anchor" href="#链式编程技术"></a> 链式编程技术</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.pipe(func, *args, **kwargs)   <span class="comment"># df.pipe(f)等价于f(df)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(df.pipe(h)</span><br><span class="line">    .pipe(g, arg1=a)</span><br><span class="line">    .pipe(f, arg2=b, arg3=c)</span><br><span class="line">) <span class="comment"># 加外括号便于换行</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> pandas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据分析 </tag>
            
            <tag> python </tag>
            
            <tag> pandas </tag>
            
            <tag> dataframe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Standard Library)--re+正则表达式</title>
      <link href="/posts/python/PythonNotebook(Standard-Library)--re.html"/>
      <url>/posts/python/PythonNotebook(Standard-Library)--re.html</url>
      
        <content type="html"><![CDATA[<p>re 模块使 Python 语言拥有全部的正则表达式功能。</p><p>compile 函数根据一个模式字符串和可选的标志参数生成一个正则表达式对象。该对象拥有一系列方法用于正则表达式匹配和替换。</p><p>re 模块也提供了与这些方法功能完全一致的函数，这些函数使用一个模式字符串做为它们的第一个参数。</p><a id="more"></a><h1 id="re模块"><a class="markdownIt-Anchor" href="#re模块"></a> re模块</h1><h2 id="匹配返回re对象-matchobject"><a class="markdownIt-Anchor" href="#匹配返回re对象-matchobject"></a> 匹配：返回re对象 <code>MatchObject</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.match(pattern,string,flags)        <span class="comment"># 起始位置匹配</span></span><br><span class="line">re.search(pattern,string,flags)       <span class="comment"># 扫描整个字符串并返回第一个成功的匹配</span></span><br></pre></td></tr></table></figure><p>我们可以通过 <code>re.compile(pattern,flags=0)</code> 编译pattern，提高效率。<br><code>re.match</code>和<code>re.search</code>匹配成功则返回 <code>re.MatchObject</code>对象，匹配不到则返回 <code>None</code></p><table><thead><tr><th style="text-align:left"><code>re.MatchObject方法</code></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">obj.group(num=0)</td><td style="text-align:left">返回num对应索引位置的元组<code>(num,str)</code></td></tr><tr><td style="text-align:left">obj.groups()</td><td style="text-align:left">返回所有元组</td></tr><tr><td style="text-align:left">obj.start()</td><td style="text-align:left">返回第一个字符在字符串中的起始位置</td></tr><tr><td style="text-align:left">obj.end()</td><td style="text-align:left">返回第一个字符在字符串中的结束位置</td></tr><tr><td style="text-align:left">obj.span()</td><td style="text-align:left">返回匹配到的字符串位置元祖(start,end)</td></tr></tbody></table><h2 id="查找"><a class="markdownIt-Anchor" href="#查找"></a> 查找</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.findall(pattern,string,flags=<span class="number">0</span>)    <span class="comment"># 返回匹配到所有子串list </span></span><br><span class="line">re.finditer(pattern, string,  flags=<span class="number">0</span>)<span class="comment"># 类似findall，返回迭代器</span></span><br></pre></td></tr></table></figure><h2 id="检索-替换和分割"><a class="markdownIt-Anchor" href="#检索-替换和分割"></a> 检索、替换和分割</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re.sub(pattern,replace,string,count=<span class="number">0</span>)    <span class="comment"># replace为字符或函数，count为替换的次数</span></span><br><span class="line">re.split(pattern,string,maxsplit=<span class="number">0</span>,flags) <span class="comment"># 返回字符串列表，maxsplit为最大分割次数</span></span><br></pre></td></tr></table></figure><h2 id="flags标志"><a class="markdownIt-Anchor" href="#flags标志"></a> flags标志</h2><table><thead><tr><th>flags</th><th>说明</th></tr></thead><tbody><tr><td>re.I</td><td>使匹配对大小写不敏感</td></tr><tr><td>re.L</td><td>做本地语言识别（locale-aware）匹配</td></tr><tr><td>re.M</td><td>多行匹配，影响 ^ 和 $</td></tr><tr><td>re.S</td><td>使.(dot)匹配所有字符，包括换行</td></tr><tr><td>re.U</td><td>Unicode字符集解析</td></tr><tr><td>re.X</td><td>该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Standard Library </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
            <tag> python </tag>
            
            <tag> 标准库 </tag>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Standard Library)--math+random</title>
      <link href="/posts/python/PythonNotebook(Standard-Library)--math+random.html"/>
      <url>/posts/python/PythonNotebook(Standard-Library)--math+random.html</url>
      
        <content type="html"><![CDATA[<p>math &amp; random</p><a id="more"></a><h1 id="math"><a class="markdownIt-Anchor" href="#math"></a> math</h1><table><thead><tr><th>math</th><th>import math</th></tr></thead><tbody><tr><td>math.truck(x)</td><td>取整</td></tr><tr><td>math.ceil(x)</td><td>天花板</td></tr><tr><td>math.floor(x)</td><td>地板</td></tr><tr><td>math.exp(x)</td><td></td></tr><tr><td>math.log(x,b=math.e)</td><td>计算以b为底的对数</td></tr><tr><td>math.pow(x,y)</td><td>x**y</td></tr><tr><td>math.sqrt(x)</td><td></td></tr><tr><td>math.log10(x)</td><td></td></tr><tr><td>math.degrees</td><td>弧度转化为度</td></tr><tr><td>math.radians(x)</td><td>度转化为弧度</td></tr><tr><td>math.factorial(n)</td><td>n的阶乘</td></tr><tr><td>math.nan</td><td>缺失值</td></tr><tr><td>math.inf</td><td></td></tr><tr><td>math.pi</td><td>π</td></tr><tr><td>math.e</td><td>自然常数</td></tr></tbody></table><h1 id="random"><a class="markdownIt-Anchor" href="#random"></a> random</h1><table><thead><tr><th>random</th><th>import random</th></tr></thead><tbody><tr><td>random.choice(seq)</td><td>随机挑选一个元素</td></tr><tr><td>random.randrange(start,stop,step)</td><td>从指定范围内，获取一个随机数</td></tr><tr><td>random.random()</td><td>随机生成一个实数[0,1)</td></tr><tr><td>random.uniform(x, y)</td><td>随机生成一个实数[x,y]</td></tr><tr><td>random.seed()</td><td></td></tr><tr><td>random.shuffle(lst)</td><td>随机排序</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Standard Library </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> python </tag>
            
            <tag> random </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Standard Library)--datetime+time+calendar</title>
      <link href="/posts/python/PythonNotebook(Standard-Library)--datetime.html"/>
      <url>/posts/python/PythonNotebook(Standard-Library)--datetime.html</url>
      
        <content type="html"><![CDATA[<p>Python 程序能用很多方式处理日期和时间，转换日期格式是一个常见的功能。<br>Python 提供了一个 time 和 calendar 模块可以用于格式化日期和时间。<br>时间间隔是以秒为单位的浮点小数。<br>每个时间戳都以自从1970年1月1日午夜（历元）经过了多长时间来表示。</p><a id="more"></a><h1 id="datetime"><a class="markdownIt-Anchor" href="#datetime"></a> datetime</h1><table><thead><tr><th>datetime模块定义了6个类</th><th></th></tr></thead><tbody><tr><td>datetime.date</td><td>表示日期的类</td></tr><tr><td>datetime.datetime</td><td>表示日期时间的类</td></tr><tr><td>datetime.time</td><td>表示时间的类</td></tr><tr><td>datetime.timedelta</td><td>表示时间间隔</td></tr><tr><td>datetime.tzinfo</td><td>时区的相关信息</td></tr><tr><td>datetime.timezone</td><td>将tzinfo抽象基类实现为UTC固定偏移量的类</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date,datetime,time,timedelta</span><br></pre></td></tr></table></figure><h2 id="datetimetimedelta"><a class="markdownIt-Anchor" href="#datetimetimedelta"></a> datetime.timedelta</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datetime.timedelta(days=<span class="number">0</span>, seconds=<span class="number">0</span>, microseconds=<span class="number">0</span>, milliseconds=<span class="number">0</span>, minutes=<span class="number">0</span>, hours=<span class="number">0</span>, weeks=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>属性</strong></th><th>read-only</th></tr></thead><tbody><tr><td>days</td><td>Between -999999999 and 999999999 inclusive</td></tr><tr><td>seconds</td><td>Between 0 and 86399 inclusive</td></tr><tr><td>microseconds</td><td>Between 0 and 999999 inclusive</td></tr><tr><td><strong>方法</strong></td><td></td></tr><tr><td>total_seconds()</td><td>返回持续时间中包含的总秒数</td></tr></tbody></table><h2 id="datetimedate"><a class="markdownIt-Anchor" href="#datetimedate"></a> datetime.date</h2><p><code>date(year,month,day)</code>返回 ‘year-month-day’<br><code>date.today()</code>返回today（datetime.date类）<br><code>date.fromtimestamp(timestamp)</code>由时间戳转化<br><code>date.fromordinal(ordinal)</code></p><blockquote><p>timestamp（时间戳）是指格林威治时间1970年01月01日00时00分00秒起至现在的总秒数。</p></blockquote><table><thead><tr><th><strong>属性</strong></th><th>read-only</th></tr></thead><tbody><tr><td>date.year</td><td>Between MINYEAR and MAXYEAR inclusive.</td></tr><tr><td>date.month</td><td>Between 1 and 12 inclusive.</td></tr><tr><td>date.day</td><td>Between 1 and the number of days in the given month of the given year.</td></tr></tbody></table><p><strong>运算</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">date2 = date1 + timedelta</span><br><span class="line">date2 = date1 - timedelta</span><br><span class="line">timedelta = date1 - date2</span><br><span class="line">date1 &lt; date2</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left"><strong>方法</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">replace(year=self.year, month=self.month, day=self.day)</td><td style="text-align:left">替换给定日期，但不改变原日期</td></tr><tr><td style="text-align:left">timetuple()</td><td style="text-align:left">返回 time.struct_time对象(时间元祖)</td></tr><tr><td style="text-align:left">toordinal()</td><td style="text-align:left">回归原始日期</td></tr><tr><td style="text-align:left">weekday()</td><td style="text-align:left">Return the day of the week as an integer, where Monday is 0 and Sunday is 6</td></tr><tr><td style="text-align:left">isoweekday()</td><td style="text-align:left">Return the day of the week as an integer, where Monday is 1 and Sunday is 7</td></tr><tr><td style="text-align:left">isocalendar()</td><td style="text-align:left">Return a 3-tuple, (ISO year, ISO week number, ISO weekday)</td></tr><tr><td style="text-align:left">isoformat()</td><td style="text-align:left">Return a string ‘YYYY-MM-DD’</td></tr><tr><td style="text-align:left">ctime()</td><td style="text-align:left">return a string (<code>date(2002, 12, 4).ctime() == 'Wed Dec 4 00:00:00 2002'</code>)</td></tr><tr><td style="text-align:left">strftime(format)</td><td style="text-align:left">返回指定格式字符</td></tr></tbody></table><h2 id="datetimedatetime"><a class="markdownIt-Anchor" href="#datetimedatetime"></a> datetime.datetime</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">datetime(year, month, day, hour=<span class="number">0</span>, minute=<span class="number">0</span>, second=<span class="number">0</span>, microsecond=<span class="number">0</span>, tzinfo=<span class="literal">None</span>, *, fold=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left"><strong>创建</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>datetime.today()</code></td><td style="text-align:left">返回当天date</td></tr><tr><td style="text-align:left"><code>datetime.now()</code></td><td style="text-align:left">返回当前系统时间</td></tr><tr><td style="text-align:left"><code>datetime.fromtimestamp(timestamp, tz=None)</code></td><td style="text-align:left">根据时间戮返回datetime对象</td></tr><tr><td style="text-align:left"><code>datetime.fromordinal(ordinal)</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>datetime.combine(date, time, tzinfo=self.tzinfo)</code></td><td style="text-align:left">date对象和time对象组合成新的datetime对象</td></tr><tr><td style="text-align:left"><code>datetime.strptime(date_string, format)</code></td><td style="text-align:left"><strong>字符串格式创建</strong></td></tr><tr><td style="text-align:left"><code>datetime.strftime()</code></td><td style="text-align:left">转换为字符格式</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>属性</strong></th><th style="text-align:left">(read-only)</th></tr></thead><tbody><tr><td style="text-align:left">year</td><td style="text-align:left">Between MINYEAR and MAXYEAR inclusive.</td></tr><tr><td style="text-align:left">month</td><td style="text-align:left">Between 1 and 12 inclusive.</td></tr><tr><td style="text-align:left">day</td><td style="text-align:left">Between 1 and the number of days in the given month of the given year.</td></tr><tr><td style="text-align:left">hour</td><td style="text-align:left">In range(24).</td></tr><tr><td style="text-align:left">minute</td><td style="text-align:left">In range(60).</td></tr><tr><td style="text-align:left">second</td><td style="text-align:left">In range(60).</td></tr><tr><td style="text-align:left">microsecond</td><td style="text-align:left">In range(1000000).（微秒）</td></tr><tr><td style="text-align:left">tzinfo</td><td style="text-align:left">时区</td></tr><tr><td style="text-align:left">fold</td><td style="text-align:left"></td></tr></tbody></table><p><strong>运算</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">datetime2 = datetime1 + timedelta</span><br><span class="line">datetime2 = datetime1 - timedelta</span><br><span class="line">timedelta = datetime1 - datetime2</span><br><span class="line">datetime1 &lt; datetime2</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left"><strong>方法</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">date()</td><td style="text-align:left">返回date对象</td></tr><tr><td style="text-align:left">time()</td><td style="text-align:left">返回time对象</td></tr><tr><td style="text-align:left">replace()</td><td style="text-align:left">替换</td></tr><tr><td style="text-align:left">ctime()</td><td style="text-align:left">返回格式如 Sun Apr 16 00:00:00 2017</td></tr><tr><td style="text-align:left">timetuple()</td><td style="text-align:left">返回time.struct_time对象</td></tr><tr><td style="text-align:left">utctimetuple()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">toordinal()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">timestamp()</td><td style="text-align:left">返回时间戳(float)</td></tr><tr><td style="text-align:left">weekday()</td><td style="text-align:left">Monday is 0 and Sunday is 6</td></tr><tr><td style="text-align:left">isoweekday()</td><td style="text-align:left">Monday is 1 and Sunday is 7</td></tr><tr><td style="text-align:left">isocalendar()</td><td style="text-align:left">Return a 3-tuple, (ISO year, ISO week number, ISO weekday)</td></tr><tr><td style="text-align:left">isoformat(sep=‘T’, timespec=‘auto’)</td><td style="text-align:left">Return a string ‘YYYY-MM-DDTHH:MM:SS.mm’</td></tr><tr><td style="text-align:left">ctime()</td><td style="text-align:left">return a string (‘Wed Dec  4 20:30:40 2002’)</td></tr><tr><td style="text-align:left">strftime(format)</td><td style="text-align:left">由日期格式转化为字符串格式</td></tr></tbody></table><blockquote><p>关于时区的方法暂时不计入</p></blockquote><h2 id="datetimetime"><a class="markdownIt-Anchor" href="#datetimetime"></a> datetime.time</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time(hour=<span class="number">0</span>, minute=<span class="number">0</span>, second=<span class="number">0</span>, microsecond=<span class="number">0</span>, tzinfo=<span class="literal">None</span>, *, fold=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">属性</th><th style="text-align:left">(read-only)</th></tr></thead><tbody><tr><td style="text-align:left">hour</td><td style="text-align:left">In range(24).</td></tr><tr><td style="text-align:left">minute</td><td style="text-align:left">In range(60).</td></tr><tr><td style="text-align:left">second</td><td style="text-align:left">In range(60).</td></tr><tr><td style="text-align:left">microsecond</td><td style="text-align:left">In range(1000000).</td></tr><tr><td style="text-align:left">tzinfo</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">fold</td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>方法</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">replace()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">isoformat(timespec=‘auto’)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">strftime(format)</td><td style="text-align:left">转字符格式</td></tr><tr><td style="text-align:left">tzname()</td><td style="text-align:left">返回时区名字</td></tr><tr><td style="text-align:left">utcoffset()</td><td style="text-align:left">返回时区的时间偏移量</td></tr><tr><td style="text-align:left">dst()</td><td style="text-align:left"></td></tr></tbody></table><h2 id="python中时间日期格式化符号"><a class="markdownIt-Anchor" href="#python中时间日期格式化符号"></a> python中时间日期格式化符号</h2><table><thead><tr><th style="text-align:left">格式</th><th style="text-align:left">说明</th><th style="text-align:left">Example</th></tr></thead><tbody><tr><td style="text-align:left">%a</td><td style="text-align:left">周日期缩写</td><td style="text-align:left">Sun, Mon, …, Sat (en_US);</td></tr><tr><td style="text-align:left">%A</td><td style="text-align:left">周日期全称</td><td style="text-align:left">Sunday, Monday, …, Saturday (en_US);</td></tr><tr><td style="text-align:left">%w</td><td style="text-align:left">周数字</td><td style="text-align:left">0, 1, …, 6</td></tr><tr><td style="text-align:left">%d</td><td style="text-align:left">月中天数</td><td style="text-align:left">01, 02, …, 31</td></tr><tr><td style="text-align:left">%b</td><td style="text-align:left">月份缩写</td><td style="text-align:left">Jan, Feb, …, Dec (en_US);</td></tr><tr><td style="text-align:left">%B</td><td style="text-align:left">月份全称</td><td style="text-align:left">January, February, …, December (en_US);</td></tr><tr><td style="text-align:left">%m</td><td style="text-align:left">月份数字</td><td style="text-align:left">01, 02, …, 12</td></tr><tr><td style="text-align:left">%y</td><td style="text-align:left">年数字，两位</td><td style="text-align:left">00, 01, …, 99</td></tr><tr><td style="text-align:left">%Y</td><td style="text-align:left">年数字，四位</td><td style="text-align:left">0001, 0002, …, 2013, 2014, …, 9998, 9999</td></tr><tr><td style="text-align:left">%H</td><td style="text-align:left">24小时制</td><td style="text-align:left">00, 01, …, 23</td></tr><tr><td style="text-align:left">%I</td><td style="text-align:left">12小时制</td><td style="text-align:left">01, 02, …, 12</td></tr><tr><td style="text-align:left">%p</td><td style="text-align:left">AM or PM</td><td style="text-align:left">AM, PM (en_US);</td></tr><tr><td style="text-align:left">%M</td><td style="text-align:left">分钟</td><td style="text-align:left">00, 01, …, 59</td></tr><tr><td style="text-align:left">%S</td><td style="text-align:left">秒</td><td style="text-align:left">00, 01, …, 59</td></tr><tr><td style="text-align:left">%f</td><td style="text-align:left">微秒</td><td style="text-align:left">000000, 000001, …, 999999</td></tr><tr><td style="text-align:left">%z</td><td style="text-align:left">UTC offset in the form +HHMM or -HHMM</td><td style="text-align:left">(empty), +0000, -0400, +1030</td></tr><tr><td style="text-align:left">%Z</td><td style="text-align:left">时区名</td><td style="text-align:left">(empty), UTC, EST, CST</td></tr><tr><td style="text-align:left">%j</td><td style="text-align:left">年中的天数</td><td style="text-align:left">001, 002, …, 366</td></tr><tr><td style="text-align:left">%U</td><td style="text-align:left">年中的周日期（周日为第一天）</td><td style="text-align:left">00, 01, …, 53</td></tr><tr><td style="text-align:left">%W</td><td style="text-align:left">年中的周日期（周一为第一天）</td><td style="text-align:left">00, 01, …, 53</td></tr><tr><td style="text-align:left">%c</td><td style="text-align:left">date and time</td><td style="text-align:left">Tue Aug 16 21:30:00 1988 (en_US);</td></tr><tr><td style="text-align:left">%x</td><td style="text-align:left">date</td><td style="text-align:left">08/16/88 (None)<br>08/16/1988 (en_US)</td></tr><tr><td style="text-align:left">%X</td><td style="text-align:left">time</td><td style="text-align:left">21:30:00 (en_US);</td></tr><tr><td style="text-align:left">%%</td><td style="text-align:left">%'字符</td><td style="text-align:left">%</td></tr><tr><td style="text-align:left">%G</td><td style="text-align:left">ISO 8601 year</td><td style="text-align:left">0001, 0002, …, 2013, 2014, …, 9998, 9999</td></tr><tr><td style="text-align:left">%u</td><td style="text-align:left">ISO 8601 weekday</td><td style="text-align:left">1, 2, …, 7</td></tr><tr><td style="text-align:left">%V</td><td style="text-align:left">ISO 8601 week</td><td style="text-align:left">01, 02, …, 53</td></tr></tbody></table><hr><h1 id="time"><a class="markdownIt-Anchor" href="#time"></a> time</h1><table><thead><tr><th>函数</th><th></th></tr></thead><tbody><tr><td>time.clock()</td><td>用CPU花费的时间（秒）</td></tr><tr><td>time.sleep(secs)</td><td></td></tr></tbody></table><h2 id="timestruct_time时间戳类"><a class="markdownIt-Anchor" href="#timestruct_time时间戳类"></a> time.struct_time(时间戳类)</h2><table><thead><tr><th style="text-align:left"><strong>属性</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">tm_year</td><td style="text-align:left">yyyy</td></tr><tr><td style="text-align:left">tm_mon</td><td style="text-align:left">1 到 12</td></tr><tr><td style="text-align:left">tm_mday</td><td style="text-align:left">1 到 31</td></tr><tr><td style="text-align:left">tm_hour</td><td style="text-align:left">0 到 23</td></tr><tr><td style="text-align:left">tm_min</td><td style="text-align:left">0 到 59</td></tr><tr><td style="text-align:left">tm_sec</td><td style="text-align:left">0 到 61 (60或61  是闰秒)</td></tr><tr><td style="text-align:left">tm_wday</td><td style="text-align:left">0到6 (0是周一)</td></tr><tr><td style="text-align:left">tm_yday</td><td style="text-align:left">1 到 366</td></tr><tr><td style="text-align:left">tm_isdst</td><td style="text-align:left">1(夏令时)0(不是夏令时)-1(未知)</td></tr></tbody></table><hr><h1 id="calendar"><a class="markdownIt-Anchor" href="#calendar"></a> calendar</h1><p>星期一是默认的每周第一天，星期天是默认的最后一天。更改设置需调用<code>calendar.setfirstweekday()</code>函数。</p><table><thead><tr><th style="text-align:left">calendar函数</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">calendar.calendar(year,w=2,l=1,c=6)</td><td style="text-align:left">年日历</td></tr><tr><td style="text-align:left">calendar.firstweekday()</td><td style="text-align:left">返回当前每周起始日期的设置</td></tr><tr><td style="text-align:left">calendar.month(year,month)</td><td style="text-align:left">月日历</td></tr><tr><td style="text-align:left">calendar.isleap(year)</td><td style="text-align:left">是否闰年</td></tr><tr><td style="text-align:left">calendar.leapdays(y1,y2)</td><td style="text-align:left">返回在Y1，Y2两年之间的闰年总数</td></tr><tr><td style="text-align:left">calendar.monthrange(year, month)</td><td style="text-align:left">Returns weekday of first day of the month and number of days in month</td></tr><tr><td style="text-align:left">calendar.weekday(year,month,day)</td><td style="text-align:left">Returns the day of the week (0 is Monday)</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Standard Library </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日期和时间 </tag>
            
            <tag> python </tag>
            
            <tag> datetime </tag>
            
            <tag> time </tag>
            
            <tag> calendar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据分析理论概览</title>
      <link href="/posts/data-analysis/Overview-of-Data-Analysis-Theory.html"/>
      <url>/posts/data-analysis/Overview-of-Data-Analysis-Theory.html</url>
      
        <content type="html"><![CDATA[<p>数据分析术语的简单说明</p><a id="more"></a><h1 id="概率论与数理统计"><a class="markdownIt-Anchor" href="#概率论与数理统计"></a> 概率论与数理统计</h1><table><thead><tr><th style="text-align:left">抽样</th><th style="text-align:left">sample</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">随机采样</td><td style="text-align:left">random  sampling</td><td style="text-align:left">受总体中个体间自相关关系的影响</td></tr><tr><td style="text-align:left">系统采样</td><td style="text-align:left">systematic sampling</td><td style="text-align:left">受个体特点规律性的影响</td></tr><tr><td style="text-align:left">随机-系统采样</td><td style="text-align:left">systematic-random  sampling</td><td style="text-align:left">不受上面的影响</td></tr><tr><td style="text-align:left">多层次采样</td><td style="text-align:left">strtifed  sampling</td><td style="text-align:left">适用于可分层的总体</td></tr><tr><td style="text-align:left"><strong>变量</strong></td><td style="text-align:left">variables</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">连续变量</td><td style="text-align:left">continuous</td><td style="text-align:left">定量变量(quantitative)</td></tr><tr><td style="text-align:left">分类变量</td><td style="text-align:left">discrete</td><td style="text-align:left">定性变量(categories)</td></tr><tr><td style="text-align:left">顺序变量</td><td style="text-align:left">ordinal</td><td style="text-align:left">定性变量(categories)</td></tr><tr><td style="text-align:left"><strong>统计描述</strong></td><td style="text-align:left">summary/describe</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><em><strong>定量变量</strong></em></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">总体均数</td><td style="text-align:left">mean/median</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">四分卫间距</td><td style="text-align:left">IQR</td><td style="text-align:left">3/4分位数-1/4分位数</td></tr><tr><td style="text-align:left">极差</td><td style="text-align:left">range</td><td style="text-align:left">max-min</td></tr><tr><td style="text-align:left">偏度</td><td style="text-align:left">skewness</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">峰度</td><td style="text-align:left">kurtosis</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">方差</td><td style="text-align:left">variance</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">标准差</td><td style="text-align:left">standard  deviation</td><td style="text-align:left">sd=sqrt(var)</td></tr><tr><td style="text-align:left">变异系数</td><td style="text-align:left">coefficient  of variation,CV</td><td style="text-align:left">CV=sd/mean</td></tr><tr><td style="text-align:left"><em><strong>定性变量</strong></em></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">频数</td><td style="text-align:left">frequency/rate</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">联合分布</td><td style="text-align:left">joint distribution</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">众数</td><td style="text-align:left">mode</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>数据预处理</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">归一化/标准化</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">连续变量离散化</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>缺失值模式</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">完全随机缺失</td><td style="text-align:left">MCAR</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">随机缺失</td><td style="text-align:left">MAR</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">非随机缺失</td><td style="text-align:left">NMAR</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>缺失值处理</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">配对删除</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">简单抽样填补</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">均值/中位数/众数填补</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">回归填补，多重插补</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>异常检测</strong></td><td style="text-align:left">outlierTest</td><td style="text-align:left">离群点，孤立点</td></tr><tr><td style="text-align:left">正态分布</td><td style="text-align:left"></td><td style="text-align:left">3倍标准差原则</td></tr><tr><td style="text-align:left">多元正态</td><td style="text-align:left"></td><td style="text-align:left">马氏距离</td></tr><tr><td style="text-align:left"><strong>参数估计（正态分布</strong>）</td><td style="text-align:left"></td><td style="text-align:left">均值和标准差估计</td></tr><tr><td style="text-align:left">点估计</td><td style="text-align:left">point estimation</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">矩估计</td><td style="text-align:left"></td><td style="text-align:left"><code>μ^，σ^</code></td></tr><tr><td style="text-align:left">极大似然估计</td><td style="text-align:left"></td><td style="text-align:left"><code>μ*，σ2*</code></td></tr><tr><td style="text-align:left">稳健估计</td><td style="text-align:left"></td><td style="text-align:left">（M估计，R估计）</td></tr><tr><td style="text-align:left">Bootstrap估计</td><td style="text-align:left"></td><td style="text-align:left">在原始数据的范围内做有放回抽样，预估参数的一些性质。</td></tr><tr><td style="text-align:left"><strong>估计的优良性准则</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">平方和</td><td style="text-align:left">sum of square</td><td style="text-align:left">SS</td></tr><tr><td style="text-align:left">均方</td><td style="text-align:left">mean  square</td><td style="text-align:left">MS</td></tr><tr><td style="text-align:left">无偏估计</td><td style="text-align:left"></td><td style="text-align:left">E（mean）=μ ,<br>E（S2）=σ2（S2为样本方差）</td></tr><tr><td style="text-align:left">均方误差准则</td><td style="text-align:left"></td><td style="text-align:left">MSE(估计量θ)=E（估计量θ-θ）</td></tr><tr><td style="text-align:left"><strong>区间估计</strong></td><td style="text-align:left">interval estimation</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">置信水平（1-α）</td><td style="text-align:left">confidence level</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">置信区间</td><td style="text-align:left">confidence  interval,CI</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>假设检验</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">单侧检验</td><td style="text-align:left">one-sided test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">双侧检验</td><td style="text-align:left">two-sided test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">显著性水平（α）</td><td style="text-align:left">significant  level</td><td style="text-align:left">犯第一类错误的概率</td></tr><tr><td style="text-align:left">独立性检验</td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">游程检验</td><td style="text-align:left">Runs  Test</td><td style="text-align:left">对二分变量的随机检验</td></tr><tr><td style="text-align:left">卡方独立性检验</td><td style="text-align:left">chisq test</td><td style="text-align:left">两分类变量</td></tr><tr><td style="text-align:left">Fisher精确检验</td><td style="text-align:left">fisher test</td><td style="text-align:left">两分类变量</td></tr><tr><td style="text-align:left">Cochran—Mantel—Haenszel卡方检验</td><td style="text-align:left">mantelhaen test</td><td style="text-align:left">两个名义变量在第三个变量的每一层中都是条件独立的</td></tr><tr><td style="text-align:left"><strong>相关性</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">二维列联表的phi系数、列联系数和Cramer’s  V系数。</td><td style="text-align:left"></td><td style="text-align:left">分类变量相关性度量</td></tr><tr><td style="text-align:left">协方差矩阵</td><td style="text-align:left">Covariance</td><td style="text-align:left">cov=mean((X-mean_X)*(Y-mean_Y))</td></tr><tr><td style="text-align:left">相关系数矩阵</td><td style="text-align:left">CorrelationCoefficient</td><td style="text-align:left">cov/sqrt(var_X*Var_Y)</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>person</em></td><td style="text-align:left">线性相关（正态连续变量）</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>spearman</em></td><td style="text-align:left">秩相关(分级定序变量之间的相关程度)</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>kendall</em></td><td style="text-align:left">秩相关</td></tr><tr><td style="text-align:left"><strong>方差齐性检验</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">卡方检验</td><td style="text-align:left">chisq.test</td><td style="text-align:left">单个正态总体的方差检验：χ2检验（H0:  σ2=σ02）</td></tr><tr><td style="text-align:left">F检验</td><td style="text-align:left"></td><td style="text-align:left">两个正态总体方差比：F检验（H0:  σ12=σ22）</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">bartlett.test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"></td><td style="text-align:left">fligner.test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"></td><td style="text-align:left">Brown-Forsythe</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>总体分布类型的拟合度检验</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">正态分布检验</td><td style="text-align:left">shapiro.test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">F(n,m)分布</td><td style="text-align:left">Kolmogorov-Smirnov（K-S）</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">二项分布检验</td><td style="text-align:left">Binomial  Test</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><strong>总体均值检验</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">两样本(连续变量)</td><td style="text-align:left">t检验</td><td style="text-align:left">独立或配对样本</td></tr><tr><td style="text-align:left">两样本(有序分类)</td><td style="text-align:left"><em>Mann-Whitney  U检验</em></td><td style="text-align:left">两样本独立</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>Wilcoxon秩和检验</em></td><td style="text-align:left">两样本独立</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>Wilcoxon秩和检验</em></td><td style="text-align:left">配对样本</td></tr><tr><td style="text-align:left"></td><td style="text-align:left"><em>Walsh检验</em></td><td style="text-align:left">配对样本</td></tr><tr><td style="text-align:left">两样本(分类变量)</td><td style="text-align:left">Kolmogorov双样本单侧检验</td><td style="text-align:left">两样本独立</td></tr><tr><td style="text-align:left">多样本(连续变量)</td><td style="text-align:left">方差分析</td><td style="text-align:left">独立或相关</td></tr><tr><td style="text-align:left">多样本(有序分类)</td><td style="text-align:left">Kruskal-Walls检验</td><td style="text-align:left">多样本独立</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">推广的Mann-Whitney检验</td><td style="text-align:left">多样本独立</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">Jonckneere检验</td><td style="text-align:left">多样本独立</td></tr><tr><td style="text-align:left">多样本(无序分类)</td><td style="text-align:left">Friedman检验</td><td style="text-align:left">多样本相关</td></tr></tbody></table><h1 id="方差分析"><a class="markdownIt-Anchor" href="#方差分析"></a> 方差分析</h1><p>多样本均值比较（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mn>1</mn></msub><mo>=</mo><msub><mi>μ</mi><mn>2</mn></msub><mo>=</mo><mo>…</mo><mo>=</mo><msub><mi>μ</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">H_0:  μ_1=μ_2=…=μ_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)<br>方差分析主要用途：<br>①均数差别的显著性检验<br>②分离各有关因素并估计其对总变异的作用<br>③分析因素间的交互作用<br>④方差齐性检验</p><h1 id="回归regression"><a class="markdownIt-Anchor" href="#回归regression"></a> 回归(regression)</h1><h2 id="线性模型"><a class="markdownIt-Anchor" href="#线性模型"></a> 线性模型</h2><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>=</mo><mi>β</mi><mi>X</mi><mo>+</mo><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Y=βX+error</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>  （OLS最小二乘法，使ESS最小值）</p><p><strong>Gauss-Markov假设</strong>：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub><mtext> </mtext><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msup><mi>σ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e_i ~ N(0, σ^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><br>(1) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>e</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">var(e)= σ^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> , 误差方差=样本方差<br>(2) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>v</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>e</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo stretchy="false">(</mo><mi>i</mi><mi mathvariant="normal">≠</mi><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cov( e_i ,e_j )=0 (i  ≠ j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> , 误差独立性</p><table><thead><tr><th style="text-align:left"><strong>回归方程的显著性检验</strong> (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>β</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">H_0:  β_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>)</th><th style="text-align:left">t检验和F检验</th></tr></thead><tbody><tr><td style="text-align:left">回归平方和</td><td style="text-align:left">Residual Sum of Squares</td></tr><tr><td style="text-align:left">残差平方和</td><td style="text-align:left">Explained Sum of Squares</td></tr><tr><td style="text-align:left">总平方和</td><td style="text-align:left">Total Sum of Squares</td></tr><tr><td style="text-align:left">判定系数</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">自由度</td><td style="text-align:left">degree of freedom</td></tr><tr><td style="text-align:left">平方和</td><td style="text-align:left">sum of square</td></tr><tr><td style="text-align:left">均方</td><td style="text-align:left">mean  square</td></tr><tr><td style="text-align:left">F检验</td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th style="text-align:left">方差源</th><th style="text-align:left">SS</th><th style="text-align:left">df</th></tr></thead><tbody><tr><td style="text-align:left">回归</td><td style="text-align:left">RSS</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">误差</td><td style="text-align:left">ESS</td><td style="text-align:left">n-2</td></tr><tr><td style="text-align:left">总和</td><td style="text-align:left">TSS</td><td style="text-align:left">n-1</td></tr></tbody></table><h2 id="广义线性模型"><a class="markdownIt-Anchor" href="#广义线性模型"></a> 广义线性模型</h2><p><strong>广义加法模型</strong>：扩展广义线性模型，以纳入任意平滑的函数。这意味着你可以自定义函数y  = f(x)。<br><strong>惩罚线性模型</strong>：对惩罚复杂模型的距离添加惩罚项。这往往会使来自相同群体的新数据集预测的更好。<br><strong>稳健的线性模型</strong>：对异常值的存在不那么敏感。</p><ul><li><strong>回归诊断</strong><br>正态检验(shapiro)：自变量多重共线性kappa系数(kappa)<br>线性模型假设的综合验证：若sqrt(vif)&gt;2,存在多重共线性</li><li><strong>异常值</strong><br>离群点(outlierTest)<br>高杠杆值点（帽子统计量）<br>强影响点</li><li><strong>改进措施</strong><br>删除观测点<br>变量变换<br>正态变换<br>线性变换<br>增删变量</li><li><strong>模型选择</strong><br>逐步回归(step/stepAIC)<br>全子集回归(regsubsets)</li><li><strong>交叉验证</strong><br>通过交叉验证法，我们便可以评价模型的泛化能力。<br>在k重交叉验证中，样本被分为k个子样本，轮流将k–1个子样本组合作为训练集，另外1个子样本作为保留集。这样会获得k个预测方程，记录k个保留样本的预测表现结果，然后求其平均值。</li><li><strong>相对权重</strong>（relative  weight）</li></ul><h1 id="分类"><a class="markdownIt-Anchor" href="#分类"></a> 分类</h1><table><thead><tr><th>分类算法</th><th>备注</th></tr></thead><tbody><tr><td>线性判别</td><td>Fisher</td></tr><tr><td>距离判别</td><td>mahalanobis</td></tr><tr><td>贝叶斯分类器</td><td>bayes</td></tr><tr><td>逻辑回归</td><td></td></tr><tr><td>决策树</td><td></td></tr><tr><td>ID3<br>C4.5<br>C5.0</td><td>Information Gain<br>Information Gain Rate</td></tr><tr><td>CART</td><td>Gini Index</td></tr><tr><td>条件推断树</td><td>显著性检验</td></tr><tr><td>随机森林</td><td>random forest</td></tr><tr><td>最近邻算法</td><td>KNN</td></tr><tr><td>支持向量机</td><td>SVM</td></tr><tr><td>神经网络</td><td>NN</td></tr><tr><td>卷积神经网络 CNN</td><td>空间数据</td></tr><tr><td>RNN</td><td>时序数据</td></tr></tbody></table><h1 id="聚类"><a class="markdownIt-Anchor" href="#聚类"></a> 聚类</h1><table><thead><tr><th>层次聚类法</th><th></th></tr></thead><tbody><tr><td>single</td><td>最短距离法</td></tr><tr><td>complete</td><td>最长距离法</td></tr><tr><td>median</td><td>中间距离法</td></tr><tr><td>mcquitty</td><td>相似法</td></tr><tr><td>average</td><td>类平均法</td></tr><tr><td>centroid</td><td>重心法</td></tr><tr><td>ward</td><td>离差平方和法</td></tr><tr><td><strong>划分法</strong></td><td></td></tr><tr><td>k-means</td><td>连续变量</td></tr><tr><td>K-modes</td><td>分类变量</td></tr><tr><td>k-prototype</td><td>混合变量</td></tr><tr><td>PAM</td><td></td></tr><tr><td>clarans</td><td></td></tr><tr><td><strong>密度算法</strong></td><td></td></tr><tr><td>DBSCAN</td><td></td></tr><tr><td>OPTICS</td><td></td></tr><tr><td>DENCLUE</td><td></td></tr></tbody></table><table><thead><tr><th>距离</th><th></th></tr></thead><tbody><tr><td>euclidean</td><td>欧几里德距离</td></tr><tr><td>maximum</td><td>切比雪夫距离</td></tr><tr><td>manhattan</td><td>绝对值距离</td></tr><tr><td>canberra</td><td>Lance 距离</td></tr><tr><td>minkowski</td><td>明科夫斯基距离</td></tr><tr><td>binary</td><td>二分类距离</td></tr><tr><td>one-hot</td><td></td></tr></tbody></table><h1 id="文本分析"><a class="markdownIt-Anchor" href="#文本分析"></a> 文本分析</h1><p>文本分析常见三大距离——cosine/jaccard/Euclidean</p><ol><li>Euclidean，欧氏距离</li><li>cosine，夹角余弦，机器学习中借用这一概念来衡量样本向量之间的差异。</li><li>jaccard，杰卡德相似系数，两个集合A和B的交集元素在A，B的并集中所占的比例，称为两个集合的杰卡德相似系数，用符号J(A,B)表示。</li><li>Relaxed Word Mover’s  Distance（RWMD）文本分析相似性距离</li></ol><h1 id="时间序列"><a class="markdownIt-Anchor" href="#时间序列"></a> 时间序列</h1><ol><li>指数预测模型(Holt-Winters指数平滑)<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>T</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi>S</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi>I</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Y(t)=Trend(t)+Seasonal(t)+Irregular(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">e</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></li><li>ARIMA预测模型：由最近的真实值和最近的观测误差组成的线性函数<br>滞后阶数(lag)，自相关(ACF)，偏自相关(PACF)，差分(diff)，<br>平稳性：adf.test验证平稳性，通过diff或Box-Cox变换平稳<br>残差的自相关检验：Box test</li></ol>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Python Basics)--Python基础</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--Python-base.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--Python-base.html</url>
      
        <content type="html"><![CDATA[<p>Python 是一种易于学习又功能强大的编程语言。它提供了高效的高层次的数据结构，还有简单有效的面向对象编程。Python 优雅的语法和动态类型，以及解释型语言的本质，使它成为在很多领域多数平台上写脚本和快速开发应用的理想语言。</p><a id="more"></a><p><strong>Tips</strong></p><ul><li>Python中多行语句书写需在行末添加反斜杠<code>\</code></li><li>在<code>[]{}()</code>中的多行语句不需要使用反斜杠</li><li><code>?</code> 显示对象的信息<br><code>??</code> 显示对象的源码<br><code>help()</code> 显示对象的帮助信息</li></ul><h1 id="对象"><a class="markdownIt-Anchor" href="#对象"></a> 对象</h1><blockquote><p>python 中万物皆对象<br><code>reset</code>关键字或<code>reset()</code>函数可清空所有对象</p></blockquote><p><strong>访问对象的属性和方法</strong></p><p><code>obj.some_method(args)</code><br><code>obj.attribute_name</code></p><h1 id="标量"><a class="markdownIt-Anchor" href="#标量"></a> 标量</h1><table><thead><tr><th>类型</th><th style="text-align:left">说明</th><th style="text-align:left">示例</th></tr></thead><tbody><tr><td>None</td><td style="text-align:left">空值（常常作为函数的默认参数）</td><td style="text-align:left"></td></tr><tr><td>str</td><td style="text-align:left">字符串，存有Unicode（UTF-8编码）字符串</td><td style="text-align:left"></td></tr><tr><td>bytes</td><td style="text-align:left">原生ASCII字节</td><td style="text-align:left"></td></tr><tr><td>float</td><td style="text-align:left">浮点数</td><td style="text-align:left">0.0, 10.3e-3</td></tr><tr><td>int</td><td style="text-align:left">整数</td><td style="text-align:left">10, -0x260,0x69(0x开头的为16进制数字),0o69(八进制), 0b1101(二进制)</td></tr><tr><td>bool</td><td style="text-align:left">True/False</td><td style="text-align:left"></td></tr><tr><td>complex</td><td style="text-align:left">复数，<code>3+2i</code></td><td style="text-align:left"></td></tr></tbody></table><blockquote><p><strong>str,bool,int和float也是函数，可以用来转换类型</strong></p></blockquote><table><thead><tr><th style="text-align:left">字符串</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">单引号</td><td style="text-align:left">word = ‘字符串’</td></tr><tr><td style="text-align:left">双引号</td><td style="text-align:left">sentence = “这是一个句子”</td></tr><tr><td style="text-align:left">三引号</td><td style="text-align:left">字符串换行</td></tr><tr><td style="text-align:left">r’\n strings’</td><td style="text-align:left"><code>\\</code>可以用来转义，前面加r(raw)不发生转义</td></tr><tr><td style="text-align:left">u’中文字符’</td><td style="text-align:left">中文常加u(unicode)前缀编译</td></tr><tr><td style="text-align:left"><strong>文档起始中文编码说明</strong></td><td style="text-align:left"><code># -*- coding: utf-8-*-</code></td></tr><tr><td style="text-align:left"><code>string[start:end:step]</code></td><td style="text-align:left">切片（左闭右开区间）</td></tr></tbody></table><p><img alt="hello" data-src="/images/hello.png"></p><h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1><table><thead><tr><th style="text-align:left">成员运算符</th><th style="text-align:left">身份运算符</th><th style="text-align:left">逻辑运算符</th><th style="text-align:left">比较运算符<br>(支持连用)</th></tr></thead><tbody><tr><td style="text-align:left">in</td><td style="text-align:left">is</td><td style="text-align:left">and</td><td style="text-align:left"><code>&gt;,&lt;</code></td></tr><tr><td style="text-align:left">not in</td><td style="text-align:left">is not</td><td style="text-align:left">or</td><td style="text-align:left"><code>&gt;=,&lt;=</code></td></tr><tr><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">not</td><td style="text-align:left"><code>!= ，==</code></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span>&lt;<span class="number">3</span> <span class="keyword">and</span> <span class="string">'a'</span>&lt;<span class="string">'b'</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span>&lt;<span class="number">3</span>&lt;<span class="number">1</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">按位运算符</th><th style="text-align:left">描述（二进制编码运算）</th><th style="text-align:left">实例<br><code>a,b=60,13</code></th></tr></thead><tbody><tr><td style="text-align:left">&amp;</td><td style="text-align:left">按位与：参与运算的两个值,如果两个相应位都为1,则该位的结果为1,否则为0</td><td style="text-align:left">(a &amp; b) 输出结果 12 ，二进制解释： 0000 1100</td></tr><tr><td style="text-align:left">|</td><td style="text-align:left">按位或运算符：只要对应的二个二进位有一个为1时，结果位就为1。</td><td style="text-align:left">(a | b) 输出结果 61 ，二进制解释： 0011 1101</td></tr><tr><td style="text-align:left">^</td><td style="text-align:left">按位异或运算符：当两对应的二进位相异时，结果为1</td><td style="text-align:left">(a ^ b) 输出结果 49 ，二进制解释： 0011 0001</td></tr><tr><td style="text-align:left">~</td><td style="text-align:left">按位取反运算符：对数据的每个二进制位取反,即把1变为0,把0变为1。~x 类似于 -x-1</td><td style="text-align:left">(~a ) 输出结果 -61 ，二进制解释： 1100 0011， 在一个有符号二进制数的补码形式。</td></tr><tr><td style="text-align:left">&lt;&lt;</td><td style="text-align:left">左移动运算符：运算数的各二进位全部左移若干位，由&quot;&lt;&lt;&quot;右边的数指定移动的位数，高位丢弃，低位补0。</td><td style="text-align:left">a &lt;&lt; 2 输出结果 240 ，二进制解释： 1111 0000</td></tr><tr><td style="text-align:left">&gt;&gt;</td><td style="text-align:left">右移动运算符：把&quot;&gt;&gt;“左边的运算数的各二进位全部右移若干位，”&gt;&gt;&quot;右边的数指定移动的位数</td><td style="text-align:left">a &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</td></tr></tbody></table><table><thead><tr><th style="text-align:left">数学运算符</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>**</code></td><td style="text-align:left">乘方</td></tr><tr><td style="text-align:left"><code>%</code></td><td style="text-align:left">求余数</td></tr><tr><td style="text-align:left"><code>//</code></td><td style="text-align:left">整除</td></tr><tr><td style="text-align:left"><code>+</code></td><td style="text-align:left">合并str,tupple,list，数学加号</td></tr><tr><td style="text-align:left"><code>*</code></td><td style="text-align:left">重复str,tupple,list，数学乘号</td></tr><tr><td style="text-align:left"><code>-</code></td><td style="text-align:left">减号</td></tr><tr><td style="text-align:left"><code>/</code></td><td style="text-align:left">除号</td></tr></tbody></table><table><thead><tr><th style="text-align:left">赋值运算符</th><th style="text-align:left">描述</th><th style="text-align:left">实例</th></tr></thead><tbody><tr><td style="text-align:left"><code>=</code></td><td style="text-align:left">简单的赋值运算符</td><td style="text-align:left"><code>c = a + b 将 a + b 的运算结果赋值为 c</code><br><code>a=b=c=1</code> 连续赋值</td></tr><tr><td style="text-align:left"><code>+=</code></td><td style="text-align:left">加法赋值运算符</td><td style="text-align:left"><code>c += a 等效于 c = c + a</code></td></tr><tr><td style="text-align:left"><code>-=</code></td><td style="text-align:left">减法赋值运算符</td><td style="text-align:left"><code>c -= a 等效于 c = c - a</code></td></tr><tr><td style="text-align:left"><code>*=</code></td><td style="text-align:left">乘法赋值运算符</td><td style="text-align:left"><code>c *= a 等效于 c = c * a</code></td></tr><tr><td style="text-align:left"><code>/=</code></td><td style="text-align:left">除法赋值运算符</td><td style="text-align:left"><code>c /= a 等效于 c = c / a</code></td></tr><tr><td style="text-align:left"><code>%=</code></td><td style="text-align:left">取模赋值运算符</td><td style="text-align:left"><code>c %= a 等效于 c = c % a</code></td></tr><tr><td style="text-align:left"><code>**=</code></td><td style="text-align:left">幂赋值运算符</td><td style="text-align:left"><code>c **= a 等效于 c = c ** a</code></td></tr><tr><td style="text-align:left"><code>//=</code></td><td style="text-align:left">取整除赋值运算符</td><td style="text-align:left"><code>c //= a 等效于 c = c // a</code></td></tr></tbody></table><h1 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h1><h2 id="tuple-元祖"><a class="markdownIt-Anchor" href="#tuple-元祖"></a> tuple (元祖)</h2><p>元组是一个固定长度，不可改变的Python序列对象</p><ul><li><p><strong>创建tuple</strong><br><code>tup = (4, 5,6), (7, 8)</code><br><code>tup = tuple(obj)</code><br><code>tup=()</code></p></li><li><p><strong>拆分元祖</strong></p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tup = <span class="number">4</span>,<span class="number">5</span>,(<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line">a,b,(c,d) = tup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特殊拆分</span></span><br><span class="line">values = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span></span><br><span class="line">a,b,*_ = values <span class="comment">#*_代表剩余部分，'_'名字不重要,作为惯用写法用'_'</span></span><br></pre></td></tr></table></figure><ul><li><strong>元祖数学运算</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tup1=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">tup2=(<span class="string">'a'</span>,<span class="string">'b'</span>)</span><br><span class="line">tup1+tup2</span><br><span class="line">Out: (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'a'</span>,<span class="string">'b'</span>)</span><br><span class="line">tup2*<span class="number">3</span></span><br><span class="line">Out: (<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>)</span><br></pre></td></tr></table></figure><ul><li><p><strong>索引和切片</strong><br><code>tup[index]</code><br><code>tup[start:stop:step]</code></p></li><li><p><strong>方法</strong><br><code>tup.count(value)</code>  统计元组中某元素的个数<br><code>tup.index(value)</code> 元素第一次出现的索引位置</p></li></ul><h2 id="list-列表"><a class="markdownIt-Anchor" href="#list-列表"></a> list (列表)</h2><ul><li><strong>创建list</strong><br><code>a = [2, 3,7, None]</code><br><code>a=list(obj)</code><br><code>a=[]</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In: list(<span class="string">'abcd'</span>)  </span><br><span class="line">Out: [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>]</span><br></pre></td></tr></table></figure><ul><li><p><strong>列表数学运算</strong><br>同元组</p></li><li><p><strong>索引和切片</strong><br><code>a[index]</code><br><code>a[start:stop:step]</code><br><code>a[::-1]</code> 倒叙切片</p></li></ul><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td><code>a.count(value)</code></td><td>统计列表中某元素的个数</td></tr><tr><td><code>a.index(value)</code></td><td>元素第一次出现的索引位置</td></tr><tr><td>a.append(obj)</td><td>向列表尾部追加一个新元素，只占一个索引位</td></tr><tr><td>a.extend(iterator)</td><td>向列表尾部追加多个元素，将迭代器中的每个元素都追加进来</td></tr><tr><td>a.insert(index,obj)</td><td>指定位置插入元素</td></tr><tr><td>a.pop(index)</td><td>删除并返回指定位置元素</td></tr><tr><td>a.clear()</td><td>清空列表</td></tr><tr><td>a.remove(obj)</td><td>寻找第一个值并除去</td></tr><tr><td>a.copy()</td><td>列表浅复制</td></tr><tr><td>a.reverse()</td><td>反转列表</td></tr><tr><td>a.sort(reverse=False)</td><td>将list中的元素升序排列</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">a.append([<span class="number">3</span>,<span class="number">4</span>]) <span class="comment"># [1,2,[3,4]]</span></span><br><span class="line">a.append([<span class="string">'a'</span>,<span class="string">'b'</span>]) <span class="comment"># [1,2,[3,4],'a','b']</span></span><br></pre></td></tr></table></figure><h2 id="dict-字典"><a class="markdownIt-Anchor" href="#dict-字典"></a> dict (字典)</h2><p>字典的值可以是任意Python对象，而键通常是不可变的标量类型（整数、浮点型、字符串）或元组（元组中的对象必须是不可变的），这被称为“可哈希性”。</p><p><strong>创建dict</strong>（哈希映射或关联数组）</p><p><code>d={'key1':value1,'key2':value2, ...}</code> 由key-value对创建<br><code>d=dict(obj)</code><br><code>d=dict.fromkeys(seq, value=None)</code> 由key value序列创建<br><code>d=dict(zip(key_list,value_list))</code> <strong>zip函数创建</strong>（key-value)元组迭代器<br><code>d=dict(d1,**d2)</code> 合并字典d1和d2<br><code>d={}</code></p><p><code>d['key']</code> 访问dict元素<br><code>d['new_key']='new_value'</code> 添加新key-value对<br><code>'key' in dict</code> 是否包含键值’key’</p><p><code>del d['key']</code>  删除元素<br><code>del d</code> 删除字典</p><table><thead><tr><th>方法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td>d.copy()</td><td style="text-align:left">浅复制</td></tr><tr><td>d.pop(key,default=None)</td><td style="text-align:left">删除并返回对应value<br><code>ret = dict.pop('a')</code></td></tr><tr><td>d.popitem()</td><td style="text-align:left">随机返回并删除字典中的一对键和值(一般删除末尾对)</td></tr><tr><td>d.clear()</td><td style="text-align:left">删除所有元素</td></tr><tr><td>d.update(dict2)</td><td style="text-align:left">将dict2中元素融入dict</td></tr><tr><td>d.keys()</td><td style="text-align:left">返回keys迭代器</td></tr><tr><td>d.values()</td><td style="text-align:left">返回values迭代器</td></tr><tr><td>d.items()</td><td style="text-align:left">返回dict中所有的(key,val)元祖数组</td></tr><tr><td>d.get(key,default=None)</td><td style="text-align:left">如果key存在，返回value，否则返回default</td></tr><tr><td>d.setdefault(key, default=None)</td><td style="text-align:left">如果key存在，返回value，则插入 key 及设置的默认值 default，并返回 default</td></tr></tbody></table><h2 id="set-集合"><a class="markdownIt-Anchor" href="#set-集合"></a> set (集合)</h2><p>集合是无序的不可重复的元素的集合。<br><code>{1,2,3} == {3,2,1} #返回TRUE</code></p><p><strong>创建set</strong><br><code>a = {1, 2, 3, 4, 5}</code><br><code>a = set(obj)</code><br><code>a = set()</code> 空集合，<code>{}</code>只能用来创建空字典</p><table><thead><tr><th>方法</th><th>说明</th><th>替代语法</th></tr></thead><tbody><tr><td>a.add(value)</td><td>将value添加到a</td><td></td></tr><tr><td>a.remove(value)</td><td>寻找第一个值并除去，不存在会报错</td><td></td></tr><tr><td>a.discard(value)</td><td>删除集合中指定的元素，不会报错</td><td></td></tr><tr><td>d.copy()</td><td>浅复制</td><td></td></tr><tr><td>a.pop(index)</td><td>删除并返回指定位置元素</td><td></td></tr><tr><td>a.clear()</td><td>清空a</td><td></td></tr><tr><td>a.update(b)</td><td>将b中元素融入a</td><td><code>a\=b</code></td></tr><tr><td>a.union(b)</td><td>a和b的不重复元素</td><td><code>a\b</code></td></tr><tr><td>a.intersection(b</td><td>交集</td><td><code>a&amp;b</code></td></tr><tr><td>a.difference(b)</td><td>差集（存在于a，不存在于b）</td><td><code>a-b</code></td></tr><tr><td>a.issubset(b)</td><td>if a∈b return True</td><td></td></tr><tr><td>a.issuperset(b)</td><td>if b∈a return True</td><td></td></tr><tr><td>a.isdisjoint(b)</td><td>if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>∩</mo><mi>b</mi><mo>=</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">a∩b=\emptyset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">∅</span></span></span></span>(交集)  return True</td><td></td></tr></tbody></table><h2 id="列表-集合和字典推导式"><a class="markdownIt-Anchor" href="#列表-集合和字典推导式"></a> 列表、集合和字典推导式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">list_comp=[expr <span class="keyword">for</span> val <span class="keyword">in</span> collection <span class="keyword">if</span> condition]  </span><br><span class="line">set_comp = &#123;expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125;  </span><br><span class="line">dict_comp = &#123;key-expr :value-expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment"># list推导式等价for循环</span></span><br><span class="line"> list_comp = []</span><br><span class="line"> <span class="keyword">for</span> val <span class="keyword">in</span> collection:  </span><br><span class="line">   <span class="keyword">if</span> condition: </span><br><span class="line">     list_comp.append(expr)</span><br></pre></td></tr></table></figure><h2 id="iterator迭代器-and-generator生成器"><a class="markdownIt-Anchor" href="#iterator迭代器-and-generator生成器"></a> iterator(迭代器) and generator(生成器)</h2><ul><li>迭代器<br><code>iterator = iter(obj)</code><br><code>range(start=0,end,step=1)</code>  返回一个迭代器，它产生一个均匀分布的整数序列 <code>[start,end) by step</code><br>序列对象（tuple, dict, …）都可以作为迭代器使用<br><code>next(iterator)</code>  （迭代函数）下一个</li><li>生成器<br>在 Python 中，使用了 yield 的函数被称为生成器（generator），生成器是一个返回迭代器的函数，只能用于迭代操作</li><li><a href="https://www.cnblogs.com/fengshuihuan/p/7105545.html" target="_blank" rel="noopener">Python itertools模块详解</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 排列，组合，笛卡儿积：</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations,permutations,product,combinations_with_replacement</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自建迭代器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squares</span><span class="params">(n=<span class="number">10</span>)</span>:</span>  </span><br><span class="line">  print(<span class="string">'Generating squares from1 to &#123;0&#125;'</span>.format(n ** <span class="number">2</span>))  </span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>): </span><br><span class="line">    <span class="keyword">yield</span> i ** <span class="number">2</span>  <span class="comment">#将return替换为yield即可返回迭代器</span></span><br><span class="line">gen = squares() </span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> gen: </span><br><span class="line">  print(x, end=<span class="string">' '</span>)</span><br></pre></td></tr></table></figure><h1 id="if-语句"><a class="markdownIt-Anchor" href="#if-语句"></a> if 语句</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression:</span><br><span class="line">  statements </span><br><span class="line"><span class="keyword">elif</span> expression: </span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><p>if 语句变体：<code>value=[false-expr,true-expr][condition]</code>（利用list索引判断）<br>三元表达式：<code>value=true-expr if condition else false-expr</code></p><h1 id="循环语句"><a class="markdownIt-Anchor" href="#循环语句"></a> 循环语句</h1><h2 id="for循环"><a class="markdownIt-Anchor" href="#for循环"></a> for循环</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> collection:</span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><h2 id="while循环"><a class="markdownIt-Anchor" href="#while循环"></a> while循环</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> expression:</span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><h2 id="关键字"><a class="markdownIt-Anchor" href="#关键字"></a> 关键字</h2><p><code>pass</code>: 占位<br><code>break</code>: 跳出循环<br><code>coutine</code>:  跳出本次循环</p><h2 id="python中switchcase实现"><a class="markdownIt-Anchor" href="#python中switchcase实现"></a> python中Switch/Case实现</h2><ul><li><code>if...elif...else</code> 实现</li><li>字典映射</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_1</span><span class="params">(...)</span>:</span></span><br><span class="line">    statements</span><br><span class="line"><span class="meta">... </span>...</span><br><span class="line"></span><br><span class="line">functions = &#123;<span class="string">'a'</span>: function_1,</span><br><span class="line">             <span class="string">'b'</span>: function_2,</span><br><span class="line">             <span class="string">'c'</span>: self.method_1, ...&#125;</span><br><span class="line"></span><br><span class="line">func = functions[value]</span><br><span class="line">func()</span><br></pre></td></tr></table></figure><ul><li>example</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">switch=&#123;</span><br><span class="line">        <span class="string">'a'</span>: <span class="number">1</span>，</span><br><span class="line">        <span class="string">'b'</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">'c'</span>: <span class="number">3</span>,</span><br><span class="line">       &#125;</span><br><span class="line">result = switch.get(<span class="string">'key'</span>,<span class="string">'default_value'</span>) <span class="comment"># 找不到'key'，返回默认值</span></span><br></pre></td></tr></table></figure><h1 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h1><h2 id="内建函数"><a class="markdownIt-Anchor" href="#内建函数"></a> 内建函数</h2><table><thead><tr><th style="text-align:left"><strong>输入输出</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">input(prompt)</td><td style="text-align:left">输入</td></tr><tr><td style="text-align:left">print(values,sep=’ ‘,end=’\n’)</td><td style="text-align:left">输出</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>数学函数</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">round(x,n)</td><td style="text-align:left">四舍五入</td></tr><tr><td style="text-align:left">abs(x)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">len(obj)</td><td style="text-align:left">序列元素数</td></tr><tr><td style="text-align:left">max(obj)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">min(obj)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pow()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">divmod(a,b)</td><td style="text-align:left">返回元组(a // b, a % b)</td></tr><tr><td style="text-align:left">hex(x)</td><td style="text-align:left">10进制转16进制，以字符表示（0x开头的格式，如0x10）</td></tr><tr><td style="text-align:left">int(x, base=10)</td><td style="text-align:left">用于将一个字符串或数字转换为整型，默认十进制</td></tr><tr><td style="text-align:left">oct(x)</td><td style="text-align:left">将一个整数转换成8进制字符串</td></tr><tr><td style="text-align:left">bin(x)</td><td style="text-align:left">返回一个整数 int 或者长整数 long int 的二进制表示</td></tr><tr><td style="text-align:left">complex(real, imag)</td><td style="text-align:left">返回复数</td></tr><tr><td style="text-align:left">hash(object)</td><td style="text-align:left">获取哈希值</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>面向对象</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">type(obj)</td><td style="text-align:left">输出对象类型</td></tr><tr><td style="text-align:left">dir(object)</td><td style="text-align:left">输出对象属性和方法</td></tr><tr><td style="text-align:left">isinstance(obj,class_or_tuple)</td><td style="text-align:left">判断对象类型(‘int’, ‘str’,’ list’…)</td></tr><tr><td style="text-align:left">setattr(object, name, value)</td><td style="text-align:left">设置对象属性</td></tr><tr><td style="text-align:left">getattr(object, name[, default])</td><td style="text-align:left">返回一个对象属性值</td></tr><tr><td style="text-align:left">hasattr(object, name)</td><td style="text-align:left">判断对象是否包含对应的属性</td></tr><tr><td style="text-align:left">delattr(object, name)</td><td style="text-align:left">删除属性</td></tr><tr><td style="text-align:left">issubclass(class, classinfo)</td><td style="text-align:left">判断是否子类</td></tr><tr><td style="text-align:left">vars([object])</td><td style="text-align:left">函数返回对象object的属性和属性值的字典对象</td></tr></tbody></table><table><thead><tr><th><strong>字符表达式</strong></th><th>说明</th></tr></thead><tbody><tr><td>eval(expression)</td><td>执行一个字符串表达式，并返回表达式的值<br><code>eval('pow(2,2)')</code></td></tr><tr><td>exec(object)</td><td>执行复杂的表达式，返回None</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">10</span></span><br><span class="line">expr = <span class="string">"""</span></span><br><span class="line"><span class="string">z = 30</span></span><br><span class="line"><span class="string">sum = x + y + z</span></span><br><span class="line"><span class="string">print(sum)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">exec(expr)</span><br></pre></td></tr></table></figure><table><thead><tr><th><strong>内建函数</strong></th><th>说明</th></tr></thead><tbody><tr><td>chr()</td><td>把编码转换为对应的字符</td></tr><tr><td>id([object])</td><td>获取对象内存地址</td></tr><tr><td>iter(object[, sentinel])</td><td>生成迭代器</td></tr><tr><td>all(iterable)</td><td>给定的可迭代对象全部为True，类似于and</td></tr><tr><td>any(iterable)</td><td>给定的可迭代对象任一为True,类似于or</td></tr><tr><td>reversed(seq)</td><td>反转序列，返回迭代器</td></tr><tr><td>callable(object)</td><td>判断对象是否是可调用，对于函数, 方法, lambda 函式, 类, 以及实现了 <code>__call__</code>方法的类实例, 它都返回 True</td></tr></tbody></table><table><thead><tr><th><strong>高阶函数</strong></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td>map(function,obj)</td><td style="text-align:left">对序列中所有元素函数映射</td></tr><tr><td>reduce(function, iterable[, initializer])</td><td style="text-align:left">对参数序列中元素进行累积<br>python3从内置模块移除<code>from functools import reduce</code></td></tr><tr><td>filter(function, iterable)</td><td style="text-align:left">返回一个迭代器</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strings = [<span class="string">'a'</span>,<span class="string">'as'</span>,<span class="string">'bat'</span>,<span class="string">'car'</span>,<span class="string">'dove'</span>,<span class="string">'python'</span>]</span><br><span class="line">set(map(len, strings))</span><br><span class="line">reduce(<span class="keyword">lambda</span> x, y: x+y, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">filter(<span class="keyword">lambda</span> x: x%<span class="number">2</span>==<span class="number">0</span>, range(<span class="number">1</span>, <span class="number">101</span>))</span><br></pre></td></tr></table></figure><h2 id="自定义函数"><a class="markdownIt-Anchor" href="#自定义函数"></a> 自定义函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun_name</span><span class="params">(var1,var2=default,*args,**kwargs)</span>:</span> </span><br><span class="line">  <span class="string">'说明文档'</span></span><br><span class="line">  statements  </span><br><span class="line">  <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><ul><li><p>函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。</p></li><li><p>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</p></li><li><p>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</p></li><li><p>函数内容以冒号起始，并且缩进。</p></li><li><p>return [表达式] 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</p></li><li><p><strong>参数顺序</strong>：必选参数，默认参数，可变参数， 关键字参数<br><code>*args</code>是可变参数，以tuple的形式返回<br><code>**kwargs</code>是关键字参数，以dict的形式返回</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a,*args,**kwargs)</span>:</span> </span><br><span class="line">    print(a)</span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test(<span class="string">'a'</span>,<span class="number">1</span>,<span class="string">'b'</span>,key1=<span class="number">2</span>,key2=<span class="string">'c'</span>)</span><br><span class="line"><span class="string">'a'</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">'b'</span>)</span><br><span class="line">&#123;<span class="string">'key1'</span>:<span class="number">2</span>,<span class="string">'key2'</span>:<span class="string">'c'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span>    <span class="comment"># write Fibonacci series up to n</span></span><br><span class="line"><span class="meta">... </span>    <span class="string">"""Print a Fibonacci series up to n."""</span></span><br><span class="line"><span class="meta">... </span>    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">while</span> a &lt; n:</span><br><span class="line"><span class="meta">... </span>        print(a, end=<span class="string">' '</span>)</span><br><span class="line"><span class="meta">... </span>        a, b = b, a+b</span><br><span class="line"><span class="meta">... </span>    print()</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Now call the function we just defined:</span></span><br><span class="line"><span class="meta">... </span>fib(<span class="number">2000</span>)</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">13</span> <span class="number">21</span> <span class="number">34</span> <span class="number">55</span> <span class="number">89</span> <span class="number">144</span> <span class="number">233</span> <span class="number">377</span> <span class="number">610</span> <span class="number">987</span> <span class="number">1597</span></span><br></pre></td></tr></table></figure><h3 id="函数注解"><a class="markdownIt-Anchor" href="#函数注解"></a> 函数注解</h3><ul><li>我们知道 Python 是一种动态语言，变量以及函数的参数是不区分类型。<br>Python解释器会在运行的时候动态判断变量和参数的类型，这样的好处是编写代码速度很快，很灵活，但是坏处也很明显，不好维护，可能代码写过一段时间重新看就很难理解了，因为那些变量、参数、函数返回值的类型，全都给忘记了。</li><li>所以Python3里有了这个新特性，可以给参数、函数返回值和变量的类型加上注解，不过这个仅仅是注释而已，对代码的运行来说没有任何影响，变量的真正类型还是会有Python解释器来确定，你所做的只是在提高代码的可读性，让 IDE 了解类型，从而提供更准确的代码提示、补全和语法检查，仅此而已。</li><li>注解是以字典形式存储在函数的 <code>__annotations__</code>属性中，对函数的其它部分没有任何影响。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x:int, y:int)</span> -&gt; int:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x+y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(ham: <span class="number">42</span>, eggs: int = <span class="string">'spam'</span>)</span> -&gt; "Nothing to see here":</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"Annotations:"</span>, f.__annotations__)</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"Arguments:"</span>, ham, eggs)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="string">'wonderful'</span>)</span><br><span class="line">Annotations: &#123;'eggs': &lt;class 'int'&gt;, 'return': 'Nothing to see here', 'ham': 42&#125;</span><br><span class="line">Arguments: wonderful spam</span><br></pre></td></tr></table></figure><h3 id="匿名lambda函数"><a class="markdownIt-Anchor" href="#匿名lambda函数"></a> 匿名（lambda）函数</h3><p><code>lambda vars:expr</code> 不用写return，返回值就是该表达式的结果<br><code>lambda x,y:x**y</code></p><h3 id="变量的作用域"><a class="markdownIt-Anchor" href="#变量的作用域"></a> 变量的作用域</h3><p>Python的作用域一共有4种，分别是：</p><p>L （Local） 局部作用域<br>E （Enclosing） 闭包函数外的函数中<br>G （Global） 全局作用域<br>B （Built-in） 内建作用域<br>以 L –&gt; E –&gt; G –&gt;B 的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = int(<span class="number">2.9</span>)  <span class="comment"># 内建作用域</span></span><br><span class="line"> </span><br><span class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></span><br></pre></td></tr></table></figure><p>Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域，其它的代码块（如 if/elif/else/、try/except、for/while等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问</p><h3 id="global-和-nonlocal关键字"><a class="markdownIt-Anchor" href="#global-和-nonlocal关键字"></a> global 和 nonlocal关键字</h3><p>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    num2 = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># global关键字声明</span></span><br><span class="line">        <span class="keyword">nonlocal</span> num2   <span class="comment"># nonlocal关键字声明</span></span><br><span class="line">        print(num+num2)</span><br></pre></td></tr></table></figure><h2 id="序列函数"><a class="markdownIt-Anchor" href="#序列函数"></a> 序列函数</h2><ul><li><strong><code>enumerate</code>函数</strong>，可以返回<code>(i, value)</code>元组序列，常用于loop：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i, value in enumerate(collection): </span><br><span class="line">  #do something with value</span><br></pre></td></tr></table></figure><ul><li><p><strong>sorted函数</strong><br><code>sorted(list)</code> 返回排序好的list副本<br><code>sorted(str)</code>  拆分str，返回排序好的list副本</p></li><li><p><strong>zip函数</strong><br><code>zip(seq1,seq2)</code> 可以将多个列表、元组或其它序列成对组合成一个元组对<br>zip可以处理任意多的序列，元素的个数取决于最短的序列<br><code>zip(*tup)</code>逆转用法</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">89</span>]: seq1 = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>] </span><br><span class="line">In [<span class="number">90</span>]: seq2 = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]</span><br><span class="line">In [<span class="number">92</span>]: list(zip(seq1, seq2)) </span><br><span class="line">Out[<span class="number">92</span>]: [(<span class="string">'foo'</span>, <span class="string">'one'</span>), (<span class="string">'bar'</span>, <span class="string">'two'</span>), (<span class="string">'baz'</span>, <span class="string">'three'</span>)]</span><br><span class="line"></span><br><span class="line">In [<span class="number">95</span>]: <span class="keyword">for</span> i, (a, b) <span class="keyword">in</span> enumerate(zip(seq1, seq2)):</span><br><span class="line">   ....:     print(<span class="string">'&#123;0&#125;: &#123;1&#125;, &#123;2&#125;'</span>.format(i, a, b))</span><br><span class="line">   ....:</span><br><span class="line"><span class="number">0</span>: foo, one</span><br><span class="line"><span class="number">1</span>: bar, two</span><br><span class="line"><span class="number">2</span>: baz, three</span><br></pre></td></tr></table></figure><ul><li><strong>排列组合</strong></li></ul><p><code>from itertools import product,permutations,combinations</code></p><blockquote><p>参考链接：<a href="https://blog.csdn.net/specter11235/article/details/71189486" target="_blank" rel="noopener">https://blog.csdn.net/specter11235/article/details/71189486</a></p></blockquote><h1 id="闭包"><a class="markdownIt-Anchor" href="#闭包"></a> 闭包</h1><blockquote><p>参考链接：<a href="https://mp.weixin.qq.com/s/I9WIkm4ounSQSK5zpOv5eg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/I9WIkm4ounSQSK5zpOv5eg</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_msg</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># print_msg 是外围函数</span></span><br><span class="line">    msg = <span class="string">"I'm python"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printer</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># printer 是嵌套函数</span></span><br><span class="line">        print(msg)</span><br><span class="line">    <span class="keyword">return</span> printer</span><br><span class="line"></span><br><span class="line">another = print_msg()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 I'm python</span></span><br><span class="line">another()</span><br></pre></td></tr></table></figure><p>一般情况下，函数中的局部变量仅在函数的执行期间可用，一旦 print_msg() 执行过后，我们会认为 msg变量将不再可用。然而，在这里我们发现 print_msg 执行完之后，在调用 another 的时候 msg 变量的值正常输出了，这就是闭包的作用，闭包使得局部变量在函数外被访问成为可能。</p><p>看完这个例子，我们再来定义闭包，维基百科上的解释是:</p><blockquote><p>在计算机科学中，闭包（Closure）是词法闭包（Lexical Closure）的简称，是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。所以，有另一种说法认为闭包是由函数和与其相关的引用环境组合而成的实体。</p></blockquote><p>这里的 another 就是一个闭包，闭包本质上是一个函数，它由两部分组成，printer 函数和变量 msg。闭包使得这些变量的值始终保存在内存中。</p><p><strong>示例：</strong><br>闭包常用于解偏微分方程，如下例：求解陨石运动轨迹</p><p>运动半径：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>=</mo><msqrt><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>z</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">r=\sqrt{x^2+y^2+z^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.2821659999999999em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578340000000001em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.917834em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2821659999999999em;"><span></span></span></span></span></span></span></span></span><br>单位向量：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>r</mi><mo>^</mo></mover><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mover accent="true"><mi>r</mi><mo>⃗</mo></mover><mi>r</mi></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\hat{r}=\cfrac{\vec{r}}{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">^</span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.276em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.17994em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span></span></span></span></span></span><br>加速度：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>d</mi><mover accent="true"><mi>v</mi><mo>⃗</mo></mover></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mstyle><mo>=</mo><mo>−</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>G</mi><mi>M</mi></mrow><msup><mi>r</mi><mn>2</mn></msup></mfrac></mstyle><mo>⋅</mo><mover accent="true"><mi>r</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\cfrac{d\vec{v}}{dt}=-\cfrac{GM}{r^2}\cdot\hat{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.276em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.20772em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.276em;vertical-align:-0.686em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">^</span></span></span></span></span></span></span></span></span><br>速度：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>v</mi><mo>⃗</mo></mover><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>d</mi><mover accent="true"><mi>r</mi><mo>⃗</mo></mover></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\vec{v}=\cfrac{d\vec{r}}{dt}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.714em;vertical-align:0em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.20772em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.276em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5899999999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.17994em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span></span></span></span></span></span><br>使用 <code>scipy</code> 包求解坐标 <code>(x,y,z)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.integrate <span class="keyword">import</span> solve_ivp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gravity</span><span class="params">(GM=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="string">'''             </span></span><br><span class="line"><span class="string">    dr/dt=v</span></span><br><span class="line"><span class="string">    r_norm=sqrt(x^2+y^2+z^2)</span></span><br><span class="line"><span class="string">    dv/dt=-GM/dot(r,r)*r/r_norm</span></span><br><span class="line"><span class="string">    '''</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">force</span><span class="params">(t,X_and_V)</span>:</span></span><br><span class="line">        <span class="string">'GM loading...'</span></span><br><span class="line">        x,y,z,vx,vy,vz=X_and_V</span><br><span class="line">        r=np.array([x,y,z])</span><br><span class="line">        v=np.array([vx,vy,vz])</span><br><span class="line">        dr=v</span><br><span class="line">        r_norm=np.linalg.norm(r)</span><br><span class="line">        dv=-GM/np.dot(r,r)*r/r_norm</span><br><span class="line">        <span class="keyword">return</span> np.concatenate([dr,dv])</span><br><span class="line">    <span class="keyword">return</span> force</span><br><span class="line"></span><br><span class="line">r0=(<span class="number">20</span>,<span class="number">30</span>,<span class="number">0</span>)</span><br><span class="line">v0=(<span class="number">0.8</span>,<span class="number">0.5</span>,<span class="number">0</span>)</span><br><span class="line">t0,t1=<span class="number">0</span>,<span class="number">100</span></span><br><span class="line"></span><br><span class="line">F=gravity(GM=<span class="number">1000</span>)</span><br><span class="line">motion=solve_ivp(fun=F,t_span=(t0,t1),y0=r0+v0, t_eval=np.linspace(t0,t1,<span class="number">1001</span>))</span><br><span class="line"></span><br><span class="line">plt.plot(motion.y[<span class="number">0</span>,:],motion.y[<span class="number">1</span>,:])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img alt="move" data-src="/images/move.png"></p><h1 id="装饰器"><a class="markdownIt-Anchor" href="#装饰器"></a> 装饰器</h1><p>装饰器实际上是在不改变原程序的情况下，给某程序增添功能，避免大量雷同代码。</p><blockquote><p>菜鸟教程（包括带参数的装饰器和装饰器类等）<br><a href="http://www.runoob.com/w3cnote/python-func-decorators.html" target="_blank" rel="noopener">http://www.runoob.com/w3cnote/python-func-decorators.html</a><br>参考文档：<a href="http://lib.csdn.net/article/python/62942" target="_blank" rel="noopener">http://lib.csdn.net/article/python/62942</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_name</span><span class="params">(f)</span>:</span></span><br><span class="line"><span class="meta">    @wraps(f)  #加载wraps是为了原函数的名字和注释文档不被重写(docstring)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorated</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">    print(<span class="string">'I am do something'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Function will not run"</span></span><br><span class="line">        <span class="keyword">return</span> f(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> decorated</span><br><span class="line"> </span><br><span class="line"><span class="meta">@decorator_name</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span>(<span class="string">"Function is running"</span>)</span><br></pre></td></tr></table></figure><h1 id="错误和异常处理"><a class="markdownIt-Anchor" href="#错误和异常处理"></a> 错误和异常处理</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>: </span><br><span class="line">  statements </span><br><span class="line"><span class="keyword">except</span> &lt;Error(可选)&gt;:  <span class="comment">#try失败时执行，可以指定特定的Error或者Error元祖，例如(TypeError,ValueError)</span></span><br><span class="line">  statements </span><br><span class="line"><span class="keyword">else</span>:       <span class="comment">#try成功时执行</span></span><br><span class="line">  statements </span><br><span class="line"><span class="keyword">finally</span>:    <span class="comment">#始终执行</span></span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><h1 id="模块"><a class="markdownIt-Anchor" href="#模块"></a> 模块</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> some_module <span class="comment">#导入整个模块 </span></span><br><span class="line"><span class="keyword">from</span> some_module <span class="keyword">import</span> func1,func2  <span class="comment">#从某个模块中导入多个函数 </span></span><br><span class="line"><span class="keyword">from</span> some_module <span class="keyword">import</span> *  <span class="comment">#将某个模块中的全部函数导入</span></span><br><span class="line">dir(some_module) <span class="comment">#列出模块里的函数</span></span><br></pre></td></tr></table></figure><p>参考链接：<br><a href="https://blog.csdn.net/lxy4239/article/details/79107008" target="_blank" rel="noopener">python自定义包</a><br><a href="http://www.pythondoc.com/pythontutorial3/modules.html" target="_blank" rel="noopener">python模块官方文档</a><br><a href="http://www.runoob.com/python3/python3-module.html" target="_blank" rel="noopener">Python3 教程 | 菜鸟教程</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基础 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(NLP)--jiebaR</title>
      <link href="/posts/R/RNotebook(NLP)--jiebaR.html"/>
      <url>/posts/R/RNotebook(NLP)--jiebaR.html</url>
      
        <content type="html"><![CDATA[<p>R语言词云和中文词典包。</p><a id="more"></a><h1 id="jiebar-for-chinese-text-segmentation"><a class="markdownIt-Anchor" href="#jiebar-for-chinese-text-segmentation"></a> jiebaR: for Chinese text segmentation</h1><p><a href="https://qinwenfeng.com/jiebaR/" target="_blank" rel="noopener">jiebaR中文官网</a></p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(jiebaR)</span><br><span class="line">cutter = worker()   <span class="comment">#新建分词器</span></span><br><span class="line">segment( <span class="string">"This is a good day!"</span> , cutter )  <span class="comment">#分词</span></span><br><span class="line"><span class="comment">## [1] "This" "is"   "a"    "good" "day"</span></span><br></pre></td></tr></table></figure><h2 id="worker初始化分词器"><a class="markdownIt-Anchor" href="#worker初始化分词器"></a> <code>worker()</code>：初始化分词器</h2><p><strong>1. worker函数</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">worker(type = <span class="string">"mix"</span>,    <span class="comment">#type指定返回词的结果类型</span></span><br><span class="line"> dict = DICTPATH,       <span class="comment">#dict系统词典路径</span></span><br><span class="line"> hmm = HMMPATH,</span><br><span class="line"> user = USERPATH,       <span class="comment">#user用户词典</span></span><br><span class="line"> idf = IDFPATH,         <span class="comment">#IDF词典，关键词提取使用</span></span><br><span class="line"> stop_word = STOPPATH,  <span class="comment">#stop_word停止词库，默认空值</span></span><br><span class="line"> qmax = <span class="number">20</span>, </span><br><span class="line"> topn = <span class="number">5</span>,              <span class="comment">#topn关键词数</span></span><br><span class="line"> encoding = <span class="string">"UTF-8"</span>,    <span class="comment">#输入文件编码</span></span><br><span class="line"> detect = <span class="literal">T</span>, </span><br><span class="line"> symbol = <span class="literal">F</span>,            <span class="comment">#是否保留符号</span></span><br><span class="line"> lines = <span class="number">1e+05</span>,         <span class="comment">#每次读取文件的最大行数，对于大文件，实现分次读取。</span></span><br><span class="line"> write = <span class="literal">T</span>,            <span class="comment">#是否将分词结果写入文件</span></span><br><span class="line"> output = <span class="literal">NULL</span>,         <span class="comment">#输出路径</span></span><br><span class="line"> bylines = <span class="literal">F</span>))          <span class="comment">#按行输出</span></span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li><strong>type</strong>：指定分词引擎<br>mp（最大概率模型）- 基于词典和词频<br>hmm（HMM模型）- 基于 HMM 模型，可以发现词典中没有的词<br>mix（混合模型）- 先用 mp 分，mp 分完调用 hmm 再来把剩余的可能成词的单字分出来。<br>query（索引模型）- mix 基础上，对大于一定长度的词再进行一次切分。<br><strong>tag</strong>（标记模型）- 词性标记，基于词典的<br><strong>keywords</strong>（关键词模型）- tf-idf 抽关键词<br><strong>simhash</strong>（Simhash 模型） - 在关键词的基础上计算 simhash</li><li><strong>user</strong>：用户词典路径<br>1.用户词典，包括词、词性标记两列。用户词典中的所有词的词频均为系统词典中的最大词频 (默认，可以通过 user_weight 参数修改)。<br>2.可以下载使用搜狗细胞词库，<code>user=cidian::load_user_dict(filePath=&quot;词库路径&quot;)</code></li><li><strong>user_weight</strong>：用户词典中的词的词频<br>{“max”, “min”, “median”}，默认为 “max”，系统词典中的最大值。</li><li><strong>idf</strong>：IDF词典，关键词提取时用</li><li><strong>stop_word</strong>：关键词提取使用的停止词库。分词时也可以使用，但是分词时使用的对应路径不能为默认的 jiebaR::STOPPATH。</li></ul><p><strong>2. 更新分词器</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cutter=worker() <span class="comment">#初始化分词器</span></span><br><span class="line">cutter$bylines=<span class="literal">TRUE</span> <span class="comment">#分行输出（接收向量分词后，分解到list中输出）</span></span><br><span class="line">cutter$symbol = <span class="literal">FALSE</span> <span class="comment">#重设为不保留符号</span></span><br></pre></td></tr></table></figure><p><strong>3. 添加新词到已存在的分词器中</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_user_word(worker, words, tags = rep(<span class="string">"n"</span>, length(words)))</span><br></pre></td></tr></table></figure><h2 id="segment分词"><a class="markdownIt-Anchor" href="#segment分词"></a> <code>segment()</code>：分词</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">segment(code, jiebar, mod = <span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure><p><strong>参数：</strong></p><ul><li>code：中文文档</li><li>jiebar：分词器</li><li>mod：指定返回分词的结果类型(mp/hmm/mix/query)</li></ul><h2 id="标记"><a class="markdownIt-Anchor" href="#标记"></a> 标记</h2><p><code>tagging(code, jiebar)</code>分词+标记<br><code>vector_tag(string, jiebar)</code>对已经分好的词进行标记</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">words = <span class="string">"我爱北京天安门"</span></span><br><span class="line">cutter = worker()</span><br><span class="line">result = segment(words, cutter)</span><br><span class="line"></span><br><span class="line">tagger = worker(<span class="string">"tag"</span>) <span class="comment">#标记器</span></span><br><span class="line">vector_tag(result, tagger)  <span class="comment">#对分好的词进行标记</span></span><br><span class="line"><span class="comment">#&gt;        r        v       ns       ns </span></span><br><span class="line"><span class="comment">#&gt;     "我"     "爱"   "北京" "天安门"</span></span><br></pre></td></tr></table></figure><h2 id="关键词提取基于系统词典词频"><a class="markdownIt-Anchor" href="#关键词提取基于系统词典词频"></a> 关键词提取：基于系统词典词频</h2><p><code>keywords(code, jiebar)</code>提取关键词<br><code>vector_keywords(segment, jiebar)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">key = worker(<span class="string">"keywords"</span>, topn = <span class="number">1</span>)</span><br><span class="line">keywords(<span class="string">"我爱北京天安门"</span>, key)</span><br><span class="line"><span class="comment">#&gt;   8.9954 </span></span><br><span class="line"><span class="comment">#&gt; "天安门"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对已经分好词的文本提取关键词</span></span><br><span class="line">cutter = worker()</span><br><span class="line">result = segment(<span class="string">"我爱北京天安门"</span>, cutter)</span><br><span class="line">vector_keywords(result, key)</span><br><span class="line"><span class="comment">#&gt;   8.9954 </span></span><br><span class="line"><span class="comment">#&gt; "天安门"</span></span><br></pre></td></tr></table></figure><h2 id="simhash-与距离"><a class="markdownIt-Anchor" href="#simhash-与距离"></a> Simhash 与距离</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">simhasher = worker(<span class="string">"simhash"</span>, topn=<span class="number">2</span>)</span><br><span class="line">simhash(<span class="string">"江州市长江大桥参加了长江大桥的通车仪式"</span>,  simhasher)</span><br><span class="line">distance(<span class="string">"hello world!"</span>, <span class="string">"江州市长江大桥参加了长江大桥的通车仪式"</span>,  simhasher) <span class="comment">#分词+计算距离</span></span><br><span class="line"></span><br><span class="line">vector_simhash(c(<span class="string">"今天"</span>,<span class="string">"天气"</span>,<span class="string">"真的"</span>,<span class="string">"十分"</span>,<span class="string">"不错"</span>,<span class="string">"的"</span>,<span class="string">"感觉"</span>), simhasher)</span><br><span class="line">vector_distance(c(<span class="string">"今天"</span>,<span class="string">"天气"</span>,<span class="string">"真的"</span>,<span class="string">"十分"</span>,<span class="string">"不错"</span>,<span class="string">"的"</span>,<span class="string">"感觉"</span>),</span><br><span class="line">  c(<span class="string">"今天"</span>,<span class="string">"天气"</span>,<span class="string">"真的"</span>,<span class="string">"十分"</span>,<span class="string">"不错"</span>,<span class="string">"的"</span>,<span class="string">"感觉"</span>), simhasher) <span class="comment">#计算距离</span></span><br></pre></td></tr></table></figure><h2 id="词频统计"><a class="markdownIt-Anchor" href="#词频统计"></a> 词频统计</h2><p><code>freq(x)</code>x为分词后的结果</p><h1 id="cidian-tools-for-chinese-text-segmentation-dictionaries"><a class="markdownIt-Anchor" href="#cidian-tools-for-chinese-text-segmentation-dictionaries"></a> cidian: Tools for Chinese Text Segmentation Dictionaries</h1><p>用来转换搜狗细胞词库<br>Windows 安装 RTools，设置好对应的环境变量</p><ul><li><strong>安装</strong></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(devtools)</span><br><span class="line">install_github(<span class="string">"qinwf/cidian"</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>使用</strong></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decode_scel(scel = <span class="string">"细胞词库路径"</span>,output = <span class="string">"输出文件路径"</span>)</span><br></pre></td></tr></table></figure><ul><li><strong>读取词典和编辑词典文件</strong></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">load_user_dict(filePath = <span class="string">"用户词典路径"</span>, default_tag = <span class="string">"默认标记"</span>)<span class="comment">## 读取用户词典</span></span><br><span class="line">load_sys_dict(filePath = <span class="string">"系统词典路径"</span>)<span class="comment">## 读取系统词典</span></span><br><span class="line"></span><br><span class="line">add_user_words(dict = <span class="string">"load_user_dict 读取的词典"</span>, words = <span class="string">"UTF-8 编码文本向量"</span>, tags = <span class="string">"标记"</span>)<span class="comment">## 增加用户词典词</span></span><br><span class="line">add_sys_words(dict = <span class="string">"load_sys_dict 读取的词典"</span>, words = <span class="string">"UTF-8 编码文本向量"</span>, freq = <span class="string">"词频"</span>, tags = <span class="string">"标记"</span>)<span class="comment">## 增加系统词典词</span></span><br><span class="line"></span><br><span class="line">remove_words(dict = <span class="string">"load_user_dict 或 load_sys_dict 读取的词典"</span>, words = <span class="string">"UTF-8 编码文本向量"</span>)<span class="comment">## 删除词典词</span></span><br><span class="line">write_dict(dict = <span class="string">"load_user_dict 或 load_sys_dict 读取的词典"</span>, output = <span class="string">"输出路径"</span>)<span class="comment">## 写入</span></span><br><span class="line"></span><br><span class="line">(userd = load_user_dict(jiebaR::USERPATH))</span><br><span class="line">userd = add_user_words(userd, enc2utf8(<span class="string">"测试"</span>), <span class="string">"v"</span>)</span><br><span class="line">write_dict(userd, jiebaR::USERPATH)</span><br><span class="line"></span><br><span class="line">(userd = load_user_dict(jiebaR::USERPATH))</span><br><span class="line">userd = remove_words(userd, enc2utf8(c(<span class="string">"测试"</span>,<span class="string">"蓝翔"</span>)))</span><br><span class="line">write_dict(userd, jiebaR::USERPATH)</span><br><span class="line">(userd = load_user_dict(jiebaR::USERPATH))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> NLP </tag>
            
            <tag> 分词 </tag>
            
            <tag> jiebaR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Time Series)--forecast and prophet</title>
      <link href="/posts/R/RNotebook(Time-Series)--forecast-and-prophet.html"/>
      <url>/posts/R/RNotebook(Time-Series)--forecast-and-prophet.html</url>
      
        <content type="html"><![CDATA[<p>时间序列分析(Time-Series Analysis)是指将原来的数据分解为四部分来看——趋势、周期、时期和不稳定因素， 然后综合这些因素， 提出预测。</p><a id="more"></a><h1 id="forecast-for-time-series-and-linear-models"><a class="markdownIt-Anchor" href="#forecast-for-time-series-and-linear-models"></a> forecast : for Time Series and Linear Models</h1><h2 id="时间序列分析"><a class="markdownIt-Anchor" href="#时间序列分析"></a> 时间序列分析</h2><p><code>tsclean(x, replace.missing = TRUE, lambda = NULL)</code>识别和替换异常值和缺失值（lambda给出Box-Cox变换参数的数值）<br><code>ndiffs, nsdiffs</code>固定系列所需的差异数<br><code>seasonal(object)</code>提取季节分量<br><code>trendcycle(object)</code>提取趋势周期分量<br><code>remainder(object)</code>提取余数分量<br><code>findfrequency</code>查找时间序列的主频<br><code>ma(x, order, centre = TRUE)</code>计算更平滑的移动平均</p><h2 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h2><p><code>arfima</code>: FitARFIMAmodel<br><code>Arima, auto.arima</code> : FitARIMAmodel<br><code>ets(y,model=”ZZZ”)</code>指数预测模型<br><code>baggedETS, bats, tbats</code>: FitbaggedETS/BATS/TBATSmodel<br><code>nnetar</code>神经网络时间序列预测</p><p><strong>forecastHybrid</strong>: 组合模型</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hybridModel(y, models = <span class="string">"aefnst"</span>,                         <span class="comment">#模型组a(auto.arima),e(ets),f(thetam),n(nnetar),s(stlm),t(tbats)</span></span><br><span class="line">  weights = c(<span class="string">"equal"</span>, <span class="string">"insample.errors"</span>, <span class="string">"cv.errors"</span>),    <span class="comment">#模型加权方法</span></span><br><span class="line">  parallel = <span class="literal">FALSE</span>,                                        <span class="comment">#是否并行运算</span></span><br><span class="line">  num.cores = <span class="number">2L</span>)                                          <span class="comment">#并行内核数</span></span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example: </span><br><span class="line">hybridModel(wineind, models = <span class="string">"aet"</span>, weights = <span class="string">"equal"</span>)%&gt;%</span><br><span class="line">  forecast(hm1, h = <span class="number">48</span>)%&gt;%plot()</span><br></pre></td></tr></table></figure><h2 id="预测"><a class="markdownIt-Anchor" href="#预测"></a> 预测</h2><p><code>forecast(object, h = ifelse(frequency(object) &gt; 1, 2*frequency(object), 10),level=c(80,95))</code></p><blockquote><p>参数：<br>h：预测数<br>level：置信区间</p></blockquote><h2 id="ggplot2扩展"><a class="markdownIt-Anchor" href="#ggplot2扩展"></a> ggplot2扩展</h2><p><code>Acf, Pacf, Ccf, taperedacf, taperedpacf</code>自相关和相关函数估计<br><code>autoplot(object, …)</code>通用制图函数</p><h2 id="模型评估"><a class="markdownIt-Anchor" href="#模型评估"></a> 模型评估</h2><p><code>checkresiduals(object, lag, df = NULL, test, plot = TRUE, ...)</code>检查残差<br><code>accuracy(f, x)</code>准确率<br><code>CV, CVar, dsCV</code>交叉验证<br><code>dm.test</code>Diebold-Mariano测试的预测准确性</p><p><code>example: WWWusage %&gt;%auto.arima %&gt;%forecast(h=20) %&gt;%autoplot()</code></p><h1 id="prophet"><a class="markdownIt-Anchor" href="#prophet"></a> prophet</h1><p>模型组成：Y(t)=Trend(t)+Seasonal(t)+Holiday(t)+Irregular(t)</p><h2 id="构建模型"><a class="markdownIt-Anchor" href="#构建模型"></a> 构建模型</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">prophet(df = df,              <span class="comment">#data.frame:ds(date type)+ y,cap+floor指定饱和最大值和最小值</span></span><br><span class="line">  growth = <span class="string">"linear"</span>,           <span class="comment">#linearorlogistictrend</span></span><br><span class="line">  changepoints = <span class="literal">NULL</span>,          <span class="comment">#包含潜在变化点的日期向量</span></span><br><span class="line">  n.changepoints = <span class="number">25</span>,          <span class="comment">#潜在变化点数</span></span><br><span class="line">  changepoint_prior_scale=<span class="number">0.05</span>,   <span class="comment">#调整trend灵活性</span></span><br><span class="line">  yearly.seasonality = <span class="string">"auto"</span>,     <span class="comment">#适合年度seasonality;'auto',TRUE,orFALSE</span></span><br><span class="line">  weekly.seasonality = <span class="string">"auto"</span>,     <span class="comment">#适合周度</span></span><br><span class="line">  holidays = <span class="literal">NULL</span>,                 <span class="comment">#data.frame:holiday(character)+ds(datetype),lower_window+upper_window(可选，指定假日周围的天数)</span></span><br><span class="line">  seasonality.prior.scale = <span class="number">10</span>,     <span class="comment">#调整季节性模型的强度</span></span><br><span class="line">  holidays.prior.scale = <span class="number">10</span>,        <span class="comment">#调整假期组件模型的强度</span></span><br><span class="line">  mcmc.samples = <span class="number">0</span>, </span><br><span class="line">  interval.width = <span class="number">0.8</span>,             <span class="comment">#trend间隔不确定性</span></span><br><span class="line">  uncertainty.samples = <span class="number">1000</span>,       <span class="comment">#season的不确定习性</span></span><br><span class="line">  fit = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><h2 id="模型预测"><a class="markdownIt-Anchor" href="#模型预测"></a> 模型预测</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">furture&lt;-make_future_dataframe(m,           <span class="comment">#Prophet model object|</span></span><br><span class="line">  periods,                                  <span class="comment">#要预测的数量</span></span><br><span class="line">  freq = <span class="string">"d"</span>,                               <span class="comment">#day','week','month','quarter',or'year'</span></span><br><span class="line">  include_history = <span class="literal">TRUE</span>)                   <span class="comment">#历史日期是否包含在预测中</span></span><br></pre></td></tr></table></figure><p><code>predict(object,df = NULL)</code></p><blockquote><p>参数：<br>object：Prophet modelo bject<br>df：NULL or future</p></blockquote><h2 id="可视化"><a class="markdownIt-Anchor" href="#可视化"></a> 可视化</h2><p><code>plot(x, fcst)</code><br><code>prophet_plot_components(m, fcst)</code> ggplot2组件，将预测细分为趋势，每周季节性和年度季节</p><h2 id="交叉验证"><a class="markdownIt-Anchor" href="#交叉验证"></a> 交叉验证</h2><p><code>cross_validation(m, horizon ,initial,units = 'days')</code></p><blockquote><p>参数horizon, initial, units：初始日期，截止日期，间隔</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Time Series </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> orecast </tag>
            
            <tag> prophet </tag>
            
            <tag> 时间序列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Machine Learning)--mlr</title>
      <link href="/posts/R/RNotebook(Machine-Learning)--mlr.html"/>
      <url>/posts/R/RNotebook(Machine-Learning)--mlr.html</url>
      
        <content type="html"><![CDATA[<p><img alt="mlr" data-src="/images/mlr.png"></p><p><a href="http://wilenwu.github.io/r/RNotebook(Machine-Learning)--mlr-(I).html">R手册(Machine Learning)–mlr (I)</a><br><a href="http://wilenwu.github.io/r/RNotebook(Machine-Learning)--mlr-(II).html">R手册(Machine Learning)–mlr (II)</a></p><hr><a id="more"></a><h1 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h1><p><a href="https://mlr-org.github.io/mlr/articles/mlr.html" target="_blank" rel="noopener">mlr官网链接</a><br>mlr提供机器学习的统一接口：tasks, learners, hyperparameters, etc</p><ul><li><strong>Tasks</strong>：建立任务，包括任务描述(classification, regression, clustering, etc)和数据集</li><li><strong>Learners</strong>：建立学习者，指定机器学习算法(GLM, SVM, xgboost, etc)和参数</li><li><strong>Hyperparameters</strong>：对Learners直接指定超参数或超参数调优。给Learners一个可能的参数集列表。</li><li><strong>Wrapped Models</strong>：已封装模型，已经被训练可以预测的模型</li><li><strong>Predictions</strong>：应用模型到新数据或者原始数据进行预测</li><li><strong>Meastures</strong>：模型评估指标(RMSE, logloss, AUC, etc)</li><li><strong>Resampling</strong>：重抽样，通过分离训练集来拟合通用的模型，通常包括<strong>holdout</strong> 验证，K折交叉验证(<strong>K-fold cross-validation</strong>)，留一交叉验证(<strong>LOOCV</strong>)</li></ul><p><strong>Workflow</strong><br><img alt="wf" data-src="/images/mlr2.png"></p><h1 id="preprocessing-data-预处理"><a class="markdownIt-Anchor" href="#preprocessing-data-预处理"></a> Preprocessing data (预处理)</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">createDummyFeatures(obj=,target=,method=,cols=)</td><td style="text-align:left">为每一个非数值变量创建哑变量(0,1)，不包括目标变量target，也可以指定变量cols</td></tr><tr><td style="text-align:left">normalizeFeatures(obj=,target=,method=,cols=, range=,on.constant=)</td><td style="text-align:left">数字变量标准化，method: {“center”, “scale”,“standardize”,“range”(default range=c(0,1))  }</td></tr><tr><td style="text-align:left">mergeSmallFactorLevels(task=,cols=,min.perc=)</td><td style="text-align:left">组合进单一的factor level</td></tr><tr><td style="text-align:left">summarizeColumns(obj=)</td><td style="text-align:left">data.frame or Task的汇总说明</td></tr><tr><td style="text-align:left">capLargeValues(obj,cols=NULL)</td><td style="text-align:left">离群值转化（帽子法）</td></tr><tr><td style="text-align:left">dropFeatures</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">removeConstantFeatures</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">summarizeLevels</td><td style="text-align:left"></td></tr></tbody></table><h1 id="task-and-learner"><a class="markdownIt-Anchor" href="#task-and-learner"></a> Task and Learner</h1><h2 id="create-a-task"><a class="markdownIt-Anchor" href="#create-a-task"></a> Create a task</h2><table><thead><tr><th style="text-align:left">创建任务</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">makeClassifTask(data=,target=)</td><td style="text-align:left">回归问题</td></tr><tr><td style="text-align:left">makeRegrTask(data=,target=)</td><td style="text-align:left">分类，目标列必须是一个factor</td></tr><tr><td style="text-align:left">makeMultilabelTask(data=,target=)</td><td style="text-align:left">多标签分类问题，每个对象可以同时属于多个类别</td></tr><tr><td style="text-align:left">makeClusterTask(data=)</td><td style="text-align:left">聚类分析</td></tr><tr><td style="text-align:left">makeSurvTask(data=,target=c(“time”,“event”))</td><td style="text-align:left">生存分析</td></tr><tr><td style="text-align:left">makeCostSensTask(data=,costs=)</td><td style="text-align:left">成本敏感的分类，分类中的标准目标是获得较高的预测准确度，即最小化分类器产生的错误数量</td></tr><tr><td style="text-align:left"><strong>getTaskDesc(x)</strong></td><td style="text-align:left">获得总的任务描述，查看positiv</td></tr></tbody></table><p><img alt="task" data-src="/images/mlr3.png"></p><p><strong>task的其他参数：</strong></p><ul><li><strong>weight</strong>：将权重向量应用到记录</li><li><strong>block</strong>：传递因子向量将记录绑定到一块，重抽样的时候不会 被拆分</li></ul><h2 id="making-a-learner"><a class="markdownIt-Anchor" href="#making-a-learner"></a> Making a learner</h2><p><code>makeLearner(cl,predict.type = &quot;response&quot;,predict.threshold = NULL, ...,par.vals)</code>指定机器学习算法，也能一次指定多个</p><p><strong>参数：</strong></p><ul><li>cl：指定要使用的算法名，cl= <code>&lt;task_Type&gt;.&lt;R_method_name&gt;</code> (“classif.xgboost”,<br>“regr.randomForest” ,“cluster.kmeans”,etc)</li><li>predict.type：&quot;response&quot;返回原始数据，&quot;prob&quot;返回分类问题的概率，&quot;se&quot;返回回归问题的标准误</li><li>par.vals：传递超参数列表，也能直接传递(…)</li><li>predict.threshold ：生成类标签的阈值</li></ul><p>mlr有超过170个不同的是<strong>算法</strong>：<a href="https://mlr-org.github.io/mlr-tutorial/devel/html/integrated_learners/index.html" target="_blank" rel="noopener">mlr已经集成的算法</a></p><ul><li>listLearners()：展示所有的learner</li><li>listLearners(task)：task允许的所有learner</li><li>listLearners(“classif”,properties=c(“prob”, “factors”))：展示所有的分类问题中，能输出概率&quot;prob&quot;，和因子“factors”</li><li>See also getLearnerProperties()</li></ul><h1 id="training-testing-训练和测试"><a class="markdownIt-Anchor" href="#training-testing-训练和测试"></a> Training &amp; Testing (训练和测试)</h1><h2 id="setting-hyperparameters-设置超参数"><a class="markdownIt-Anchor" href="#setting-hyperparameters-设置超参数"></a> Setting hyperparameters (设置超参数)</h2><p><code>setHyperPars(learner=,...)</code>传递超参数给learner<br><code>getParamSet(learner=)</code>获得learner可能的超参数文本(such as “classif.qda”)</p><h2 id="train-a-model-and-predict-训练模型和预测"><a class="markdownIt-Anchor" href="#train-a-model-and-predict-训练模型和预测"></a> Train a model and predict (训练模型和预测)</h2><p><code>train(learner, task,subset)</code>训练模型，subset设置训练集（默认是全部数据）<br><code>getLearnerModel(model)</code>将底层的学习者模型纳入mlr</p><p><code>predict(model,task,subset)</code>预测原始数据<br><code>predict(model,newdata)</code>预测新数据<br><code>as.data.frame(pred)</code>查看预测的结果</p><p><code>pred2&lt;- setThreshold(pred, threshold)</code>重设分类问题的阈值，重新预测</p><h2 id="measuring-performance-模型评估质量"><a class="markdownIt-Anchor" href="#measuring-performance-模型评估质量"></a> Measuring performance (模型评估质量)</h2><p><code>performance(pred=,measures=)</code> 依照一个或几个指标评估模型<br><code>getDefaultMeasure(task/learner)</code>查看默认指标<br><code>listMeasures()</code>查看完整的指标列表<br><code>listMeasures(task)</code>查看匹配指标</p><blockquote><p>通过参数measures=list(mse,medse,mae)指定评估指标</p></blockquote><ul><li><strong>classif:</strong> acc auc bac ber brier[.scaled] f1 fdr fn<br>fnr fp fpr gmean multiclass[.au1u .aunp .aunu<br>.brier] npv ppv qsr ssr tn tnr tp tpr wkappa</li><li><strong>regr:</strong>  arsq expvar kendalltau mae mape medae<br>medse mse msle rae rmse rmsle rrse rsq sae<br>spearmanrho sse</li><li><strong>cluster:</strong> db dunn G1 G2 silhouette</li><li><strong>multilabel:</strong>  multilabel[.f1 .subset01 .tpr .ppv<br>.acc .hamloss]</li><li><strong>costsens:</strong> mcp meancosts</li><li><strong>surv:</strong> cindex</li><li><strong>other</strong>: featperc timeboth timepredict timetrain</li></ul><p><strong>分类任务的评估详情：</strong><br><code>calculateConfusionMatrix(pred)</code>获得混淆矩阵<br><code>calculateROCMeasures(pred)</code>ROC曲线</p><h2 id="resampling-a-learner-重抽样"><a class="markdownIt-Anchor" href="#resampling-a-learner-重抽样"></a> Resampling a learner (重抽样)</h2><p><code>makeResampleDesc(method=,...,stratify=)</code><br><code>makeResampleInstance(desc=,task=)</code>确保每次抽样统一，以减少噪声值</p><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><strong>method</strong></td><td style="text-align:left">重抽样的方法</td></tr><tr><td style="text-align:left">“CV”</td><td style="text-align:left">cross-volidation（交叉验证），用<code>iters</code>指定k-folds（K折）数</td></tr><tr><td style="text-align:left">“LOO”</td><td style="text-align:left">leave-one-out cross-volidation（留一交叉验证），用<code>iters</code>指定k-folds数</td></tr><tr><td style="text-align:left">“RepCV”</td><td style="text-align:left">repeated cross-volidation（反复交叉验证），<code>reps</code>指定重复数，用<code>iters</code>指定k-folds数</td></tr><tr><td style="text-align:left">“Subsample”</td><td style="text-align:left">aka Monte-Carlo cross-volidation ,用<code>iters</code>指定k-folds数,<code>split</code>指定<code>train%</code></td></tr><tr><td style="text-align:left">“Bootstrap”</td><td style="text-align:left">out-of-bag bootstrap（袋装法），<code>iters</code></td></tr><tr><td style="text-align:left">“Holdout”</td><td style="text-align:left">for train% use <code>split</code></td></tr><tr><td style="text-align:left"><strong>stratify</strong></td><td style="text-align:left">保持目标变量的抽样比例</td></tr></tbody></table><p><code>resample(learner=,task=,resampling=,measures=)</code>通过指定重抽样训练和测试模型</p><ul><li>mlr有若干预先定义的重抽样：<br><code>cv2</code>(2-koldscross-volidation),<br><code>cv3, cv5, cv10, hout</code>(holdout with split 2/3 for traing, 1/3 for testing)</li><li>也可以用重抽样函数传递给<code>resample()</code><br><code>crossval() repcv() holdout() subsample()</code><br><code>bootstrapOOB() bootstrapB632() bootstrapB632plus()</code></li></ul><h1 id="tuning-hyperparameters-超参数调优"><a class="markdownIt-Anchor" href="#tuning-hyperparameters-超参数调优"></a> Tuning hyperparameters (超参数调优)</h1><h2 id="设定超参数搜索空间"><a class="markdownIt-Anchor" href="#设定超参数搜索空间"></a> 设定超参数搜索空间</h2><p><code>makeParamSet(make&lt;type&gt;Param())</code></p><table><thead><tr><th style="text-align:left"><code>make&lt;type&gt;Param()</code></th><th style="text-align:left">指定超参数搜索类型和范围</th></tr></thead><tbody><tr><td style="text-align:left">makeNumericParam(id=,lower=,upper=,trafo=)</td><td style="text-align:left">数字</td></tr><tr><td style="text-align:left">makeIntegerParam(id=,lower=,upper=,trafo=)</td><td style="text-align:left">整数</td></tr><tr><td style="text-align:left">makeIntegerVectorParam(id=,len=,lower=,upper=,trafo=)</td><td style="text-align:left">整数向量</td></tr><tr><td style="text-align:left">makeDiscreteParam(id=,values=c(…))</td><td style="text-align:left">分类变量</td></tr><tr><td style="text-align:left">Logical, LogicalVector, CharacterVector, DiscreteVector</td><td style="text-align:left">其他类型</td></tr></tbody></table><p>参数<strong>trafo</strong>可以用一个指定函数转换输出：例如<code>lower=-2,upper=2,trafo=function(x) 10^x</code>，输出值between 0.01 and 100</p><h2 id="设定超参数搜索算法"><a class="markdownIt-Anchor" href="#设定超参数搜索算法"></a> 设定超参数搜索算法</h2><p><code>makeTuneControl&lt;type&gt;()</code></p><table><thead><tr><th style="text-align:left"><code>&lt;type&gt;</code></th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">Grid(resolution=10L)</td><td style="text-align:left">所有可能的网格点</td></tr><tr><td style="text-align:left">Random(maxit=100)</td><td style="text-align:left">随机抽样搜索空间</td></tr><tr><td style="text-align:left">MBO(budget=)</td><td style="text-align:left">Bayesion model-based optimization（基于贝叶斯模型的最优化）</td></tr><tr><td style="text-align:left">Irace(n.instances=)</td><td style="text-align:left">迭代比赛过程</td></tr><tr><td style="text-align:left">CMAES()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Design()</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">GenSA()</td><td style="text-align:left"></td></tr></tbody></table><h2 id="超参数调优"><a class="markdownIt-Anchor" href="#超参数调优"></a> 超参数调优</h2><p><code>tuneParams(learner=,task=,resampling=,measures=,par.set=,control=)</code>超参数调优函数</p><h1 id="quickstart"><a class="markdownIt-Anchor" href="#quickstart"></a> Quickstart</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 预处理数据</span></span><br><span class="line"><span class="keyword">library</span>(mlbench)</span><br><span class="line">data(Soybean)</span><br><span class="line">soy = createDummyFeatures(Soybean,target=<span class="string">"Class"</span>) <span class="comment">#转化因子变量为哑变量(0,1)，对xgboost模型有用</span></span><br><span class="line">tsk = makeClassifTask(data=soy,target=<span class="string">"Class"</span>) <span class="comment"># 建立任务</span></span><br><span class="line">ho = makeResampleInstance(<span class="string">"Holdout"</span>,tsk) <span class="comment"># 设定训练集和测试集(default 2/3 for traing, 1/3 for testing</span></span><br><span class="line">tsk.train = subsetTask(tsk,ho$train.inds[[<span class="number">1</span>]])</span><br><span class="line">tsk.test = subsetTask(tsk,ho$test.inds[[<span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定learner和评估指标</span></span><br><span class="line">lrn = makeLearner(<span class="string">"classif.xgboost"</span>,nrounds=<span class="number">10</span>)</span><br><span class="line">cv = makeResampleDesc(<span class="string">"CV"</span>,iters=<span class="number">5</span>) <span class="comment"># 5折交叉验证</span></span><br><span class="line">res = resample(lrn,tsk.train,cv,acc) <span class="comment"># 准确率作为评估指标</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#超参数调优，重训练模型</span></span><br><span class="line">ps = makeParamSet(makeNumericParam(<span class="string">"eta"</span>,<span class="number">0</span>,<span class="number">1</span>), <span class="comment"># 调优超参数eta, lambda, max_depth</span></span><br><span class="line">  makeNumericParam(<span class="string">"lambda"</span>,<span class="number">0</span>,<span class="number">200</span>),</span><br><span class="line">  makeIntegerParam(<span class="string">"max_depth"</span>,<span class="number">1</span>,<span class="number">20</span>))</span><br><span class="line">tc = makeTuneControlMBO(budget=<span class="number">100</span>) <span class="comment"># 用MBO算法搜索</span></span><br><span class="line">tr = tuneParams(lrn,tsk.train,cv5,acc,ps,tc) <span class="comment"># 5折交叉验证调优</span></span><br><span class="line">lrn = setHyperPars(lrn,par.vals=tr$x)</span><br><span class="line"></span><br><span class="line">mdl = train(lrn,tsk.train) <span class="comment">#测试集训练模型</span></span><br><span class="line">prd = predict(mdl,tsk.test) <span class="comment"># 预测</span></span><br><span class="line">calculateConfusionMatrix(prd) <span class="comment"># 混淆矩阵评估模型</span></span><br><span class="line">mdl = train(lrn,tsk) <span class="comment"># 用所有的数据重新训练模型，投入实用</span></span><br></pre></td></tr></table></figure><h1 id="configuration-配置"><a class="markdownIt-Anchor" href="#configuration-配置"></a> Configuration (配置)</h1><p>用<code>getMlrOptions()</code>查看mlr 的现有设置<br>用<code>configureMlr()</code>更改mlr的默认设置</p><p><strong>参数：</strong></p><ul><li><strong><a href="http://show.info" target="_blank" rel="noopener">show.info</a></strong>：(traning, tuning, resampling,etc)是否展示默认冗长的输出，默认TRUE</li><li><strong>on.learner.error</strong>：怎样控制learner的错误， “stop”(default), “warn”, “quiet”</li><li><strong>on.learner.warning</strong>：怎样控制learner的警告，“warn”(default) , “quiet”</li><li><strong>on.par.without.desc</strong>：超参数控制，“stop”(default), “warn” ,“quiet”</li><li><strong>on.par.out.of.bounds</strong>：超参数超出边界值，“stop”(default) ,“warn”, “quiet”</li><li><strong>on.measure.not.applicable</strong>：评估指标对learner不适用，“stop”(default) , “warn”, “quiet”</li><li><strong>show.learner.output</strong>：learner在训练的时候输出到控制台，默认TRUE</li><li><strong>on.error.dump</strong>：是否为crashed learner创建一个error dump，当on.learner.error 没有被指定为&quot;stop&quot; 时，默认TRUE</li></ul><h1 id="parallelization-并行"><a class="markdownIt-Anchor" href="#parallelization-并行"></a> Parallelization (并行)</h1><p>mlr结合parallelMap包利用多核和集群运算加快运行速度，mlr自动发现能进行并行的操作。</p><p><strong>开始并行</strong>：<code>parallelStart(mode=,cpus=,level=)</code><br><strong>结束并行</strong>：<code>parallelStop()</code></p><table><thead><tr><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><strong>mode</strong></td><td style="text-align:left">决定并行的方式</td></tr><tr><td style="text-align:left">“local”</td><td style="text-align:left">无并行性，简单的使用mapply</td></tr><tr><td style="text-align:left">“multicore”</td><td style="text-align:left">单机器上多核，使用parallel::mclapply，windows上不适用</td></tr><tr><td style="text-align:left">“socket”</td><td style="text-align:left">多核socked mode</td></tr><tr><td style="text-align:left">“mpi”</td><td style="text-align:left">一个或多个机器上集群运算，使用parallel::makeCluster and parallel::clusterMap</td></tr><tr><td style="text-align:left">“BatchJobs”</td><td style="text-align:left">批排队HPC集群，使用BatchJobs::batchMap</td></tr><tr><td style="text-align:left"><strong>cpus</strong></td><td style="text-align:left">使用的物理内核数</td></tr><tr><td style="text-align:left"><strong>level</strong></td><td style="text-align:left">控制并行，使用&quot;mlr.benchmark&quot; “mlr.resample” “mlr.selectFeatures” “mlr.tuneParams” “mlr.ensemble”</td></tr></tbody></table><h1 id="imputation-插补"><a class="markdownIt-Anchor" href="#imputation-插补"></a> Imputation (插补)</h1><p><code>impute(obj=,target=,cols=,dummy.cols=,dummy.type=)</code><br>缺失的数据进行插补，返回一个列表，包括插补过额数据集或task，和插补描述</p><p><code>reimpute(obj=,desc=)</code>用已被impute创建的插补描述(description, desc)插补缺失值</p><ul><li>obj= data.frame or task</li><li>target= 指定目标变量，将不会被插补</li><li>cols= 要插补的列名或逻辑列表</li><li>dummy.cols= 建立NA(T/F)列的列名</li><li>dummy.type= 设定&quot;numeric&quot;，用(0,1)代替(T/F)</li><li>也能用classes 和dummy.classes 代替cols</li></ul><p>传递给cols或classes的list示例：<br><code>cols=list(V1=imputeMean())</code> V1是要插补的列，imputeMean()为要插补的方法</p><table><thead><tr><th style="text-align:left">允许的插补方法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">imputeConst(const=)</td><td style="text-align:left">常数</td></tr><tr><td style="text-align:left">imputeMedian()</td><td style="text-align:left">中位数</td></tr><tr><td style="text-align:left">imputeMode()</td><td style="text-align:left">众数</td></tr><tr><td style="text-align:left">imputeMin(multiplier=)</td><td style="text-align:left">最小值</td></tr><tr><td style="text-align:left">imputeMax(multiplier=)</td><td style="text-align:left">最大值</td></tr><tr><td style="text-align:left">imputeNormal(mean=,sd=)</td><td style="text-align:left">正态插补</td></tr><tr><td style="text-align:left">imputeHist(breaks=,use.mids=)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">imputeLearner(learner=,features=)</td><td style="text-align:left">模型插补</td></tr></tbody></table><h1 id="feature-extraction-特征提取"><a class="markdownIt-Anchor" href="#feature-extraction-特征提取"></a> Feature Extraction (特征提取)</h1><h2 id="feature-filtering特征筛选"><a class="markdownIt-Anchor" href="#feature-filtering特征筛选"></a> Feature filtering(特征筛选)</h2><p><img alt="filter" data-src="/images/mlr_ff.png"></p><p><code>filterFeatures(task=,method=,perc=,abs=,threshold=)</code><br>按特征的重要性进行排序，选择其中的top n percent(<code>perc=</code>), top n(<code>abs=</code>) or 设定阈值(<code>threshold=</code>)，返回task，没有被筛选的特征将会被删除。</p><p>默认的筛选方法为<code>&quot;randomForestSRC.rfsrc&quot;</code>，也可以设置其他方法：<br>“anova.test” “carscore” “cforest.importance”<br>“chi.squared” “gain.ratio” “information.gain”<br>“kruskal.test” “linear.correlation” “mrmr” “oneR”<br>“permutation.importance” “randomForest.importance”<br>“randomForestSRC.rfsrc” “randomForestSRC.var.select”<br>“rank.correlation” “relief”<br>“symmetrical.uncertainty” “univariate.model.score”<br>“variance”</p><h2 id="feature-selection特征选择"><a class="markdownIt-Anchor" href="#feature-selection特征选择"></a> Feature selection(特征选择)</h2><p><img alt="selection" data-src="/images/mlr_fs.png"></p><p><code>selectFeatures(learner=,task=, resampling=,measures=,control=)</code><br>用一个特征选择算法(<code>control</code>)重抽样和建立模型，反复选择不同的特征集，直到找到最好的特征集。返回FeatSelResult对象，包括最佳选择和最佳路径。</p><p><code>tsk = subsetTask(tsk,features=fsr$x)</code>应用最佳选择结果(fsr)到task(tsk)</p><p><strong>特征选择算法(control)</strong>：</p><ul><li><code>makeFeatSelControlExhaustive(max.features=)</code>尝试每一种特征组合，可选参数max.features</li><li><code>makeFeatSelControlRandom(maxit=,prob=,max.features=)</code>随机抽取特征集(概率<code>prob</code>,default 0.5) 迭代(<code>maxit</code>,default 100)，返回其中最好的。</li><li><code>makeFeatSelControlSequential(method=,maxit=,max.features=,alpha=,beta=)</code>用以下的迭代算法搜寻，评估：<br>“sfs” forward search, “sffs” floating forward search,<br>“sbs” backward search , “sfbs”  floating backward search,<br>“alpha” 每次增加一个特征来改善评估，取最少特征集<br>“beta” 每次移除一个特征来改善评估，取最少特征集</li><li><code>makeFeatSelControlGA(maxit=,max.features=,mu=,lambda=,crossover.rate=,mutation.rate=)</code>随机特征向量的遗传算法，然后利用最佳性能的交叉来产生后代，代代相传，参数：<br>mu是父系规模<br>lambda 是子系规模<br>crossover.rate 从第一亲本选择一点的概率<br>mutation.rate 是翻转的概率(on or off)</li></ul><h1 id="benchmarking-基准点"><a class="markdownIt-Anchor" href="#benchmarking-基准点"></a> Benchmarking (基准点)</h1><p><code>benchmark(learners=,tasks=,resamplings=,measures=)</code><br>允许进行简单的比较：执行单一task的多重learner，执行多重task的单一learner，或者执行多重task的多重learner，返回一个基准结果对象。<br>基准结果被函数<code>getBMR&lt;object&gt;</code>接收：<br>AggrPerformance<br>FeatSelResults FilteredFeatures LearnerIds<br>LeanerShortNames Learners MeasureIds Measures<br>Models Performances Predictions TaskDescs TaskIds<br>TuneResults</p><p>mlr内置了许多有趣的task，对基准学习很有帮助：<br>agri.task bc.task bh.task costiris.task iris.task<br>lung.task mtcars.task pid.task sonar.task<br>wpbc.task yeast.task</p><h1 id="visualization-可视化"><a class="markdownIt-Anchor" href="#visualization-可视化"></a> Visualization (可视化)</h1><p><strong>1. 可视化总表</strong></p><table><thead><tr><th>生成数据函数</th><th>ggplot2绘图函数</th><th>ggvis绘图函数</th><th>说明</th></tr></thead><tbody><tr><td>generateThreshVsPerfData</td><td>plotThresVsPerf</td><td>plotThreshVsPerfGGVIS</td><td>性能</td></tr><tr><td></td><td>plotROCCurves</td><td>-</td><td>ROC分析</td></tr><tr><td>generateCritDifferencesData</td><td>plotCritDifferences</td><td>-</td><td>基准实验</td></tr><tr><td>generateHyperParsEffectData</td><td>plotHyperParsEffect</td><td></td><td>调整，超参数调整效果</td></tr><tr><td>generateFilterValuesData</td><td>plotFilterValues</td><td>plotFilterValuesGGVIS</td><td>功能选择</td></tr><tr><td>generateLearningCurveData</td><td>plotLearningCurve</td><td>plotLearningCurveGGVIS</td><td>学习曲线</td></tr><tr><td>generatePartialDependenceData</td><td>plotPartialDependence</td><td>plotPartialDependenceGGVIS</td><td>部分依赖情节</td></tr><tr><td>generateFunctionalANOVAData</td><td></td><td></td><td></td></tr><tr><td>generateCalibrationData</td><td>plotCalibration</td><td>-</td><td>分类器校准图</td></tr></tbody></table><p><strong>2. 可视化函数说明</strong></p><table><thead><tr><th>Performance</th><th>表现</th></tr></thead><tbody><tr><td>generateThreshVsPerfData(obj=,measures=)</td><td>获得二分类问题不同切分点评估质量，促使选出最优阈值(threshold)</td></tr><tr><td>plotThreshVsPerf(obj)</td><td>用ThreshVsPerfData数据作出阈值可视化表现</td></tr><tr><td>plotROCCurves(obj)</td><td>用ThreshVsPerfData数据做出ROC曲线，一定要设定measures=list(fpr,tpr)</td></tr><tr><td><strong>Residuals</strong></td><td>残差</td></tr><tr><td>plotResiduals(obj=)</td><td>为Prediction 或BenchmarkResult对象作残差</td></tr></tbody></table><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">n = getTaskSize(sonar.task)</span><br><span class="line">train.set = sample(n, size = round(<span class="number">2</span>/<span class="number">3</span> * n))</span><br><span class="line">test.set = setdiff(seq_len(n), train.set)</span><br><span class="line"></span><br><span class="line">lrn1 = makeLearner(<span class="string">"classif.lda"</span>, predict.type = <span class="string">"prob"</span>)</span><br><span class="line">mod1 = train(lrn1, sonar.task, subset = train.set)</span><br><span class="line">pred1 = predict(mod1, task = sonar.task, subset = test.set)</span><br><span class="line"></span><br><span class="line">df = generateThreshVsPerfData(pred1, measures = list(fpr, tpr, mmce))</span><br><span class="line">performance(pred1, auc)</span><br><span class="line"><span class="comment">#&gt;      auc </span></span><br><span class="line"><span class="comment">#&gt; 0.847973</span></span><br><span class="line">plotThreshVsPerf(df)</span><br><span class="line"></span><br><span class="line">lrn2 = makeLearner(<span class="string">"classif.ksvm"</span>, predict.type = <span class="string">"prob"</span>)  <span class="comment"># 需要载入包kernlab</span></span><br><span class="line">mod2 = train(lrn2, sonar.task, subset = train.set)</span><br><span class="line">pred2 = predict(mod2, task = sonar.task, subset = test.set)</span><br><span class="line"></span><br><span class="line">df = generateThreshVsPerfData(list(lda = pred1, ksvm = pred2), measures = list(fpr, tpr))</span><br><span class="line">plotROCCurves(df)</span><br></pre></td></tr></table></figure><p><img alt="阈值" data-src="/images/mlr_thresh.png"><br><img alt="roc" data-src="/images/mlr_roc.png"></p><table><thead><tr><th>Learning curve</th><th>学习曲线</th></tr></thead><tbody><tr><td>generateLearningCurveData(learners=,task=,resampling=,percs=,measures=)</td><td>获得不同百分比的task data上做模型评估质量数据</td></tr><tr><td>plotLearningCurve(obj)</td><td>比较数据的已使用和模型质量的关系，使用LearningCurveData对象</td></tr></tbody></table><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">r = generateLearningCurveData(</span><br><span class="line">  learners = c(<span class="string">"classif.rpart"</span>, <span class="string">"classif.knn"</span>),</span><br><span class="line">  task = sonar.task,</span><br><span class="line">  percs = seq(<span class="number">0.1</span>, <span class="number">1</span>, by = <span class="number">0.2</span>),</span><br><span class="line">  measures = list(tp, fp, tn, fn),</span><br><span class="line">  resampling = makeResampleDesc(method = <span class="string">"CV"</span>, iters = <span class="number">5</span>),</span><br><span class="line">  show.info = <span class="literal">FALSE</span>)</span><br><span class="line">plotLearningCurve(r)</span><br></pre></td></tr></table></figure><p><img alt="学习曲线" data-src="/images/mlr_lc.png"></p><table><thead><tr><th>Feature importance</th><th>特征重要性</th></tr></thead><tbody><tr><td>generateFilterValuesData(task=,method=)</td><td>用指定的选择方法获得排序的特征重要性</td></tr><tr><td>plotFilterValues(obj=)</td><td>可视化特征重要性，FilterValuesData对象</td></tr></tbody></table><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fv = generateFilterValuesData(iris.task)</span><br><span class="line">plotFilterValues(fv)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/mlr_mv.png"></p><table><thead><tr><th>Hyperparameters tuning</th><th>超参数调优</th></tr></thead><tbody><tr><td>generateHyperParsEffectData(tune.result=)</td><td>获得不同超参数的影响</td></tr><tr><td>plotHyperParsEffect(hyperpars.effect.data=,x=,y=,z=)</td><td>可视化超参数影响，HyperParsEffectData对象</td></tr><tr><td>plotOptPath(op=)</td><td>可视化最优进程详情，<code>&lt;obj&gt;$opt.path</code>对象， <code>&lt;obj&gt;</code>是 tuneResult或 featSelResult类的对象。</td></tr><tr><td>plotTuneMultiCritResult(res=)</td><td>展示pareto图，多重评估质量的调优结果</td></tr></tbody></table><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ps = makeParamSet(</span><br><span class="line">  makeNumericParam(<span class="string">"C"</span>, lower = -<span class="number">5</span>, upper = <span class="number">5</span>, trafo = <span class="keyword">function</span>(x) <span class="number">2</span>^x)</span><br><span class="line">)</span><br><span class="line">ctrl = makeTuneControlGrid()</span><br><span class="line">rdesc = makeResampleDesc(<span class="string">"Holdout"</span>)</span><br><span class="line">lrn = makeTuneWrapper(<span class="string">"classif.ksvm"</span>, control = ctrl,</span><br><span class="line">                      measures = list(acc, mmce), resampling = rdesc, par.set = ps, show.info = <span class="literal">FALSE</span>)</span><br><span class="line">res = resample(lrn, task = pid.task, resampling = cv2, extract = getTuneResult, show.info = <span class="literal">FALSE</span>)</span><br><span class="line">data = generateHyperParsEffectData(res)</span><br><span class="line">plotHyperParsEffect(data, x = <span class="string">"C"</span>, y = <span class="string">"acc.test.mean"</span>, plot.type = <span class="string">"line"</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/mlr_cv.png"></p><table><thead><tr><th>Partial dependence</th><th>部分依赖</th></tr></thead><tbody><tr><td>generatePartialDependenceData(obj=,input=)</td><td>获得模型(obj)的部分依赖预测，通过每一次的特征数据输入(input)</td></tr><tr><td>plotPartialDependence(obj=)</td><td>部分依赖图，PartialDependenceData对象</td></tr></tbody></table><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lrn.regr = makeLearner(<span class="string">"regr.ksvm"</span>)</span><br><span class="line">fit.regr = train(lrn.regr, bh.task)</span><br><span class="line">pd.regr = generatePartialDependenceData(fit.regr, bh.task, <span class="string">"lstat"</span>, fun = median)</span><br><span class="line">plotPartialDependence(pd.regr)</span><br><span class="line"></span><br><span class="line">lrn.classif = makeLearner(<span class="string">"classif.ksvm"</span>, predict.type = <span class="string">"prob"</span>)</span><br><span class="line">fit.classif = train(lrn.classif, iris.task)</span><br><span class="line">pd.classif = generatePartialDependenceData(fit.classif, iris.task, <span class="string">"Petal.Length"</span>, fun = median)</span><br><span class="line">plotPartialDependence(pd.classif)</span><br></pre></td></tr></table></figure><p><img alt="reg" data-src="/images/mlr_reg.png"><img alt="calssfic" data-src="/images/mlr_calssfic.png"></p><table><thead><tr><th>Benchmarking</th><th>基准点</th></tr></thead><tbody><tr><td>plotBMRBoxplots(bmr=)</td><td>表现的分类图</td></tr><tr><td>plotBMRSummary(bmr=)</td><td>平均表现的散点图</td></tr><tr><td>plotBMRRanksAsBarChart(bmr=)</td><td>learner 排序柱形图</td></tr></tbody></table><table><thead><tr><th>Other</th><th>其他图</th></tr></thead><tbody><tr><td>generateCritDifferencesData(bmr=,measure=,p.value=,test=)</td><td>执行临界差检验,用bonforroni-dunn(“bd”) 或&quot;Nemenyi&quot;检验</td></tr><tr><td>plotCritDifferences(obj=)</td><td>临界点检验可视化</td></tr><tr><td>generateCalibrationData(obj=)</td><td>评估概率预测与真实发生率的校准</td></tr><tr><td>plotCalibration(obj=)</td><td>校准图</td></tr></tbody></table><p><img alt data-src="/images/mlr4.png"><img alt data-src="/images/mlr5.png"></p><h1 id="wrappers-封装器"><a class="markdownIt-Anchor" href="#wrappers-封装器"></a> Wrappers (封装器)</h1><p>封装器使具有附加功能的学习者融合。mlr把带有封装器的learner看作一个单独的learner，超参数的封装也会与基础模型参数联合调谐。带包装的模型将应用于新数据。<br><img alt="wrappers" data-src="/images/mlr_wrappers.png"></p><table><thead><tr><th>Preprocessing and imputation</th><th>预处理和插补</th></tr></thead><tbody><tr><td>makeDummyFeaturesWrapper(learner=)</td><td></td></tr><tr><td>makeImputeWrapper(learner=,classes=,cols=)</td><td></td></tr><tr><td>makePreprocWrapper(learner=,train=,predict=)</td><td></td></tr><tr><td>makePreprocWrapperCaret(learner=,…)</td><td></td></tr><tr><td>makeRemoveConstantFeaturesWrapper(learner=)</td><td></td></tr><tr><td><strong>Class imbance</strong></td><td>类别不平衡</td></tr><tr><td>makeOverBaggingWrapper(learner=)</td><td></td></tr><tr><td>makeSMOTEWrapper(learner=)</td><td></td></tr><tr><td>makeUndersampleWrapper(learner=)</td><td></td></tr><tr><td>makeWeightedClassesWrapper(learner=)</td><td></td></tr><tr><td><strong>Cost-sensitive</strong></td><td>成本分析</td></tr><tr><td>makeCostSensClassifWrapper(learner=)</td><td></td></tr><tr><td>makeCostSensRegrWrapper(learner=)</td><td></td></tr><tr><td>makeCostSensWeightedPairsWrapper(learner=)</td><td></td></tr><tr><td><strong>Multilabel classification</strong></td><td>多标签分类</td></tr><tr><td>makeMultilabelBinaryRelevanceWrapper(learner=)</td><td></td></tr><tr><td>makeMultilabelClassifierChainsWrapper(learner=)</td><td></td></tr><tr><td>makeMultilabelDBRWrapper(learner=)</td><td></td></tr><tr><td>makeMultilabelNestedStackingWrapper(learner=)</td><td></td></tr><tr><td>makeMultilabelStackingWrapper(learner=)</td><td></td></tr><tr><td><strong>Other</strong></td><td>其他</td></tr><tr><td>makeBaggingWrapper(learner=)</td><td></td></tr><tr><td>makeConstantClassWrapper(learner=)</td><td></td></tr><tr><td>makeDownsampleWrapper(learner=,dw.perc=)</td><td></td></tr><tr><td>makeFeatSelWrapper(learner=,resampling=,control=)</td><td></td></tr><tr><td>makeFilterWrapper(learner=,fw.perc=,fw.abs=,fw.threshold=)</td><td></td></tr><tr><td>makeMultiClassWrapper(learner=)</td><td></td></tr><tr><td>makeTuneWrapper(learner=,resampling=,par.set=,control=)</td><td></td></tr></tbody></table><h1 id="nested-resampling-嵌套重采样"><a class="markdownIt-Anchor" href="#nested-resampling-嵌套重采样"></a> Nested Resampling (嵌套重采样)</h1><p>mlr支持嵌套重采样进行复杂操作，例如通过包装来调优和特征选择等。为了获得良好的泛化性能估计和避免数据泄漏，建议使用外部（用于调优/特征选择）和内部（对于基本模型）重采样过程。</p><ul><li>外部重采样能在resample, benchmark中被指定</li><li>内部重采样能在makeTuneWrapper, makeFeatSelWrapper, etc中被指定</li></ul><h1 id="ensembles-集成"><a class="markdownIt-Anchor" href="#ensembles-集成"></a> Ensembles (集成)</h1><p><code>makeStackedLearner(base.learners=,super.learner=,method=)</code>将多重learner集成</p><p><strong>参数：</strong></p><ul><li>base.learners= 使用初始预测的learners</li><li>super.learner= 使用最终预测的learners</li><li>method= 组合base learners预测的方法<br>“average”：所有base learners的平均<br>“stack.nocv” “<a href="http://stack.cv" target="_blank" rel="noopener">stack.cv</a>”：在base learners的结果上训练super learner (with or without cross-validation)<br>“hill.climb”：搜索最优权重平均<br>“compress”：用神经网络实现更快的性能</li></ul>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Machine Learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> mlr </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Model Tools)--modelr</title>
      <link href="/posts/R/RNotebook(Model-Tools)--modelr.html"/>
      <url>/posts/R/RNotebook(Model-Tools)--modelr.html</url>
      
        <content type="html"><![CDATA[<h1 id="modelr-辅助管道建模"><a class="markdownIt-Anchor" href="#modelr-辅助管道建模"></a> modelr ：辅助管道建模</h1><p>modelr软件包提供的功能可以帮助您在建模时创建精美的流水线。</p><a id="more"></a><h2 id="分区和采样"><a class="markdownIt-Anchor" href="#分区和采样"></a> 分区和采样</h2><p><code>resample(data, idx)</code> 抽取idx向量指定的观测值<br><code>resample_partition(data, p)</code> 按p向量给定的值分区</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rs &lt;- resample(mtcars, <span class="number">1</span>:<span class="number">10</span>)</span><br><span class="line">as.data.frame(rs)</span><br><span class="line"></span><br><span class="line">ex &lt;- resample_partition(mtcars, c(test = <span class="number">0.3</span>, train = <span class="number">0.7</span>))</span><br><span class="line">lapply(ex, dim)</span><br><span class="line"></span><br><span class="line">bootstrap(mtcars, <span class="number">100</span>)%&gt;%</span><br><span class="line"> map( ~ lm(mpg ~ wt, data = .))%&gt;%</span><br><span class="line"> map_df( broom::tidy)</span><br></pre></td></tr></table></figure><h2 id="交叉验证抽样"><a class="markdownIt-Anchor" href="#交叉验证抽样"></a> 交叉验证抽样</h2><p><code>bootstrap(data, n, id = &quot;.id&quot;)</code> 生成n个bootstrap副本<br><code>crossv_kfold(data, k = 5, id = &quot;.id&quot;)</code>将数据拆分为k独占分区，并将每个分区用于测试训练拆分<br><code>crossv_mc(data, n, test = 0.2, id = &quot;.id&quot;)</code>生成n组数据，交叉验证模型，test为测试集比例</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bootstrap</span></span><br><span class="line">boot &lt;- bootstrap(mtcars, <span class="number">100</span>)</span><br><span class="line"><span class="comment"># k-fold cross-validation</span></span><br><span class="line">cv1 &lt;- crossv_kfold(mtcars, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># Monte Carlo cross-validation</span></span><br><span class="line">cv2 &lt;- crossv_mc(mtcars, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">crossv_mc(mtcars, <span class="number">100</span>)%&gt;%</span><br><span class="line">  map(cv2$train, ~ lm(mpg ~ wt, data = .))%&gt;%   <span class="comment">#模型</span></span><br><span class="line">  map2_dbl(cv2$test, rmse)%&gt;%</span><br><span class="line">  hist()</span><br></pre></td></tr></table></figure><h2 id="模型质量指标"><a class="markdownIt-Anchor" href="#模型质量指标"></a> 模型质量指标</h2><p><code>rmse(model, data)</code> 均方根误差<br><code>mae(model, data)</code> 平均绝对误差<br><code>rsquare(model, data)</code> R^2预测的方差除以响应的方差<br><code>qae(model, data, probs)</code>误差的分位数</p><h2 id="与模型交互"><a class="markdownIt-Anchor" href="#与模型交互"></a> 与模型交互</h2><p>一组函数使您可以无缝地将预测和残差添加为现有数据框的附加列：<br><code>add_predictions(data, model)</code>向数据框添加预测<br><code>add_residuals(data, model)</code>向数据框添加残差</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df &lt;- tibble::data_frame(</span><br><span class="line">  x = sort(runif(<span class="number">100</span>)),</span><br><span class="line">  y = <span class="number">5</span> * x + <span class="number">0.5</span> * x ^ <span class="number">2</span> + <span class="number">3</span> + rnorm(length(x))</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mod &lt;- lm(y ~ x, data = df)</span><br><span class="line">df %&gt;% add_predictions(mod)</span><br><span class="line">df %&gt;% add_residuals(mod)</span><br></pre></td></tr></table></figure><p>为了可视化目的，通常使用数据中均匀间隔的网格点<br><code>data_grid(data, ..., .model = NULL)</code>展开数据框，包含所有值的组合，对可视化模型有用<br><code>seq_range(x, n, by, trim = NULL, expand = NULL, pretty = FALSE)</code>在矢量范围内生成一个序列</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对连续性变量， seq_range函数很有用</span></span><br><span class="line">mtcars_mod &lt;- lm(mpg ~ wt + cyl + vs, data = mtcars)</span><br><span class="line">data_grid(mtcars, wt = seq_range(wt, <span class="number">10</span>), cyl, vs) %&gt;%   </span><br><span class="line">  add_predictions(mtcars_mod)%&gt;%</span><br><span class="line">  head()</span><br><span class="line"><span class="comment">#&gt; # A tibble: 60 x 4</span></span><br><span class="line"><span class="comment">#&gt;       wt   cyl    vs  pred</span></span><br><span class="line"><span class="comment">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span><br><span class="line"><span class="comment">#&gt;  1  1.51     4     0  28.4</span></span><br><span class="line"><span class="comment">#&gt;  2  1.51     4     1  28.9</span></span><br><span class="line"><span class="comment">#&gt;  3  1.51     6     0  25.6</span></span><br><span class="line"><span class="comment">#&gt;  4  1.51     6     1  26.2</span></span><br><span class="line"><span class="comment">#&gt;  5  1.51     8     0  22.9</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Model Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> modelr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Model Tools)--broom</title>
      <link href="/posts/R/RNotebook(Model-Tools)--broom.html"/>
      <url>/posts/R/RNotebook(Model-Tools)--broom.html</url>
      
        <content type="html"><![CDATA[<h1 id="broomconvert-statistical-analysis-objects-into-tidy-format"><a class="markdownIt-Anchor" href="#broomconvert-statistical-analysis-objects-into-tidy-format"></a> broom：Convert statistical analysis objects into tidy format</h1><p>这个软件包提供了三种完成三种不同类型整理的S3方法：<a href="https://github.com/tidyverse/broom" target="_blank" rel="noopener">GitHub链接</a></p><ul><li><strong>tidy:</strong> 构建一个总结模型或检验整洁的统计信息data.frame。这包括回归中coefficients and p-values，聚类中的每个集群信息per-cluster或multtest函数的每个测试信息per-test等</li><li><strong>augment:</strong> 将列添加到建模的原始数据中。这包括预测，残差和集群分配等(predictions, residuals, and cluster assignments)</li><li><strong>glance:</strong> 构建一个简洁的模型的单行摘要。这通常包含构建整个模型的计算值such as R^2, adjusted R^2, and residual <strong>standard error</strong></li></ul><a id="more"></a><p>考虑一个说明性的例子，对内置mtcars数据集进行线性拟合。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">lmfit &lt;- lm(mpg ~ wt, mtcars)</span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(broom)</span><br><span class="line">tidy(lmfit)</span><br><span class="line"><span class="comment">##          term  estimate std.error statistic      p.value</span></span><br><span class="line"><span class="comment">## 1 (Intercept) 37.285126  1.877627 19.857575 8.241799e-19</span></span><br><span class="line"><span class="comment">## 2          wt -5.344472  0.559101 -9.559044 1.293959e-10</span></span><br><span class="line"></span><br><span class="line">head(augment(lmfit))</span><br><span class="line"><span class="comment">##           .rownames  mpg    wt  .fitted   .se.fit     .resid       .hat</span></span><br><span class="line"><span class="comment">## 1         Mazda RX4 21.0 2.620 23.28261 0.6335798 -2.2826106 0.04326896</span></span><br><span class="line"><span class="comment">## 2     Mazda RX4 Wag 21.0 2.875 21.91977 0.5714319 -0.9197704 0.03519677</span></span><br><span class="line"><span class="comment">## 3        Datsun 710 22.8 2.320 24.88595 0.7359177 -2.0859521 0.05837573</span></span><br><span class="line"><span class="comment">## 4    Hornet 4 Drive 21.4 3.215 20.10265 0.5384424  1.2973499 0.03125017</span></span><br><span class="line"><span class="comment">## 5 Hornet Sportabout 18.7 3.440 18.90014 0.5526562 -0.2001440 0.03292182</span></span><br><span class="line"><span class="comment">## 6           Valiant 18.1 3.460 18.79325 0.5552829 -0.6932545 0.03323551</span></span><br><span class="line"><span class="comment">##     .sigma      .cooksd  .std.resid</span></span><br><span class="line"><span class="comment">## 1 3.067494 1.327407e-02 -0.76616765</span></span><br><span class="line"><span class="comment">## 2 3.093068 1.723963e-03 -0.30743051</span></span><br><span class="line"><span class="comment">## 3 3.072127 1.543937e-02 -0.70575249</span></span><br><span class="line"><span class="comment">## 4 3.088268 3.020558e-03  0.43275114</span></span><br><span class="line"><span class="comment">## 5 3.097722 7.599578e-05 -0.06681879</span></span><br><span class="line"><span class="comment">## 6 3.095184 9.210650e-04 -0.23148309</span></span><br><span class="line"></span><br><span class="line">glance(lmfit)</span><br><span class="line"><span class="comment">##   r.squared adj.r.squared    sigma statistic      p.value df    logLik</span></span><br><span class="line"><span class="comment">## 1 0.7528328     0.7445939 3.045882  91.37533 1.293959e-10  2 -80.01471</span></span><br><span class="line"><span class="comment">##        AIC      BIC deviance df.residual</span></span><br><span class="line"><span class="comment">## 1 166.0294 170.4266 278.3219          30</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Model Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> broom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Parallel Computing)--foreach</title>
      <link href="/posts/R/RNotebook(Parallel-Computing)--foreach.html"/>
      <url>/posts/R/RNotebook(Parallel-Computing)--foreach.html</url>
      
        <content type="html"><![CDATA[<p>foreach为R语言并行运算包</p><a id="more"></a><ul><li>后端支持</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(doParallel) <span class="comment">#为foreah包提供一个并行的后端</span></span><br><span class="line">n_cores&lt;-detectCores(logical=<span class="literal">FALSE</span>)  <span class="comment">#获得物理内核数</span></span><br><span class="line">registerDoParallel(cores=n_cores-<span class="number">1</span>)  <span class="comment">#注册集群</span></span><br></pre></td></tr></table></figure><p><code>stopImplicitCluster()</code>  关闭集群</p><ul><li>foreach</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foreach(<span class="keyword">...</span>,     <span class="comment">#定义ex应执行的次数</span></span><br><span class="line">  .combine,      <span class="comment">#用于处理任务结果的函数（字符 c, cbind, rbind, +, *, 自定义函数），默认返回list</span></span><br><span class="line"> .inorder=<span class="literal">TRUE</span>, </span><br><span class="line"> .multicombine=<span class="literal">FALSE</span>, <span class="comment">#判断.combine 函数是否可以接受两个以上参数</span></span><br><span class="line"> .packages=<span class="literal">NULL</span>)      <span class="comment">#任务所依赖的包（字符向量）</span></span><br></pre></td></tr></table></figure><ul><li><code>%dopar% ex</code> 执行语句集</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example:并行1200棵树的随机森林</span><br><span class="line">foreach(ntree=rep(200,6), .combine=combine, .packages=&quot;randomForest&quot;)</span><br><span class="line">%dopar%  randomForest(x, y, ntree=ntree)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Parallel Computing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> foreach </tag>
            
            <tag> 并行运算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Visualise)--leaflet+leafletCN</title>
      <link href="/posts/R/RNotebook(Visualise)--leaflet+leafletCN.html"/>
      <url>/posts/R/RNotebook(Visualise)--leaflet+leafletCN.html</url>
      
        <content type="html"><![CDATA[<p><img alt="leaflet" data-src="/images/leaflet/logo.png"></p><h1 id="leaflet"><a class="markdownIt-Anchor" href="#leaflet"></a> leaflet</h1><p>Leaflet是一个用于交互式地图的开源JavaScript库。这个R包可以很容易地从R创建Leaflet地图。<br>语法：leaflet通过管道操作<code>%&gt;%</code>叠加图层作图。<br><a href="http://rstudio.github.io/leaflet/" target="_blank" rel="noopener">官网链接</a></p><a id="more"></a><h2 id="基本用法"><a class="markdownIt-Anchor" href="#基本用法"></a> 基本用法</h2><p>您使用以下基本步骤创建Leaflet地图：</p><ol><li>通过<code>leaflet()</code>调用创建地图小部件。</li><li>通过使用层功能（例如，addTiles，addMarkers，addPolygons）添加层到地图，来修改窗口小部件的地图。</li><li>根据需要重复步骤2。</li><li>打印地图小部件以显示它。</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(leaflet)</span><br><span class="line">m &lt;- leaflet() %&gt;%</span><br><span class="line">  addTiles() %&gt;%  <span class="comment"># Add default OpenStreetMap map tiles</span></span><br><span class="line">  addMarkers(lng=<span class="number">174.768</span>, lat=-<span class="number">36.852</span>, popup=<span class="string">"The birthplace of R"</span>)</span><br><span class="line">m  <span class="comment"># Print the map</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/map.png"></p><h2 id="map-widget地图控件"><a class="markdownIt-Anchor" href="#map-widget地图控件"></a> Map Widget：地图控件</h2><blockquote><p><a href="http://blog.csdn.net/itas109/article/details/70054588?locationNum=10&amp;fps=1" target="_blank" rel="noopener">已整理的组件用法链接</a></p></blockquote><p><strong>Initialization (初始化)</strong></p><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>leaflet()</td><td>标准函数</td></tr><tr><td>center</td><td>Initial geographic center of the map</td></tr><tr><td>zoom</td><td>Initial map zoom level</td></tr><tr><td>minZoom</td><td>Minimum zoom level of themap</td></tr><tr><td>maxZoom</td><td>Maximum zoom level of thema</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">leaflet(data = <span class="literal">NULL</span>,width = <span class="literal">NULL</span>, height = <span class="literal">NULL</span>, </span><br><span class="line">  padding = <span class="number">0</span>,options = leafletOptions())</span><br></pre></td></tr></table></figure><p><strong>Map Methods (作图方法)</strong></p><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>setView(map,lng,lat,zoom,options=list()) )</td><td>设置地图视图的中心和缩放级别</td></tr><tr><td>fitBounds(map, lng1, lat1, lng2, lat2)</td><td>设定边界经纬度</td></tr><tr><td>clearBounds(map)</td><td>清除边界，从地图元素中自动设定</td></tr></tbody></table><p><strong>Data Object (数据对象)</strong></p><p><strong>leaflet()<strong>图层和</strong>map</strong>图层都有一个data参数，用来接收空间数据，data的格式如下：</p><ul><li><strong>Base R</strong> : data.frame对象</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> df &lt;-data.frame(lat = <span class="keyword">...</span>, lng= <span class="keyword">...</span> ) </span><br><span class="line">leaflet(df) %&gt;% addTiles() %&gt;% addCircles()</span><br></pre></td></tr></table></figure><ul><li><p><strong>sp package</strong> library(sp) Useful functions<br><code>SpatialPoints, SpatialLines, SpatialPolygons, ...</code></p></li><li><p><strong>maps package</strong> library(maps)</p></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mapStates &lt;-map(<span class="string">"state"</span>, fill = <span class="literal">TRUE</span>, plot = <span class="literal">FALSE</span>)</span><br><span class="line">leaflet(mapStates) %&gt;% </span><br><span class="line">  addTiles() %&gt;% </span><br><span class="line">  addPolygons(fillColor = topo.colors(<span class="number">10</span>, alpha = <span class="literal">NULL</span>), stroke = <span class="literal">FALSE</span>)`</span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(maps)</span><br><span class="line">mapStates = map(<span class="string">"state"</span>, fill = <span class="literal">TRUE</span>, plot = <span class="literal">FALSE</span>)</span><br><span class="line">leaflet(data = mapStates) %&gt;% addTiles() %&gt;%</span><br><span class="line">  addPolygons(fillColor = topo.colors(<span class="number">10</span>, alpha = <span class="literal">NULL</span>), stroke = <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/us_map.png"></p><h2 id="basemaps底图"><a class="markdownIt-Anchor" href="#basemaps底图"></a> Basemaps：底图</h2><p><code>addTiles()</code> 添加地图瓦片，默认OpenStreetMap图块<br><code>addProviderTiles(map, provider)</code> 添加<a href="http://leaflet-extras.github.io/leaflet-providers/preview/index.html" target="_blank" rel="noopener">第三方图块</a><br><code>addWMSTiles()</code> 添加WMS (Web Map Service) 图块</p><blockquote><p>names(providers) : 查看所有第三方图块<br>参数provider = c(providers$Stamen.Toner, CartoDB.Positron, Esri.NatGeoWorldMap)</p></blockquote><p><img alt data-src="/images/leaflet/basemap.png"></p><h2 id="markers标记"><a class="markdownIt-Anchor" href="#markers标记"></a> Markers：标记</h2><p>接收经纬度坐标latitude/longitude ，标记出icons or  circles，data数据来自向量或已赋值data.frame或sp对象。</p><p><strong>1. Icon Markers</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加默认标记</span></span><br><span class="line">addMarkers(map, lng = <span class="literal">NULL</span>, lat = <span class="literal">NULL</span>,icon = <span class="literal">NULL</span>, </span><br><span class="line">  popup = <span class="literal">NULL</span>, label = <span class="literal">NULL</span>,clusterOptions = <span class="literal">NULL</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">#定制标记</span></span><br><span class="line">makeIcon/icons(iconUrl, iconWidth, iconHeight, iconAnchorX, iconAnchorY, shadowUrl, shadowWidth, shadowHeight, <span class="keyword">...</span> ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建图表列表，通过位置或名称从该列表中进行选择</span></span><br><span class="line">iconList(icon1= makeIcon(…), icon2= makeIcon(…)) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义标记</span></span><br><span class="line">addAwesomeMarkers, makeAwesomeIcon, awesomeIcons, awesomeIconList</span><br></pre></td></tr></table></figure><blockquote><p>addMarkers()参数：<br>icon, popup : 点击时要显示的消息<br>label : 鼠标静止时显示的信息<br>clusterOptions = markerClusterOptions()  : 大量标记时集群显示选项</p></blockquote><p><strong>示例 1</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认markers</span></span><br><span class="line">data(quakes) <span class="comment"># Show first 20 rows from the `quakes` dataset</span></span><br><span class="line">leaflet(data = quakes[<span class="number">1</span>:<span class="number">20</span>,]) %&gt;% addTiles() %&gt;%</span><br><span class="line">  addMarkers(~long, ~lat, popup = ~as.character(mag), label = ~as.character(mag))</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/marker1.png"></p><p><strong>示例 2</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">quakes1 &lt;- quakes[<span class="number">1</span>:<span class="number">10</span>,]</span><br><span class="line"></span><br><span class="line">leafIcons &lt;- icons(</span><br><span class="line">  iconUrl = ifelse(quakes1$mag &lt; <span class="number">4.6</span>,</span><br><span class="line">    <span class="string">"http://leafletjs.com/examples/custom-icons/leaf-green.png"</span>,</span><br><span class="line">    <span class="string">"http://leafletjs.com/examples/custom-icons/leaf-red.png"</span></span><br><span class="line">  ),</span><br><span class="line">  iconWidth = <span class="number">38</span>, iconHeight = <span class="number">95</span>,</span><br><span class="line">  iconAnchorX = <span class="number">22</span>, iconAnchorY = <span class="number">94</span>,</span><br><span class="line">  shadowUrl = <span class="string">"http://leafletjs.com/examples/custom-icons/leaf-shadow.png"</span>,</span><br><span class="line">  shadowWidth = <span class="number">50</span>, shadowHeight = <span class="number">64</span>,</span><br><span class="line">  shadowAnchorX = <span class="number">4</span>, shadowAnchorY = <span class="number">62</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">leaflet(data = quakes1) %&gt;% addTiles() %&gt;%</span><br><span class="line">  addMarkers(~long, ~lat, icon = leafIcons)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/marker2.png"></p><p><strong>示例 3</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">leaflet(quakes) %&gt;% addTiles() %&gt;% addMarkers(</span><br><span class="line">  clusterOptions = markerClusterOptions()</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img alt="cl" data-src="/images/leaflet/marker3.png"></p><p><strong>2. Circle Markers</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addCircleMarkers(map, color, radius, stroke, opacity, <span class="keyword">...</span> )</span><br><span class="line"><span class="comment">#设定原标记的颜色，半径，点击，模糊度</span></span><br></pre></td></tr></table></figure><p><strong>示例 4</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a palette that maps factor levels to colors</span></span><br><span class="line">pal &lt;- colorFactor(c(<span class="string">"navy"</span>, <span class="string">"red"</span>), domain = c(<span class="string">"ship"</span>, <span class="string">"pirate"</span>))</span><br><span class="line"></span><br><span class="line">leaflet(df) %&gt;% addTiles() %&gt;%</span><br><span class="line">  addCircleMarkers(</span><br><span class="line">    radius = ~ifelse(type == <span class="string">"ship"</span>, <span class="number">6</span>, <span class="number">10</span>),</span><br><span class="line">    color = ~pal(type),</span><br><span class="line">    stroke = <span class="literal">FALSE</span>, fillOpacity = <span class="number">0.5</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/marker4.png"></p><h2 id="popups-and-labels弹出窗口和标签"><a class="markdownIt-Anchor" href="#popups-and-labels弹出窗口和标签"></a> Popups and Labels：弹出窗口和标签</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">addPopups(map, lng, lat, ...content..., options)<span class="comment">#添加标准弹出窗口</span></span><br><span class="line"><span class="comment"># options = popupOptions(closeButton=FALSE)</span></span><br><span class="line"></span><br><span class="line">addMarkers(<span class="keyword">...</span>, popup, <span class="keyword">...</span> ) <span class="comment">#在markers中添加窗口</span></span><br><span class="line">addMarkers(<span class="keyword">...</span>, label, labelOptions... ) <span class="comment">#在markers中添加标签 </span></span><br><span class="line"><span class="comment"># labelOptions = labelOptions(noHide,textOnly,textsize,direction,style) </span></span><br><span class="line"></span><br><span class="line">addLabelOnlyMarkers() <span class="comment">#只添加标签</span></span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">content &lt;- paste(sep = <span class="string">"&lt;br/&gt;"</span>,</span><br><span class="line">  <span class="string">"&lt;b&gt;&lt;a href='http://www.samurainoodle.com'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;"</span>,</span><br><span class="line">  <span class="string">"606 5th Ave. S"</span>,</span><br><span class="line">  <span class="string">"Seattle, WA 98138"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">leaflet() %&gt;% addTiles() %&gt;%</span><br><span class="line">  addPopups(-<span class="number">122.327298</span>, <span class="number">47.597131</span>, content,</span><br><span class="line">    options = popupOptions(closeButton = <span class="literal">FALSE</span>)</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/popup.png"></p><h2 id="lines-and-shapes线条和几何形状"><a class="markdownIt-Anchor" href="#lines-and-shapes线条和几何形状"></a> Lines and Shapes：线条和几何形状</h2><p><strong>Polygons and Polylines</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addPolygons(map, lng = <span class="literal">NULL</span>, lat = <span class="literal">NULL</span> ,</span><br><span class="line">  color = <span class="string">"03F"</span>, weight = <span class="number">5</span>, opacity = <span class="number">0.5</span>,    <span class="comment">#线条颜色，粗细，不透明度</span></span><br><span class="line">  fill = <span class="literal">TRUE</span>, fillColor = color, fillOpacity = <span class="number">0.2</span>, </span><br><span class="line">  popup = <span class="literal">NULL</span>,highlightOptions,<span class="keyword">...</span>)</span><br><span class="line"><span class="comment"># highlightOptions(color, weight=2, bringToFront=TRUE) 高亮图形</span></span><br><span class="line"><span class="comment"># 使用rmapshaper::ms_simplify 简化复杂的图形</span></span><br></pre></td></tr></table></figure><p><strong>Circles and Rectangles</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addCircles(map,lng = <span class="literal">NULL</span>,lat = <span class="literal">NULL</span>,radius = <span class="number">10</span>,<span class="keyword">...</span>)<span class="comment"># 圆形，半径以米为单位</span></span><br><span class="line">addRectangles(map, lng1, lat1, lng2, lat2,<span class="keyword">...</span>)<span class="comment"># 对角线参数指定矩形</span></span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cities &lt;- read.csv(textConnection(<span class="string">"</span></span><br><span class="line"><span class="string">City,Lat,Long,Pop</span></span><br><span class="line"><span class="string">Boston,42.3601,-71.0589,645966</span></span><br><span class="line"><span class="string">Hartford,41.7627,-72.6743,125017</span></span><br><span class="line"><span class="string">New York City,40.7127,-74.0059,8406000</span></span><br><span class="line"><span class="string">Philadelphia,39.9500,-75.1667,1553000</span></span><br><span class="line"><span class="string">Pittsburgh,40.4397,-79.9764,305841</span></span><br><span class="line"><span class="string">Providence,41.8236,-71.4222,177994</span></span><br><span class="line"><span class="string">"</span>))</span><br><span class="line"></span><br><span class="line">leaflet(cities) %&gt;% addTiles() %&gt;%</span><br><span class="line">  addCircles(lng = ~Long, lat = ~Lat, weight = <span class="number">1</span>,</span><br><span class="line">    radius = ~sqrt(Pop) * <span class="number">30</span>, popup = ~City</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/leaflet/circle.png"></p><h2 id="其他组件"><a class="markdownIt-Anchor" href="#其他组件"></a> 其他组件</h2><table><thead><tr><th>组件</th><th>说明</th></tr></thead><tbody><tr><td>addLegend()</td><td>图例</td></tr><tr><td>addMeasure()</td><td>测量插件</td></tr><tr><td>addGraticule()</td><td>网格线</td></tr><tr><td>addTerminator()</td><td>日夜线</td></tr><tr><td>addMiniMap()</td><td>迷你地图</td></tr></tbody></table><h2 id="geojson-and-topojson"><a class="markdownIt-Anchor" href="#geojson-and-topojson"></a> GeoJSON and TopoJSON</h2><p>有两种方法来使用GeoJSON/TopoJSON data</p><ul><li>使用geojsonio or rgdal package 读入sp 对象<br><code>geojsonio :: geojson_read (..., what =“ sp ”)</code><br><code>rgdal :: readOGR (...,“ OGRGeoJSON ”)</code></li><li>使用本包 addGeoJSON() and addTopoJSON() 函数<br><code>addTopoJSON / addGeoJSON (... weight , color , fill , opacity , fillOpacity ... )</code></li><li>另外的包RJSONIO and jsonlite 也能很快解析</li></ul><h2 id="shiny-integration"><a class="markdownIt-Anchor" href="#shiny-integration"></a> Shiny Integration</h2><p><strong>UI 部分</strong>：leafletOutput(“name”)<br><strong>server 部分</strong>：renderLeaflet(…)<br><strong>渲染</strong>：renderLeaflet ()  返回Leaflet map 对象</p><p><strong>修改</strong></p><table><thead><tr><th>函数举例</th><th>在serve中修改</th></tr></thead><tbody><tr><td>leafletProxy()</td><td>通用修改</td></tr><tr><td>fitBounds(0, 0, 11, 11)</td><td>配置边界</td></tr><tr><td>addCircles(1:10, 1:10, layerId = LETTERS[1:10])</td><td>添加圆形</td></tr><tr><td>removeShape(c(“B”, “F”))</td><td>移除形状</td></tr><tr><td>clearShapes()</td><td>清除形状</td></tr></tbody></table><p><strong>Inputs/Events</strong></p><ul><li>对象事件<br><code>input$MAPID_OBJCATEGORY_EVENTNAME</code>抓取事件变化的值赋给shiny变量<br><code>OBJCATEGORY</code>:  marker, shape, geojson and topojson<br><code>EVENTNAME</code>:  click, mouseover and mouseout.</li></ul><p>所有这些事件都被设为<code>NULL</code>或<code>list(lat,lng,id)</code>（被触发时）</p><ul><li>地图事件<br><code>input$MAPID_click</code>：地图背景或basemap被敲击时提供<code>list(lat,lng)</code><br><code>input$MAPID_bounds</code>：list(north,east,south,west)<br><code>input$MAPID_zoom</code>：zoom level</li></ul><h1 id="leafletcn"><a class="markdownIt-Anchor" href="#leafletcn"></a> leafletCN</h1><p>leafletCN是一个基于leaflet的中国扩展包, 里面保存了一些适用于中国的区域划分数据以及一些有帮助的函数, 地理区划数据来源于github的[geojson-map-china][chinamap]项目. 数据细分到县级市.<br>[chinamap]: <a href="https://github.com/longwosion/geojson-map-china" target="_blank" rel="noopener">https://github.com/longwosion/geojson-map-china</a></p><h2 id="自带地图数据geojson"><a class="markdownIt-Anchor" href="#自带地图数据geojson"></a> 自带地图数据（GeoJSON）</h2><p><code>regionNames(mapName)</code>返回地图的区域名，细分到县(world,china,city,…)</p><h2 id="绘图leaflet封装"><a class="markdownIt-Anchor" href="#绘图leaflet封装"></a> 绘图（leaflet封装）</h2><p><code>demomap (mapName)</code> 传入地图名绘制地图，等同于(leaflet包， leaflet+addTiles +addPolygons)</p><p><strong>示例</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">demomap(<span class="string">"上海"</span>)</span><br></pre></td></tr></table></figure><p><img alt="sh" data-src="/images/leaflet/sh1.png"></p><p><code>geojsonMap(dat, mapName)</code> 底图+填色地图，dat赋值data.frame(regions,values)</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh = regionNames(<span class="string">"上海"</span>)</span><br><span class="line">dat = data.frame(name = sh,value = rnorm(length(sh)))</span><br><span class="line">geojsonMap(dat,<span class="string">"上海"</span>)</span><br></pre></td></tr></table></figure><p><img alt="sh2" data-src="/images/leaflet/sh2.png"></p><h2 id="辅助函数"><a class="markdownIt-Anchor" href="#辅助函数"></a> 辅助函数</h2><p><code>amap(map)</code>高德地图底图，方便leaflet包调用<br><code>read.geoShape(geojson)</code> 读取一个geojson的对象，保存成sp对象<br><code>leafletGeo(mapName,dat = NULL)</code> 用地图名和数据框把地图和数值组合在一起</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system.file(<span class="string">"geojson/china.json"</span>,package = <span class="string">"leafletCN"</span>)%&gt;%</span><br><span class="line">  read.geoShape()%&gt;%</span><br><span class="line">  plot()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> leaflet </tag>
            
            <tag> leafletCN </tag>
            
            <tag> 交互地图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Visualise)--ggmap+baidumap</title>
      <link href="/posts/R/RNotebook(Visualise)--ggmap+baidumap.html"/>
      <url>/posts/R/RNotebook(Visualise)--ggmap+baidumap.html</url>
      
        <content type="html"><![CDATA[<h1 id="ggmap"><a class="markdownIt-Anchor" href="#ggmap"></a> ggmap</h1><p>ggmap可以轻松地从流行的在线地图服务（如Google Maps， OpenStreetMap，Stamen Maps）获得地图图块，并使用ggplot2绘制<strong>静态地图</strong>。</p><a id="more"></a><h2 id="获取地图图块"><a class="markdownIt-Anchor" href="#获取地图图块"></a> 获取地图图块</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">get_map(location,zoom,scale,maptype,<span class="keyword">source</span>,<span class="keyword">...</span>) <span class="comment">#主函数，返回ggmap对象</span></span><br><span class="line"></span><br><span class="line">get_cloudmademap()<span class="comment">#Get a CloudMade map(需获取密钥)</span></span><br><span class="line">get_googlemap()<span class="comment">#Get a Google Map (谷歌地图国内暂不能用）</span></span><br><span class="line">get_navermap()<span class="comment">#Get a Naver Map</span></span><br><span class="line">get_openstreetmap()<span class="comment">#Get an OpenStreetMap</span></span><br><span class="line">get_stamenmap()<span class="comment">#Get a Stamen Map</span></span><br></pre></td></tr></table></figure><p><strong>主要参数</strong></p><ul><li>location：地址，经度/纬度对（按顺序）或 左/下/右/上经纬度边界框</li><li>zoom = “auto”：地图大小</li><li>scale = “auto”</li><li>maptype：获取地形图，卫星图，路线图，混合图或其他地图</li><li>source =c(“google”, “osm”,  “stamen”, “cloudmade”)：地图来源</li><li>filename = “ggmapTemp”</li><li>color = c(“color”, “bw”)：color (“color”) or black-and-white (“bw”)</li><li>language = “en-EN”：谷歌地图语言</li><li>api_key：api_key for cloudmade maps</li></ul><blockquote><p><strong>maptype参数:</strong>  获取地形图，卫星图，路线图，混合图或其他地图<br>from googlemap： terrain/terrain-background/ satellite/roadmap/hybrid<br>from stamen maps：terrain, “watercolor”, and “toner”<br>from cloudmade maps)：integer (from function get_cloudmademap)</p></blockquote><h2 id="作图函数"><a class="markdownIt-Anchor" href="#作图函数"></a> 作图函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggmap(ggmap, extent = <span class="string">"panel"</span>, base_layer, maprange = <span class="literal">FALSE</span>,</span><br><span class="line">  legend = <span class="string">"right"</span>, padding = <span class="number">0.02</span>, darken = c(<span class="number">0</span>, <span class="string">"black"</span>), <span class="keyword">...</span>)</span><br><span class="line"></span><br><span class="line">qmap(location = <span class="string">"houston"</span>, <span class="keyword">...</span>)   <span class="comment">#将get_map和ggmap结合，用于快速制图</span></span><br><span class="line">qmplot(lon,lat,<span class="keyword">...</span>,data，zoom)    <span class="comment">#相当与ggplot2函数qplot</span></span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li>ggmap：用ggmap对象作图(from function <code>get_map</code>)</li><li>extent = “panel”：地图细节(“normal”, “device”, or “panel”)</li><li>base_layer：ggplot图层</li><li>maprange = FALSE：与base_layer配合使用，定义x和y限制</li><li>legend = “right”：<code>left/right/bottom/top/bottomleft/bottomright/topleft/topright</code><br><code>none</code>(当extent=&quot;device&quot;时使用)</li><li>padding = 0.02：距离 from legend to corner(和legend一起使用)</li><li>darken = c(0, “black”)</li></ul><p><strong>示例：一般作图</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">us &lt;- c(left = -<span class="number">125</span>, bottom = <span class="number">25.75</span>, right = -<span class="number">67</span>, top = <span class="number">49</span>)</span><br><span class="line">map &lt;- get_stamenmap(us, zoom = <span class="number">5</span>, maptype = <span class="string">"toner-lite"</span>)</span><br><span class="line">ggmap(map)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/us_map.png"></p><p><strong>示例：qmplot作图</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"dplyr"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"forcats"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># define helper</span></span><br><span class="line">`%notin%` &lt;- <span class="keyword">function</span>(lhs, rhs) !(lhs %<span class="keyword">in</span>% rhs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># reduce crime to violent crimes in downtown houston</span></span><br><span class="line">violent_crimes &lt;- crime %&gt;% </span><br><span class="line">  filter(</span><br><span class="line">    offense %notin% c(<span class="string">"auto theft"</span>, <span class="string">"theft"</span>, <span class="string">"burglary"</span>),</span><br><span class="line">    -<span class="number">95.39681</span> &lt;= lon &amp; lon &lt;= -<span class="number">95.34188</span>,</span><br><span class="line">     <span class="number">29.73631</span> &lt;= lat &amp; lat &lt;=  <span class="number">29.78400</span></span><br><span class="line">  ) %&gt;% </span><br><span class="line">  mutate(</span><br><span class="line">    offense = fct_drop(offense),</span><br><span class="line">    offense = fct_relevel(offense, </span><br><span class="line">      c(<span class="string">"robbery"</span>, <span class="string">"aggravated assault"</span>, <span class="string">"rape"</span>, <span class="string">"murder"</span>)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment">#qmplot函数作图</span></span><br><span class="line">qmplot(lon, lat, data = violent_crimes, maptype = <span class="string">"toner-lite"</span>, geom = <span class="string">"density2d"</span>, color = I(<span class="string">"red"</span>))  <span class="comment">#geom参数添加图层</span></span><br><span class="line"></span><br><span class="line">robberies &lt;- violent_crimes %&gt;% filter(offense == <span class="string">"robbery"</span>)</span><br><span class="line">qmplot(lon, lat, data = violent_crimes, geom = <span class="string">"blank"</span>, </span><br><span class="line">  zoom = <span class="number">15</span>, maptype = <span class="string">"toner-background"</span>, darken = <span class="number">.7</span>, legend = <span class="string">"topleft"</span></span><br><span class="line">) +</span><br><span class="line">  stat_density_2d(aes(fill = ..level..), geom = <span class="string">"polygon"</span>, alpha = <span class="number">.3</span>, color = <span class="literal">NA</span>) +  <span class="comment">#添加图层</span></span><br><span class="line">  scale_fill_gradient2(<span class="string">"Robbery\nPropensity"</span>, low = <span class="string">"white"</span>, mid = <span class="string">"yellow"</span>, high = <span class="string">"red"</span>, midpoint = <span class="number">650</span>) <span class="comment">#设置标尺</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/qmplot.png"><img alt data-src="/images/ggplot2/qmplot2.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#刻面</span></span><br><span class="line">qmplot(lon, lat, data = violent_crimes, maptype = <span class="string">"toner-background"</span>, color = offense) + </span><br><span class="line">  facet_wrap(~ offense)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取欧洲地图</span></span><br><span class="line">europe &lt;- c(left = -<span class="number">12</span>, bottom = <span class="number">35</span>, right = <span class="number">30</span>, top = <span class="number">63</span>)</span><br><span class="line">get_stamenmap(europe, zoom = <span class="number">5</span>) %&gt;% ggmap()</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/ggmap1.png"><img alt data-src="/images/ggplot2/ggmap2.png"></p><h2 id="经纬度信息"><a class="markdownIt-Anchor" href="#经纬度信息"></a> 经纬度信息</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#返回经纬度信息（谷歌地图国内暂不能用）</span></span><br><span class="line">geocode(location, output = c(<span class="string">"latlon"</span>, <span class="string">"latlona"</span>, <span class="string">"more"</span>, <span class="string">"all"</span>),   </span><br><span class="line">  <span class="keyword">source</span> = c(<span class="string">"google"</span>, <span class="string">"dsk"</span>)) <span class="comment">#参数source：地理位置编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#经纬度反编码（谷歌地图国内暂不能用）</span></span><br><span class="line">revgeocode(location, output = c(<span class="string">"address"</span>, <span class="string">"more"</span>, <span class="string">"all"</span>) </span><br><span class="line"><span class="comment">#编码信息，传递给geocode使用（谷歌地图国内暂不能用）</span></span><br><span class="line">mutate_geocode(data，location)</span><br></pre></td></tr></table></figure><h2 id="从google-maps获取路线图"><a class="markdownIt-Anchor" href="#从google-maps获取路线图"></a> 从Google Maps获取路线图</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">route(from, to, mode = c(<span class="string">"driving"</span>, <span class="string">"walking"</span>, <span class="string">"bicycling"</span>, <span class="string">"transit"</span>),</span><br><span class="line">  structure = c(<span class="string">"legs"</span>, <span class="string">"route"</span>), output = c(<span class="string">"simple"</span>, <span class="string">"all"</span>)) </span><br><span class="line">  <span class="comment">#（谷歌地图国内暂不能用）</span></span><br></pre></td></tr></table></figure><h2 id="使用google-maps计算地图距离"><a class="markdownIt-Anchor" href="#使用google-maps计算地图距离"></a> 使用Google Maps计算地图距离</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mapdist(from, to, mode = c(<span class="string">"driving"</span>, <span class="string">"walking"</span>, <span class="string">"bicycling"</span>), </span><br><span class="line">  output = c(<span class="string">"simple"</span>, <span class="string">"all"</span>) <span class="comment">#（谷歌地图国内暂不能用）</span></span><br></pre></td></tr></table></figure><h2 id="google认证"><a class="markdownIt-Anchor" href="#google认证"></a> Google认证</h2><p>如果您拥有Google API密钥，则可以超出Google对查询的标准限制。</p><hr><h1 id="baidumap"><a class="markdownIt-Anchor" href="#baidumap"></a> baidumap</h1><p>为百度地图API提供R接口，和ggmap一样，但从百度api而不是谷歌或openstreet获取地图。</p><h2 id="密钥"><a class="markdownIt-Anchor" href="#密钥"></a> 密钥</h2><p>需要从 <a href="http://lbsyun.baidu.com/apiconsole/ke" target="_blank" rel="noopener">lbsyun.baidu.com</a>申请密钥。然后在R注册你的钥匙。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(baidumap)</span><br><span class="line">options(baidumap.key = <span class="string">'XXX fill your key here XXX'</span>)</span><br></pre></td></tr></table></figure><h2 id="从坐标数据获取位置"><a class="markdownIt-Anchor" href="#从坐标数据获取位置"></a> 从坐标数据获取位置</h2><p><code>getLocation(location,output = &quot;json&quot;)</code><br>参数ouput： 设置返回数据类型(‘json’, ‘xml’)</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lon = matrix(c(<span class="number">117.93780</span>, <span class="number">24.55730</span>, <span class="number">117.93291</span>, <span class="number">24.57745</span>, <span class="number">117.23530</span>, <span class="number">24.64210</span>, <span class="number">117.05890</span>, <span class="number">24.74860</span>), byrow=<span class="literal">T</span>, ncol=<span class="number">2</span>)</span><br><span class="line"><span class="comment">## json </span></span><br><span class="line">location_json = getLocation(lon[<span class="number">1</span>,], output=<span class="string">'json'</span>)</span><br><span class="line"><span class="comment">## formatted</span></span><br><span class="line">location = getLocation(lon[<span class="number">1</span>, ], formatted = <span class="literal">T</span>)</span><br></pre></td></tr></table></figure><h2 id="从地址获取坐标数据"><a class="markdownIt-Anchor" href="#从地址获取坐标数据"></a> 从地址获取坐标数据</h2><p><code>getCoordinate(address, city = NULL,output = &quot;json&quot;,formatted = F)</code>#返回坐标或初始信息<br>参数ouput：设置返回数据类型(‘json’, ‘xml’)</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getCoordinate(<span class="string">'北京大学'</span>, output=<span class="string">'xml'</span>) <span class="comment"># xml</span></span><br><span class="line">getCoordinate(<span class="string">'北京大学'</span>, formatted = <span class="literal">T</span>) <span class="comment"># character</span></span><br><span class="line">getCoordinate(c(<span class="string">'北京大学'</span>, <span class="string">'清华大学'</span>), formatted = <span class="literal">T</span>) <span class="comment"># matrix</span></span><br></pre></td></tr></table></figure><h2 id="获取百度地图图块"><a class="markdownIt-Anchor" href="#获取百度地图图块"></a> 获取百度地图图块</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getBaiduMap(location, width = <span class="number">400</span>, height = <span class="number">400</span>, zoom = <span class="number">10</span>, scale = <span class="number">2</span>,</span><br><span class="line">  color = <span class="string">"color"</span>, messaging = <span class="literal">TRUE</span>) <span class="comment"># 返回ggmap对象</span></span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li>location：中心坐标或位置字符，</li><li>width, height, zoom：图块大小</li><li>scale：像素数的乘法因子</li><li>color ：color or “bw”,(color or black-and-white)</li><li>messaging：提示信息</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getBaiduMap(<span class="string">'中国'</span>,zoom = <span class="number">4</span>) %&gt;% ggmap</span><br></pre></td></tr></table></figure><p><img alt="china" data-src="/images/ggplot2/baidumap_china.png"></p><h2 id="搜索"><a class="markdownIt-Anchor" href="#搜索"></a> 搜索</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getPlace(place = <span class="literal">NULL</span>, city = <span class="string">"北京"</span>, page_size = <span class="number">20</span>, pages = <span class="literal">Inf</span>,</span><br><span class="line">  scope = <span class="number">1</span>, verbose = <span class="literal">TRUE</span>)  <span class="comment">#用 baiduAPI搜索信息</span></span><br><span class="line"></span><br><span class="line">getRoute(origin, destination, mode,origin_region, destination_region)  <span class="comment">#获取路线图</span></span><br></pre></td></tr></table></figure><p><strong>getRoute参数</strong></p><ul><li>origin, destination：初始位置和目的地</li><li>mode：出行方式，‘driving’(default), ‘walking’, or ‘transit’</li><li>region：城市</li><li>origin_region, destination_region：不在一个城市时，设置原始城市和目的地城市</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; getPlace(<span class="string">'麦当劳'</span>, <span class="string">'上海'</span>)%&gt;%names</span><br><span class="line">Get <span class="number">33</span> records, <span class="number">2</span> page. </span><br><span class="line">    Getting  <span class="number">0</span> th page </span><br><span class="line">    Getting  <span class="number">1</span> th page </span><br><span class="line">Done! </span><br><span class="line">[<span class="number">1</span>] <span class="string">"name"</span>      <span class="string">"address"</span>   <span class="string">"lat"</span>       <span class="string">"lon"</span>       <span class="string">"telephone"</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; bjMap = getBaiduMap(<span class="string">'北京'</span>, color=<span class="string">'bw'</span>)</span><br><span class="line">&gt;&gt;&gt; df = getRoute(<span class="string">'首都国际机场'</span>, <span class="string">'北京南苑机场'</span>, region = <span class="string">'北京'</span>)</span><br><span class="line">&gt;&gt;&gt; ggmap(bjMap) + </span><br><span class="line">       geom_path(data = df, aes(lon, lat), alpha = <span class="number">0.5</span>, col = <span class="string">'red'</span>)</span><br></pre></td></tr></table></figure><p><img alt="route" data-src="/images/ggplot2/baidumap_route.png"></p><h2 id="百度地理编码"><a class="markdownIt-Anchor" href="#百度地理编码"></a> 百度地理编码</h2><p><code>geoconv(geocode, from = 3, to = 5)</code>  别的地理编码转化成百度地理编码</p>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 地图 </tag>
            
            <tag> ggmap </tag>
            
            <tag> baidumap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Visualise)--RColorBrewer and extrafont</title>
      <link href="/posts/R/RNotebook(Visualise)--RColorBrewer-and-extrafont.html"/>
      <url>/posts/R/RNotebook(Visualise)--RColorBrewer-and-extrafont.html</url>
      
        <content type="html"><![CDATA[<h1 id="rcolorbrewer调色板"><a class="markdownIt-Anchor" href="#rcolorbrewer调色板"></a> RColorBrewer：调色板</h1><p>RColorBrewer是一个R包，使用网站 <a href="http://colorbrewer2.org/" target="_blank" rel="noopener">http://colorbrewer2.org/</a> 提供的颜色。</p><p>颜色分了三个区域，分别对应的是三个类型：</p><ol><li>seq：序列型，单渐变色，一种主色由浅到深</li><li>qual：离散型，区分色，几种区分度很高的颜色组合</li><li>div：极端型，双渐变色，一种颜色到另外一种颜色的渐变，有两种主色</li></ol><a id="more"></a><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">display.brewer.all(type=<span class="string">"seq/div/qual"</span>) <span class="comment"># 查看调色板所有颜色</span></span><br><span class="line">brewer.pal(n, name) <span class="comment"># 颜色提取</span></span><br></pre></td></tr></table></figure><blockquote><p>Base R调色板：<br><code>base::colours()</code> 查看所有颜色的名字<br><code>rainbow(n,alpha=1)</code>, <code>heat.colors</code>, <code>terrain.colors</code>, <code>topo.colors</code>, <code>cm.colors</code>,etc</p></blockquote><hr><h1 id="extrafont字体"><a class="markdownIt-Anchor" href="#extrafont字体"></a> extrafont：字体</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">font_import() <span class="comment"># 将系统字体导入R</span></span><br><span class="line">fonts() <span class="comment"># 查看导入R中的字体</span></span><br></pre></td></tr></table></figure><p><strong>使用字体：</strong></p><ol><li><p>加载包(导入字体): <code>library(extrafont)</code></p></li><li><p>加载字体:</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">windowsFonts( </span><br><span class="line">  f1=windowsFont(”family1”),</span><br><span class="line">  f2=windowsFont(”family2”))</span><br></pre></td></tr></table></figure></li><li><p>使用字体: （假设已经绘制ggplot2图形p）</p> <figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p+geom_label(family=<span class="string">"f1"</span>)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> RColorBrewer </tag>
            
            <tag> extrafont </tag>
            
            <tag> 调色板 </tag>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Visualise)--ggplot2</title>
      <link href="/posts/R/RNotebook(Visualise)--ggplot2.html"/>
      <url>/posts/R/RNotebook(Visualise)--ggplot2.html</url>
      
        <content type="html"><![CDATA[<h1 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h1><p><a href="http://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2</a> 基于<strong>the grammar of graphics</strong>思想，通过数据集、几何对象和坐标系统建立图形。</p><p>所有的ggplot2绘图都以<code>ggplot()</code>开始， 默认由<code>aes()</code>将数据集映射至几何对象。在行尾<code>+</code>添加图层：几何，比例尺，坐标和面等。要将绘图保存，请使用<code>ggsave()</code></p><a id="more"></a><p>完整的ggplot2图形包括：</p><ul><li><code>ggplot(data,aes(...))</code>: Create a new ggplot (required)</li><li><code>geom_&lt;FUNC&gt;(aes(...),data,stat,position)</code>: Geometric object (required)<br><code>or stat_&lt;FUNC&gt;(aes(...),data,geom,position)</code>: Statistical transformation (required)</li><li><code>coord_&lt;FUNC&gt;(...)</code>: Coordinate systems</li><li><code>facet_&lt;FUNC&gt;(...)</code>: Facetting</li><li><code>scale_&lt;FUNC&gt;(...)</code>: Scales</li><li><code>theme_&lt;FUNC&gt;(...)</code>:  Themes</li></ul><blockquote><p><code>data, aes</code>参数可以在<code>ggplot, geom_&lt;FUNC&gt;, stat_&lt;FUNC&gt;</code>任一函数中加载</p></blockquote><p><code>aes()</code> 控制数据中的<strong>变量</strong>映射到几何图形。<code>aes()</code>映射可以在<code>ggplot()</code>和<code>geom</code>图层中设置。常用参数：alpha, color, group, linetype, size</p><p><code>ggsave(filename, plot = last_plot(),path=NULL,width, height, units= c(&quot;in&quot;, &quot;cm&quot;, &quot;mm&quot;))</code>保存ggplot2图形，默认保存最后一个图</p><p><code>qplot(),quickplot()</code>: Quick plot</p><hr><h1 id="geoms"><a class="markdownIt-Anchor" href="#geoms"></a> Geoms</h1><p>用geom函数表现图形，geom中的aes参数映射数据，每一个geom函数添加一个图层。</p><table><thead><tr><th style="text-align:left">geom常用几何参数</th><th style="text-align:left">常量赋值</th></tr></thead><tbody><tr><td style="text-align:left">color/fill</td><td style="text-align:left">color/fill=NA 消除线条或填充</td></tr><tr><td style="text-align:left">alpha</td><td style="text-align:left">0 &lt;= alpha &lt;= 1</td></tr><tr><td style="text-align:left">linetype</td><td style="text-align:left">线条形式(1:6)</td></tr><tr><td style="text-align:left">size</td><td style="text-align:left">点的尺寸和线的宽度</td></tr><tr><td style="text-align:left">shape</td><td style="text-align:left">点的形状(0:25)</td></tr></tbody></table><h2 id="基本图形"><a class="markdownIt-Anchor" href="#基本图形"></a> 基本图形</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_blank()</td><td style="text-align:left"></td><td style="text-align:left">空白</td></tr><tr><td style="text-align:left">geom_curve(aes(yend,xend,curvature))<br>geom_segment(aes(yend,xend))</td><td style="text-align:left">x, xend, y, yend, alpha, angle, color, curvature(曲率), linetype, size, arrow</td><td style="text-align:left">曲线<br>线段</td></tr><tr><td style="text-align:left">geom_path(lineend, linejoin, linemitre)</td><td style="text-align:left">x, y, alpha, color, group, linetype, size(x为分类变量时必须设置group=1)</td><td style="text-align:left">路径</td></tr><tr><td style="text-align:left">geom_polygon(aes(group))</td><td style="text-align:left">x, y, alpha, color, fill, group, linetype, size</td><td style="text-align:left">多边形</td></tr><tr><td style="text-align:left">geom_rect(aes(xmin, ymin, xmax, ymax))</td><td style="text-align:left">xmax, xmin, ymax, ymin, alpha, color, fill, linetype, size</td><td style="text-align:left">矩形</td></tr><tr><td style="text-align:left">geom_ribbon(aes(ymin, ymax))</td><td style="text-align:left">x, ymax, ymin, alpha, color, fill, group, linetype, size</td><td style="text-align:left">丝带图</td></tr><tr><td style="text-align:left">geom_abline(aes(intercept, slope))</td><td style="text-align:left">x, y, alpha, color, linetype, size</td><td style="text-align:left">斜线</td></tr><tr><td style="text-align:left">geom_hline(aes(yintercept))</td><td style="text-align:left">x, y, alpha, color, linetype, size</td><td style="text-align:left">水平线</td></tr><tr><td style="text-align:left">geom_vline(aes(xintercept))</td><td style="text-align:left">x, y, alpha, color, linetype, size</td><td style="text-align:left">垂直线</td></tr><tr><td style="text-align:left">geom_segment(aes(yend, xend))</td><td style="text-align:left">x, y, alpha, color, linetype, size</td><td style="text-align:left">线段</td></tr><tr><td style="text-align:left">geom_spoke(aes(angle, radius))</td><td style="text-align:left">x, y, alpha, color, linetype, size</td><td style="text-align:left">辐条</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">them_blank &lt;- theme(axis.text=element_blank(),</span><br><span class="line">                 axis.title = element_blank()</span><br><span class="line">                 axis.ticks=element_blank())</span><br><span class="line"></span><br><span class="line">p1=ggplot()+</span><br><span class="line">  geom_spoke(aes(x=<span class="number">0</span>,y=<span class="number">0</span>,angle = <span class="number">1</span>:<span class="number">8</span>, radius = <span class="number">5</span>))+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_spoke'</span>)</span><br><span class="line">a &lt;- ggplot(economics, aes(date, unemploy)) </span><br><span class="line">a + geom_ribbon(aes(ymin=unemploy - <span class="number">900</span>, ymax=unemploy + <span class="number">900</span>))+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_ribbon'</span>)</span><br><span class="line">a + geom_path(lineend=<span class="string">"butt"</span>, linejoin=<span class="string">"round"</span>, linemitre=<span class="number">1</span>)+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_path'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/geom_lines.png"></p><h2 id="单变量"><a class="markdownIt-Anchor" href="#单变量"></a> 单变量</h2><p>stat参数 :  <code>bin/count/identity</code></p><ul><li>若x为连续变量：stat= ”bin”</li><li>若x离散变量：stat = “count”或stat = “identity”</li></ul><table><thead><tr><th style="text-align:left">continuous</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_area()</td><td style="text-align:left">x, y, alpha, color, fill,  linetype, size，stat={identity,bin}</td><td style="text-align:left">面积图</td></tr><tr><td style="text-align:left">geom_density(kernel = “gaussian”)</td><td style="text-align:left">x, y, alpha, color, fill, group, linetype, size, weight, <code>adjust=1/2</code>(调整带宽倍率), stat={density,count,scaled (密度估计值)}</td><td style="text-align:left">核密度图</td></tr><tr><td style="text-align:left">geom_dotplot()</td><td style="text-align:left">x, y, alpha, color, fill</td><td style="text-align:left">点状分布图</td></tr><tr><td style="text-align:left">geom_freqpoly()</td><td style="text-align:left">x, y, alpha, color, group, linetype, size</td><td style="text-align:left">频率多边形(类似直方图)</td></tr><tr><td style="text-align:left">geom_histogram(binwidth)</td><td style="text-align:left">x, y, alpha, color, fill, linetype, size, weight</td><td style="text-align:left">直方图</td></tr><tr><td style="text-align:left">geom_qq(aes(sample))</td><td style="text-align:left">x, y, alpha, color, fill, linetype, size, weight</td><td style="text-align:left">qq图(检测正态分布)</td></tr><tr><td style="text-align:left"><strong>discrete</strong></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">geom_bar()</td><td style="text-align:left">x, alpha, color, fill, linetype, size, weight, stat={count,prop (分组比例)}</td><td style="text-align:left">柱状图</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">c &lt;- ggplot(mpg, aes(hwy)); c2 &lt;- ggplot(mpg) </span><br><span class="line">c + geom_density()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_density'</span>)</span><br><span class="line">c + geom_dotplot() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_dotplot'</span>)</span><br><span class="line">c + geom_freqpoly()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_freqpoly'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/one_var.png"></p><h2 id="双变量"><a class="markdownIt-Anchor" href="#双变量"></a> 双变量</h2><table><thead><tr><th style="text-align:left">continuous x <br>continuous y</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_jitter(height , width)</td><td style="text-align:left">x, y, alpha, color, fill, shape, size</td><td style="text-align:left">抖点图（避免重合），stat = “identity”</td></tr><tr><td style="text-align:left">geom_point()</td><td style="text-align:left">x, y, alpha, color, fill, shape, size, stroke</td><td style="text-align:left">散点图stat = “identity”</td></tr><tr><td style="text-align:left">geom_quantile()</td><td style="text-align:left">x, y, alpha, color, group, linetype, size, weight</td><td style="text-align:left">四分位图</td></tr><tr><td style="text-align:left">geom_rug(sides)</td><td style="text-align:left">x, y, alpha, color, linetype, size,sides(地毯位置)</td><td style="text-align:left">地毯图</td></tr><tr><td style="text-align:left">geom_smooth()</td><td style="text-align:left">x, y, alpha, color, fill, group, linetype, size, weight</td><td style="text-align:left">拟合曲线，自动计算变量：y/ymin/ymax/se(标准误)</td></tr></tbody></table><p><code>geom_smooth(method = &quot;auto&quot;, formula = y ~ x)</code></p><blockquote><p>参数：<br>method: eg. “lm”, “glm”, “gam”, “loess”, “rlm”<br>formula :eg. y ~ x, y ~ poly(x, 2), y ~ log(x)<br>se : 是否绘制置信区间（默认为TRUE）<br>level : 用的置信区间水平（默认为95%）</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="keyword">require</span>(quantreg)) install.packages(<span class="string">"quantreg"</span>)<span class="comment">#四分位图必须的包</span></span><br><span class="line">e &lt;- ggplot(mpg, aes(cty, hwy))</span><br><span class="line">e + geom_jitter(height = <span class="number">2</span>, width = <span class="number">2</span>)  +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_jitter'</span>)</span><br><span class="line">e + geom_quantile() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_quantile'</span>)</span><br><span class="line">e + geom_smooth()+</span><br><span class="line">  geom_rug(sides = <span class="string">"bl"</span>)+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_smooth'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/two_vars.png"></p><table><thead><tr><th>两连续变量分布图</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>geom_density2d()</td><td>x, y, alpha, colour, group, linetype, size, fill=…level…(自动计算变量)</td><td>分布密度</td></tr><tr><td>geom_bin2d(binwidth)</td><td>x, y, alpha, color, fill, linetype, size, weight</td><td>矩形箱，stat = “bin2d”</td></tr><tr><td>geom_hex()</td><td>x, y, alpha, colour, fill, size</td><td>六角仓，stat = “binhex”</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="keyword">require</span>(hexbin)) install.packages(<span class="string">"hexbin"</span>)<span class="comment">#六角仓必须的包</span></span><br><span class="line">df &lt;- data.frame(x=rnorm(<span class="number">1000</span>,<span class="number">0</span>,<span class="number">100</span>),y=rnorm(<span class="number">1000</span>,<span class="number">10</span>,<span class="number">50</span>))</span><br><span class="line"></span><br><span class="line">h &lt;- ggplot(df, aes(x, y))</span><br><span class="line">h + geom_bin2d() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_bin2d'</span>)</span><br><span class="line">h + geom_hex()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_hex'</span>)</span><br><span class="line">h + geom_density2d() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_density2d'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/two_con.png"></p><table><thead><tr><th>两连续变量函数图</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>geom_area()</td><td>x, y, alpha, color, fill, linetype, size</td><td>面积图</td></tr><tr><td>geom_line()</td><td>x, y, alpha, color, group, linetype, size</td><td>折线图</td></tr><tr><td>geom_step(direction = “hv”)</td><td>x, y, alpha, color, group, linetype, size</td><td>阶梯图</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">recent &lt;- economics[economics$date &gt; as.Date(<span class="string">"2013-01-01"</span>), ]</span><br><span class="line">p &lt;- ggplot(recent, aes(date, unemploy))</span><br><span class="line"></span><br><span class="line">p + geom_area() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_area'</span>)</span><br><span class="line">p + geom_line()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_line'</span>)</span><br><span class="line">p + geom_step(direction = <span class="string">"hv"</span>) +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_step'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/two_con_fun.png"></p><table><thead><tr><th style="text-align:left">discrete x <br>continuous y</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_col()</td><td style="text-align:left">x, y, alpha, color, fill, group, linetype, size</td><td style="text-align:left">柱状图</td></tr><tr><td style="text-align:left">geom_boxplot()</td><td style="text-align:left">x, y, lower, middle, upper, ymax, ymin, alpha, color, fill, group, linetype, shape, size, weight, notch(是否缺口), width,outlier</td><td style="text-align:left">箱线图</td></tr><tr><td style="text-align:left">geom_dotplot(binaxis = “y”, stackdir = “center”)</td><td style="text-align:left">x, y, alpha, color, fill, group</td><td style="text-align:left">点状分布图（不重合）</td></tr><tr><td style="text-align:left">geom_violin(scale = “area”)</td><td style="text-align:left">x, y, alpha, color, fill, group, linetype, size, weight</td><td style="text-align:left">小提琴图</td></tr><tr><td style="text-align:left">ggforce::geom_sina()</td><td style="text-align:left"></td><td style="text-align:left">点状小提琴图</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">p &lt;-  ggplot(mpg, aes(class, hwy)) </span><br><span class="line"></span><br><span class="line">p +geom_col() +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_col'</span>)</span><br><span class="line">p +geom_boxplot()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_line'</span>)</span><br><span class="line">p +geom_dotplot(binaxis = <span class="string">"y"</span>, stackdir = <span class="string">"center"</span>) +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_dotplot'</span>)</span><br><span class="line">p +geom_violin(scale = <span class="string">"area"</span>)+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_violin'</span>)</span><br><span class="line">p +ggforce::geom_sina()+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_sina'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/two_dis.png"></p><table><thead><tr><th style="text-align:left">discrete x<br>discrete y</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_count()</td><td style="text-align:left">x, y, alpha, color, fill, shape, size, stroke</td><td style="text-align:left">计数图</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(diamonds, aes(cut, color))+</span><br><span class="line">  geom_count()</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/two_dis_count.png"></p><h2 id="三变量"><a class="markdownIt-Anchor" href="#三变量"></a> 三变量</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_contour(aes(z))</td><td style="text-align:left">x, y, z, alpha, colour, group, linetype, size, weight,bins(等高线数量),binwidth(等高线宽度)</td><td style="text-align:left">等高线图， …level…(轮廓高度，自动计算变量)</td></tr><tr><td style="text-align:left">geom_raster(aes(fill))</td><td style="text-align:left">x,y,alpha,fill</td><td style="text-align:left">光栅(热力图)</td></tr><tr><td style="text-align:left">geom_tile(aes(fill))</td><td style="text-align:left">x, y, alpha, color, fill, linetype, size, width</td><td style="text-align:left">瓦片(热力图)</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">p &lt;-  ggplot(faithfuld, aes(waiting, eruptions))</span><br><span class="line"></span><br><span class="line">p +geom_contour(aes(z = density)) +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_contour'</span>)</span><br><span class="line">p +geom_raster(aes(fill = density), hjust=<span class="number">0.5</span>, vjust=<span class="number">0.5</span>, interpolate=<span class="literal">FALSE</span>) +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_raster'</span>)</span><br><span class="line">p + geom_tile(aes(fill = density)) +</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'geom_tile'</span>)</span><br><span class="line">p + geom_raster(aes(fill = density)) +</span><br><span class="line">  geom_contour(aes(z = density),colour = <span class="string">"white"</span>)+</span><br><span class="line">  them_blank+</span><br><span class="line">  ggtitle(<span class="string">'raster+contour'</span>) <span class="comment">#图层顺序很重要</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/three_vars.png"></p><h2 id="文本"><a class="markdownIt-Anchor" href="#文本"></a> 文本</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_text(aes(label), nudge_x, nudge_y, check_overlap = TRUE)</td><td style="text-align:left">x, y, label, alpha, angle, color, family, fontface, hjust, lineheight, size, vjust</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">geom_label(aes(label), nudge_x, nudge_y, check_overlap = TRUE)</td><td style="text-align:left">x, y, label, alpha, angle, color, family, fontface, hjust, lineheight, size, vjust</td><td style="text-align:left">有背景框</td></tr></tbody></table><blockquote><p>参数：<br>nudge_x, nudge_y: 微调<br>check_overlap：是否过重叠<br>vjust,hjust: 对齐方式(0:1)<br>angle: 角度<br>lineheight：行间距<br>family: 字体<br>size: 字体大小<br>fontface: 字体格式(1:4, plain标准,bold加粗,italic斜体,bold.italic)</p></blockquote><p><strong>ggrepel包 : 文字不重叠</strong><br><code>ggrepel:: geom_label_repel()</code><br><code>ggrepel:: geom_text_repel()</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df=data.frame(x=c(1,1,3),y=c(3,2,1),t=c(&apos;A&apos;,&apos;B&apos;,&apos;C&apos;))</span><br><span class="line"></span><br><span class="line">e=ggplot(df,aes(x,y))</span><br><span class="line">e + geom_label(aes(label = t)) +</span><br><span class="line">  them_blank+lims(x=c(0,5),y=c(0,5))+</span><br><span class="line">  ggtitle(&apos;geom_label&apos;)</span><br><span class="line">e + geom_text(aes(label = t)) +</span><br><span class="line">  them_blank+lims(x=c(0,5),y=c(0,5))+</span><br><span class="line">  ggtitle(&apos;geom_text&apos;)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/text.png"></p><h2 id="误差可视化"><a class="markdownIt-Anchor" href="#误差可视化"></a> 误差可视化</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_crossbar(fatten)</td><td style="text-align:left">x, y, ymax, ymin, alpha, color, fill, group, linetype, size</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">geom_errorbar()</td><td style="text-align:left">x, ymax, ymin, alpha, color, group, linetype, size, width (also geom_errorbarh())</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">geom_linerange()</td><td style="text-align:left">x, ymin, ymax, alpha, color, group, linetype, size</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">geom_pointrange()</td><td style="text-align:left">x, y, ymin, ymax, alpha, color, fill, group, linetype, shape, size</td><td style="text-align:left"></td></tr></tbody></table><blockquote><p><code>aes(ymin,ymax)</code> : ymin,ymax需要在aes参数内赋值</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">df &lt;- data.frame(</span><br><span class="line">  trt = factor(c(<span class="string">'A'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'B'</span>)),</span><br><span class="line">  resp = c(<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">  group = factor(c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)),</span><br><span class="line">  upper = c(<span class="number">1.1</span>, <span class="number">5.3</span>, <span class="number">3.3</span>, <span class="number">4.2</span>),</span><br><span class="line">  lower = c(<span class="number">0.8</span>, <span class="number">4.6</span>, <span class="number">2.4</span>, <span class="number">3.6</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">dodge &lt;- position_dodge(width=<span class="number">0.9</span>) <span class="comment">#位置微调</span></span><br><span class="line">p &lt;- ggplot(df, aes(trt, resp, fill = group,ymin = lower, ymax = upper))+</span><br><span class="line">  geom_col(position = dodge)</span><br><span class="line">  </span><br><span class="line">p + geom_crossbar(fatten = <span class="number">2</span>,position = dodge) +</span><br><span class="line">  ggtitle(<span class="string">'geom_crossbar'</span>)</span><br><span class="line">p + geom_errorbar(position = dodge, width = <span class="number">0.25</span>) +</span><br><span class="line">  ggtitle(<span class="string">'geom_errorbar'</span>)</span><br><span class="line">p +geom_linerange(position = dodge) +</span><br><span class="line">  ggtitle(<span class="string">'geom_linerange'</span>)</span><br><span class="line">p +geom_pointrange(position = dodge) +</span><br><span class="line">  ggtitle(<span class="string">'geom_pointrange'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/error.png"></p><h2 id="地图"><a class="markdownIt-Anchor" href="#地图"></a> 地图</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">geom_map(aes(map_id), map)</td><td style="text-align:left">map_id, alpha, color, fill, linetype, size</td><td style="text-align:left">地图</td></tr></tbody></table><blockquote><p>参数：<br>map_id：id/region<br>map: data.frame(x/long, y/lat, id/region) 或sp空间数据<br>Tips:<br><code>sf::st_read</code> 读取sp或json文件<br><code>sf::st_transform</code> 转换sf文件<br>地图素材：<br><a href="https://freevectormaps.com/" target="_blank" rel="noopener">矢量地图素材链接</a><br>shp数据地图：GitHub  ,GADM<br>Json数据地图：阿里云,  百度Echarts</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="keyword">require</span>(maps)) install.packages(<span class="string">"maps"</span>) <span class="comment"># 载入地图包（版本过老）</span></span><br><span class="line">data &lt;- data.frame(murder = USArrests$Murder,state = tolower(rownames(USArrests)))</span><br><span class="line"></span><br><span class="line">map &lt;- maps::map_data(<span class="string">"state"</span>)</span><br><span class="line">ggplot(data, aes(fill = murder))+</span><br><span class="line">  geom_map(aes(map_id = state), map = map) + </span><br><span class="line">  expand_limits(x = map$long, y = map$lat)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/geom_map.png"></p><hr><h1 id="stats"><a class="markdownIt-Anchor" href="#stats"></a> Stats</h1><p>ggplot2还提供一种替代方案，建立一个图层用<code>stat</code>计算新变量 (e.g., count, prop)作图。</p><ul><li>改变geom函数的stat默认值，如<code>geom_bar(stat=&quot;count&quot;)</code></li><li>调用<code>stat_&lt;FUNC&gt;</code>，如 <code>stat_count(geom=&quot;bar&quot;)</code></li><li>用<code>..name..</code>的语法格式，将stat计算变量映射到几何对象，如<code>stat_density2d(aes(fill = ..level..), geom = &quot;polygon&quot;)</code></li></ul><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">参数</th><th style="text-align:left">计算变量</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">stat_bin(binwidth, origin)</td><td style="text-align:left">x, y</td><td style="text-align:left">…count…, …ncount…, …density…, …ndensity…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_count(width = 1)</td><td style="text-align:left">x, y</td><td style="text-align:left">…count…, …prop…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_density(adjust = 1, kernel = “gaussian&quot;)</td><td style="text-align:left">x, y</td><td style="text-align:left">…count…, …density…, …scaled…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td></tr><tr><td style="text-align:left">stat_bin_2d(bins, drop = TRUE)</td><td style="text-align:left">x, y, fill</td><td style="text-align:left">…count…, …density…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_bin_hex(bins)</td><td style="text-align:left">x, y, fill</td><td style="text-align:left">…count…, …density…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_density_2d(contour = TRUE, n = 100)</td><td style="text-align:left">x, y, color, size</td><td style="text-align:left">…level…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_ellipse(level, segments, type = “t”)</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">计算正常置信度椭圆</td></tr><tr><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td></tr><tr><td style="text-align:left">stat_contour(aes(z))</td><td style="text-align:left">x, y, z, order</td><td style="text-align:left">…level…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_summary_hex(aes(z), bins, fun = max)</td><td style="text-align:left">x, y, z, fill</td><td style="text-align:left">…value…</td><td style="text-align:left">六边形</td></tr><tr><td style="text-align:left">stat_summary_2d(aes(z), bins, fun = mean)</td><td style="text-align:left">x, y, z, fill</td><td style="text-align:left">…value…</td><td style="text-align:left">矩形</td></tr><tr><td style="text-align:left">stat_boxplot(coef)</td><td style="text-align:left">x, y</td><td style="text-align:left">…lower…,  …middle…, …upper…, …width… , …ymin…, …ymax…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_ydensity(kernel = “gaussian”, scale = “area&quot;)</td><td style="text-align:left">x, y</td><td style="text-align:left">…density…, …scaled…, …count…, …n…, …violinwidth…, …width…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td></tr><tr><td style="text-align:left">stat_ecdf(n)</td><td style="text-align:left">x, y</td><td style="text-align:left">…x…, …y…</td><td style="text-align:left">计算经验累积分布</td></tr><tr><td style="text-align:left">stat_quantile(quantiles = c(0.1, 0.9), formula = y ~ log(x), method = “rq”)</td><td style="text-align:left">x, y</td><td style="text-align:left">…quantile…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_smooth(method = “lm”, formula = y ~ x, se=T, level=0.95)</td><td style="text-align:left">x, y</td><td style="text-align:left">…se…, …x…, …y…, …ymin…, …ymax…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td><td style="text-align:left">------</td></tr><tr><td style="text-align:left">stat_function(aes(x = -3:3), n = 99,  fun = dnorm, args = list(sd=0.5))</td><td style="text-align:left">x</td><td style="text-align:left">…x…, …y…</td><td style="text-align:left">计算每个x值的函数</td></tr><tr><td style="text-align:left">stat_identity(na.rm = TRUE)</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">保持原样</td></tr><tr><td style="text-align:left">stat_qq(aes(sample=1:100), dist = qt, dparam=list(df=5))</td><td style="text-align:left">sample, x, y</td><td style="text-align:left">…sample…, …theoretical…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_sum()</td><td style="text-align:left">x, y, size</td><td style="text-align:left">…n…, …prop…</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">stat_summary(fun.data = “mean_cl_boot”)</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">将y值汇总在唯一x中</td></tr><tr><td style="text-align:left">stat_summary_bin(fun.y = “mean”, geom = “bar”)</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">将y值汇总在分箱x中</td></tr><tr><td style="text-align:left">stat_unique()</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left">删除重复项</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">1492</span>)</span><br><span class="line">df &lt;- data.frame(</span><br><span class="line">  x = rnorm(<span class="number">100</span>)</span><br><span class="line">)</span><br><span class="line">ggplot(df, aes(x)) + geom_density()+</span><br><span class="line">  stat_function(fun = dnorm, colour = <span class="string">"red"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'density vs. function'</span>)</span><br><span class="line"></span><br><span class="line">ggplot(faithful, aes(waiting, eruptions, color = eruptions &gt; <span class="number">3</span>)) +</span><br><span class="line">  geom_point() +</span><br><span class="line">  stat_ellipse(type = <span class="string">"norm"</span>, linetype = <span class="number">2</span>) +</span><br><span class="line">  stat_ellipse(type = <span class="string">"t"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'stat_ellipse'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/stats.png"></p><h1 id="scales"><a class="markdownIt-Anchor" href="#scales"></a> Scales</h1><p>Scales传递数据给几何对象，改变图形的默认标尺。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot(mpg, aes(fl)) +</span><br><span class="line">  geom_bar(aes(fill = fl))</span><br><span class="line"></span><br><span class="line">p + scale_fill_manual( </span><br><span class="line"><span class="comment"># scale: scale, fill: 几何对象, manual: 预处理的scale类型</span></span><br><span class="line">  values = c(<span class="string">"skyblue"</span>, <span class="string">"royalblue"</span>, <span class="string">"blue"</span>,<span class="string">"navy"</span>), <span class="comment">#scale参数</span></span><br><span class="line">  limits = c(<span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"p"</span>, <span class="string">"r"</span>), <span class="comment">#限制范围</span></span><br><span class="line">  breaks =c(<span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"p"</span>, <span class="string">"r"</span>), <span class="comment">#breaks to use in legend/axis</span></span><br><span class="line">  labels = c(<span class="string">"D"</span>, <span class="string">"E"</span>, <span class="string">"P"</span>, <span class="string">"R"</span>), <span class="comment">#labels to use in legend/axis</span></span><br><span class="line">  name = <span class="string">"fuel"</span>) <span class="comment">#legend/axis 标题</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/scale_fill.png"></p><h2 id="常用标尺格式"><a class="markdownIt-Anchor" href="#常用标尺格式"></a> 常用标尺格式</h2><p><strong>type</strong>: color,size,fill,shape,linetype,alpha,etc</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scale_&lt;type&gt;_continuous() <span class="comment">#连续变量映射</span></span><br><span class="line">scale_&lt;type&gt;_discrete() <span class="comment">#离散变量映射</span></span><br><span class="line">scale_&lt;type&gt;_identity() <span class="comment">#原始数据直接映射</span></span><br><span class="line">scale_&lt;type&gt;_manual(value=c(…)) <span class="comment">#自定义值范围</span></span><br></pre></td></tr></table></figure><h2 id="坐标轴标尺"><a class="markdownIt-Anchor" href="#坐标轴标尺"></a> 坐标轴标尺</h2><table><thead><tr><th>X &amp; Y location scales</th><th>说明</th></tr></thead><tbody><tr><td>lims(x,y)/xlim()/ylim()</td><td></td></tr><tr><td>scale_x_continuous(breaks, labels,limits)</td><td>刻度,标签,值的范围</td></tr><tr><td>scale_x_discrete(breaks, labels,limits)</td><td></td></tr><tr><td>scale_x_date(date_breaks , date_labels)</td><td>日期间隔（“2 weeks”），日期显示格式（<code>%m/%d</code>）</td></tr><tr><td>scale_x_datetime()</td><td>时间日期，参数同date</td></tr><tr><td>scale_x_log10()</td><td>log10 标尺</td></tr><tr><td>scale_x_reverse()</td><td>x轴方向颠倒</td></tr><tr><td>scale_x_sqrt()</td><td></td></tr></tbody></table><h2 id="color-and-fill-scales"><a class="markdownIt-Anchor" href="#color-and-fill-scales"></a> Color and fill scales</h2><table><thead><tr><th>Continuous</th><th>说明</th></tr></thead><tbody><tr><td>scale_fill_distiller(palette = “Blues”)</td><td></td></tr><tr><td>scale_fill_gradient(low,high)</td><td>渐变色调控</td></tr><tr><td>scale_fill_gradient2(low,mid,high,midpoint)</td><td>2极渐变色</td></tr><tr><td>scale_fill_gradientn(values)</td><td>n极渐变色</td></tr><tr><td><strong>Discrete</strong></td><td></td></tr><tr><td>scale_fill_hue()</td><td>离散色阶</td></tr><tr><td>scale_fill_brewer(palette = “Blues”)</td><td>调色板</td></tr><tr><td>scale_fill_grey(start, end)</td><td>灰色调</td></tr></tbody></table><blockquote><p>调色板离散色阶palette选择：<br>RColorBrewer::display.brewer.all()<br>连续色阶选择：<br>Also: rainbow(), heat.colors(), terrain.colors(), cm.colors()<br>RColorBrewer::brewer.pal()</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#离散色阶</span></span><br><span class="line">p &lt;- ggplot(mpg, aes(fl)) +</span><br><span class="line">  geom_bar(aes(fill = fl))</span><br><span class="line"></span><br><span class="line">p +scale_fill_brewer(palette = <span class="string">"Blues"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_brewer'</span>)</span><br><span class="line">p + scale_fill_grey(start = <span class="number">0.2</span>, end = <span class="number">0.8</span>,na.value = <span class="string">"red"</span>) +</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_grey'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#连续色阶</span></span><br><span class="line">p &lt;- ggplot(mpg, aes(hwy))+ </span><br><span class="line">  geom_dotplot(aes(fill = ..x..))</span><br><span class="line"></span><br><span class="line">p + scale_fill_distiller(palette = <span class="string">"Blues"</span>)  +</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_distiller'</span>)</span><br><span class="line">p + scale_fill_gradient(low=<span class="string">"red"</span>, high=<span class="string">"yellow"</span>)  +</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_gradient'</span>)</span><br><span class="line">p + scale_fill_gradient2(low=<span class="string">"red"</span>, high=<span class="string">"blue"</span>, mid = <span class="string">"white"</span>, midpoint = <span class="number">25</span>) +</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_gradient2'</span>)</span><br><span class="line">p +scale_fill_gradientn(colours=topo.colors(<span class="number">6</span>)) +</span><br><span class="line">  ggtitle(<span class="string">'scale_fill_gradientn'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/scale_fill_con.png"></p><p><img alt data-src="/images/ggplot2/scale_fill_dis.png"></p><h2 id="shape-and-size-scales"><a class="markdownIt-Anchor" href="#shape-and-size-scales"></a> Shape and size scales</h2><table><thead><tr><th>shape</th><th>说明</th></tr></thead><tbody><tr><td>scale_shape()</td><td>形状</td></tr><tr><td>scale_shape_manual(values)</td><td></td></tr><tr><td><strong>size</strong></td><td></td></tr><tr><td>scale_size()</td><td>大小</td></tr><tr><td>scale_radius(range)</td><td>半径</td></tr></tbody></table><p><strong>shape:</strong><br><img alt="shape" data-src="/images/ggplot2/shape_scale.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df &lt;- data.frame(x=<span class="number">1</span>:<span class="number">10</span>,y=sample(<span class="number">1</span>:<span class="number">10</span>,<span class="number">10</span>),</span><br><span class="line">                 s1=rnorm(<span class="number">10</span>),</span><br><span class="line">                 s2=sample(<span class="number">1</span>:<span class="number">4</span>,<span class="number">10</span>,replace = <span class="literal">TRUE</span>))</span><br><span class="line">p &lt;- ggplot(df, aes(x, y))+</span><br><span class="line">  geom_point(aes(shape = factor(s2), size = s1, color=factor(s2)))</span><br><span class="line">p + scale_shape_manual(values = c(<span class="number">3</span>:<span class="number">7</span>))</span><br><span class="line">p + scale_radius(range = c(<span class="number">1</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure><h1 id="coordinate-systems"><a class="markdownIt-Anchor" href="#coordinate-systems"></a> Coordinate Systems</h1><table><thead><tr><th>Coordinate Systems</th><th style="text-align:left">参数</th><th>说明</th></tr></thead><tbody><tr><td>coord_cartesian()</td><td style="text-align:left">xlim,ylim</td><td>笛卡尔坐标（默认）</td></tr><tr><td>coord_fixed()</td><td style="text-align:left">radio,xlim,ylim</td><td>具有固定纵横比的直角坐标</td></tr><tr><td>coord_flip</td><td style="text-align:left">xlim,ylim</td><td>x和y翻转(笛卡尔坐标)</td></tr><tr><td>coord_polar</td><td style="text-align:left">theta, start, direction</td><td>极坐标</td></tr><tr><td>coord_trans()</td><td style="text-align:left">xtrans, ytrans，xlim,ylim</td><td>变换笛卡尔坐标系，xtrans, ytrans接收函数名</td></tr><tr><td>coord_quickmap()<br>coord_map(projection = “ortho”,orientation )</td><td style="text-align:left">projection, orienztation, xlim, ylim</td><td>地图投影 projections:{mercator (default), azequalarea, lagrange, etc.}</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mpg, aes(fl)) + them_blank+</span><br><span class="line">  geom_bar()+</span><br><span class="line">  coord_polar(theta = <span class="string">"x"</span>, direction=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line">worldmap &lt;- ggplot(world, aes(x = long, y = lat, group = group)) +</span><br><span class="line">  geom_path() +</span><br><span class="line">  scale_y_continuous(breaks = (-<span class="number">2</span>:<span class="number">2</span>) * <span class="number">30</span>) +</span><br><span class="line">  scale_x_continuous(breaks = (-<span class="number">4</span>:<span class="number">4</span>) * <span class="number">45</span>)</span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">41</span>, -<span class="number">74</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/coord_polar.png">  <img alt data-src="/images/ggplot2/coord_map.png"></p><h1 id="position-adjustments"><a class="markdownIt-Anchor" href="#position-adjustments"></a> Position Adjustments</h1><p>Position adjustments 对geoms进行位置调整。</p><p><strong>geom参数赋值字符串</strong></p><p>字符串: identity,jitterdodge (同时闪避和抖动),nudge(微距点固定距离)</p><table><thead><tr><th>geom</th><th>position</th></tr></thead><tbody><tr><td>geom_bar/aera/density</td><td>dodge(并排), stack/fill(堆叠)</td></tr><tr><td>geom_point</td><td>jitter(减少点重叠)</td></tr><tr><td>geom_label</td><td>nudge(轻推来自点的标签)</td></tr></tbody></table><p><strong>geom参数赋值position函数</strong></p><table><thead><tr><th>position函数</th><th>说明</th></tr></thead><tbody><tr><td>position_dodge(width)</td><td>抖动宽度(geom默认width=0.9,调用此函数时,width应设为0.9)</td></tr><tr><td>position_identity()</td><td>不调整</td></tr><tr><td>position_jitter(width , height )</td><td></td></tr><tr><td>position_jitterdodge()</td><td></td></tr><tr><td>position_nudge(x = 0, y = 0)</td><td>平移距离</td></tr><tr><td>position_stack(vjust = 1)</td><td>对齐方式</td></tr><tr><td>position_fill(vjust = 1)</td><td></td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot(mpg, aes(fl, fill = drv))</span><br><span class="line"></span><br><span class="line">p +  geom_bar(position = <span class="string">"dodge"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'position = "dodge"'</span>)</span><br><span class="line">p +  geom_bar(position = <span class="string">"fill"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'position = "fill"'</span>)</span><br><span class="line">p +   geom_bar(position = <span class="string">"stack"</span>)+</span><br><span class="line">  ggtitle(<span class="string">'position = "stack"'</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/geom_bar.png"></p><h1 id="themes"><a class="markdownIt-Anchor" href="#themes"></a> Themes</h1><p><code>theme(…)</code><br>设置主题包括title,axis,legend, panel, background,etc</p><table><thead><tr><th>主题函数</th><th>说明</th></tr></thead><tbody><tr><td>theme_bw(base_size,base_family)</td><td>黑白主题</td></tr><tr><td>theme_grey()</td><td>灰色主题（默认）</td></tr><tr><td>theme_dark()</td><td>黑色主题</td></tr><tr><td>theme_void()</td><td>空主题</td></tr><tr><td>theme_minimal()</td><td>最小主题</td></tr><tr><td>ggtech::theme_tech()</td><td>技术主题</td></tr></tbody></table><p><strong>控制theme元素函数(作为主题组件的参数出现)：</strong></p><table><thead><tr><th>元素函数</th><th>说明</th></tr></thead><tbody><tr><td>element_blank</td><td>清空</td></tr><tr><td>element_rect(fill,color,size,linetype)</td><td>边框和背景</td></tr><tr><td>element_text(family,face, color, size,hjust, vjust,angle,lineheight, margin, debug)</td><td>文字，参数：lineheight(行高), margin(边缘), debug(是否矩形背景)</td></tr><tr><td>element_line(color,size,linetype,lineend,arrow)</td><td>Line end style (round, butt, square)，添加箭头: grid::arrow(angle,length,ends=“last”/“first”/“both”)</td></tr></tbody></table><h1 id="faceting"><a class="markdownIt-Anchor" href="#faceting"></a> Faceting</h1><p>刻面通过类别变量将图形分块显示。</p><table><thead><tr><th>刻面函数</th><th>说明</th></tr></thead><tbody><tr><td>facet_grid(var.row~var.col,scales,labeller)</td><td>网格图，单变量时var.row或var.col用点填充</td></tr><tr><td>facet_wrap(~var+var,nrow,ncol,scales,labeller)</td><td>将1d的面板卷成2d网格(nrow*ncol)</td></tr><tr><td>ggforce::facet_zoom(x, y, xy, split = FALSE, zoom.size = 2)</td><td>子集zoom，x,y,xy 赋值（逻辑值）：选取x轴，y轴，xy交叉子集</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t &lt;- ggplot(mpg, aes(cty, hwy)) + geom_point() </span><br><span class="line">t + facet_grid(year ~ fl)  </span><br><span class="line"><span class="comment"># ggforce::facet_zoom</span></span><br><span class="line">ggplot(iris, aes(Petal.Length, Petal.Width, colour = Species)) +</span><br><span class="line">    geom_point() +</span><br><span class="line">    ggforce::facet_zoom(x = Species == <span class="string">"versicolor"</span>)</span><br></pre></td></tr></table></figure><p><img alt data-src="/images/ggplot2/facet_grid.png"><img alt data-src="/images/ggplot2/facet_zoom.png"></p><p>**scales参数：**坐标刻度自由<br>“fixed”(default，坐标尺度统一), “free”(坐标尺度自由)，“free_x”,“free_y”</p><p><strong>labeller参数</strong>: 调整刻面标签<br><img alt data-src="/images/ggplot2/labeller.png"></p><h1 id="annotations-and-labels"><a class="markdownIt-Anchor" href="#annotations-and-labels"></a> Annotations and Labels</h1><table><thead><tr><th>Labels</th><th>说明</th></tr></thead><tbody><tr><td>ggtitle(label, subtitle = NULL)</td><td>图标题</td></tr><tr><td>labs(x,y,title,subtitle,caption)</td><td>x/y轴标题</td></tr><tr><td>xlab(label)/ylab(label)</td><td>x/y轴标题</td></tr></tbody></table><table><thead><tr><th>Annotations</th><th>说明</th></tr></thead><tbody><tr><td>annotate(geom,…)</td><td>geom注释，其余参数为geom参数</td></tr><tr><td>annotate(“text”,x,y,label, parse=FALSE)</td><td>文本注释</td></tr><tr><td>annotate(“pointrange”, x , y, ymin, ymax)</td><td></td></tr><tr><td>annotate(“rect”, xmin, xmax, ymin, ymax)</td><td>矩形注释</td></tr><tr><td>annotate(“segment”,x, xend, y, yend, arrow)</td><td>线段注释</td></tr></tbody></table><blockquote><p>文本注释参数parse：是否数学表达式, 更多公式语法可参考?plotmath<br>线段注释参数arrow:  添加箭头grid::arrow(angle,length,ends=”last” / ”first”/”both”)</p></blockquote><h1 id="legends"><a class="markdownIt-Anchor" href="#legends"></a> Legends</h1><p><code>theme(legend.position = &quot;none&quot;/&quot;bottom&quot;/&quot;top&quot;/&quot;left&quot;/&quot;right&quot;)</code> 在主题中设置 Legend<br><code>guides(…)</code>设置legends几何组件：colorbar, legend, or none (no legend)</p><table><thead><tr><th>guide函数</th><th>作为scale或guides()的参数设置</th></tr></thead><tbody><tr><td>guide_colorbar(title,label…)</td><td>连续型变量</td></tr><tr><td>guide_legend(title,label…)</td><td>离散型变量</td></tr></tbody></table><h1 id="vector-helpers"><a class="markdownIt-Anchor" href="#vector-helpers"></a> Vector helpers</h1><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>stats::recoder(x_char,x_num,order=FALSE)</td><td>重排序,返回factor/ord.factor</td></tr><tr><td>cut_interval(x,n,length)</td><td>n组有相同宽度的观测值</td></tr><tr><td>cut_number(x,n)</td><td>n组有相同数量的观测值</td></tr><tr><td>cut_width(x,width,center,boundary, closed = c(“right”,“left”))</td><td></td></tr></tbody></table><h1 id="混合图"><a class="markdownIt-Anchor" href="#混合图"></a> 混合图</h1><p><code>gridExtra</code>包可以将多个ggplot2对象组合到一张图中</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gridExtra::grid.arrange(plot1,plot2,…,nrow,ncol)</span><br></pre></td></tr></table></figure><h1 id="ggplot2-extensions"><a class="markdownIt-Anchor" href="#ggplot2-extensions"></a> <a href="/gitbook/ggplot2-extensions/">ggplot2 extensions</a></h1><p>ggplot2 now has an official extension mechanism. This means that others can now easily create their own stats, geoms and positions, and provide them in other packages. This should allow the ggplot2 community to flourish, even as less development work happens in ggplot2 itself. This page showcases these extensions.</p>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Visualise </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> ggplot2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Syntax)--purrr</title>
      <link href="/posts/R/RNotebook(Syntax)--purrr.html"/>
      <url>/posts/R/RNotebook(Syntax)--purrr.html</url>
      
        <content type="html"><![CDATA[<p><strong>purrr</strong> : A functional programming(FP) toolkit for R</p><a id="more"></a><h1 id="apply-functions"><a class="markdownIt-Anchor" href="#apply-functions"></a> Apply Functions</h1><p><code>map(.x, .f, ...)</code> Apply a function to <strong>each element</strong> of <strong>a list</strong> or <strong>vector</strong><br><code>map2(.x,.y,.f,…)</code>  Apply a function to <strong>pairs of elements</strong> from <strong>two lists</strong><br><code>pmap(.x, .f, ...)</code> Apply a function to <strong>groups of elements</strong> from <strong>list of lists</strong><br><code>imap(.x, .f, ...)</code>  Apply a function to <strong>each element</strong> of a <strong>vector, and its index</strong><br><code>invoke_map(.f, .x = list(NULL) )</code>   调用不同的函数<br><code>walk(.x, .f), walk2(), pwalk()</code>  并行处理</p><p><code>map_if(.x, .p, .f, ...)</code>   <code>map_at(.x, .at, .f, ...)</code>  其他系列同map</p><p><strong>Parameters:</strong></p><blockquote><p><code>.f</code> : a function, formula, or atomic vector<br><code>…</code> :  其他参数（<code>.x</code>为没有被<code>...</code>指定的第一个参数）</p></blockquote><p><strong><code>.f</code> 参数：</strong></p><blockquote><p><strong>function</strong>：<code>as.character %&gt;% map(iris)</code></p><p><strong>formula</strong>：<code>~ .x</code>becomes <code>function(x)</code><br><code>map(l, ~ 2 +.x)</code><br><code>~ .x .y</code> becomes <code>function(.x, .y)</code>, e.g.<br><strong>character</strong>：<br><code>map(x,&quot;y&quot;)</code>becomes <code>x[[&quot;y&quot;]]</code><br><code>map(x,c(&quot;a&quot;,&quot;b&quot;))</code> becomes <code>x[[&quot;a&quot;]][[&quot;b&quot;]]</code><br><strong>integer</strong>：<br><code>map(x,2)</code> becomes <code>x[[2]]</code></p></blockquote><p><strong>Output</strong></p><table><thead><tr><th>function</th><th>returns</th></tr></thead><tbody><tr><td>map</td><td>list</td></tr><tr><td>map_chr</td><td>character vector</td></tr><tr><td>map_dbl</td><td>double (numeric) vector</td></tr><tr><td>map_df</td><td>data frame(auto)</td></tr><tr><td>map_dfc</td><td>data frame (column bind)</td></tr><tr><td>map_dfr</td><td>data frame (row bind)</td></tr><tr><td>map_int</td><td>integer vector</td></tr><tr><td>map_lgl</td><td>logical vector</td></tr><tr><td>walk</td><td>返回指定的类型</td></tr></tbody></table><blockquote><p>map2, pmap, imap, invoke_map 系列函数同map</p></blockquote><p>Examples:</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>:<span class="number">10</span> %&gt;%</span><br><span class="line"> map(rnorm, n = <span class="number">10</span>) %&gt;%</span><br><span class="line"> map_dbl(mean)</span><br><span class="line"> </span><br><span class="line">tribble(mean=c(<span class="number">5</span>,<span class="number">10</span>,<span class="number">3</span>),sd=c(<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>),n=c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>)%&gt;%</span><br><span class="line">  pmap(rnorm) <span class="comment">#生成三组不同参数的正态分布</span></span><br><span class="line"></span><br><span class="line">df &lt;- tibble(</span><br><span class="line">  f = c(<span class="string">"runif"</span>, <span class="string">"rpois"</span>, <span class="string">"rnorm"</span>),</span><br><span class="line">  params = list(</span><br><span class="line">    list(n = <span class="number">10</span>),</span><br><span class="line">    list(n = <span class="number">5</span>, lambda = <span class="number">10</span>),</span><br><span class="line">    list(n = <span class="number">10</span>, mean = -<span class="number">3</span>, sd = <span class="number">10</span>))</span><br><span class="line">)</span><br><span class="line">invoke_map(df$f, df$params)</span><br><span class="line"></span><br><span class="line">`list(1,"a",3)%&gt;% walk(print)` <span class="comment">#并行打印</span></span><br></pre></td></tr></table></figure><h1 id="work-with-lists"><a class="markdownIt-Anchor" href="#work-with-lists"></a> Work with Lists</h1><table><thead><tr><th style="text-align:left">filter lists</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">pluck(.x, …, .default=NULL)</td><td>按名字或者索引筛选<code>x, pluck(x,&quot;b&quot;)</code></td></tr><tr><td style="text-align:left">keep(.x, .p, …)<br>discard(.x, .p, …)</td><td>逻辑值筛选<code>keep(x, is.na)</code><br>keep的否定结果<code>discard(x, is.na)</code></td></tr><tr><td style="text-align:left">compact(.x, .p = identity)</td><td>删除空元素</td></tr><tr><td style="text-align:left">head_while(.x, .p, …)<br>tail_while</td><td>找到所有头部/尾部满足匹配的值</td></tr></tbody></table><table><thead><tr><th style="text-align:left">logic</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">every(.x, .p, …) <br>some(.x, .p, …)</td><td>列表中的每一个/某些元素是否满足要求(返回一个FALSE/TRUE)<br><code>mtcars %&gt;% some(is_numeric)</code></td></tr><tr><td style="text-align:left">has_element(.x, .y)</td><td>列表包含一个元素<code>has_element(x, &quot;foo&quot;)</code></td></tr><tr><td style="text-align:left">detect(.x, .f, …, .right=FALSE,.p)<br>detect_index(.x, .f, …, .right= FALSE, .p)</td><td>返回第一个判断为TRUE的元素<code>detect(x, is.character)</code><br>返回索引</td></tr><tr><td style="text-align:left">vec_depth(x)</td><td>Return depth(number of levels of indexes)</td></tr></tbody></table><table><thead><tr><th style="text-align:left">reshape lists</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">flatten(.x)</td><td>将列表降低一个维度</td></tr><tr><td style="text-align:left">flatten_lgl(), flatten_int(), flatten_dbl(), flatten_chr()<br>flatten_df,flatten_dfr(),flatten_dfc()</td><td>返回向量<br>返回data.frame</td></tr><tr><td style="text-align:left">transpose(.list, .names = NULL)</td><td>转置一个列表</td></tr><tr><td style="text-align:left">simplify(.x, .type = NULL)</td><td>列表强制成向量</td></tr><tr><td style="text-align:left">simplify_all(.x, .type = NULL)</td><td></td></tr></tbody></table><table><thead><tr><th style="text-align:left">combine</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">append(x, values, afer =length(x))</td><td>末尾追加<code>append(x, list(d = 1))</code></td></tr><tr><td style="text-align:left">prepend(x, values, before =1)</td><td>起始追加<code>prepend(x, list(d = 1))</code></td></tr><tr><td style="text-align:left">splice(…)</td><td>合并到一个列表</td></tr></tbody></table><h1 id="reduce-lists"><a class="markdownIt-Anchor" href="#reduce-lists"></a> Reduce Lists</h1><table><thead><tr><th style="text-align:left">递归</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left"><strong>reduce</strong>(.x,.f,…init)</td><td>将.x的子元素递归，返回单个值<br><code>.x</code>列表或原子矢量，<br><code>init</code>开始积累的第一个值</td></tr><tr><td style="text-align:left">reduce_right(.x,.f,…init)</td><td>从右往左递归</td></tr><tr><td style="text-align:left">reduce2(.x, .y, .f, …, .init)<br>reduce2_right(.x, .y, .f, …, .init)</td><td>三参数递归</td></tr><tr><td style="text-align:left"><strong>accumulate</strong>(.x, .f, …, .init)</td><td>将.x的子元素递归，返回中间值</td></tr><tr><td style="text-align:left">accumulate_right(.x, .f, …, .init)</td><td>从右往左递归</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list(data1,data2,data3) %&gt;% </span><br><span class="line">   reduce(left_join,by = c(&quot;first&quot;,&quot;last&quot;))</span><br></pre></td></tr></table></figure><h1 id="debug"><a class="markdownIt-Anchor" href="#debug"></a> Debug</h1><table><thead><tr><th>调试</th><th>说明</th></tr></thead><tbody><tr><td><code>safely(.f, otherwise = NULL, quiet = TRUE)</code></td><td>return list of results and errors</td></tr><tr><td><code>quietly(.f)</code></td><td>return list of results, output, messages, warnings.</td></tr><tr><td><code>possibly(.f, otherwise, quiet = TRUE)</code></td><td>continue with default value (instead of error) and return list of results,error</td></tr><tr><td><code>base::stop(message)</code></td><td>stop and return message</td></tr><tr><td><code>base::stopifnot(logit1,logit2,logit3…)</code></td><td>检查每个参数为TRUE，否则停止执行当前表达式返回message</td></tr></tbody></table><h1 id="work-with-tibbles"><a class="markdownIt-Anchor" href="#work-with-tibbles"></a> Work with Tibbles</h1><p><strong>Nested Data</strong></p><p><img alt="nest" data-src="/images/nested_data.png"></p><p><code>tidyr::nest(data, ..., .key = data)</code><br>For grouped data, moves groups into cells as data frames.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_iris &lt;- iris %&gt;% group_by(Species) %&gt;% nest()</span><br></pre></td></tr></table></figure><p><code>tidyr::unnest(data, ..., .drop = NA, .id=NULL, .sep=NULL)</code><br>Unnests a nested data frame.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n_iris %&gt;% unnest()</span><br></pre></td></tr></table></figure><p><strong>List Column Workflow</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1 Make a list column</span></span><br><span class="line">n_iris &lt;- iris %&gt;%</span><br><span class="line"> group_by(Species) %&gt;%</span><br><span class="line"> nest()</span><br><span class="line"></span><br><span class="line"><span class="comment"># step 2 Work with list columns</span></span><br><span class="line">mod_fun &lt;- <span class="keyword">function</span>(df)</span><br><span class="line"> lm(Sepal.Length ~ ., data = df)</span><br><span class="line">m_iris &lt;- n_iris %&gt;%</span><br><span class="line"> mutate(model = map(data, mod_fun))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># step 3 Simplify the list column</span></span><br><span class="line">b_fun &lt;- <span class="keyword">function</span>(mod)</span><br><span class="line"> coefficients(mod)[[<span class="number">1</span>]]</span><br><span class="line">m_iris %&gt;% transmute(Species,</span><br><span class="line"> beta = map_dbl(model, b_fun))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Syntax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> purrr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Syntax)--magrittr</title>
      <link href="/posts/R/RNotebook(Syntax)--magrittr.html"/>
      <url>/posts/R/RNotebook(Syntax)--magrittr.html</url>
      
        <content type="html"><![CDATA[<p><strong>magrittr</strong>:  管道语法 (pipe)</p><a id="more"></a><h1 id="magrittr-pipe"><a class="markdownIt-Anchor" href="#magrittr-pipe"></a> magrittr:  pipe</h1><p><strong><code>lhs %&gt;% rhs</code> forward-pipe</strong></p><ol><li>lhs为rhs第一个参数时：<code>x %&gt;% f(y)等价于 f(x, y)</code></li><li>lhs在任意位置时，用点(.)代替：<code>z %&gt;% f(x, y, arg = .)等价于 f(x, y, arg = z)</code></li><li>rhs为代码块：<code>rnorm(100) %&gt;% {c(min(.), mean(.), max(.))} %&gt;% floor</code></li></ol><p><strong><code>lhs %&lt;&gt;% rhs</code>复合赋值管道运算符</strong></p><p><code>%&lt;&gt;%</code>用于首先将<code>lhs</code>传递给<code>rhs</code>表达式，最后将值重新赋给<code>lhs</code>。<code>some_object %&lt;&gt;% foo %&gt;% bar</code><br>相当于<code>some_object &lt;- some_object %&gt;% foo %&gt;% bar</code></p><p><strong><code>lhs ％$％ rhs</code></strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iris %&gt;%</span><br><span class="line">  subset(Sepal.Length &gt; mean(Sepal.Length)) %$%</span><br><span class="line">  cor(Sepal.Length, Sepal.Width)</span><br></pre></td></tr></table></figure><p><strong><code>lhs ％T&gt;％ rhs</code> T运算符</strong><br>返回<code>lhs</code>本身，而不是<code>rhs</code>函数或表达式，对于<code>print</code>或者<code>plot</code>类似函数非常有用。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rnorm（<span class="number">200</span>）％&gt;％</span><br><span class="line">  matrix（ncol  =  <span class="number">2</span>）％<span class="literal">T</span>&gt;％</span><br><span class="line">  plot  ％&gt;％ ＃plot通常不返回任何内容。</span><br><span class="line">  colSums</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Syntax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> magrittr </tag>
            
            <tag> 管道 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--缺失数据处理(naniar and simputation)</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--for-missing-data(naniar-and-simputation).html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--for-missing-data(naniar-and-simputation).html</url>
      
        <content type="html"><![CDATA[<p>缺失值是指粗糙数据中由于缺少信息而造成的数据的聚类、分组、删失或截断。它指的是现有数据集中某个或某些属性的值是不完全的。</p><p>缺失值从缺失的分布来讲可以分为完全随机缺失，随机缺失和完全非随机缺失。</p><p><strong>完全随机缺失</strong>（missing completely at random，MCAR）<br>指的是数据的缺失是随机的，数据的缺失不依赖于任何不完全变量或完全变量。</p><p><strong>随机缺失</strong>(missing at random，MAR)<br>指的是数据的缺失不是完全随机的，即该类数据的缺失依赖于其他完全变量。</p><p><strong>完全非随机缺失</strong>(missing not at random，MNAR)<br>指的是数据的缺失依赖于不完全变量自身。</p><a id="more"></a><h1 id="naniar"><a class="markdownIt-Anchor" href="#naniar"></a> naniar</h1><h2 id="缺失数据摘要"><a class="markdownIt-Anchor" href="#缺失数据摘要"></a> 缺失数据摘要</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">vis_miss(x)</td><td style="text-align:left">缺失数据可视化摘要</td></tr><tr><td style="text-align:left">miss_var_summary(data)</td><td style="text-align:left">缺失数据数值摘要<br><code>data %&gt;%group_by(factor) %&gt;%miss_var_summary()</code></td></tr><tr><td style="text-align:left">n_miss(x) , n_complete(x)</td><td style="text-align:left">缺失行/完整行数量</td></tr><tr><td style="text-align:left">prop_miss(x) , prop_complete(x)</td><td style="text-align:left">缺失行/完整行比例</td></tr><tr><td style="text-align:left">geom_miss_point()</td><td style="text-align:left">ggplot2散点图扩展</td></tr><tr><td style="text-align:left">gg_miss_var(x,show_pct = FALSE)</td><td style="text-align:left">绘制每个变量的缺失情况</td></tr></tbody></table><h2 id="阴影矩阵"><a class="markdownIt-Anchor" href="#阴影矩阵"></a> 阴影矩阵</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>as_shadow(data)</td><td>shadow matrices (NA+!NA)</td></tr><tr><td>bind_shadow()</td><td>将阴影矩阵绑定到原始数据框</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data %&gt;%bind_shadow() %&gt;%</span><br><span class="line">ggplot(aes(x = v1, fill = v2_NA)) + geom_density(alpha = 0.5)</span><br></pre></td></tr></table></figure><h2 id="可视化缺失值变量分布关系"><a class="markdownIt-Anchor" href="#可视化缺失值变量分布关系"></a> 可视化缺失值变量分布关系</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">可视化估算值分布:</span><br><span class="line">data %&gt;%bind_shadow() %&gt;%</span><br><span class="line">  simputation::impute_lm(Ozone ~ Temp + Solar.R) %&gt;%</span><br><span class="line">  ggplot(aes(x = Solar.R,y = Ozone,colour = Ozone_NA)) + </span><br><span class="line">  geom_point()</span><br></pre></td></tr></table></figure><hr><h1 id="simputation-make-imputation-simpler-for-missing-data"><a class="markdownIt-Anchor" href="#simputation-make-imputation-simpler-for-missing-data"></a> simputation : make imputation simpler for missing data</h1><ul><li><p>中位数插补：impute_median(dat, formula)<br><code>formula: &lt;imputed variables&gt; ~ &lt;model object&gt;</code></p></li><li><p>模型插补，函数调用约定如下：<br><code>impute_&lt;model&gt;(data, formula, … )</code></p></li></ul><table><thead><tr><th>function</th><th>model</th><th>package</th></tr></thead><tbody><tr><td>impute_rlm</td><td>M-estimation</td><td>MASS</td></tr><tr><td>impute_en</td><td>ridge/elasticnet/lasso</td><td>glmnet</td></tr><tr><td>impute_cart</td><td>CART</td><td>rpart</td></tr><tr><td>impute_rf</td><td>random forest</td><td>randomForest</td></tr><tr><td>impute_rhd</td><td>random hot deck</td><td>VIM (optional)</td></tr><tr><td>impute_shd</td><td>sequential hot deck</td><td>VIM (optional)</td></tr><tr><td>impute_knn</td><td>k nearest neighbours</td><td>VIM (optional)</td></tr><tr><td>impute_mf</td><td>missForest</td><td>missForest</td></tr><tr><td>impute_em</td><td>mv-normal</td><td>norm</td></tr></tbody></table><p><em><strong>for example</strong></em></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data %&gt;% </span><br><span class="line">  impute_lm(v1 ~ v2 + v3) %&gt;%impute_median(v1 ~ v4)%&gt;%  <span class="comment">#链接插补</span></span><br><span class="line">  impute_rlm(data, v1 + v2 ~ v3 +v4)  <span class="comment">#多变量插补</span></span><br><span class="line"></span><br><span class="line">data %&gt;% group_by(factor) %&gt;% impute_lm(v1 ~ v2+v3) <span class="comment">#分组插补</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> naniar </tag>
            
            <tag> simputation </tag>
            
            <tag> 缺失值 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--lubridate+hms</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--lubridate+hms.html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--lubridate+hms.html</url>
      
        <content type="html"><![CDATA[<p>日期和时间变量处理包</p><a id="more"></a><h1 id="lubridate-dates-and-times"><a class="markdownIt-Anchor" href="#lubridate-dates-and-times"></a> lubridate:  Dates and times</h1><h2 id="date-times"><a class="markdownIt-Anchor" href="#date-times"></a> Date-times</h2><p><img alt="dt" data-src="/images/lubridate1.png"></p><ul><li><strong>date-time</strong> 是时间线上的一个点，以秒为存储单位，起始于1970-01-01 00:00:00 UTC   # <code>base::as.POSIXct(x,farmat,origin)</code></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dt &lt;- as_datetime(<span class="number">1511870400</span>)</span><br><span class="line"><span class="comment">## "2017-11-28 12:00:00 UTC"</span></span><br></pre></td></tr></table></figure><ul><li><strong>date</strong>是从1970-01-01开始的天数 # <code>base::as.Date(x,&quot;%Y-%m-%d&quot;)</code></li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d &lt;- as_date(<span class="number">17498</span>)</span><br><span class="line"><span class="comment">## "2017-11-28"</span></span><br></pre></td></tr></table></figure><ul><li><strong>hms</strong>是从00:00:00开始的秒数</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t &lt;- hms::as.hms(<span class="number">85</span>)</span><br><span class="line"><span class="comment">## 00:01:25</span></span><br></pre></td></tr></table></figure><ol><li>解析时间 (Convert strings or numbers to date-times)</li></ol><ul><li>识别出数据中 year (<strong>y</strong>), month (<strong>m</strong>), day (<strong>d</strong>), hour (<strong>h</strong>), minute (<strong>m</strong>) and second (<strong>s</strong>) 元素的顺序</li><li>用下面的函数，函数的名字代表顺序，函数接收<strong>多种多样</strong>的输入形式<br><img alt data-src="/images/lubridate2.png"></li></ul><p><strong>date_decimal</strong>(decimal, tz = “UTC”)  解析小数形式<br><em>date_decimal(2017.5)</em></p><p><strong>fast_strptime</strong>() 快速解析字符格式<br><em>fast_strptime(‘9/1/01’, ‘%y/%m/%d’)</em></p><p><strong>parse_date_time</strong>() 简单解析字符格式<br><em>parse_date_time(“9/1/01”, “ymd”)</em></p><p><strong>获取当前日期/时间</strong><br><strong>today(tzone = “”)</strong>   Date object （base::Sys.Date() ）<br><strong>now(tzone = “”)</strong>   POSIXct object（base::date() ）</p><ol start="2"><li>获取/设置时间组件</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; d &lt;- ymd(<span class="string">"2017-11-28"</span>)</span><br><span class="line">&gt;&gt;&gt; day(d)</span><br><span class="line"><span class="number">28</span></span><br><span class="line">&gt;&gt;&gt; day(d) &lt;- <span class="number">1</span></span><br><span class="line">&gt;&gt;&gt; d </span><br><span class="line"><span class="string">"2017-11-01"</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/lubridate3.png"><br><img alt data-src="/images/lubridate4.png"></p><p><strong>quarter</strong>(x, with_year = FALSE, fiscal_start = 1)  季度<br><strong>semester</strong>(x, with_year = FALSE)  （尤指美国的大专院校的） 学期，半学年</p><p><strong>dst(x)</strong>  夏令时(daylight savings time)?<br><strong>leap_year(x)</strong> 闰年?<br><strong>update</strong>(object, …, simple = FALSE)<br><em>update(dt, mday = 2, hour = 1)</em></p><h2 id="round-date-times"><a class="markdownIt-Anchor" href="#round-date-times"></a> Round Date-times</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">floor_date(x, unit = <span class="string">"second"</span>) <span class="comment"># 向下滚动到最近的单位</span></span><br><span class="line">round_date(x, unit = <span class="string">"second"</span>) <span class="comment"># 滚动到最近的单位</span></span><br><span class="line">ceiling_date(x, unit = <span class="string">"second"</span>,change_on_boundary = <span class="literal">NULL</span>) <span class="comment">#向上滚动到最近的单位</span></span><br><span class="line">rollback(dates, roll_to_first =<span class="literal">FALSE</span>, preserve_hms = <span class="literal">TRUE</span>) <span class="comment">#滚动到上月最后一天或本月第一天</span></span><br></pre></td></tr></table></figure><p><strong>图示</strong><br><img alt="floor" data-src="/images/lubridate_floor.png"><br><code>floor_date(dt, unit = &quot;month&quot;)</code><br><img alt="round" data-src="/images/lubridate_round.png"><br><code>round_date(dt, unit = &quot;month&quot;)</code><br><img alt="ceiling" data-src="/images/lubridate_ceil.png"><br><code>ceiling_date(dt, unit = &quot;month&quot;)</code></p><h2 id="stamp-date-times"><a class="markdownIt-Anchor" href="#stamp-date-times"></a> Stamp Date-times</h2><p>自定义一个Date-times的字符显示模板函数<br><code>stamp() , stamp_date() and stamp_time()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 创建模板函数</span></span><br><span class="line">sf &lt;- stamp(<span class="string">"Created Sunday, Jan 17, 1999 3:34"</span>)</span><br><span class="line"><span class="comment"># 2. 使用模板</span></span><br><span class="line">sf(ymd(<span class="string">"2010-04-05"</span>))</span><br><span class="line">[<span class="number">1</span>] <span class="string">"Created Monday, Apr 05, 2010 00:00"</span></span><br></pre></td></tr></table></figure><h2 id="time-zones"><a class="markdownIt-Anchor" href="#time-zones"></a> Time Zones</h2><p>R可以识别 ~600 个时区，每一个区块都有编码时区，夏令时，历史日历（time zone, Daylight Savings Time, and historical calendar）变量，R为每个赋值一个 time zone向量。</p><p>通常用<strong>UTC</strong> 时区来避开夏令时<br><strong>OlsonNames()</strong>  返回完整的时区名列表<br><strong>with_tz()</strong> 返回另一个时区的date-time<br><strong>force_tz</strong> 强制抓换时区，date-time数字不变<br><img alt="tz" data-src="/images/lubridate_tz.png"></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">meeting &lt;- ymd_hms(<span class="string">"2011-07-01 09:00:00"</span>, tz = <span class="string">"Pacific/Auckland"</span>)</span><br><span class="line">with_tz(meeting, <span class="string">"America/Chicago"</span>)</span><br><span class="line"><span class="comment">#&gt; [1] "2011-06-30 16:00:00 CDT"</span></span><br><span class="line"></span><br><span class="line">mistake &lt;- force_tz(meeting, <span class="string">"America/Chicago"</span>)</span><br><span class="line">with_tz(mistake, <span class="string">"Pacific/Auckland"</span>)</span><br><span class="line"><span class="comment">#&gt; [1] "2011-07-02 02:00:00 NZST"</span></span><br></pre></td></tr></table></figure><h2 id="time-spans"><a class="markdownIt-Anchor" href="#time-spans"></a> Time Spans</h2><p>lubridate提供三种类型的时间块</p><ul><li><strong>period</strong>：人类定义的时间单位， like years, months, and days.</li><li><strong>duration</strong>：以秒为单位的时间跨度（<strong>difftime</strong>是base R 中一种特殊的duration），当这个数字很大时，period也会以较大的单位显示一个估计值，底层总是为固定的秒数，常见的转换有Minutes = 60 seconds, hours = 3600 seconds, days = 86400 seconds, weeks = 604800，由于其变化性，未使用大于周的单位。</li><li><strong>interval</strong>：用指定的开始和结束日期创建的时间间隔。如果开始日期在结束日期之前发生，则间隔将为正值。否则，为负值。</li></ul><ol><li>Period and Duration</li></ol><table><thead><tr><th>period</th><th>duration</th></tr></thead><tbody><tr><td>period(num = NULL, units = “second”, …)<br><code>period(5, unit = &quot;years&quot;)</code></td><td>duration(num = NULL, units = “second”, …)<br>duration(5, unit = “years”)</td></tr><tr><td>as.period(x, unit)</td><td>as.duration(x, …)</td></tr><tr><td>is.period()</td><td>is.duration(),is.difime()</td></tr><tr><td>period_to_seconds(x)</td><td>make_difime(x)<br><code>make_difftime(99999)</code></td></tr><tr><td>seconds_to_period(x)</td><td></td></tr></tbody></table><table><thead><tr><th>period unit</th><th>说明</th><th>duration unit</th><th>说明</th></tr></thead><tbody><tr><td>years(x = 1)</td><td>years</td><td>dyears(x = 1)</td><td>31536000 seconds</td></tr><tr><td>months(x)</td><td>months</td><td></td><td></td></tr><tr><td>weeks(x = 1)</td><td>weeks</td><td>dweeks(x = 1)</td><td>604800 seconds</td></tr><tr><td>days(x = 1)</td><td>days</td><td>ddays(x = 1)</td><td>86400 seconds</td></tr><tr><td>hours(x = 1)</td><td>hours</td><td>dhours(x = 1)</td><td>3600 seconds</td></tr><tr><td>minutes(x = 1)</td><td>minutes</td><td>dminutes(x = 1)</td><td>60 seconds</td></tr><tr><td>seconds(x = 1)</td><td>seconds</td><td>dseconds(x = 1)</td><td>seconds</td></tr><tr><td>milliseconds(x = 1)</td><td>milliseconds</td><td>dmilliseconds(x = 1)</td><td>10**3 seconds</td></tr><tr><td>microseconds(x = 1)</td><td>microseconds</td><td>dmicroseconds(x = 1)</td><td>10**6 seconds</td></tr><tr><td>nanoseconds(x = 1)</td><td>nanoseconds</td><td>dnanoseconds(x = 1)</td><td>10**9 seconds</td></tr><tr><td>picoseconds(x = 1)</td><td>picoseconds</td><td>dpicoseconds(x = 1)</td><td>10**12 seconds</td></tr></tbody></table><p><strong>示例</strong>：period和duration也可由组件的数学计算得到</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">period(c(<span class="number">90</span>, <span class="number">5</span>), c(<span class="string">"second"</span>, <span class="string">"minute"</span>))  <span class="comment">#  "5M 90S"</span></span><br><span class="line">period(second = <span class="number">90</span>, minute = <span class="number">5</span>)  <span class="comment">#  "5M 90S"</span></span><br><span class="line">months(<span class="number">3</span>) + days(<span class="number">12</span>) <span class="comment"># "3m 12d 0H 0M 0S"</span></span><br><span class="line"></span><br><span class="line">ddays(<span class="number">14</span>)  <span class="comment"># "1209600s (~2 weeks)"</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Interval</li></ol><p><strong>interval</strong>：用指定的开始和结束日期创建的时间间隔。如果开始日期在结束日期之前发生，则间隔将为正值。否则，为负值。</p><table><thead><tr><th>创建</th><th>说明</th></tr></thead><tbody><tr><td>interval(start, end, tzone = tz(start))</td><td></td></tr><tr><td>start %–% end</td><td>符号创建</td></tr><tr><td>as.interval(x, start, …)</td><td>参数x：duration, difftime, period, or numeric object</td></tr><tr><td>base::difftime(time1, time2, tz,units =“auto”)</td><td></td></tr><tr><td>is.interval(x)</td><td>判断函数</td></tr><tr><td><strong>组件</strong></td><td></td></tr><tr><td>int_start(int)<br>int_start(int) &lt;- value</td><td>date-time</td></tr><tr><td>int_end(int)<br>int_end(int) &lt;- value</td><td>结束date-time</td></tr></tbody></table><blockquote><p>interval的长度由使用时的对象(period, duration)划定</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s&lt;- ymd(<span class="string">"2017-01-01"</span>); e &lt;- ymd(<span class="string">"2017-11-28"</span>)</span><br><span class="line">interval(s, e) <span class="comment">## 2017-01-01 UTC--2017-11-28 UTC</span></span><br><span class="line">s %--% e <span class="comment">## 2017-01-01 UTC--2017-11-28 UTC</span></span><br><span class="line"></span><br><span class="line">as.interval(days(<span class="number">1</span>), start = now()) </span><br><span class="line"><span class="comment">##  2018-06-03 15:34:25 CST--2018-06-04 15:34:25 CST</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>a %within% b</td><td>logical，a在b区间内,{a: interval or date-time object,b: interval}</td></tr><tr><td>int_length(int)</td><td>Length in seconds</td></tr><tr><td>int_flip(int)</td><td>反转</td></tr><tr><td>int_standardize(int)</td><td>标准化</td></tr><tr><td>int_shift(int, by)</td><td>平移interval</td></tr><tr><td>int_overlaps(int1, int2)</td><td>logical,判断int1和int2是否重叠</td></tr><tr><td>int_aligns(int1, int2)</td><td>int1, int2是否分享相同边界</td></tr><tr><td>int_diff(times)</td><td>用n个date-time分割成n-1个intervals向量</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; dt &lt;- today()</span><br><span class="line">&gt;&gt;&gt; c(dt, dt + <span class="number">100</span>, dt + <span class="number">1000</span>)%&gt;%int_diff()</span><br><span class="line"><span class="number">2018</span>-<span class="number">06</span>-<span class="number">03</span> UTC--<span class="number">2018</span>-<span class="number">09</span>-<span class="number">11</span> UTC     <span class="number">2018</span>-<span class="number">09</span>-<span class="number">11</span> UTC--<span class="number">2021</span>-<span class="number">02</span>-<span class="number">27</span> UTC</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; dt1 &lt;- interval(dt,dt+<span class="number">1</span>)</span><br><span class="line">&gt;&gt;&gt; int_shift(dt1, days(-<span class="number">1</span>))</span><br><span class="line"><span class="number">2018</span>-<span class="number">06</span>-<span class="number">02</span> UTC--<span class="number">2018</span>-<span class="number">06</span>-<span class="number">03</span> UTC</span><br></pre></td></tr></table></figure><h2 id="math-with-date-times"><a class="markdownIt-Anchor" href="#math-with-date-times"></a> Math with Date-times</h2><ol><li>夏令时(Daylight Saving Time, DST)</li></ol><p>夏令时（Daylight Saving Time：DST），又称“日光节约时制”和“夏令时间”，是一种为节约能源而人为规定地方时间的制度，在这一制度实行期间所采用的统一时间称为“夏令时间”。一般在天亮早的夏季人为将时间调快一小时，可以使人早起早睡，减少照明量，以充分利用光照资源，从而节约照明用电。各个采纳夏令时的国家具体规定不同。目前全世界有近110个国家每年要实行夏令时。</p><p><img alt="math" data-src="/images/lubridate_math.png"></p><ol start="2"><li>Date-times数学运算</li></ol><p>Date-times数学运算依赖于计算的时间点，位于夏令时开始、结束时间、润年、闰秒时，计算有所不同。<br>并不是所有的年都是365d，不是所有的分钟都是60s，普通的数据运算可能会产生虚拟日期，lubridate提供了操作符和函数。</p><table><thead><tr><th>数学运算</th><th>说明</th></tr></thead><tbody><tr><td><code>%m+%</code> and <code>%m-%</code></td><td>滚动到前一月的最后一天</td></tr><tr><td>add_with_rollback(e1, e2, roll_to_first =TRUE)</td><td>滚动到新一月的第一天</td></tr></tbody></table><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">jan31 &lt;- ymd(<span class="number">20180131</span>)</span><br><span class="line">jan31 + months(<span class="number">1</span>)</span><br><span class="line"><span class="comment">## NA </span></span><br><span class="line"></span><br><span class="line">jan31 %m+% months(<span class="number">1</span>)</span><br><span class="line"><span class="comment">## "2018-02-28"</span></span><br><span class="line"></span><br><span class="line">add_with_rollback(jan31, months(<span class="number">1</span>),roll_to_first = <span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment">## "2018-03-01"</span></span><br></pre></td></tr></table></figure><hr><h1 id="hms-time-of-day-values"><a class="markdownIt-Anchor" href="#hms-time-of-day-values"></a> hms: time-of-day values</h1><p>hms包提供了一个简单的类来存储持续时间或时间值，并以<code>hh:mm:ss</code>格式显示它们。该类旨在简化与数据库，电子表格和其他数据源的数据交换。</p><p><code>hms(seconds, minutes, hours, days)</code><br><code>as.hms(x)</code> x可以是字符，数字等</p><p><strong>Usage</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(hms)</span><br><span class="line">hms(<span class="number">56</span>, <span class="number">34</span>, <span class="number">12</span>)</span><br><span class="line"><span class="comment">#&gt; 12:34:56</span></span><br><span class="line">as.hms(<span class="number">1</span>)</span><br><span class="line"><span class="comment">#&gt; 00:00:01</span></span><br><span class="line">as.hms(<span class="string">"12:34:56"</span>)</span><br><span class="line"><span class="comment">#&gt; 12:34:56</span></span><br><span class="line">as.hms(Sys.time())</span><br><span class="line"><span class="comment">#&gt; 16:45:12.828186</span></span><br><span class="line">as.POSIXct(hms(<span class="number">1</span>))</span><br><span class="line"><span class="comment">#&gt; [1] "1970-01-01 00:00:01 UTC"</span></span><br><span class="line"></span><br><span class="line">data.frame(hours = <span class="number">1</span>:<span class="number">3</span>, hms = hms(hours = <span class="number">1</span>:<span class="number">3</span>))</span><br><span class="line"><span class="comment">#&gt;   hours      hms</span></span><br><span class="line"><span class="comment">#&gt; 1     1 01:00:00</span></span><br><span class="line"><span class="comment">#&gt; 2     2 02:00:00</span></span><br><span class="line"><span class="comment">#&gt; 3     3 03:00:00</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 日期和时间 </tag>
            
            <tag> lubridate </tag>
            
            <tag> hms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--stringr</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--stringr.html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--stringr.html</url>
      
        <content type="html"><![CDATA[<hr><a id="more"></a><h1 id="stringr-simple-consistent-wrappers-for-common-string-operations"><a class="markdownIt-Anchor" href="#stringr-simple-consistent-wrappers-for-common-string-operations"></a> stringr: Simple, Consistent Wrappers for Common String Operations</h1><table><thead><tr><th style="text-align:left">函数</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">str_c(…, sep = “”, collapse =NULL)</td><td>将单个字符向量合并成单个字符串时用collapse<br><em>(base::paste, base::paste0)</em></td></tr><tr><td style="text-align:left">str_length(string)</td><td>字符串中的字符数.<em>(base::nchar)</em></td></tr><tr><td style="text-align:left">str_trim(string, side = c(“both”, “left”, “right”))</td><td>去空白</td></tr><tr><td style="text-align:left">str_pad(string, width, side,pad = &quot; &quot;)</td><td>补充字符串的长度,side = c(“left”, “right”, “both”)</td></tr><tr><td style="text-align:left">str_dup(string, times)</td><td># 重复和连接strings</td></tr><tr><td style="text-align:left">str_to_upper(string); <br>str_to_lower; <br>str_to_title (首字母大写)</td><td></td></tr><tr><td style="text-align:left"><strong>起始位置取子集</strong></td><td></td></tr><tr><td style="text-align:left">str_sub(string, start , end)</td><td><em>base::substr</em></td></tr><tr><td style="text-align:left"><strong>匹配字符向量</strong></td><td></td></tr><tr><td style="text-align:left">str_detect(string, pattern)</td><td>返回逻辑值*(base::grepl)*</td></tr><tr><td style="text-align:left">str_subset(string, pattern)</td><td>返回匹配到的字符串(base::grep)</td></tr><tr><td style="text-align:left"><strong>提取匹配到的字符</strong></td><td></td></tr><tr><td style="text-align:left">str_extract(string, pattern)</td><td>提取首个匹配模式的字符</td></tr><tr><td style="text-align:left">str_extract_all(string, pattern, simplify = FALSE)</td><td><code>simplify</code>: If FALSE, the default, returns a list of character vectors</td></tr><tr><td style="text-align:left">str_count(string, pattern)</td><td>返回匹配到的数量</td></tr><tr><td style="text-align:left"><strong>替换匹配项</strong></td><td></td></tr><tr><td style="text-align:left">str_replace(string, pattern, replacement)</td><td></td></tr><tr><td style="text-align:left">str_replace_all(string, pattern, replacement)</td><td><code>str_replace_all(“fruits”, &quot;[aeiou]&quot;, toupper)</code></td></tr><tr><td style="text-align:left">str_replace_na(string, replacement = “NA”)</td><td></td></tr><tr><td style="text-align:left"><strong>分割字符串</strong></td><td></td></tr><tr><td style="text-align:left">str_split(string, pattern, n = Inf, simplify = FALSE)</td><td>n为分割数</td></tr><tr><td style="text-align:left">str_split_fixed(string, pattern, n)</td><td></td></tr><tr><td style="text-align:left"><strong>查找匹配项位置</strong></td><td></td></tr><tr><td style="text-align:left">str_locate(string, pattern)</td><td>#返回start ,end</td></tr><tr><td style="text-align:left">str_locate_all(string, pattern)</td><td></td></tr><tr><td style="text-align:left"><strong>字符串排序</strong></td><td></td></tr><tr><td style="text-align:left">str_order(x, decreasing =FALSE, na_last = TRUE)</td><td>返回对应的顺序数字<br><code>na_last</code>(NA位置): TRUE (末尾), FALSE(开始), NA(删除)</td></tr><tr><td style="text-align:left">str_sort(x, decreasing =FALSE, na_last)</td><td>返回排序后的向量</td></tr><tr><td style="text-align:left"><strong>pattern转化函数</strong></td><td></td></tr><tr><td style="text-align:left">regex(pattern, ignore_case = FALSE, multiline = FALSE, comments = FALSE, dotall = FALSE, …) <br><code>&gt;&gt;&gt; str_detect(c('Apple','a car'), regex('a',ignore_case = T))</code><br><code>[1] TRUE TRUE</code></td><td>ignore_case可以忽略大小写<br>multiline: If TRUE, <code>$</code>和<code>^</code>匹配开始和结尾位置<br>comments: If TRUE,以空格和#开头的将被忽略<br>dotall: If TRUE, . will also match line terminators.</td></tr></tbody></table><hr><h1 id="stringi"><a class="markdownIt-Anchor" href="#stringi"></a> stringi</h1><table><thead><tr><th style="text-align:left">函数</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">e1 %s+% e2</td><td>连接两个字符</td></tr><tr><td style="text-align:left">stri_enc_get()</td><td>获取默认编码</td></tr><tr><td style="text-align:left">stri_encode(str,from ,to,to_raw = FALSE)</td><td>转换编码</td></tr><tr><td style="text-align:left">stri_conv(str,from,to ,to_raw = FALSE)</td><td>转换编码</td></tr><tr><td style="text-align:left">stri_read_lines(fname, encoding = “auto”)</td><td><em>base::readLines</em></td></tr><tr><td style="text-align:left">stri_write_lines(str, fname, encoding = “UTF-8”)</td><td></td></tr></tbody></table><hr><h1 id="r语言编码"><a class="markdownIt-Anchor" href="#r语言编码"></a> R语言编码</h1><blockquote><p>Encoding(someX)&lt;-‘UTF-8’/‘GB2312’  #将正确的编码标记告诉 R<br>iconv(x,from,to)   #转换编码</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> stringr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Tidy+Transform)--dplyr and plyr</title>
      <link href="/posts/R/RNotebook(Tidy+Transform)--dplyr-and-plyr.html"/>
      <url>/posts/R/RNotebook(Tidy+Transform)--dplyr-and-plyr.html</url>
      
        <content type="html"><![CDATA[<p>dplyr: A Grammar of Data Manipulation<br>A fast, consistent tool for working with data frame like objects, both in memory and out of memory.</p><a id="more"></a><h1 id="dplyr"><a class="markdownIt-Anchor" href="#dplyr"></a> dplyr</h1><h2 id="转换和添加变量"><a class="markdownIt-Anchor" href="#转换和添加变量"></a> 转换和添加变量</h2><table><thead><tr><th style="text-align:left">函数</th><th>说明</th></tr></thead><tbody><tr><td style="text-align:left">mutate(data,…)</td><td>添加新变量*(base::transform)*，可以用已存在的变量，可以和聚合函数配合使用</td></tr><tr><td style="text-align:left">mutate_all(.tbl, .funs, …)</td><td><code>.funs</code>: List of function calls generated by funs(), or a character vector of function names, or simply a function</td></tr><tr><td style="text-align:left">mutate_if(.tbl, .predicate, .funs, …)</td><td><code>.predicate</code>: A predicate function to be applied to the columns or a logical vector</td></tr><tr><td style="text-align:left">mutate_at(.tbl, .vars, .funs, …)</td><td><code>.vars</code>: A list of columns generated by vars(), a character vector of column names, a numeric vector of column positions</td></tr><tr><td style="text-align:left">transmute(data,…)</td><td>添加新变量，去除已有的变量</td></tr><tr><td style="text-align:left">case_when(…)</td><td>if…else if…else变体,条件按顺序判定依次执行</td></tr></tbody></table><p><em><strong>for example</strong></em></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mtcars&lt;-mutate(mtcars,x=ifelse(x&gt;<span class="number">100</span>,<span class="literal">NA</span>,x)) <span class="comment">#处理异常值</span></span><br><span class="line">mtcars&lt;-mutate(mtcars,x=<span class="literal">NULL</span>) <span class="comment">#赋值NULL表示删除变量</span></span><br><span class="line">mtcars%&gt;%group_by(cyl)%&gt;%mutate(m=mean(mpg)) <span class="comment"># 添加组内平均值</span></span><br><span class="line">iris %&gt;% mutate_at(vars(matches(<span class="string">"Sepal"</span>)), log)</span><br><span class="line">iris %&gt;% as_tibble() %&gt;% mutate_if(is.factor, as.character)</span><br><span class="line">iris %&gt;% group_by(Species) %&gt;% mutate_all(funs(inches = . / <span class="number">2.54</span>))</span><br><span class="line"></span><br><span class="line">data %&gt;%mutate(</span><br><span class="line">    newvar = case_when(</span><br><span class="line">            cond1 ~ value1,</span><br><span class="line">            cond2 ~ value2,</span><br><span class="line">            <span class="literal">TRUE</span> ~ other_value )<span class="comment">#相当于else语句</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure><h2 id="筛选"><a class="markdownIt-Anchor" href="#筛选"></a> 筛选</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">filter(data,…)</td><td style="text-align:left">筛选*(base::subset(x, subset, select))*</td></tr><tr><td style="text-align:left">filter_all(.tbl, .vars_predicate)</td><td style="text-align:left"><code>.vars_predicate</code>: A quoted predicate expression as returned by all_vars() or any_vars()</td></tr><tr><td style="text-align:left">filter_if(.tbl, .predicate, .vars_predicate)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">filter_at(.tbl, .vars, .vars_predicate)</td><td style="text-align:left"><code>.vars</code>: A list of columns generated by vars(), a character vector of column names, a numeric vector of column positions<br><code>popular_dests &lt;- flights %&gt;% group_by(dest) %&gt;% filter(n() &gt; 365)</code></td></tr><tr><td style="text-align:left">slice(.data,…)</td><td style="text-align:left">切片<br><code>slice(mtcars, n())</code><br><code>slice(mtcars, 5:n())</code></td></tr></tbody></table><h2 id="select-and-rename"><a class="markdownIt-Anchor" href="#select-and-rename"></a> select  and rename</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">select()</td><td style="text-align:left">用变量名选择变量<br><code>select(flights, -(year:day))</code></td></tr><tr><td style="text-align:left">select_all(.tbl, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">select_if(.tbl, .predicate, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">select_at(.tbl, .vars, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rename()</td><td style="text-align:left">keeps all variables<br><code>rename(iris, oldname = newname,...)</code></td></tr><tr><td style="text-align:left">rename_all(.tbl, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rename_if(.tbl, .predicate, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rename_at(.tbl, .vars, .funs = list(), …)</td><td style="text-align:left"></td></tr></tbody></table><p><strong>参数<code>.vars</code></strong>：</p><table><thead><tr><th style="text-align:left">赋值</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">ends_with()</td><td style="text-align:left">ends with aprefix<br><code>select(iris, starts_with(&quot;Petal&quot;))</code></td></tr><tr><td style="text-align:left">contains()</td><td style="text-align:left">containsaliteralstring</td></tr><tr><td style="text-align:left">matches()</td><td style="text-align:left">匹配正则表达式(regularexpression)</td></tr><tr><td style="text-align:left">num_range()</td><td style="text-align:left">类数字区域likex01,x02,x03.</td></tr><tr><td style="text-align:left">one_of()</td><td style="text-align:left">variables in character vector.</td></tr><tr><td style="text-align:left">everything()</td><td style="text-align:left">换位置输出<br><code>select(flights, time_hour, air_time, everything())</code></td></tr></tbody></table><h2 id="分组"><a class="markdownIt-Anchor" href="#分组"></a> 分组</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">group_by(.data, …, add = FALSE)/</td><td style="text-align:left">分组，大多数函数可用已分的组</td></tr><tr><td style="text-align:left">group_by_all(.tbl, .funs = list(), …)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">group_by_at(.tbl, .vars, .funs = list(), …,)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">group_by_if(.tbl, .predicate, .funs = list(), …,)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ungroup()</td><td style="text-align:left">解除分组</td></tr><tr><td style="text-align:left">base::by(data, INDICES, FUN)</td><td style="text-align:left"><code>indices</code>:要分组的factor or factor list</td></tr></tbody></table><h2 id="聚合"><a class="markdownIt-Anchor" href="#聚合"></a> 聚合</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">summarise()</td><td style="text-align:left">reduces multiple values down to a single summary.</td></tr><tr><td style="text-align:left">summarise_all(.tbl, .funs, …)</td><td style="text-align:left"><code>.funs</code>: List of function calls generated by funs(), or a character vector of function names, or simply a function</td></tr><tr><td style="text-align:left">summarise_if(.tbl, .predicate, .funs, …)</td><td style="text-align:left"><code>.predicate</code>: A predicate function to be applied to the columns or a logical vector</td></tr><tr><td style="text-align:left">summarise_at(.tbl, .vars, .funs, …)</td><td style="text-align:left"><code>.vars</code>: A list of columns generated by vars(), a character vector of column names, a numeric vector of column positions</td></tr><tr><td style="text-align:left">do(data,…)</td><td style="text-align:left">补充函数，可以聚合任何函数*(plyr::dlply)*<br><code>a&lt;-iris%&gt;%group_by(Species)%&gt;%do(s=summary(.))</code></td></tr></tbody></table><p><em><strong>for example</strong></em></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mtcars %&gt;% group_by(cyl) %&gt;% summarise(a = n(), b = a + <span class="number">1</span>)</span><br><span class="line">iris %&gt;% group_by(Species) %&gt;% summarise_all(mean)</span><br><span class="line">iris %&gt;% group_by(Species)%&gt;% summarise_all(funs(min, max))</span><br><span class="line">iris %&gt;% group_by(Species)%&gt;% summarise_all(c(<span class="string">"min"</span>, <span class="string">"max"</span>))</span><br><span class="line">iris %&gt;% group_by(Species)%&gt;% summarise_all(funs(Q3 = quantile), probs = <span class="number">0.75</span>)</span><br><span class="line">starwars %&gt;% summarise_at(c(<span class="string">"height"</span>, <span class="string">"mass"</span>), mean, na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">starwars %&gt;% summarise_at(vars(height:mass), mean, na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">starwars %&gt;% summarise_if(is.numeric, mean, na.rm = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><h2 id="排序和排名"><a class="markdownIt-Anchor" href="#排序和排名"></a> 排序和排名</h2><table><thead><tr><th style="text-align:left">排序</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>arrange(data,…, .by_group = FALSE)</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>arrange_all, arrange_at, arrange_if</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>desc(x)</code></td><td style="text-align:left">降序</td></tr><tr><td style="text-align:left"><strong>排名</strong></td><td style="text-align:left"><em>(base::rank)</em></td></tr><tr><td style="text-align:left">row_number(x)</td><td style="text-align:left">先出现先排名</td></tr><tr><td style="text-align:left">min_rank(x)</td><td style="text-align:left">以最小的排名计</td></tr><tr><td style="text-align:left">dense_rank(x)</td><td style="text-align:left">like min_rank(), but with no gaps between ranks</td></tr><tr><td style="text-align:left">percent_rank(x)</td><td style="text-align:left">百分比排名</td></tr><tr><td style="text-align:left">cume_dist(x)</td><td style="text-align:left">累积百分比排名(&lt;=当前排名的比例)</td></tr><tr><td style="text-align:left">ntile(x,n)</td><td style="text-align:left">分成n级的粗略排名</td></tr></tbody></table><p><em><strong>for example</strong></em><br><code>arrange(mtcars, cyl,desc(disp))</code></p><h2 id="表连接"><a class="markdownIt-Anchor" href="#表连接"></a> 表连接</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明*(base::merge)*</th></tr></thead><tbody><tr><td style="text-align:left">inner_join(x, y, by = NULL);<br>left_join; right_join; full_join;</td><td style="text-align:left">1.连接键名相同时，by=c(‘id1’, ‘id2’)<br>2. 连接键名不相同时,by = c(“a” = “b”)</td></tr><tr><td style="text-align:left">semi_join</td><td style="text-align:left">返回y中匹配到的x(x only)</td></tr><tr><td style="text-align:left">anti_join</td><td style="text-align:left">返回y中没有匹配到的x(x only)</td></tr><tr><td style="text-align:left"><strong>行/列合并：</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">bind_rows(…, .id = NULL)</td><td style="text-align:left"><em>base::rbinds</em></td></tr><tr><td style="text-align:left">bind_cols(…)</td><td style="text-align:left"><em>base::colbinds</em></td></tr></tbody></table><h2 id="集合运算"><a class="markdownIt-Anchor" href="#集合运算"></a> 集合运算</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">intersect(x, y)</td><td style="text-align:left">返回x和y交集。</td></tr><tr><td style="text-align:left">union(x, y)</td><td style="text-align:left">返回x和y并集。</td></tr><tr><td style="text-align:left">setdiff(x, y)</td><td style="text-align:left">返回在x，但不在y数据（差集）</td></tr><tr><td style="text-align:left">setequle(x,y)</td><td style="text-align:left">逻辑，x和y是否相等</td></tr></tbody></table><h2 id="计数"><a class="markdownIt-Anchor" href="#计数"></a> 计数</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明*(base::nrow)*</th></tr></thead><tbody><tr><td style="text-align:left">n()</td><td style="text-align:left">记录数，<code>summarise(), mutate() and filter()</code> 配合函数</td></tr><tr><td style="text-align:left">n_distinct(…, na.rm = FALSE)</td><td style="text-align:left">唯一值计数</td></tr><tr><td style="text-align:left">tally(x, wt, sort = FALSE)</td><td style="text-align:left">计数  <code>mtcars %&gt;% tally()</code></td></tr><tr><td style="text-align:left">count(x, …, wt = NULL, sort = FALSE)</td><td style="text-align:left">组内计数  group_by() + tally() <br> <code>mtcars %&gt;% count(cyl) # cyl分组计数</code></td></tr><tr><td style="text-align:left">add_tally(x, wt, sort = FALSE)</td><td style="text-align:left">添加计数变量  mutate()+tally() <br><code>mtcars %&gt;% add_tally()</code></td></tr><tr><td style="text-align:left">add_count(x, …, wt = NULL, sort = FALSE)</td><td style="text-align:left">添加组内计数变量  group_by() + add_tally() <br><code>mtcars %&gt;% add_count(cyl)</code></td></tr></tbody></table><h2 id="去重"><a class="markdownIt-Anchor" href="#去重"></a> 去重</h2><p><code>distinct(.data, ..., .keep_all = FALSE)</code><br><em>(base::duplicated, base::unique)</em></p><blockquote><ul><li>分组后组内去重</li><li>…  : 指定要去重的列</li><li>.keep_all  是否保留全部列</li></ul></blockquote><p><code>df%&gt;%group_by(col1)%&gt;%distinct(col2,.keep_all=TRUE)</code></p><h2 id="抽样dataframe"><a class="markdownIt-Anchor" href="#抽样dataframe"></a> 抽样(data.frame)</h2><p><strong>for data.frame:</strong><br><code>sample_n(tbl, size, replace = FALSE)</code><br><code>sample_frac(tbl, size, replace = FALSE)</code></p><blockquote><p><strong>for vector:</strong><br>base::sample(x,size,replace=FALSE,prob=NULL)</p></blockquote><h2 id="其他函数"><a class="markdownIt-Anchor" href="#其他函数"></a> 其他函数</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">nth(x,n,order_by = NULL)<br>first();last()<br>top_n(x, n, wt)</td><td style="text-align:left">提取 first, last or nth value from a vector<br>参数wt排序变量</td></tr><tr><td style="text-align:left">lead(x,n)</td><td style="text-align:left">偏移量</td></tr><tr><td style="text-align:left">lag(x,n)</td><td style="text-align:left">超前或滞后值</td></tr><tr><td style="text-align:left">between(x, left, right)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">if_else(condition, true, false, missing = NULL)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">near(x, y)</td><td style="text-align:left">判断浮点数相等</td></tr><tr><td style="text-align:left">all_vars(expr),any_vars(expr)</td><td style="text-align:left">Apply predicate to all variables</td></tr><tr><td style="text-align:left"><strong><code>vars()</code></strong></td><td style="text-align:left">Select variables</td></tr><tr><td style="text-align:left"><strong><code>funs()</code></strong></td><td style="text-align:left">Create a list of functions calls</td></tr></tbody></table><h1 id="plyr-tools-for-splitting-applying-and-combining-data"><a class="markdownIt-Anchor" href="#plyr-tools-for-splitting-applying-and-combining-data"></a> plyr: Tools for Splitting, Applying and Combining Data</h1><p><strong>函数统一格式：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* * ply</span><br><span class="line">|  ---&gt;data structure be processed</span><br><span class="line">----&gt; data structure be returned</span><br></pre></td></tr></table></figure><blockquote><p>a: array<br>l: list<br>d: data.frame<br>m: multiple inputs<br>r: repeat multiple times<br>_: nothing</p></blockquote><p><em><strong>for example</strong></em></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aaply(.data, .margins, .fun = <span class="literal">NULL</span>, <span class="keyword">...</span>,.progress = <span class="string">"none"</span>)</span><br><span class="line">ddply(.data, .variables, .fun = <span class="literal">NULL</span>, <span class="keyword">...</span>, .progress = <span class="string">"none"</span>)</span><br><span class="line">mdply(cbind(mean = <span class="number">1</span>:<span class="number">5</span>, sd = <span class="number">1</span>:<span class="number">5</span>), rnorm, n = <span class="number">5</span>)</span><br></pre></td></tr></table></figure><blockquote><p><code>参数.progress</code> in (“none”/”text”/”tk”/”win”)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Tidy+Transform </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 数据清洗 </tag>
            
            <tag> dplyr </tag>
            
            <tag> plyr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式</title>
      <link href="/posts/regular-expression.html"/>
      <url>/posts/regular-expression.html</url>
      
        <content type="html"><![CDATA[<p>正则表达式是对字符串（包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符”））操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。正则表达式是一种文本模式，该模式描述在搜索文本时要匹配的一个或多个字符串。</p><p>Cheat Sheet：<a href="https://rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf" target="_blank" rel="noopener">Basic Regular Expressions in R </a></p><h1 id="正则表达式"><a class="markdownIt-Anchor" href="#正则表达式"></a> 正则表达式</h1><p><strong>普通字符</strong>：普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。可直接匹配自身。<br><strong>元字符</strong>：元字符加斜杠\匹配自身(在R中斜杠为<code>\\</code>，匹配<code>+</code>应写为<code>\\+</code></p><h2 id="非打印字符"><a class="markdownIt-Anchor" href="#非打印字符"></a> 非打印字符</h2><p>非打印字符也可以是正则表达式的组成部分。下表列出了表示非打印字符的转义序列</p><table><thead><tr><th>字符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td>\cx</td><td style="text-align:left">匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。<br>x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td></tr><tr><td>\f</td><td style="text-align:left">换页符</td></tr><tr><td>\n</td><td style="text-align:left">换行符</td></tr><tr><td>\r</td><td style="text-align:left">回车符</td></tr><tr><td>\t</td><td style="text-align:left">制表符</td></tr><tr><td>\v</td><td style="text-align:left">垂直制表符</td></tr><tr><td>\s</td><td style="text-align:left">空白字符，等价于<code>[ \f\n\r\t\v]</code></td></tr><tr><td>\S</td><td style="text-align:left">非空白字符，等价于<code>[^ \f\n\r\t\v]</code></td></tr></tbody></table><h2 id="打印字符"><a class="markdownIt-Anchor" href="#打印字符"></a> 打印字符</h2><table><thead><tr><th>打印字符</th><th>描述</th><th>等价</th></tr></thead><tbody><tr><td><code>.</code>(dot)</td><td>匹配除换行符、制表符之外的任何单个字符</td><td><code>[^\n\r]</code></td></tr><tr><td>\d</td><td>匹配一个数字</td><td><code>[0-9]</code></td></tr><tr><td>\D</td><td>匹配一个非数字</td><td><code>[^0-9]</code></td></tr><tr><td>\w</td><td>匹配字母、数字、下划线</td><td><code>[A-Za-z0-9_]</code></td></tr><tr><td>\W</td><td>匹配非字母、数字、下划线</td><td><code>[^A-Za-z0-9_]</code></td></tr></tbody></table><h2 id="限定符"><a class="markdownIt-Anchor" href="#限定符"></a> 限定符</h2><table><thead><tr><th>限定符</th><th>描述</th><th>等价</th></tr></thead><tbody><tr><td>*</td><td>零次或多次</td><td>{0,}</td></tr><tr><td>+</td><td>一次或多次</td><td>{1,}</td></tr><tr><td>?</td><td>零次或一次</td><td>{0,1}</td></tr><tr><td>{n}</td><td>匹配确定的n次</td><td></td></tr><tr><td>{n,}</td><td>至少匹配n次</td><td></td></tr><tr><td>{n,m}</td><td>匹配&gt;=n且&lt;=m次</td><td></td></tr></tbody></table><div class="note warning">            <p>限定符都是贪婪匹配，在之后放置 ?，可转换为最小匹配（如*?）</p>          </div><h2 id="定位符"><a class="markdownIt-Anchor" href="#定位符"></a> 定位符</h2><table><thead><tr><th>定位符</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>$</td><td>匹配结尾位置</td><td><code>(.csv)$</code></td></tr><tr><td>^</td><td>匹配开始位置</td><td><code>^(Windows)</code></td></tr><tr><td>\b</td><td>匹配单词边界位置</td><td><code>er\b</code> 可以匹配<code>never</code> 中的 <code>er</code>，但不能匹配 <code>verb</code> 中的 <code>er</code></td></tr><tr><td>\B</td><td>匹配非单词边界位置</td><td><code>er\B</code> 能匹配 <code>verb</code> 中的 <code>er</code>，但不能匹配 <code>never</code> 中的 <code>er</code></td></tr></tbody></table><h2 id="选择"><a class="markdownIt-Anchor" href="#选择"></a> 选择</h2><table><thead><tr><th>选择</th><th>描述</th><th>举例</th></tr></thead><tbody><tr><td><code>(pattern)</code></td><td>匹配pattern并获取结果</td><td></td></tr><tr><td><code>(?:pattern)</code></td><td>匹配 pattern 但不获取匹配结果</td><td><code>Win(?:7\|10)</code>相当于<code>Win7\|Win10</code>简略版</td></tr><tr><td><code>(?=pattern)</code></td><td>正向肯定预查（look ahead positive assert)</td><td><code>Win(?=XP)</code>能匹配<code>WinXP</code>中的<code>Win</code>，但不能匹配<code>Win10</code>中的<code>Win</code></td></tr><tr><td><code>(?!pattern)</code></td><td>正向否定预查(negative assert)</td><td><code>Win(?!XP)</code>能匹配&quot;Win10&quot;中的<code>Win</code>，但不能匹配<code>WinXP</code>中的<code>Win</code></td></tr><tr><td><code>(?&lt;=pattern)</code></td><td>反向(look behind)肯定预查</td><td><code>(?&lt;=7)Win</code>能匹配<code>7Win</code>中的<code>Win</code>，但不能匹配<code>10Win</code>中的<code>Win</code></td></tr><tr><td><code>(?&lt;!pattern)</code></td><td>反向否定预查</td><td><code>(?&lt;!7)Win</code>能匹配<code>10Win</code>中的<code>Win</code>，但不能匹配<code>7Win</code>中的<code>Win</code></td></tr></tbody></table><h2 id="字符集合"><a class="markdownIt-Anchor" href="#字符集合"></a> 字符集合</h2><table><thead><tr><th>字符集合</th><th>描述</th></tr></thead><tbody><tr><td>x | y</td><td>或，优先级最低</td></tr><tr><td>[xyz]</td><td>字符集合，匹配任意一个</td></tr><tr><td>[a-z]</td><td>小写字母</td></tr><tr><td>[0-9]</td><td>数字</td></tr><tr><td>[^xyz]</td><td>匹配不在集合里的任意字符</td></tr><tr><td>[^a-z]</td><td>除了小写字母</td></tr><tr><td>[A-Z]</td><td>大写字母</td></tr><tr><td>\num</td><td>匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。<br>例如，’(.)\1’ 匹配两个连续的相同字符。</td></tr></tbody></table><h1 id="r语言通用字符集"><a class="markdownIt-Anchor" href="#r语言通用字符集"></a> R语言通用字符集</h1><table><thead><tr><th style="text-align:left">字符集合</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">[:punct:]</td><td style="text-align:left">punctuation</td></tr><tr><td style="text-align:left">[:alpha:]</td><td style="text-align:left">letters.</td></tr><tr><td style="text-align:left">[:lower:]</td><td style="text-align:left">lowercase letters.</td></tr><tr><td style="text-align:left">[:upper:]</td><td style="text-align:left">upperclass letters.</td></tr><tr><td style="text-align:left">[:digit:]</td><td style="text-align:left">digits.</td></tr><tr><td style="text-align:left">[:xdigit:]</td><td style="text-align:left">hex digits.</td></tr><tr><td style="text-align:left">[:alnum:]</td><td style="text-align:left">letters and numbers.</td></tr><tr><td style="text-align:left">[:cntrl:]</td><td style="text-align:left">control characters.</td></tr><tr><td style="text-align:left">[:graph:]</td><td style="text-align:left">letters, numbers, and punctuation.</td></tr><tr><td style="text-align:left">[:print:]</td><td style="text-align:left">letters, numbers, punctuation, and whitespace.</td></tr><tr><td style="text-align:left">[:space:]</td><td style="text-align:left">space characters (basically equivalent to \s).</td></tr><tr><td style="text-align:left">[:blank:]</td><td style="text-align:left">space and tab.</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Regular Expression </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Import)--rvest</title>
      <link href="/posts/R/RNotebook(Import)--rvest.html"/>
      <url>/posts/R/RNotebook(Import)--rvest.html</url>
      
        <content type="html"><![CDATA[<p>rvest: Simple web scraping for R</p><a id="more"></a><h1 id="解析html"><a class="markdownIt-Anchor" href="#解析html"></a> 解析html</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">read_html(x, …, encoding = “”)</td><td style="text-align:left">x为a url或 a local path</td></tr><tr><td style="text-align:left">html_nodes(x, css, xpath)</td><td style="text-align:left">通过使用 XPath and css ，<strong>selectors</strong><code>( read vignette(&quot;selectorgadget&quot;)</code> to learn about it)选择文档的一部分</td></tr></tbody></table><h1 id="提取组件"><a class="markdownIt-Anchor" href="#提取组件"></a> 提取组件</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">html_text(x)</td><td style="text-align:left">提取标签内的文本</td></tr><tr><td style="text-align:left">html_attr (x,name)</td><td style="text-align:left">提取单个属性的内容，如href超链接</td></tr><tr><td style="text-align:left">html_attrs(x)</td><td style="text-align:left">所有属性</td></tr><tr><td style="text-align:left">html_tag(x)</td><td style="text-align:left">标签名</td></tr><tr><td style="text-align:left">html_table()</td><td style="text-align:left">Parse html tables into data frames</td></tr></tbody></table><blockquote><p><strong>for XML:</strong>  read_xml , xml_node, xml_attr, xml_attrs, xml_text and xml_tag</p></blockquote><h1 id="提取修改和提交形式的函数"><a class="markdownIt-Anchor" href="#提取修改和提交形式的函数"></a> 提取，修改和提交形式的函数</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html_form()</span><br><span class="line">set_values() </span><br><span class="line">submit_form()</span><br></pre></td></tr></table></figure><h1 id="浏览网站"><a class="markdownIt-Anchor" href="#浏览网站"></a> 浏览网站</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">html_session()</span><br><span class="line">jump_to()</span><br><span class="line">follow_link()</span><br><span class="line">back(), forward()</span><br><span class="line">submit_form()</span><br><span class="line"><span class="comment"># and so on</span></span><br></pre></td></tr></table></figure><p><strong>Examples</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lego_movie &lt;-read_html(<span class="string">"http://www.imdb.com/title/tt1490017/"</span>)</span><br><span class="line">rating &lt;- lego_movie %&gt;%</span><br><span class="line">  html_nodes(<span class="string">"strong span"</span>) %&gt;%</span><br><span class="line">  html_text() %&gt;%</span><br><span class="line">  as.numeric()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Import </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> rvest </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Import)--DBI</title>
      <link href="/posts/R/RNotebook(Import)--DBI.html"/>
      <url>/posts/R/RNotebook(Import)--DBI.html</url>
      
        <content type="html"><![CDATA[<h1 id="dbi-definition-for-communication-between-r-and-rdbmss"><a class="markdownIt-Anchor" href="#dbi-definition-for-communication-between-r-and-rdbmss"></a> DBI: definition for communication between R and RDBMSs</h1><p>DBI只使用 “front-end” API  ,通过调用”drivers”（其他包）与特定的 DBMSs (SQLite, MySQL, PostgreSQL, MonetDB, etc.) 通信</p><a id="more"></a><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">dbConnect(drv, …)<br>dbDisconnect(conn, …)</td><td style="text-align:left">连接/断开DBMS</td></tr><tr><td style="text-align:left">dbListTables(conn)</td><td style="text-align:left">列出远程表名称</td></tr><tr><td style="text-align:left">dbListFields(conn, name)</td><td style="text-align:left">列出远程表字段名称</td></tr><tr><td style="text-align:left">dbReadTable(conn, name)</td><td style="text-align:left">Reads a database table to a data frame</td></tr><tr><td style="text-align:left">dbWriteTable(conn, name, value)</td><td style="text-align:left">Writes, overwrites(覆盖) or appends(追加) a data frame to a database table</td></tr><tr><td style="text-align:left">dbRemoveTable(conn, name)</td><td style="text-align:left">删除远程表</td></tr><tr><td style="text-align:left">dbSendQuery(conn, statement)</td><td style="text-align:left">执行SQL语句查询</td></tr></tbody></table><p><em><strong>for example:</strong></em></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">con &lt;- dbConnect(RSQLite::SQLite(), dbname = <span class="string">":memory:"</span>)</span><br><span class="line"><span class="comment"># ":memory:"为内存数据库</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Import </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> database </tag>
            
            <tag> DBI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Import)--for csv, xlsx and json</title>
      <link href="/posts/R/RNotebook(Import)--read-csv-xlsx-or-json.html"/>
      <url>/posts/R/RNotebook(Import)--read-csv-xlsx-or-json.html</url>
      
        <content type="html"><![CDATA[<p>R语言导入常用文件的包</p><ul><li>readr: 可读取文本型文件</li><li>readxl: 读取excel文件</li><li>openxlsx: 可读取、写入和编辑excel文件</li><li>jsonlite: 读取json文件</li></ul><a id="more"></a><h1 id="readr-read-rectangular-text-data"><a class="markdownIt-Anchor" href="#readr-read-rectangular-text-data"></a> readr: Read Rectangular Text Data</h1><h2 id="save-data"><a class="markdownIt-Anchor" href="#save-data"></a> Save Data</h2><table><thead><tr><th style="text-align:left">保存类型</th><th style="text-align:left">函数</th></tr></thead><tbody><tr><td style="text-align:left">逗号分隔文件<br><em>base::write.csv()</em></td><td style="text-align:left">write_csv(x, path, na = “NA”, append = FALSE,col_names = !append)</td></tr><tr><td style="text-align:left">任意符号分隔</td><td style="text-align:left">write_delim(x, path, delim = &quot; &quot;, na = “NA”,append = FALSE, col_names = !append)</td></tr><tr><td style="text-align:left">CSV for excel</td><td style="text-align:left">write_excel_csv(x, path, na = “NA”, append =FALSE, col_names = !append)</td></tr><tr><td style="text-align:left">String to file</td><td style="text-align:left">write_file(x, path, append = FALSE)</td></tr><tr><td style="text-align:left">String vector to file, one element per line</td><td style="text-align:left">write_lines(x,path, na = “NA”, append = FALSE)</td></tr><tr><td style="text-align:left">RDS文件</td><td style="text-align:left">write_rds(x, path, compress = c(“none”, “gz”,“bz2”,“xz”), …)</td></tr><tr><td style="text-align:left">Tab分隔</td><td style="text-align:left">write_tsv(x, path, na = “NA”, append = FALSE,col_names = !append)</td></tr></tbody></table><h2 id="read-tabular-data"><a class="markdownIt-Anchor" href="#read-tabular-data"></a> Read Tabular Data</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">read_*(file, col_names = <span class="literal">TRUE</span>, col_types = <span class="literal">NULL</span>, locale = default_locale(), na = c(<span class="string">""</span>, <span class="string">"NA"</span>),</span><br><span class="line">  quoted_na = <span class="literal">TRUE</span>, comment = <span class="string">""</span>, trim_ws = <span class="literal">TRUE</span>, skip = <span class="number">0</span>, n_max = <span class="literal">Inf</span>, guess_max = min(<span class="number">1000</span>,n_max), </span><br><span class="line">  progress = interactive())</span><br><span class="line"><span class="comment"># read_* 函数共享这些参数</span></span><br></pre></td></tr></table></figure><p><img alt data-src="/images/readr.png"></p><table><thead><tr><th style="text-align:left">规整类型</th><th style="text-align:left">函数（示例）</th></tr></thead><tbody><tr><td style="text-align:left">Comma Delimited Files(逗号分隔)</td><td style="text-align:left">read_csv(“file.csv”)</td></tr><tr><td style="text-align:left">Semi-colon Delimited Files(分号分隔)</td><td style="text-align:left">read_csv2(“file2.csv”)</td></tr><tr><td style="text-align:left">Files with Any Delimiter(任意分隔符)</td><td style="text-align:left">read_delim(“file.txt”, delim = “|”)</td></tr><tr><td style="text-align:left">Fixed Width Files(固定宽度)</td><td style="text-align:left">read_fwf(“file.fwf”, col_positions = c(1, 3, 5))</td></tr><tr><td style="text-align:left">Tab Delimited Files(Tab分隔符<code>\t</code>)</td><td style="text-align:left">read_tsv(“file.tsv”) Also read_table().</td></tr></tbody></table><blockquote><p><strong>常用参数</strong><br>col_names: logic or string vector, 列名<br>skip: int, 跳过第n行<br>na: 指定用于表示文件中缺失值的值<br>comment = “#”: 删除以#开头的所有行<br>progress = show_progress(): 进度条：(“none”/“text”/“tk”/“win”)</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">write_file(<span class="string">"a,b,c\n1,2,3\n4,5,NA"</span>,<span class="string">"file.csv"</span>)</span><br><span class="line">f &lt;- <span class="string">"file.csv"</span>           <span class="comment">#Example file</span></span><br><span class="line"></span><br><span class="line">read_csv(f, col_names = <span class="literal">FALSE</span>)     <span class="comment">#No header</span></span><br><span class="line">read_csv(f, col_names = c(<span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>))   <span class="comment">#Provide header</span></span><br><span class="line">read_csv(f, skip = <span class="number">1</span>)      <span class="comment">#Skip lines</span></span><br><span class="line">read_csv(f, n_max = <span class="number">1</span>)     <span class="comment">#Read in a subset</span></span><br><span class="line">read_csv(f, na = c(<span class="string">"1"</span>, <span class="string">"."</span>))  <span class="comment">#Missing Values</span></span><br></pre></td></tr></table></figure><h2 id="read-non-tabular-data"><a class="markdownIt-Anchor" href="#read-non-tabular-data"></a> Read Non-Tabular Data</h2><table><thead><tr><th style="text-align:left">非规整类型</th><th style="text-align:left">函数</th></tr></thead><tbody><tr><td style="text-align:left">read_file(file, locale = default_locale())</td><td style="text-align:left">读入单独的字符串中</td></tr><tr><td style="text-align:left">read_lines(file, skip = 0, n_max = -1L, na = character(),<br>locale = default_locale(), progress = interactive())</td><td style="text-align:left">每行读入一个字符串</td></tr><tr><td style="text-align:left">read_file_raw(file)</td><td style="text-align:left">读入原始向量中</td></tr><tr><td style="text-align:left">read_lines_raw(file, skip = 0, n_max = -1L,progress = interactive())</td><td style="text-align:left">每行读入一个原始向量</td></tr><tr><td style="text-align:left">read_log(file, col_names = FALSE, col_types = NULL, <br>skip = 0, n_max = -1, progress = interactive())</td><td style="text-align:left">读取Apache日志文件</td></tr></tbody></table><h2 id="data-types"><a class="markdownIt-Anchor" href="#data-types"></a> Data types</h2><p><code>readr</code> 函数猜测每一列适合的数据类型并且转化，但不会将字符串类型转化为factor<br>col_types参数对列数据类型的解析（示例）：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">col_types=cols(</span><br><span class="line">  age = col_integer(),</span><br><span class="line">  sex = col_character(),</span><br><span class="line">  earn = col_double()</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol><li><p>用<code>problems()</code>函数去判断<br><code>x &lt;- read_csv(&quot;file.csv&quot;); problems(x)</code></p></li><li><p>可以<code>col_ function</code>函数引导解析，也可以字符格式读入，然后用<code>parse_ function</code> 函数解析<br>col_ function|parse_ function<br>------|------<br>col_guess() <em>the default</em> |parse_guess()<br>col_character()|parse_character()<br>col_double(), col_euro_double()|parse_double()<br>col_datetime(format = “”)<br> col_date(format = “”), col_time(format = “”)|parse_datetime()<br>parse_date() and parse_time()<br>col_factor(levels, ordered = FALSE)|parse_factor()<br>col_integer()|parse_integer()<br>col_logical()|parse_logical()<br>col_number(), col_numeric()|parse_number()<br>col_skip()|不解析</p></li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- read_csv(<span class="string">"file.csv"</span>, col_types = cols(</span><br><span class="line">  A = col_double(),</span><br><span class="line">  B = col_logical(),</span><br><span class="line">  C = col_factor()))</span><br><span class="line"></span><br><span class="line">x$A &lt;- parse_number(x$A)</span><br></pre></td></tr></table></figure><h1 id="readxl-for-excel"><a class="markdownIt-Anchor" href="#readxl-for-excel"></a> readxl: for excel</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取excel文件</span></span><br><span class="line">read_excel(path, sheet = <span class="literal">NULL</span>, range = <span class="literal">NULL</span>, col_names = <span class="literal">TRUE</span>,</span><br><span class="line">  col_types = <span class="literal">NULL</span>, na = <span class="string">""</span>, trim_ws = <span class="literal">TRUE</span>, skip = <span class="number">0</span>, n_max = <span class="literal">Inf</span>,</span><br><span class="line">  guess_max = min(<span class="number">1000</span>, n_max))</span><br><span class="line">read_xls()</span><br><span class="line">read_xlsx()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出excel文件中的所有sheet</span></span><br><span class="line">excel_sheets(path)</span><br></pre></td></tr></table></figure><p><strong>读取单元格的指定范围</strong>：以<code>A1：D10</code>样式</p><p><code>cellranger::cell_limits()</code><br><code>cellranger::cell_rows()</code><br><code>cellranger::cell_cols()</code><br><code>cellranger::anchored()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">read_excel(path, range = <span class="string">"B3:D6"</span>)</span><br><span class="line">read_excel(path, range = cell_rows(<span class="number">3</span>:<span class="number">6</span>))</span><br><span class="line">read_excel(path, range = cell_cols(<span class="string">"C:D"</span>))</span><br><span class="line">read_excel(path, range = cell_cols(<span class="number">2</span>))</span><br><span class="line">read_excel(path, range = cell_limits(c(<span class="number">4</span>, <span class="number">3</span>), c(<span class="literal">NA</span>, <span class="literal">NA</span>)))</span><br></pre></td></tr></table></figure><h1 id="openxlsx-xlsx-reading-writing-and-editing"><a class="markdownIt-Anchor" href="#openxlsx-xlsx-reading-writing-and-editing"></a> openxlsx: xlsx reading, writing and editing</h1><p>openxlsx包括读写及编辑excel文件，集成极为丰富的函数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">read.xlsx(xlsxFile, sheet = <span class="number">1</span>, startRow = <span class="number">1</span>, colNames = <span class="literal">TRUE</span>,</span><br><span class="line">  rowNames = <span class="literal">FALSE</span>, detectDates = <span class="literal">FALSE</span>, skipEmptyRows = <span class="literal">TRUE</span>,</span><br><span class="line">  skipEmptyCols = <span class="literal">TRUE</span>, rows = <span class="literal">NULL</span>, cols = <span class="literal">NULL</span>, check.names = <span class="literal">FALSE</span>,</span><br><span class="line">  namedRegion = <span class="literal">NULL</span>, na.strings = <span class="string">"NA"</span>, fillMergedCells = <span class="literal">FALSE</span>)`</span><br><span class="line"></span><br><span class="line">write.xlsx(x, file, asTable = FALSE, ...)</span><br></pre></td></tr></table></figure><h1 id="jsonlite-for-json"><a class="markdownIt-Anchor" href="#jsonlite-for-json"></a> jsonlite: for json</h1><ol><li>读入/写出JSON<br><code>read_json(path, simplifyVector = FALSE, ...)</code><br><code>write_json(x, path, ...)</code></li><li>JSON和R对象之间转换<br><code>fromJSON(txt)</code><br><code>toJSON(x)</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Import </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> csv </tag>
            
            <tag> xlsx </tag>
            
            <tag> json </tag>
            
            <tag> readr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Common)--R6 and S4</title>
      <link href="/posts/R/RNotebook(Common)--Object-Oriented(R6-and-S4).html"/>
      <url>/posts/R/RNotebook(Common)--Object-Oriented(R6-and-S4).html</url>
      
        <content type="html"><![CDATA[<p>R 主要面向统计计算，似乎很少会用到面向对象的编程方法。但在统计计算中，在下列情形中使用面向对象的编程方法可以编程更有效率。</p><a id="more"></a><h1 id="面向对象r6类"><a class="markdownIt-Anchor" href="#面向对象r6类"></a> 面向对象R6类</h1><p>R 的面向对象 (OOP) 是基于泛型函数 (generic function) 的，而不是基于类层次结构</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(R6)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建R6类</span></span><br><span class="line">R6Class(classname = <span class="literal">NULL</span>, public = list(), private = <span class="literal">NULL</span>,active = <span class="literal">NULL</span>, inherit = <span class="literal">NULL</span>, lock = <span class="literal">TRUE</span>, class = <span class="literal">TRUE</span>,portable = <span class="literal">TRUE</span>, parent_env = parent.frame())</span><br></pre></td></tr></table></figure><p>参数列表：</p><blockquote><p>classname:定义类名。<br>public:定义公有成员，包括公有方法和属性。<br>privat:定义私有成员，包括私有方法和属性。<br>active :主动绑定的函数列表。<br>inherit:定义父类，继承关系。<br>lock:是否上锁，如果上锁则用于类变量存储的环境空间被锁定<br>class:是否把属性封装成对象，默认是封装，如果选择不封装，类中属性存存在一个环境空间中。<br>portable:是否为可移植类型，默认是可移植型类，类中成员访问需要用调用self和private对象。<br>parent_env:定义对象的父环境空间。</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`$new()` <span class="comment"># 实例化函数</span></span><br><span class="line">`$set()` <span class="comment"># R6类的动态绑定</span></span><br><span class="line">`print()` <span class="comment"># 输出R6默认方法</span></span><br></pre></td></tr></table></figure><h1 id="面向对象s4类"><a class="markdownIt-Anchor" href="#面向对象s4类"></a> 面向对象S4类</h1><h2 id="自定义s4类"><a class="markdownIt-Anchor" href="#自定义s4类"></a> 自定义S4类</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myClass &lt;-<span class="keyword">setClass</span>(Class, slots=list(),prototype,contains=character(), validity) )</span><br></pre></td></tr></table></figure><blockquote><p>属性用@访问</p></blockquote><p>参数列表</p><blockquote><p>Class: 定义类名<br>slots: 定义属性和属性类型，列表<br>prototype: 定义属性的默认值<br>contains: 定义父类，继承关系<br>validity: 定义属性的类型检查</p></blockquote><h2 id="实例化函数"><a class="markdownIt-Anchor" href="#实例化函数"></a> 实例化函数</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new(Class,<span class="keyword">...</span>)</span><br></pre></td></tr></table></figure><h2 id="s4的泛型函数"><a class="markdownIt-Anchor" href="#s4的泛型函数"></a> S4的泛型函数</h2><ul><li>通过<code>setGeneric()</code>来定义接口</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">setGeneric</span>(name,def)</span><br><span class="line">    <span class="comment"># def指定了形式参数，并成为默认方法。</span></span><br><span class="line">    <span class="comment"># name通用函数的字符串名称</span></span><br></pre></td></tr></table></figure><ul><li>通过setMethod()来定义现实类</li></ul><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">setMethod</span>(f,signature=character(),definition)</span><br><span class="line">    <span class="comment"># f：通用函数的字符串名称</span></span><br><span class="line">    <span class="comment"># signature：一些参数需要的类</span></span><br><span class="line">    <span class="comment"># definition：一个定义的函数</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Common </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> 面向对象 </tag>
            
            <tag> R6 </tag>
            
            <tag> S4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Common)--data.table</title>
      <link href="/posts/R/RNotebook(Common)--data.table.html"/>
      <url>/posts/R/RNotebook(Common)--data.table.html</url>
      
        <content type="html"><![CDATA[<p>R语言data.table包是自带包data.frame的升级版，用于数据框格式数据的处理，最大的特点快。<br>包括两个方面，一方面是写的快，代码简洁，只要一行命令就可以完成诸多任务。<br>另一方面是处理快，内部处理的步骤进行了程序上的优化，使用多线程，甚至很多函数是使用C写的，大大加快数据运行速度。因此，在对大数据处理上，使用data.table无疑具有极高的效率。</p><a id="more"></a><h1 id="结构"><a class="markdownIt-Anchor" href="#结构"></a> 结构</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DT[ i,  j,  by  ,with=<span class="literal">TRUE</span>] + extra arguments</span><br><span class="line">    |   |    --&gt; grouped by what?</span><br><span class="line">    |    ---&gt; what to do?</span><br><span class="line">     ----&gt; on which rows?</span><br></pre></td></tr></table></figure><blockquote><p>with=FALSE时，j为列名字符向量或者数字向量</p></blockquote><p><strong>用法</strong></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DT[,c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>),with=<span class="literal">FALSE</span>]</span><br><span class="line">X[, sum(a), by=c:f][order(b)]</span><br><span class="line">DT[, .(sa=sum(a)), by=.(x=x&gt;<span class="number">0</span>, y)]  <span class="comment"># 列命名，表达式分组命名</span></span><br><span class="line">X[Y, .(a, b), on=<span class="string">"c"</span>]               <span class="comment"># 内连接Y$c==X$c,选择列'X$a'and‘X$b'</span></span><br><span class="line">X[Y, .(a, i.a), on=<span class="string">"c"</span>]             <span class="comment"># 内连接Y$c==X$c,选择列'X$a'and‘Y$a'</span></span><br></pre></td></tr></table></figure><h1 id="特殊符号"><a class="markdownIt-Anchor" href="#特殊符号"></a> 特殊符号</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DT[, .N, by=x]     <span class="comment"># 分组计数</span></span><br><span class="line">DT[, .GRP, by=x]   <span class="comment"># 组计数器(1 for the 1st group, 2 for the 2nd, etc)</span></span><br></pre></td></tr></table></figure><h1 id="更新datatable"><a class="markdownIt-Anchor" href="#更新datatable"></a> 更新data.table</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># data.table更新符号 :=</span></span><br><span class="line">`DT[i, LHS := RHS]`</span><br><span class="line">`DT[i, c("LHS1", "LHS2") := list(RHS1, RHS2)] `<span class="comment"># 批量新建列</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line">DT[b &gt; <span class="number">4</span>, b := d * <span class="number">2L</span>]</span><br><span class="line">DT[, c(<span class="string">"price"</span>,<span class="string">"off"</span>) := tstrsplit(Discount_rate, <span class="string">":"</span>, fixed=<span class="literal">TRUE</span>,fill = <span class="literal">NA</span>)]</span><br></pre></td></tr></table></figure><h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x %chin% table   <span class="comment"># base:: %in%</span></span><br><span class="line">vector %like% pattern</span><br><span class="line">x %between% y</span><br></pre></td></tr></table></figure><h1 id="其他函数"><a class="markdownIt-Anchor" href="#其他函数"></a> 其他函数</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">fread(input, sep=“auto”,colClasses=NULL, nrows=-1L,select=NULL)</td><td style="text-align:left">输入</td></tr><tr><td style="text-align:left">fwrite(x, file = “”, append = FALSE)</td><td style="text-align:left">输出</td></tr><tr><td style="text-align:left">between(x, lower, upper, incbounds=TRUE)</td><td style="text-align:left">incbounds是否包含边界</td></tr><tr><td style="text-align:left">duplicated(x,by)</td><td style="text-align:left">返回重复的逻辑值</td></tr><tr><td style="text-align:left">unique(x,by)</td><td style="text-align:left">返回唯一值</td></tr><tr><td style="text-align:left">melt(data,id,measure)</td><td style="text-align:left">id:要融合的变量矢量<br>measure:要测量的变量矢量</td></tr><tr><td style="text-align:left">dcast(data,formula,<br>fun.aggregate,<br>fill = NULL,value.var)</td><td style="text-align:left">rowvar1+rowvar2+…~colvar1+colvar2+…<br>聚合函数<br>填充,value变量</td></tr><tr><td style="text-align:left">merge(x,y, by=c(“id”,…),all=FALSE)</td><td style="text-align:left">by,by.x,by.y：连接键<br>all,all.x,all.y：inner(outer)/left/right join</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Common </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> data.table </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Common)--tidyverse+tibble</title>
      <link href="/posts/R/RNotebook(Common)--tidyverse+tibble.html"/>
      <url>/posts/R/RNotebook(Common)--tidyverse+tibble.html</url>
      
        <content type="html"><![CDATA[<p>tidyverse是一系列包的组合，构建了一套完整的数据分析生态链，提供了一套整洁的数据导入，分析和建模方法，刷新了R语言原有的数据科学体系。</p><p><img alt="tidyverse" data-src="/images/tidyverse.png"></p><a id="more"></a><h1 id="tidyverse"><a class="markdownIt-Anchor" href="#tidyverse"></a> tidyverse</h1><p><img alt="tidyverse" data-src="/images/tidyverse.png"></p><h2 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h2><ul><li>small, in-memory data ( &lt;2Gb):   <strong>tidyverse</strong></li><li>larger data (10-100 Gb):   <strong>data.table</strong></li><li>Parallel computing :   need a system (like Hadoop or Spark)</li></ul><h2 id="core-tidyverse-packages"><a class="markdownIt-Anchor" href="#core-tidyverse-packages"></a> core tidyverse packages</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tidyverse_packages() <span class="comment">#查看tidyverse内含的包</span></span><br><span class="line">tidyverse_update() <span class="comment">#更新tidyverse packages</span></span><br></pre></td></tr></table></figure><p><code>library(tidyverse)</code> will load the core tidyverse packages:</p><ul><li>ggplot2, for data visualisation.</li><li>dplyr, for data manipulation.</li><li>tidyr, for data tidying.</li><li>readr, for data import.</li><li>purrr, for functional programming.(FP)</li><li>tibble, for tibbles, a modern re-imagining of data frames.</li></ul><h2 id="import"><a class="markdownIt-Anchor" href="#import"></a> Import</h2><p>As well as readr, for reading flat files, the tidyverse includes:</p><ul><li>readxl for .xls and .xlsx sheets.</li><li>feather, for sharing with Python and other languages.</li><li>haven for SPSS, Stata, and SAS data.</li><li>jsonlite for JSON.</li><li>xml2 for XML.</li><li>httr for web APIs.</li><li>rvest for web scraping.</li><li>DBI for relational databases.</li></ul><h2 id="wrangle"><a class="markdownIt-Anchor" href="#wrangle"></a> Wrangle</h2><p>As well as tidyr, and dplyr, there are five packages designed to work with specific types of data:</p><ul><li>stringr for strings.</li><li>lubridate for dates and date-times.</li><li>forcats for categorical variables (factors).</li><li>hms for time-of-day values.</li><li>blob for storing blob (binary) data.</li></ul><h2 id="program"><a class="markdownIt-Anchor" href="#program"></a> Program</h2><p>除了purrr处理函数式编程外，还有三个解决常规编程的包</p><ul><li>rlang 提供了R的核心语言和tidyverse的工具</li><li>magrittr 管道函数</li><li>glue 提供了base::paste()的更加丰富的版本</li></ul><h2 id="model"><a class="markdownIt-Anchor" href="#model"></a> Model</h2><ul><li>modelr, for modelling within a pipeline</li><li>broom, for turning models into tidy data</li></ul><h1 id="tibble"><a class="markdownIt-Anchor" href="#tibble"></a> tibble</h1><p><code>tibble</code> 重塑了data.frame，可存储任意类型，包括list，tbl_df 等。</p><p><code>tibble()</code>永远不会改变输入的类型（例如它永远不会将字符串转换为因子），永远不会改变变量的名称，并且它永远不会创建row.names()</p><h2 id="创建tibble"><a class="markdownIt-Anchor" href="#创建tibble"></a> 创建tibble</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">`as_tibble(x)` <span class="comment">#从现有对象创建</span></span><br><span class="line">`tibble() `    <span class="comment">#使用列向量创建</span></span><br><span class="line">`tribble()`    <span class="comment">#逐行布局生成</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例</span></span><br><span class="line">as_tibble(iris)</span><br><span class="line"></span><br><span class="line">tibble(x = runif(<span class="number">10</span>), y = x * <span class="number">2</span>)</span><br><span class="line">tibble(x =list(<span class="number">1</span>,<span class="number">2</span>), y = tibble(<span class="string">"a"</span>,<span class="string">"b"</span>))</span><br><span class="line"></span><br><span class="line">tribble(~colA,~colB, </span><br><span class="line">        <span class="string">"a"</span>,  <span class="number">1</span>,</span><br><span class="line">        <span class="string">"b"</span>,  <span class="number">2</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">取子集</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>[</code></td><td style="text-align:left">返回data.frame</td></tr><tr><td style="text-align:left"><code>[[</code>, <code>$</code></td><td style="text-align:left">返回子向量</td></tr></tbody></table><h2 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h2><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">is_tibble(x)</td><td style="text-align:left">判断</td></tr><tr><td style="text-align:left"><strong>增加行/列</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">add_column(.data, …, .before = NULL, .after = NULL)</td><td style="text-align:left">将列添加到数据框</td></tr><tr><td style="text-align:left">add_row(.data, …, .before = NULL, .after = NULL)</td><td style="text-align:left">将行添加到数据框</td></tr><tr><td style="text-align:left"><strong>用于处理行名的工具</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">has_rownames(df)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">remove_rownames(df)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rownames_to_column(df, var = “rowname”)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rowid_to_column(df, var = “rowid”)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">column_to_rownames(df, var = “rowname”</td><td style="text-align:left"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Common </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> tidyverse </tag>
            
            <tag> tibble </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Common)--R语言基础包</title>
      <link href="/posts/R/RNotebook(Common)--R-basic-packages.html"/>
      <url>/posts/R/RNotebook(Common)--R-basic-packages.html</url>
      
        <content type="html"><![CDATA[<p>R语言基础包：<code>base, stats</code></p><a id="more"></a><h1 id="环境设置"><a class="markdownIt-Anchor" href="#环境设置"></a> 环境设置</h1><ul><li><strong>系统函数</strong></li></ul><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">options(…)</td><td style="text-align:left">显示或设置当前选项(digits,encoding,…)</td></tr><tr><td style="text-align:left">memory.limit(size=NA)</td><td style="text-align:left">内存信息</td></tr><tr><td style="text-align:left">source()/sink()</td><td style="text-align:left">加载/输出R脚本</td></tr><tr><td style="text-align:left">quit()/q()</td><td style="text-align:left">退出R</td></tr></tbody></table><ul><li><strong>packages操作函数</strong></li></ul><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">install.package(“pkg”)</td><td style="text-align:left">安装包</td></tr><tr><td style="text-align:left">devtools::install_github(“pkg”)</td><td style="text-align:left">安装github开发版包</td></tr><tr><td style="text-align:left">library(pkg, warn.conflicts = TRUE)</td><td style="text-align:left">加载包</td></tr><tr><td style="text-align:left">detach(“package:pkg”)</td><td style="text-align:left">移除加载的包</td></tr><tr><td style="text-align:left">(.packages())</td><td style="text-align:left">展示加载的包</td></tr><tr><td style="text-align:left"><code>installr::updateR()</code></td><td style="text-align:left">更新R（复制包）<br>或者将老版本的R包复制到新版本后，<code>update.packages()</code></td></tr><tr><td style="text-align:left">help(package=”pkg”)</td><td style="text-align:left">展示包的信息</td></tr><tr><td style="text-align:left">update.packages()</td><td style="text-align:left">更新包</td></tr><tr><td style="text-align:left">remove.packages(pkgs, lib)</td><td style="text-align:left">卸载包</td></tr><tr><td style="text-align:left">if(!require(“installr”))<br>install.packages(‘installr’) <br>library(“installr”)</td><td style="text-align:left">安装并加载</td></tr></tbody></table><h1 id="输入输出"><a class="markdownIt-Anchor" href="#输入输出"></a> 输入输出</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">edit(x),fix(x),pico(x)</td><td style="text-align:left">输入</td></tr><tr><td style="text-align:left">print(…),cat(…)</td><td style="text-align:left">输出</td></tr><tr><td style="text-align:left">save(objects,file=”.RData”)</td><td style="text-align:left">保存</td></tr><tr><td style="text-align:left">load(file)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">format(x, digits)</td><td style="text-align:left">有效数字</td></tr><tr><td style="text-align:left">format(x, format = “”)</td><td style="text-align:left">日期格式</td></tr><tr><td style="text-align:left">iconv(x，encoding)</td><td style="text-align:left">字符串编码转换</td></tr></tbody></table><h1 id="文件操作"><a class="markdownIt-Anchor" href="#文件操作"></a> 文件操作</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">system.file()</td><td style="text-align:left">获取系统文件路径</td></tr><tr><td style="text-align:left">getwd(),setwd()</td><td style="text-align:left">获得/设置工作路径</td></tr><tr><td style="text-align:left">dir.create()</td><td style="text-align:left">创建新目录</td></tr><tr><td style="text-align:left">list.files(path,pattern=NULL,<br>  all.files = FALSE,<br>  full.names = FALSE)</td><td style="text-align:left">path列出文件名,pattern筛选文件<br>all.files是否子文件夹下的全部文件<br>full.names是否输出文件名包含路径全称</td></tr><tr><td style="text-align:left">choose.dir(default = “”,caption)</td><td style="text-align:left">交互式选择文件夹</td></tr><tr><td style="text-align:left">choose.files(default = “”,caption,multi = TRUE, filters = Filters)</td><td style="text-align:left">交互式选择文件，multi:复选,filters:文件过滤向量</td></tr><tr><td style="text-align:left">menu(choices, graphics = FALSE, title = NULL)</td><td style="text-align:left">菜单交互函数</td></tr><tr><td style="text-align:left">winDialog(type =“yesno”,message)</td><td style="text-align:left">type in c(“ok”, “okcancel”, “yesno”, “yesnocancel”)</td></tr></tbody></table><h1 id="进度条"><a class="markdownIt-Anchor" href="#进度条"></a> 进度条</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">txtProgressBar(min=0,max=1,initial=0,char =&quot;=&quot;,width=NA,style=1)</td><td style="text-align:left">初始化文本进度条<br>参数: 进度最小值,最大值,初始值,文本,宽度,格式(1,2:支持换行,3:进度值)</td></tr><tr><td style="text-align:left">setTxtProgressBar(pb, value)</td><td style="text-align:left">加载进度条,value进度值</td></tr><tr><td style="text-align:left">winProgressBar(title,label,min, max, initial, width)</td><td style="text-align:left">win进度条</td></tr><tr><td style="text-align:left">setWinProgressBar(pb, value, title = NULL, label = NULL)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">close(con,…)</td><td style="text-align:left">关闭进度条</td></tr></tbody></table><h1 id="数据创建"><a class="markdownIt-Anchor" href="#数据创建"></a> 数据创建</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">c(…); list(…)</td><td style="text-align:left">向量</td></tr><tr><td style="text-align:left">matrix(data, nrow, ncol, byrow = FALSE,dimnames=list(rownames,colnames))</td><td style="text-align:left">矩阵</td></tr><tr><td style="text-align:left">array(data, dim, dimnames)</td><td style="text-align:left">数组</td></tr><tr><td style="text-align:left">data.frame(col1,col2,col3,…, row.names)</td><td style="text-align:left">数据框</td></tr><tr><td style="text-align:left">factor(x, levels, labels, ordered)</td><td style="text-align:left"><code>sex&lt;-factor(sex,levels=c(1,2),labels=c(&quot;Male&quot;,&quot;Female&quot;))</code></td></tr><tr><td style="text-align:left">seq(from = 1, to = 1, by)</td><td style="text-align:left">等差数列</td></tr><tr><td style="text-align:left">rep(x,…)<br><code>rep(c(&quot;character&quot;,&quot;integer&quot;,&quot;numberic&quot;),c(4,1,2))</code></td><td style="text-align:left">times每个元素重复的次数<br>length.out期望长度,each</td></tr></tbody></table><h1 id="数据选取及数据信息"><a class="markdownIt-Anchor" href="#数据选取及数据信息"></a> 数据选取及数据信息</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">str(),summary()</td><td style="text-align:left">概要</td></tr><tr><td style="text-align:left">x[-(1:n)]<br>x[‘rows’,‘cols’]</td><td style="text-align:left">索引和切片</td></tr><tr><td style="text-align:left">x$name<br>x[x&gt;3]<br> x[x %in% c(…)]</td><td style="text-align:left">索引和切片</td></tr><tr><td style="text-align:left">head(x,n),tail(x,n)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">dim(x), dimnames(x), names(x)</td><td style="text-align:left">信息</td></tr><tr><td style="text-align:left">nrow(),ncol(x), length(x)</td><td style="text-align:left">行数，列数，长度</td></tr><tr><td style="text-align:left">which.max(), which.min(), which()</td><td style="text-align:left">返回索引</td></tr><tr><td style="text-align:left">cut(x,breaks,labels = NULL,right,ordered)</td><td style="text-align:left">返回切割而后的factor<br>breaks切割点向量或切割间隔数,right是否右开区间,ordered是否有序</td></tr></tbody></table><h1 id="列联表"><a class="markdownIt-Anchor" href="#列联表"></a> 列联表</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">table(var1, var2,…,useNA=“no”)</td><td style="text-align:left">useNA in c(“no”, “ifany”, “always”)</td></tr><tr><td style="text-align:left">prop.table(x, margin)</td><td style="text-align:left">小数比例的形式</td></tr><tr><td style="text-align:left">xtabs(formula=~., data)</td><td style="text-align:left">formula:var~var+var+…<br>左边为要透视的值(默认sum函数,左边缺失时计数)，右边为列联表的维度</td></tr><tr><td style="text-align:left">ftable(table)</td><td style="text-align:left">将多维table对象转为二维table(data.frame)</td></tr><tr><td style="text-align:left">xtabs(mpg+cyl~am+gear,mtcars)%&gt;%ftable()</td><td style="text-align:left"></td></tr></tbody></table><h1 id="内置常量"><a class="markdownIt-Anchor" href="#内置常量"></a> 内置常量</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">NA,NULL</td><td style="text-align:left">缺失值</td></tr><tr><td style="text-align:left">Inf/-Inf</td><td style="text-align:left">无穷</td></tr><tr><td style="text-align:left">pi</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">as.roman(x)</td><td style="text-align:left">罗马数字</td></tr><tr><td style="text-align:left">month.abb, <a href="http://month.name" target="_blank" rel="noopener">month.name</a></td><td style="text-align:left">月份</td></tr><tr><td style="text-align:left">letters, LETTERS</td><td style="text-align:left">大小写字母</td></tr></tbody></table><h1 id="数学"><a class="markdownIt-Anchor" href="#数学"></a> 数学</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>ˆ, %%, %/%</code></td><td style="text-align:left">求幂(<code>**</code>)，求余数(mod)，整除</td></tr><tr><td style="text-align:left">sign()</td><td style="text-align:left">提取正负(1,0,-1)</td></tr><tr><td style="text-align:left">log(x, base),exp(x)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">round(x, digits = 0)</td><td style="text-align:left">四舍五入</td></tr><tr><td style="text-align:left">signif(x, digits = 6)</td><td style="text-align:left">有效数字</td></tr><tr><td style="text-align:left">trunc(x)</td><td style="text-align:left">取整</td></tr><tr><td style="text-align:left">ceiling(x)</td><td style="text-align:left">天花板</td></tr><tr><td style="text-align:left">floor(x)</td><td style="text-align:left">地板</td></tr><tr><td style="text-align:left">max,min,median,mean(x,trim=0,na.rm=FALSE)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">range,IQR</td><td style="text-align:left">极差,四分位距</td></tr><tr><td style="text-align:left">quantile(x, probs = seq(0, 1, 0.25))</td><td style="text-align:left">百分位数</td></tr><tr><td style="text-align:left">abs,sqrt</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sum,prod</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rank(x, na.last = TRUE,ties.method = c(“average”, “first”, “last”, “random”, “max”, “min”))</td><td style="text-align:left">na.last：NA排名处置方式</td></tr><tr><td style="text-align:left">diff</td><td style="text-align:left">差分</td></tr><tr><td style="text-align:left">cum_sum</td><td style="text-align:left">返回向量x[i]=sum{x[1]:x[i]}</td></tr><tr><td style="text-align:left">cum_prod</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">scale(x, center = TRUE, scale = TRUE)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">combn(x, m, FUN = NULL)</td><td style="text-align:left">x中m个元素的所有(统计)组合</td></tr></tbody></table><blockquote><p>Matrix包中的函数使得R可以处理高密度矩阵或稀疏矩阵。可以高效的访问BLAS（Basic Linear Algebra Subroutines）、Lapack（密集矩阵） 、TAUCS（稀疏矩阵）和UMFPACK（稀疏 矩阵） 。</p></blockquote><h1 id="矩阵运算"><a class="markdownIt-Anchor" href="#矩阵运算"></a> 矩阵运算</h1><table><thead><tr><th style="text-align:left">运算符或函数</th><th style="text-align:left">描 述</th></tr></thead><tbody><tr><td style="text-align:left"><code>+ - * / ^</code></td><td style="text-align:left">分别是逐个元素的加、减、乘、除和幂运算</td></tr><tr><td style="text-align:left">A %*% B</td><td style="text-align:left">矩阵乘法</td></tr><tr><td style="text-align:left">A %o% B</td><td style="text-align:left">外积：AB</td></tr><tr><td style="text-align:left">cbind(A, B, …)</td><td style="text-align:left">横向合并矩阵或向量</td></tr><tr><td style="text-align:left">chol(A)</td><td style="text-align:left">A的Choleski分解。若<code>R &lt;- chol(A)</code>，那么chol(A)包含上三角因子，即R’R=A</td></tr><tr><td style="text-align:left">colMeans(A)</td><td style="text-align:left">返回A的列均值组成的向量</td></tr><tr><td style="text-align:left">crossprod(A)</td><td style="text-align:left">返回A’A</td></tr><tr><td style="text-align:left">crossprod(A, B)</td><td style="text-align:left">返回A’B</td></tr><tr><td style="text-align:left">colSums(A)</td><td style="text-align:left">返回A的列总和组成的向量</td></tr><tr><td style="text-align:left">diag(A)</td><td style="text-align:left">返回主对角元素组成的向量</td></tr><tr><td style="text-align:left">diag(x)</td><td style="text-align:left">用x中元素作为主对角元素创建对角矩阵</td></tr><tr><td style="text-align:left">diag(k)</td><td style="text-align:left">如果k是标量，就创建k × k的单位矩阵</td></tr><tr><td style="text-align:left">eigen(A)</td><td style="text-align:left">A的特征值和特征向量。若y &lt;- eigen(A)，那么：<br> <code>y$val</code>是A的特征值<br><code>y$vec</code>是A的特征向量</td></tr><tr><td style="text-align:left">ginv(A)</td><td style="text-align:left">A的Moore-Penrose广义逆（需要MASS包）</td></tr><tr><td style="text-align:left">qr(A)</td><td style="text-align:left">A的QR分解。若 <code>y &lt;- qr(A)</code>，那么： <code>y$qr</code>的上三角是分解结果，下三角是分解的信息 <br> <code>y$rank</code>是A的秩 <br><code>y$qraux</code>是Q的附加信息向量 <br><code>y$pivot</code>是所使用的主元素选择策略</td></tr><tr><td style="text-align:left">rbind(A, B, …)</td><td style="text-align:left">纵向合并矩阵或向量</td></tr><tr><td style="text-align:left">rowMeans(A)</td><td style="text-align:left">返回A的行均值组成的向量</td></tr><tr><td style="text-align:left">rowSums(A)</td><td style="text-align:left">返回A的行总和组成的向量</td></tr><tr><td style="text-align:left">solve(A, b)</td><td style="text-align:left">求解方程b = Ax中的向量x</td></tr><tr><td style="text-align:left">svd(A)</td><td style="text-align:left">A的奇异值分解。若 <code>y &lt;- svd(A)</code>，那么： <br><code>y$d</code>是A的奇异值组成的向量 <br><code>y$u</code>是矩阵且每一列都是A的左奇异向量 <br> <code>y$v</code>是矩阵且每一列都是A的右奇异向量</td></tr><tr><td style="text-align:left">t(A)</td><td style="text-align:left">A的转置</td></tr></tbody></table><h1 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">var,sd,cov</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">cor(x, y = NULL, use = “everything”,method = “pearson”)</td><td style="text-align:left">data%&gt;%cor%&gt;%symnum(相关系数矩阵可视化)<br>method in c(‘person’,‘spearman’,‘kendall’)</td></tr><tr><td style="text-align:left">cor.test</td><td style="text-align:left">相关性检验</td></tr><tr><td style="text-align:left">anova</td><td style="text-align:left">单因素方差分析</td></tr><tr><td style="text-align:left">ancova</td><td style="text-align:left">单因素协方差分析</td></tr><tr><td style="text-align:left">lm/glm</td><td style="text-align:left">线性回归</td></tr><tr><td style="text-align:left">aov</td><td style="text-align:left">方差分析模型</td></tr></tbody></table><h1 id="其他函数"><a class="markdownIt-Anchor" href="#其他函数"></a> 其他函数</h1><table><thead><tr><th style="text-align:left">函数</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">Sys.sleep(seconds)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">system.time(expr)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">expression(expr)</td><td style="text-align:left">创建表达式</td></tr><tr><td style="text-align:left">eval(expr)</td><td style="text-align:left">在指定的环境下运行表达式</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Common </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> base </tag>
            
            <tag> stats </tag>
            
            <tag> 基础包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R手册(Communicate)--R Markdown</title>
      <link href="/posts/R/RNotebook(Communicate)--R-Markdown.html"/>
      <url>/posts/R/RNotebook(Communicate)--R-Markdown.html</url>
      
        <content type="html"><![CDATA[<p>R Markdown是通过R语言制作动态文档的文件格式<br>Cheat Sheet：<a href="https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf" target="_blank" rel="noopener">R Markdown</a></p><a id="more"></a><h1 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h1><p><strong>Installation</strong></p><ul><li>如果你在RStudio中工作，那么你可以简单地安装<a href="http://www.rstudio.com/ide/download/preview" target="_blank" rel="noopener">当前版本</a>的RStudio（包括rmarkdown包和pandoc）。</li><li>如果您想在RStudio之外使用rmarkdown软件包<br><code>install.packages(&quot;rmarkdown&quot;)</code></li></ul><p><strong>Workflow</strong></p><ol><li>编辑 R Markdown文件（Rmd 或 纯文本）：<br>Rstudio菜单 File ▶ New File ▶ R Markdown</li><li>渲染：use <strong>knitr button</strong> or <strong>render()</strong> to knit</li><li>发布到网站（可选）</li><li>重复使用</li></ol><h1 id="rmd-structure"><a class="markdownIt-Anchor" href="#rmd-structure"></a> Rmd Structure</h1><p>R Markdown主要由三部分组成：</p><ol><li>YAML标头：文档开始部分，由<code>---</code>包围的<code>key:value</code>对</li><li>Text：主要由Markdown语法书写的文本</li><li>Knitr 处理 R代码块<br><code>```{r} <br>code <br>```</code></li></ol><h1 id="yaml-header"><a class="markdownIt-Anchor" href="#yaml-header"></a> YAML Header</h1><h2 id="parameters"><a class="markdownIt-Anchor" href="#parameters"></a> Parameters</h2><ol><li>Add parameters: 在YAML Header中定义</li><li>Call parameters: 在代码块中以<code>params$&lt;name&gt;</code>格式引用</li><li>Set parameters: Knit或者render() 时重设参数</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># YAML Header</span></span><br><span class="line">---</span><br><span class="line">params:</span><br><span class="line"> num: 100</span><br><span class="line"> date: !r Sys.Date()</span><br><span class="line">---</span><br><span class="line"><span class="section"># R Markdown文本</span></span><br><span class="line">Today’s date is <span class="code">`r params$d`</span></span><br><span class="line"><span class="section"># 渲染</span></span><br><span class="line">render("doc.Rmd", params = list(n = 1,d = as.Date("2015-01-01"))</span><br></pre></td></tr></table></figure><h2 id="set-render-options-with-yaml"><a class="markdownIt-Anchor" href="#set-render-options-with-yaml"></a> Set render options with YAML</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">output: html_document</span><br><span class="line">---</span><br><span class="line">Body</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">output value</th><th style="text-align:left">creates</th></tr></thead><tbody><tr><td style="text-align:left">html_document</td><td style="text-align:left">html</td></tr><tr><td style="text-align:left">pdf_document</td><td style="text-align:left">pdf (requires Tex )</td></tr><tr><td style="text-align:left">word_document</td><td style="text-align:left">Microsof Word (.docx)</td></tr><tr><td style="text-align:left">odt_document</td><td style="text-align:left">OpenDocument Text</td></tr><tr><td style="text-align:left">rtf_document</td><td style="text-align:left">Rich Text Format</td></tr><tr><td style="text-align:left">md_document</td><td style="text-align:left">Markdown</td></tr><tr><td style="text-align:left">github_document</td><td style="text-align:left">Github compatible markdown</td></tr><tr><td style="text-align:left">ioslides_presentation ioslides</td><td style="text-align:left">HTML slides</td></tr><tr><td style="text-align:left">slidy_presentation</td><td style="text-align:left">slidy HTML slides</td></tr><tr><td style="text-align:left">beamer_presentation</td><td style="text-align:left">Beamer pdf slides (requires Tex)</td></tr></tbody></table><p><strong>ouput</strong> 也可以设置子选项，详情请查看官网：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">output: </span><br><span class="line">  html_document:</span><br><span class="line"><span class="code">    code_folding: hide</span></span><br><span class="line"><span class="code">    toc: TRUE</span></span><br><span class="line"><span class="code">    theme: united</span></span><br><span class="line"><span class="code">    highlight: zenburn</span></span><br><span class="line">---</span><br><span class="line">Body</span><br></pre></td></tr></table></figure><h2 id="初始文档信息"><a class="markdownIt-Anchor" href="#初始文档信息"></a> 初始文档信息</h2><p>title, author, and date information,etc</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: "Sample Document"</span><br><span class="line">author: "Hadley Wickham"</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h1 id="text"><a class="markdownIt-Anchor" href="#text"></a> Text</h1><p>更多语法请参考 <a href="http://wilenwu.github.io/markdown/GitHub-Flavored-Markdown-Spec.thml">GitHub Flavored Markdown 规范</a></p><h1 id="embed-code-with-knitr-syntax"><a class="markdownIt-Anchor" href="#embed-code-with-knitr-syntax"></a> Embed code with knitr syntax</h1><p><strong>Inline code</strong><br>以 <code>`r &lt;code&gt;`</code>格式插入，将以文本的格式显示</p><p><strong>Code chunks</strong><br>以 ```{r options}  code  ```围绕的一行或多行代码</p><table><thead><tr><th style="text-align:left">chunks options</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">cache</td><td style="text-align:left">为knits缓存结果 (default = FALSE)</td></tr><tr><td style="text-align:left">cache.path</td><td style="text-align:left">缓存结果的保存路径 (default = “cache/”)</td></tr><tr><td style="text-align:left">child</td><td style="text-align:left">file(s) to knit and then include (default =NULL)</td></tr><tr><td style="text-align:left">collapse</td><td style="text-align:left">把所有的输出汇聚到单个块中(default = FALSE)</td></tr><tr><td style="text-align:left">comment</td><td style="text-align:left">结果的每一行加前缀(default = ‘#’)</td></tr><tr><td style="text-align:left">dependson</td><td style="text-align:left">chunk dependencies for caching (default = NULL)</td></tr><tr><td style="text-align:left">echo</td><td style="text-align:left">是否在输出中包含源代码</td></tr><tr><td style="text-align:left">engine</td><td style="text-align:left">代码语言 (default =‘R’)</td></tr><tr><td style="text-align:left">error</td><td style="text-align:left">是否在输出中包含错误信息（TRUE或FALSE）</td></tr><tr><td style="text-align:left">eval</td><td style="text-align:left">在块中运行代码(default = TRUE)</td></tr><tr><td style="text-align:left">fig.align</td><td style="text-align:left">‘lef’, ‘right’, or ‘center’ (default = ‘default’)</td></tr><tr><td style="text-align:left">fig.cap</td><td style="text-align:left">图片标签 (default= NULL)</td></tr><tr><td style="text-align:left">fig.height, fig.width</td><td style="text-align:left">图片宽度和高度（英寸）</td></tr><tr><td style="text-align:left">highlight</td><td style="text-align:left">高亮显示源码 (default = TRUE)</td></tr><tr><td style="text-align:left">include</td><td style="text-align:left">运行后是否在文档中显示块 (default = TRUE)</td></tr><tr><td style="text-align:left">message</td><td style="text-align:left">是否在输出中包含参考的信息（TRUE或FALSE）</td></tr><tr><td style="text-align:left">results</td><td style="text-align:left">是否输出原生结果 (default = ‘markup’){‘markup’,‘asis’,‘hide’,‘hold’}</td></tr><tr><td style="text-align:left">warning</td><td style="text-align:left">是否在输出中包含警告(default = TRUE)</td></tr></tbody></table><p><strong>Global options</strong><br>用<code>knitr::opts_chunk$set()</code> 等函数设置</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">knitr::opts_chunk$set(echo = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><h1 id="表格美化"><a class="markdownIt-Anchor" href="#表格美化"></a> 表格美化</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- faithful[<span class="number">1</span>:<span class="number">4</span>, ]</span><br><span class="line"></span><br><span class="line">knitr::kable(data, caption = <span class="string">"Table with kable”)</span></span><br><span class="line"><span class="string">print(xtable::xtable(data, caption = "</span>Table with xtable”),</span><br><span class="line">   type = <span class="string">"html"</span>, html.table.attributes = <span class="string">"border=0"</span>)) </span><br><span class="line">stargazer::stargazer(data, type = <span class="string">"html"</span>, title = <span class="string">"Table</span></span><br><span class="line"><span class="string">   with stargazer"</span>)</span><br></pre></td></tr></table></figure><h1 id="render渲染"><a class="markdownIt-Anchor" href="#render渲染"></a> render(渲染)</h1><p><code>render()</code> 或<code>knitr button</code><br>运行时先用Knitr将Rmd文件中的代码块编译成md文件<br>然后再用pandoc将md文件转化为HTML, PDF或 Word等最终文档(the default is HTML)</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">render(<span class="string">"input.Rmd"</span>)</span><br><span class="line">render(<span class="string">"input.md"</span>)</span><br></pre></td></tr></table></figure><blockquote><p><strong>render函数主要参数：</strong><br>input : file to render<br>output_format: 输出格式<br>output_options: 要渲染的选项list (in YAML)<br>output_file, output_dir : 输出文件名和路径<br>params： list of params to use<br>envir : environment to evaluate code chunks in<br>encoding - of input file</p></blockquote><blockquote><p><strong>Output Formats:</strong> str or Output Format Function<br>all: 输出全部格式<br><em>Output Format Functions：</em><br>html_document<br>pdf_document<br>word_document<br>md_document<br>beamer_presentation<br>ioslides_presentation<br>slidy_presentation</p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render(<span class="string">"input.Rmd"</span>, html_document(toc = <span class="literal">TRUE</span>))</span><br><span class="line">render(<span class="string">"input.Rmd"</span>, pdf_document(latex_engine = <span class="string">"lualatex"</span>))</span><br><span class="line">render(<span class="string">"input.Rmd"</span>, beamer_presentation(incremental = <span class="literal">TRUE</span>))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> R </category>
          
          <category> Communicate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> R </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Flavored Markdown 规范</title>
      <link href="/posts/markdown/GitHub-Flavored-Markdown-Spec.html"/>
      <url>/posts/markdown/GitHub-Flavored-Markdown-Spec.html</url>
      
        <content type="html"><![CDATA[<p><strong>Markdown</strong>是一种轻量级<strong>标记语言</strong>，它以纯文本形式编写文档，易读（看起来舒服）、易写（语法简单）、易更改，并最终以HTML格式发布。由于markdown没有明确指定语法，随着编译器不一样，实现方式有很大差异。GitHub Flavored Markdown(GFM) 是GitHub基于CommonMark，正式规范了markdown的语法和语义。</p><a id="more"></a><h1 id="markdown-免费编辑器推荐"><a class="markdownIt-Anchor" href="#markdown-免费编辑器推荐"></a> Markdown 免费编辑器推荐</h1><h2 id="markdown-in-browser"><a class="markdownIt-Anchor" href="#markdown-in-browser"></a> Markdown In browser</h2><ul><li><a href="https://stackedit.io/app" target="_blank" rel="noopener">StackEdit</a>:  markdown editor</li><li><a href="https://www.madoko.net/" target="_blank" rel="noopener">Modoko</a>: Write Beautiful Documents</li><li><a href="https://markdown-here.com/" target="_blank" rel="noopener">Markdown Here</a>:   这是一个Chrome浏览器插件</li><li><a href="https://maxiang.io/" target="_blank" rel="noopener">马克飞象</a>: 专为印象笔记打造的Markdown编辑器（付费）</li><li><a href="http://markdown.xiaoshujiang.com/" target="_blank" rel="noopener">小书匠</a>: 支持第三方数据存储集成(evernote,印象笔记,github,dropbox等)。</li></ul><h2 id="markdown-client"><a class="markdownIt-Anchor" href="#markdown-client"></a> Markdown Client</h2><ul><li><a href="https://pc.qq.com/search.html#!keyword=Typora" target="_blank" rel="noopener">Typora</a> (Win+Mac+Linux) : What You See Is What You Get</li><li><a href="http://25.io/mou/" target="_blank" rel="noopener">Mou</a> (Mac): Markdown editor for developers.</li><li><a href="http://macdown.uranusjr.com/" target="_blank" rel="noopener">Macdown</a> (Mac): MacDown is an  open source Markdown editor for OS X</li><li><a href="http://www.bear-writer.com/" target="_blank" rel="noopener">Bear</a>(Mac): Write beautifully on iPhone, iPad, and Mac</li><li><a href="markdownpad.com">MarkdownPad</a>(Windows): MarkdownPad is a full-featured Markdown editor for Windows</li><li><a href="http://code52.org/MarkPadRT/" target="_blank" rel="noopener">MarkPad</a>: Markdown works better with MarkPad</li></ul><h2 id="text-editor"><a class="markdownIt-Anchor" href="#text-editor"></a> Text Editor</h2><ul><li><a href="https://atom.io/" target="_blank" rel="noopener">Atom</a> (all): A hackable text editor for the 21st Century</li><li><a href="http://www.sublimetextcn.com/" target="_blank" rel="noopener">Sublime Text</a>  (all): 是程序员圈子里口口相传的「神器」级代码编辑器</li><li><a href="https://notepad-plus-plus.org/zh/" target="_blank" rel="noopener">Notepad++</a> (Windows): Windows强大的轻量级文本编辑器</li></ul><h1 id="markdown语法"><a class="markdownIt-Anchor" href="#markdown语法"></a> <a href="https://help.github.com/cn/categories/writing-on-github" target="_blank" rel="noopener">Markdown语法</a></h1><blockquote><p>通过在 Markdown 字符前面输入<code>\</code>，可获得Markdown 字符</p></blockquote><h2 id="标题"><a class="markdownIt-Anchor" href="#标题"></a> 标题</h2><p>要创建标题，请在标题文本前添加一至六个 <code>#</code> 符号。 您使用的 <code>#</code> 数量将决定标题的大小。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Header 1 </span></span><br><span class="line"><span class="section">## Header 2 </span></span><br><span class="line">... ...</span><br><span class="line"><span class="section">##### Header 6</span></span><br></pre></td></tr></table></figure><p>或者在标题文本下面添加下划线至少三个<code>=</code>或<code>-</code>表示一级或二级标题。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Header 1</span><br><span class="line">========</span><br><span class="line">Header 2</span><br><span class="line">--------</span><br></pre></td></tr></table></figure><p>HTML 语法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> Header 1 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span> Header 2 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">... ...</span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span> Header 6 <span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="文本样式"><a class="markdownIt-Anchor" href="#文本样式"></a> 文本样式</h2><p>您可以使用粗体、斜体或删除线文本来表示强调。</p><table><thead><tr><th>样式</th><th style="text-align:left">语法</th><th>快捷键</th><th>示例</th><th>输出</th></tr></thead><tbody><tr><td>粗体</td><td style="text-align:left"><code>** **</code> 或 <code>__ __</code></td><td><kbd>Ctrl + B</kbd></td><td><code>**bold**</code></td><td><strong>bold</strong></td></tr><tr><td>斜体</td><td style="text-align:left"><code>* *</code> 或 <code>_ _</code></td><td><kbd>Ctrl + I</kbd></td><td><code>*italic*</code></td><td><em>italic</em></td></tr><tr><td>删除线</td><td style="text-align:left"><code>~~ ~~</code></td><td><kbd>Ctrl + R</kbd></td><td><code>~~mistaken~~</code></td><td><s>mistaken</s></td></tr><tr><td>高亮</td><td style="text-align:left"><code>== ==</code></td><td></td><td><code>==highlight==</code></td><td><mark>highlight</mark></td></tr><tr><td>下划线</td><td style="text-align:left">HTML标签</td><td></td><td><code>&lt;u&gt;underline&lt;/u&gt;</code></td><td><u>underline</u></td></tr><tr><td>下标</td><td style="text-align:left"><code>~ ~</code></td><td></td><td><code>H~2~O</code></td><td>H<sub>2</sub>O</td></tr><tr><td>上标</td><td style="text-align:left"><code>^ ^</code></td><td></td><td><code>2^10^</code></td><td>2<sup>10</sup></td></tr><tr><td>方框</td><td style="text-align:left">HTML标签</td><td></td><td><code>&lt;kbd&gt;box&lt;/kbd&gt;</code></td><td><kbd>box</kbd></td></tr></tbody></table><p>你也可以用HTML标签表示其他文本样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:red"</span>&gt;</span>this text is red<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"黑体"</span> <span class="attr">color</span>=<span class="string">red</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span>这是红色黑体5号字<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure><p><span style="color:red">this text is red</span><br><font face="黑体" color="red" size="5">这是红色黑体5号字</font></p><h2 id="引用"><a class="markdownIt-Anchor" href="#引用"></a> 引用</h2><p>您可以使用 <code>&gt;</code> 来引用文本，快捷键 <kbd>Ctrl + Q</kbd></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; Quoted text</span></span><br><span class="line">&gt;&gt; Quoted text</span><br></pre></td></tr></table></figure><blockquote><p>Quoted text</p><blockquote><p>Quoted text</p></blockquote></blockquote><h2 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表</h2><p>通过在一行或多行文本前面添加 <code>-</code> 或 <code>*</code> 可创建无序列表。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>Item 1</span><br><span class="line"><span class="bullet">- </span>Item 2</span><br></pre></td></tr></table></figure><ul><li>Item 1</li><li>Item 2</li></ul><p>要对列表排序，请在每行前面添加一个编号。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>Item 1</span><br><span class="line"><span class="bullet">2. </span>Item 2</span><br></pre></td></tr></table></figure><ol><li>Item 1</li><li>Item 2</li></ol><p>在每行前面添加<code>- [ ]</code>或 <code>- [x]</code>标记为任务列表，GFM暂不支持，需采用<a href="#%E5%A4%8D%E9%80%89%E6%A1%86checkboxes">HTML语法</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>[ ] Incomplete item</span><br><span class="line"><span class="bullet">- </span>[x] Complete item</span><br></pre></td></tr></table></figure><form><input type="checkbox" name="vehicle"> Incomplete item<br><input type="checkbox" name="vehicle" checked="checked"> Complete item</form><p>通过在一个列表项下面缩进一个或多个其他列表项，可创建嵌套列表。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*   </span>Abacus</span><br><span class="line"><span class="bullet">    * </span>answer</span><br><span class="line"><span class="bullet">*   </span>Bubbles</span><br><span class="line"><span class="bullet">    1.  </span>bunk</span><br><span class="line"><span class="bullet">    2.  </span>bupkis</span><br><span class="line"><span class="bullet">        * </span>BELITTLER</span><br><span class="line"><span class="bullet">    3. </span>burper</span><br><span class="line"><span class="bullet">*   </span>Cunning</span><br></pre></td></tr></table></figure><ul><li>Abacus<ul><li>answer</li></ul></li><li>Bubbles<ol><li>bunk</li><li>bupkis<ul><li>BELITTLER</li></ul></li><li>burper</li></ol></li><li>Cunning</li></ul><h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2><p>如果要标记一小段行内代码，你可以用反引号 (<code>`</code>) 把它包起来，反引号中的文本不会被格式化。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">`inline code`</span></span><br></pre></td></tr></table></figure><p>如果要在代码区段内插入反引号，你可以用多个反引号来开启和结束代码区段，例如</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">``There is a literal backtick (`</span>) here.``</span><br></pre></td></tr></table></figure><p>如果要插入代码块，需要三个反引号( ``` 或 ~~~ )开启和结束，我们建议在代码块的前后各留一个空白行，使原始格式更易辨读。</p><p>您可以添加可选的语言标识符，以在代码块中启用语法高亮。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```python</span></span><br><span class="line"><span class="code">import sys</span></span><br><span class="line"><span class="code">print('hello world')</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(<span class="string">'hello world'</span>)</span><br></pre></td></tr></table></figure><p>GFM中还可以显示 <code>diff</code>效果，即展示一个文件内容的增加与删除。绿色表示新增，红色表示删除。<br>在三个反引号后面加上 <code>diff</code>标识符，并且其代码块行头以 <code>+</code>开头表示新增，<code>-</code>开头表示删除。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ update today.</span></span><br><span class="line"><span class="deletion">- What? When?</span></span><br></pre></td></tr></table></figure><h2 id="数学公式"><a class="markdownIt-Anchor" href="#数学公式"></a> 数学公式</h2><p>你可以使用<strong>MathJax</strong>渲染<em>LaTeX</em>数学公式，也可以使用 <a href="https://khan.github.io/KaTeX/" target="_blank" rel="noopener">KaTeX</a> 语法渲染。<br>如果要写一小段行内数学公式，你可以用 <code>$</code> 把它包起来，例如</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$\begin&#123;aligned&#125;  f(x) &amp;=(m+n)^2 \\ &amp; =m^2+2m+n^2 \end&#123;aligned&#125;$</span><br></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>m</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>m</mi><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}  f(x) &amp;=(m+n)^2 \\ &amp; =m^2+2m+n^2 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.048216em;vertical-align:-1.274108em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.774108em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-2.385892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.274108em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.774108em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.385892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.274108em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>如果要插入数学公式块，需要两个 <code>$$</code>开启和结束，例如</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\mathbf&#123;V&#125;<span class="emphasis">_1 \times \mathbf&#123;V&#125;_</span>2 =</span><br><span class="line">\begin&#123;vmatrix&#125;</span><br><span class="line">\mathrm&#123;i&#125; &amp; \mathrm&#123;j&#125; &amp; \mathrm&#123;k&#125; \\</span><br><span class="line">\frac&#123;\partial X&#125;&#123;\partial u&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial u&#125; &amp; 0 \\</span><br><span class="line">\frac&#123;\partial X&#125;&#123;\partial v&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial v&#125; &amp; 0 \\</span><br><span class="line">\end&#123;vmatrix&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">V</mi><mn>1</mn></msub><mo>×</mo><msub><mi mathvariant="bold">V</mi><mn>2</mn></msub><mo>=</mo><mrow><mo fence="true">∣</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">i</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">j</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">k</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>X</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>u</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>Y</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>u</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>X</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>v</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>Y</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>v</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">∣</mo></mrow></mrow><annotation encoding="application/x-tex">\mathbf{V}_1 \times \mathbf{V}_2 =\begin{vmatrix}\mathrm{i} &amp; \mathrm{j} &amp; \mathrm{k} \\\frac{\partial X}{\partial u} &amp;  \frac{\partial Y}{\partial u} &amp; 0 \\\frac{\partial X}{\partial v} &amp;  \frac{\partial Y}{\partial v} &amp; 0 \\\end{vmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83611em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">V</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83611em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">V</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.6802159999999997em;vertical-align:-1.590108em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.08597em;"><span style="top:-1.05597em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-1.6619700000000002em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.26797em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.87397em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47997em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-4.08597em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500299999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.090108em;"><span style="top:-4.250108em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">i</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight">u</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.769892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">X</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.590108em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.090108em;"><span style="top:-4.250108em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">j</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight">u</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.769892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.590108em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.090108em;"><span style="top:-4.250108em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">k</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.769892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.590108em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.08597em;"><span style="top:-1.05597em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-1.6619700000000002em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.26797em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-2.87397em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-3.47997em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span><span style="top:-4.08597em;"><span class="pstrut" style="height:2.606em;"></span><span class="delimsizinginner delim-size1"><span>∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500299999999998em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="链接"><a class="markdownIt-Anchor" href="#链接"></a> 链接</h2><p>GFM支持行内链接、参考链接和锚点，快捷键为 <kbd>Ctrl + K</kbd></p><p>行内链接：在<code>[]</code>里输入链接文本，在其后<code>()</code>输入 URL 和 <code>title</code>(可选)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is [<span class="string">an example</span>](<span class="link">http://example.com/ "Title"</span>) inline link.</span><br></pre></td></tr></table></figure><p>参考链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This is [<span class="string">an example</span>][<span class="symbol">id</span>] reference-style link.</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--在任意位置定义URL--&gt;</span></span></span><br><span class="line">[<span class="symbol">id</span>]: <span class="link">http://example.com/  "Optional Title Here"</span></span><br></pre></td></tr></table></figure><blockquote><p>提示：链接文本不必一定是文本。图片或其他 HTML 元素都可以成为链接。</p></blockquote><p>锚点</p><p>每一个标题都是一个锚点，也可以用HTML方式定义锚点，不过要注意引用标题锚点时：</p><ul><li>标题中的英文字母都要被转化为<strong>小写字母</strong></li><li>空格换成 <code>-</code></li><li>去除括号等HTML字符</li><li>标题名相同时，第2个锚点引用时加后缀，如 <code>标题-2</code></li><li>GFM锚点也支持中文</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">back to h1</span>](<span class="link">#markdown-in-browser</span>)</span><br></pre></td></tr></table></figure><p><a href="#markdown-in-browser">back to h1</a></p><p>HTML语法格式为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--行内链接和参考链接--&gt;</span></span><br><span class="line">This is <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/"</span> <span class="attr">title</span>=<span class="string">"Title"</span>&gt;</span>an example<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--创建锚点(在HTML文档中是不显示的)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"h1"</span>&gt;</span>Header 1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"tips"</span>&gt;</span>back to tips<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引用锚点--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#tips"</span>&gt;</span>back to tips<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引用其他页面的锚点--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://help.github.com/nothing.html#tips"</span>&gt;</span>back to tips<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="urls"><a class="markdownIt-Anchor" href="#urls"></a> URLs</h2><p>GitHub 自动从标准 URL 创建链接。如 <a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a><br>也允许通过标签 <code>&lt;</code>brackets<code>&gt;</code> 创建链接</p><p><code>&lt;i@typora.io&gt;</code> becomes <a href="mailto:i@typora.io" target="_blank" rel="noopener">i@typora.io</a>.</p><h2 id="图片"><a class="markdownIt-Anchor" href="#图片"></a> 图片</h2><p>图片的语法和链接相似，需要在链接前添加 <code>!</code>，我们可以像这样插入图片</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Alt text</span>](<span class="link">img.jpg "Optional title"</span>)</span><br></pre></td></tr></table></figure><p>当然，有时markdown不能满足我们的需求，我们可以采用HTML语法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img.jpg"</span> <span class="attr">alt</span>=<span class="string">"Optional title"</span> <span class="attr">width</span>=<span class="string">"20%"</span> <span class="attr">height</span>=<span class="string">"20%"</span> <span class="attr">align</span>=<span class="string">"right"</span>/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>CSDN去图片水印的方法：上传图片后将图片URL后面的所有的参数去掉，就不显示水印了<br>如上传图片URL为 <code>https://img-blog.csdnimg.cn/20191210170351158.jpg?x-oss-process=image/watermark******</code><br>修改为 <code>https://img-blog.csdnimg.cn/20191210170351158.jpg</code> 即可</p></blockquote><h2 id="表格"><a class="markdownIt-Anchor" href="#表格"></a> 表格</h2><p>您可以用竖线 <code>|</code> 和横线 <code>-</code> 创建表格。 横线用于创建每列的标题，而竖线用于分隔每列。 必须在表格前包含空白链接，以便其正确呈现。表格末尾的竖线可选。</p><p>您可以在标头行中横线的左侧、右侧或两侧加入冒号 <code>:</code>，靠左、靠右或居中对齐列中的文本。</p><p>要包含竖线 <code>|</code> 作为单元格中的内容，请在竖线前使用 <code>\</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|Item | Column 1 | Column 2     |  Column 3 |</span><br><span class="line">|-----|:--------:| -------------:|:---------|</span><br><span class="line">|Value| centered | right-aligned | left-aligned|</span><br></pre></td></tr></table></figure><table><thead><tr><th>Item</th><th style="text-align:center">Column 1</th><th style="text-align:right">Column 2</th><th style="text-align:left">Column 3</th></tr></thead><tbody><tr><td>Value</td><td style="text-align:center">centered</td><td style="text-align:right">right-aligned</td><td style="text-align:left">left-aligned</td></tr></tbody></table><p>有时你需要精细化表格，可以用<a href="#%E8%A1%A8%E6%A0%BC-2">HTML语法</a>处理。</p><h2 id="段落和换行"><a class="markdownIt-Anchor" href="#段落和换行"></a> 段落和换行</h2><p>列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符<br>通过在文本行之间留一个空白行，可创建新段落。<br>typora 按Shift+Enter创建一个换行符。然而，大多数的编辑器会忽略单行，为了让其它的Markdown编辑器识别你的换行符，可以在行尾留下两个空格或者插入<code>&lt;br /&gt;</code>。<br>HTML语法的段落标签为 <code>&lt;p&gt;paragraph &lt;/p&gt;</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.  </span>This is a list item with two paragraphs. </span><br><span class="line"></span><br><span class="line"><span class="code">    The second paragraph. </span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2.  </span>Suspendisse id sem consectetuer libero luctus adipiscing.</span><br></pre></td></tr></table></figure><ol><li><p>This is a list item with two paragraphs.</p><p>The second paragraph.</p></li><li><p>Suspendisse id sem consectetuer libero luctus adipiscing.</p></li></ol><p>如果要在列表项目内放进引用，那 <code>&gt;</code> 就需要缩进4 个空格或是 1 个制表符：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*   </span>A list item with a blockquote:</span><br><span class="line"><span class="code">    &gt; This is a blockquote</span></span><br><span class="line"><span class="code">    &gt; inside a list item.</span></span><br></pre></td></tr></table></figure><ul><li><p>A list item with a blockquote:</p><blockquote><p>This is a blockquote<br>inside a list item.</p></blockquote></li></ul><h2 id="emoji"><a class="markdownIt-Anchor" href="#emoji"></a> Emoji 😄</h2><p>通过键入 <code>:EMOJICODE:</code> 可在您的写作中添加表情符号。<br><code>@octocat :+1: This PR looks great</code><br>@octocat 👍 This PR looks great</p><p>键入 <code>:</code> 将显示建议的表情符号列表。 列表将在您键入时进行过滤，因此一旦找到所需表情符号，请按 <strong>Tab</strong> 或 <strong>Enter</strong> 键以填写选中的结果。</p><p>☀️ ❄️ ☁️ ⚡️ ❤️ 💓 🚆 ✈️ 🚌 🚕 🚗 🚢 ✅ ◻️ ⬜️ ⚪️ 🔴</p><p>有关可用表情符号和代码的完整列表，请查看 <a href="http://emoji-cheat-sheet.com/" target="_blank" rel="noopener">emoji-cheat-sheet.com</a>。</p><h2 id="注脚"><a class="markdownIt-Anchor" href="#注脚"></a> 注脚</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">You can create footnotes like this[^footnote].</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^footnote</span>]: <span class="link">Here is the *text* of the **footnote**.</span></span><br></pre></td></tr></table></figure><p>You can create footnotes like this<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p><p>注脚内容将会在底部看到。</p><h2 id="水平线"><a class="markdownIt-Anchor" href="#水平线"></a> 水平线</h2><p>至少3个<code>---</code> 或 <code>***</code>可形成水平线<br>HTML 标签<code>&lt;hr&gt;</code> 在页面中创建水平线</p><hr><h2 id="yaml-front-matter"><a class="markdownIt-Anchor" href="#yaml-front-matter"></a> YAML Front Matter</h2><p>Typora 支持YAML Front Matter，在文章顶部输入<code>---</code>开始和结束。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Markdown编辑器推荐及语法</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[Markdown]</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h2 id="table-of-contents-toc"><a class="markdownIt-Anchor" href="#table-of-contents-toc"></a> Table of Contents (TOC)</h2><p>StackEdit 支持生成目录，输入 <code>[toc]</code> 即可根据标题生成目录，可自动更新。</p><h2 id="uml-diagrams"><a class="markdownIt-Anchor" href="#uml-diagrams"></a> UML diagrams</h2><p>You can render UML diagrams using <a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">Mermaid</a>.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">sequenceDiagram</span></span><br><span class="line"><span class="code">Alice -&gt;&gt; Bob: Hello Bob, how are you?</span></span><br><span class="line"><span class="code">Bob--&gt;&gt;John: How about you John?</span></span><br><span class="line"><span class="code">Bob--x Alice: I am good thanks!</span></span><br><span class="line"><span class="code">Bob-x John: I am good thanks!</span></span><br><span class="line"><span class="code">Note right of John: Bob thinks a long&lt;br/&gt;long time, so long&lt;br/&gt;that the text does&lt;br/&gt;not fit on a row.</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">Bob--&gt;&gt;Alice: Checking with John...</span></span><br><span class="line"><span class="code">Alice-&gt;&gt;John: Yes... John, how are you?</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><pre class="mermaid" style="text-align: center;">                        sequenceDiagramAlice ->> Bob: Hello Bob, how are you?Bob-->>John: How about you John?Bob--x Alice: I am good thanks!Bob-x John: I am good thanks!Note right of John: Bob thinks a long<br>long time, so long<br>that the text does<br>not fit on a row.Bob-->>Alice: Checking with John...Alice->>John: Yes... John, how are you?          </pre><p>And this will produce a flow chart:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">graph LR</span></span><br><span class="line"><span class="code">A[Square Rect] -- Link text --&gt; B((Circle))</span></span><br><span class="line"><span class="code">A --&gt; C(Round Rect)</span></span><br><span class="line"><span class="code">B --&gt; D&#123;Rhombus&#125;</span></span><br><span class="line"><span class="code">C --&gt; D</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><pre class="mermaid" style="text-align: center;">                        graph LRA[Square Rect] -- Link text --> B((Circle))A --> C(Round Rect)B --> D{Rhombus}C --> D          </pre><h1 id="部分html语法"><a class="markdownIt-Anchor" href="#部分html语法"></a> 部分HTML语法</h1><p>Markdown兼容HTML，不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。不需要额外标注。能制约的只有一些 HTML 区块元素――比如 <code>&lt;div&gt;</code>、<code>&lt;table&gt;</code>、<code>&lt;pre&gt;</code>、<code>&lt;p&gt;</code> 等标签，必须在前后加上空行与其它内容区隔开，还要求它们的开始标签与结尾标签不能用制表符或空格来缩进。</p><p>HTML 的区段（行内）标签如 <code>&lt;span&gt;</code>、<code>&lt;cite&gt;</code>、<code>&lt;del&gt;</code> 可以在 Markdown 的段落、列表或是标题里随意使用。依照个人习惯，甚至可以不用 Markdown 格式，而直接采用 HTML 标签来格式化。</p><h2 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--HTML 注释--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="note标签"><a class="markdownIt-Anchor" href="#note标签"></a> note标签</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"note [class] [no-icon]"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>content<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">[class]   : default | primary | success | info | warning | danger.</span><br><span class="line">[no-icon] : Disable icon in note.</span><br></pre></td></tr></table></figure><div class="note danger"><p>danger</p></div>## 文本背景色<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">yellow</span>&gt;</span>背景色<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><form><table><tr><td bgcolor="yellow">背景色</td></tr></table></form><h2 id="对齐方式"><a class="markdownIt-Anchor" href="#对齐方式"></a> 对齐方式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span>居中<span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">"right"</span>&gt;</span>右对齐<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><form><center>居中</center><p align="right">右对齐</p></form><h2 id="单选按钮radio-buttons"><a class="markdownIt-Anchor" href="#单选按钮radio-buttons"></a> 单选按钮(Radio Buttons)</h2><p><code>&lt;input type=&quot;radio&quot;&gt;</code> 标签定义了表单单选框选项</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"male"</span> <span class="attr">checked</span>=<span class="string">'checked'</span> /&gt;</span> Male<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"female"</span> /&gt;</span> Female</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><form><input type="radio" name="sex" value="male" checked="checked"> Male<br><input type="radio" name="sex" value="female"> Female</form><h2 id="复选框checkboxes"><a class="markdownIt-Anchor" href="#复选框checkboxes"></a> 复选框(Checkboxes)</h2><p><code>&lt;input type=&quot;checkbox&quot;&gt;</code> 定义了复选框. 用户需要从若干给定的选择中选取一个或若干选项。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"vehicle"</span> <span class="attr">value</span>=<span class="string">"Bike"</span> <span class="attr">checked</span>=<span class="string">'checked'</span> /&gt;</span> I have a bike<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"vehicle"</span> <span class="attr">value</span>=<span class="string">"Car"</span> /&gt;</span> I have a car</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><form><input type="checkbox" name="vehicle" value="Bike" checked="checked"> I have a bike<br><input type="checkbox" name="vehicle" value="Car"> I have a car</form><h2 id="表格-2"><a class="markdownIt-Anchor" href="#表格-2"></a> 表格</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">style</span>=<span class="string">"text-align:left;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">caption</span>&gt;</span>title<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--border 定义边框--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--text-align:对齐方式 left|right|center--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>row1,col1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>row1,col2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>row2,col1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>row2,col2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--合并单元格--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>Telephone<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bill Gates<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>911<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>110<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">th</span>&gt;</span>First Name:<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bill Gates<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">th</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>Telephone:<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>911<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">td</span>&gt;</span>110<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><table border="1"><tr>  <th>Name</th>  <th colspan="2">Telephone</th></tr><tr>  <td>Bill Gates</td>  <td>911</td>  <td>110</td></tr></table><table border="1"><tr>  <th>Name:</th>  <td>Bill Gates</td></tr><tr>  <th rowspan="2">Telephone:</th>  <td>911</td></tr><tr>  <td>110</td></tr></table><h2 id="html-框架"><a class="markdownIt-Anchor" href="#html-框架"></a> HTML 框架</h2><p>通过使用框架，你可以在同一个浏览器窗口中显示不止一个页面。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"url"</span> <span class="attr">title</span>=<span class="string">'xxx'</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">frameborder</span>=<span class="string">"no"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">framespacing</span>=<span class="string">"0"</span> <span class="attr">allowfullscreen</span>=<span class="string">"true"</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="音视频"><a class="markdownIt-Anchor" href="#音视频"></a> 音视频</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"xxx.mp4"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>你可以在各大视频网站的分享入口，找到嵌入的 HTML 代码。</p><p><img alt="video" data-src="https://img-blog.csdnimg.cn/20191210170351158.jpg"></p><h2 id="font-awesome"><a class="markdownIt-Anchor" href="#font-awesome"></a> Font Awesome</h2><p><a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">Font Awesome</a> 提供一套免费可缩放矢量图标，它可以被定制大小、颜色、阴影以及任何可以用CSS的样式。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-download"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure><table style="text-align:left;"><caption>部分图标</caption><tr><td><i class="fa fa-home"></i><br>home</td><td><i class="fa fa-tags"></i><br>tags</td><td><i class="fa fa-th"></i><br>th</td><td><i class="fa fa-archive"></i><br>archive</td><td><i class="fa fa-windows"></i><br>windows</td><td><i class="fa fa-send"></i><br>send</td></tr><tr><td><i class="fa fa-film"></i><br>film</td><td><i class="fa fa-youtube-play"></i><br>youtube-play</td><td><i class="fa fa-photo"></i><br>photo</td><td><i class="fa fa-microphone"></i><br>microphone</td><td><i class="fa fa-music"></i><br>music</td><td><i class="fa fa-fire"></i><br>fire</td></tr><tr><td><i class="fa fa-star"></i><br>star</td><td><i class="fa fa-bookmark"></i><br>bookmark</td><td><i class="fa fa-user"></i><br>user</td><td><i class="fa fa-group"></i><br>group</td><td><i class="fa fa-heart"></i><br>heart</td><td><i class="fa fa-heartbeat"></i><br>heartbeat</td></tr><tr><td><i class="fa fa-download"></i><br> download</td><td><i class="fa fa-cloud-upload"></i><br> cloud-upload</td><td><i class="fa fa-calendar"></i><br> calendar</td><td><i class="fa fa-book"></i><br> book</td><td><i class="fa fa-bolt"></i><br> bolt</td><td><i class="fa fa-bug"></i><br> bug</td></tr><tr><td><i class="fa fa-crosshairs"></i><br> crosshairs</td><td><i class="fa fa-expand"></i><br> expand</td><td><i class="fa fa-code"></i><br> code</td><td><i class="fa fa-file"></i><br> file</td><td><i class="fa fa-folder"></i><br> folder</td><td><i class="fa fa-edit"></i><br> edit</td></tr><tr><td><i class="fa fa-list"></i><br> list</td><td><i class="fa fa-list-ol"></i><br> list-ol</td><td><i class="fa fa-tasks"></i><br> tasks</td><td><i class="fa fa-heart"></i><br> heart</td><td><i class="fa fa-heartbeat"></i><br> heartbeat</td><td><i class="fa fa-leaf"></i><br> leaf</td></tr><tr><td><i class="fa fa-hourglass"></i><br> hourglass</td><td><i class="fa fa-hourglass-half"></i><br> hourglass-half</td><td><i class="fa fa-lock"></i><br> lock</td><td><i class="fa fa-unlock"></i><br> unlock</td><td><i class="fa fa-location-arrow"></i><br> location-arrow</td><td><i class="fa fa-map-signs"></i><br> map-signs</td></tr><tr><td><i class="fa fa-paper-plane"></i><br> paper-plane</td><td><i class="fa fa-paw"></i><br> paw</td><td><i class="fa fa-superpowers"></i><br> superpowers</td><td><i class="fa fa-key"></i><br> key</td><td><i class="fa fa-thumbs-up"></i><br> thumbs-up</td><td><i class="fa fa-thumbs-down"></i><br> thumbs-down</td></tr><tr><td><i class="fa fa-tint"></i><br> tint</td><td><i class="fa fa-toggle-off"></i><br> toggle-off</td><td><i class="fa fa-toggle-on"></i><br> toggle-on</td><td><i class="fa fa-tree"></i><br> tree</td><td><i class="fa fa-trophy"></i><br> trophy</td><td><i class="fa fa-university"></i><br> university</td></tr><tr><td><i class="fa fa-info"></i><br>info</td><td><i class="fa fa-info-circle"></i><br>info-circle</td><td><i class="fa fa-globe"></i><br>globe</td><td><i class="fa fa-internet-explorer"></i><br>internet-explorer</td><td><i class="fa fa-pencil"></i><br>pencil</td><td><i class="fa fa-cog"></i><br>cog</td></tr></table><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Here is the <em>text</em> of the <strong>footnote</strong>. <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(Scientific Computing)--NumPy</title>
      <link href="/posts/python/PythonNotebook(Scientific-Computing)--numpy.html"/>
      <url>/posts/python/PythonNotebook(Scientific-Computing)--numpy.html</url>
      
        <content type="html"><![CDATA[<p>NumPy（Numerical Python的简称）是Python数值计算最重要的基础包。大多数提供科学计算的包都是用NumPy的数组作为构建基础。</p><a id="more"></a><p>NumPy的部分功能如下：</p><ul><li>ndarray，一个具有矢量算术运算和复杂广播能力的快速且节省空间的多维数组。</li><li>用于对数组执行元素级计算以及直接对数组执行数学运算的函数。</li><li>用于读写硬盘上基于数组的数据集的工具。</li><li>线性代数运算、傅里叶变换，以及随机数生成。</li><li>用于集成由C、C++、Fortran等语言编写的代码的API。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><h1 id="numpy的ndarray"><a class="markdownIt-Anchor" href="#numpy的ndarray"></a> NumPy的ndarray</h1><ul><li>ndarray 可以矢量化（vectorization）运算。</li><li>不同大小的数组之间的运算叫做广播（broadcasting）。</li></ul><h2 id="创建ndarray"><a class="markdownIt-Anchor" href="#创建ndarray"></a> 创建ndarray</h2><p><code>arr=np.array(obj,dtype=None)</code></p><table><thead><tr><th style="text-align:left">用法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">np.asarray(a, dtype=None</td><td style="text-align:left">将a转化为数组</td></tr><tr><td style="text-align:left">np.arange(n)</td><td style="text-align:left">1:(n-1)</td></tr><tr><td style="text-align:left">np.arange(start,stop,step)</td><td style="text-align:left">等差数列</td></tr><tr><td style="text-align:left">np.linspace(start,end,num=50)</td><td style="text-align:left">返回等间隔的数字</td></tr><tr><td style="text-align:left">np.empty(shape, dtype=float)<br>np.empty_like</td><td style="text-align:left">没有任何具体值的数组，shape一个表示各维度大小的tuple</td></tr><tr><td style="text-align:left">np.ones(shape, dtype=None)<br>np.zeros(shape, dtype=None)<br>np.ones_like; np.zeros_like</td><td style="text-align:left">生成全是1或0数组，shape类型为tuple</td></tr><tr><td style="text-align:left">np.eye(n)</td><td style="text-align:left">n*n单位矩阵，对角线为1，其余为0</td></tr><tr><td style="text-align:left">np.full(shape, fill_value, dtype=None)</td><td style="text-align:left">生成全是fill_value数组</td></tr><tr><td style="text-align:left">np.full_like(a,fill_value, dtype=None)</td><td style="text-align:left">根据a的形状生成全是ill_value的数组</td></tr></tbody></table><h2 id="ndarrary索引和切片"><a class="markdownIt-Anchor" href="#ndarrary索引和切片"></a> ndarrary索引和切片</h2><table><thead><tr><th style="text-align:left">用法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left"><code>arr[axis0,axis1]</code><br><code>arr[axis0][axis1]</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>arr[arr &lt; 0]</code></td><td style="text-align:left">bool索引</td></tr><tr><td style="text-align:left"><code>arr[indexes_list]</code></td><td style="text-align:left">花式索引（总是将数据复制到新数组中） <code>arr[[4, 3, 0, 6]]</code></td></tr><tr><td style="text-align:left"><code>arr[start:stop:step,start:stop:step]</code></td><td style="text-align:left">slice</td></tr></tbody></table><blockquote><p>Python关键字and和or在布尔型数组中无效。要使用<code>&amp;</code>与<code>|</code></p></blockquote><h2 id="ndarrary属性"><a class="markdownIt-Anchor" href="#ndarrary属性"></a> ndarrary属性</h2><table><thead><tr><th style="text-align:left">用法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">arr.ndim</td><td style="text-align:left">维度数量</td></tr><tr><td style="text-align:left">arr.shape</td><td style="text-align:left">维度信息tupple</td></tr><tr><td style="text-align:left">arr.size</td><td style="text-align:left">元素总个数</td></tr><tr><td style="text-align:left">arr.dtype</td><td style="text-align:left">numpy的数据类型（详情请查阅）</td></tr><tr><td style="text-align:left">arr.itermsize</td><td style="text-align:left">每个元素的大小，以字节为单位</td></tr><tr><td style="text-align:left">arr.T</td><td style="text-align:left">转置属性</td></tr></tbody></table><h2 id="ndarrary方法"><a class="markdownIt-Anchor" href="#ndarrary方法"></a> ndarrary方法</h2><table><thead><tr><th style="text-align:left">变换数组方法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">arr.transpose()</td><td style="text-align:left">转置方法</td></tr><tr><td style="text-align:left">arr.reshape(shape)/arr.resize(shape)</td><td style="text-align:left">修改数组维度</td></tr><tr><td style="text-align:left">arr.swapaxes(ax1,ax2)</td><td style="text-align:left">多维数组维度调换</td></tr><tr><td style="text-align:left">arr.flatten()</td><td style="text-align:left">降成一维数组</td></tr><tr><td style="text-align:left">arr.astype(new_type)</td><td style="text-align:left">修改数组类型</td></tr><tr><td style="text-align:left"><strong>统计方法</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">arr.sum(axis=None); arr.mean(axis=None)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">arr.std(axis=None); arr.var(axis=None)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">arr.min(axis=None); arr.max(axis=None)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">arr.argmin(axis=None); arr.argmax(axis=None)</td><td style="text-align:left">返回最大值和最小值的索引</td></tr><tr><td style="text-align:left">arr.cunsum(); arr.cumprod()</td><td style="text-align:left">累积和/累积乘积</td></tr><tr><td style="text-align:left">arr.sort(axis=None)</td><td style="text-align:left">数组本身排序</td></tr><tr><td style="text-align:left"><strong>线性代数</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">arr.dot(arr2)</td><td style="text-align:left">矩阵点积</td></tr></tbody></table><h1 id="numpy函数"><a class="markdownIt-Anchor" href="#numpy函数"></a> numpy函数</h1><table><thead><tr><th style="text-align:left">合并和分裂</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">where(cond, xarr, yarr)</td><td style="text-align:left"><code>xarr if condition else yarr</code></td></tr><tr><td style="text-align:left">concatenate((a1,a2,…),axis=0)</td><td style="text-align:left">将数组a1,a2,…合并</td></tr><tr><td style="text-align:left">hstack(tup)</td><td style="text-align:left">行合并</td></tr><tr><td style="text-align:left">vstack(tup)</td><td style="text-align:left">列合并</td></tr><tr><td style="text-align:left">split(ary, indices_or_sections, axis=0)</td><td style="text-align:left">indices_or_sections : int or 1-D array</td></tr><tr><td style="text-align:left">hsplit(arr, indices_or_sections)</td><td style="text-align:left">行分裂<code>hsplit(x, np.array([3, 6]))</code></td></tr><tr><td style="text-align:left">vsplit(arr, indices_or_sections)</td><td style="text-align:left">列分裂</td></tr><tr><td style="text-align:left"><strong>统计</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">max(a,axis=None); np.min(a,axis=None)</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">fmax(a,b)</td><td style="text-align:left">数组元素间取较大值</td></tr><tr><td style="text-align:left">meshgrid(x,y)</td><td style="text-align:left">接受两个一维数组，并产生两个二维矩阵，对应于两个数组中所有的(x,y)对</td></tr><tr><td style="text-align:left"><strong>线性代数</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">dot(arr1, arr2)</td><td style="text-align:left">矩阵点积</td></tr><tr><td style="text-align:left">gradient(f)</td><td style="text-align:left">计算斜率(a[0]+a[1])/2</td></tr><tr><td style="text-align:left"><strong>排序</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">sort(arr,axis=-1)</td><td style="text-align:left">返回的是数组的已排序副本</td></tr><tr><td style="text-align:left"><strong>去重</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">unique(arr,axis=None)</td><td style="text-align:left">返回数组的唯一值，并排序</td></tr><tr><td style="text-align:left"><strong>重复和堆叠</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">repeat(a, repeats, axis=None)</td><td style="text-align:left">repeats : int or array of ints</td></tr><tr><td style="text-align:left">tile(A, reps)</td><td style="text-align:left">堆叠</td></tr></tbody></table><table><thead><tr><th style="text-align:left"><strong>数学运算</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">sum,prod</td><td style="text-align:left">求和，求积</td></tr><tr><td style="text-align:left">cumsum,cumprod</td><td style="text-align:left">累积求和，累积求积</td></tr><tr><td style="text-align:left">abs</td><td style="text-align:left">绝对值</td></tr><tr><td style="text-align:left">sqrt</td><td style="text-align:left">计算机各元素的平方根</td></tr><tr><td style="text-align:left">square</td><td style="text-align:left">计算各元素的平方</td></tr><tr><td style="text-align:left">exp</td><td style="text-align:left">计算各元素的e的x次方</td></tr><tr><td style="text-align:left">log,log10,log2,log1p</td><td style="text-align:left">分别自然对数（底数为e）、底数为10的log、底数为2的log、log（1+x）</td></tr><tr><td style="text-align:left">sign</td><td style="text-align:left">计算各元素的正负号：1（正数）、0（零）、-1（负数）</td></tr><tr><td style="text-align:left">ceil</td><td style="text-align:left">计算各元素的ceiling值，即大于等于该值的最小正数</td></tr><tr><td style="text-align:left">floor</td><td style="text-align:left">计算各元素的floor值，即小于等于该值的最大正数</td></tr><tr><td style="text-align:left">rint</td><td style="text-align:left">将各元素值四舍五入到最接近的整数，保留dtype</td></tr><tr><td style="text-align:left">modf</td><td style="text-align:left">将数组的小数和整数部分以两个独立数组的形式返回</td></tr><tr><td style="text-align:left">isnan</td><td style="text-align:left">返回bool数组</td></tr><tr><td style="text-align:left">isfinite,isinf</td><td style="text-align:left">返回bool数组</td></tr><tr><td style="text-align:left">cos,cosh,sin,sinh,tan,tanh</td><td style="text-align:left">普通型和双曲型三角函数</td></tr><tr><td style="text-align:left">arccos，arccosh，arcsin，arcsinh，arctan，arctanh</td><td style="text-align:left">反三角函数</td></tr><tr><td style="text-align:left">logical_not</td><td style="text-align:left">计算各元素notx的真值。相当于-arr</td></tr><tr><td style="text-align:left">add</td><td style="text-align:left">将数组中对应的元素想加</td></tr><tr><td style="text-align:left">subtract</td><td style="text-align:left">相减</td></tr><tr><td style="text-align:left">multiply</td><td style="text-align:left">数组元素对应相乘</td></tr><tr><td style="text-align:left">divide（arr1,arr2），floor_divide（arr1,arr2）</td><td style="text-align:left">除法或向下圆整除法（丢弃余数）</td></tr><tr><td style="text-align:left">power</td><td style="text-align:left">乘方</td></tr><tr><td style="text-align:left">mod</td><td style="text-align:left">取余数</td></tr><tr><td style="text-align:left">greater（arr1,arr2）,greater_equal（arr1,arr2）,<br>less（arr1,arr2）,less_equal（arr1,arr2）,<br>equal（arr1,arr2）,not_equal（arr1,arr2）</td><td style="text-align:left">执行元素级的比较运算，最终产生布尔型数组，相当于运算符<code>&gt;,&gt;=,&lt;,&lt;=,==,!=</code></td></tr><tr><td style="text-align:left">logical_and,logical_or,logical_xor</td><td style="text-align:left">逻辑运算&amp;、|、^</td></tr></tbody></table><table><thead><tr><th style="text-align:left">ufunc方法**</th><th style="text-align:left"><code>np.ufunc</code></th></tr></thead><tbody><tr><td style="text-align:left">reduce(a, axis=0, dtype=None, out=None, keepdims=False)</td><td style="text-align:left">对值进行连续聚合<br><code>np.add.reduce(arr)</code></td></tr><tr><td style="text-align:left">accumulate(array, axis=0, dtype=None, out=None, keepdims=None)</td><td style="text-align:left">保留所有局部聚合结果</td></tr><tr><td style="text-align:left">reduceat(a, indices, axis=0, dtype=None, out=None)</td><td style="text-align:left">分组约简</td></tr><tr><td style="text-align:left">outer(A, B, **kwargs)</td><td style="text-align:left">Apply the ufunc <code>op</code> to all pairs (a, b) with a in <code>A</code> and b in <code>B</code>.<br><code>ufunc.outer(A,B).ndim=A.ndim+B.ndim</code></td></tr><tr><td style="text-align:left">np.frompyfunc(func, nin, nout)</td><td style="text-align:left">nin : input(int), nout : output(int), return: ufunc</td></tr></tbody></table><h1 id="numpy的random随机库生成n维随机数组"><a class="markdownIt-Anchor" href="#numpy的random随机库生成n维随机数组"></a> NumPy的random随机库（生成n维随机数组）</h1><table><thead><tr><th style="text-align:left">用法</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">np.random.rand(d0,d1,…,dn)</td><td style="text-align:left">[0,1]区间均匀分布</td></tr><tr><td style="text-align:left">np.random.randn(d0,d1,…,dn)</td><td style="text-align:left">标准正态分布</td></tr><tr><td style="text-align:left">np.random.randint(low,high,size)</td><td style="text-align:left">[low,high] 随机整数数组</td></tr><tr><td style="text-align:left">np.random.seed(s)</td><td style="text-align:left">随机种子数</td></tr><tr><td style="text-align:left"><strong>随机排列</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">np.random.shuffle(a)</td><td style="text-align:left">按a第一轴随机排列，改变a</td></tr><tr><td style="text-align:left">np.random.permutation(a)</td><td style="text-align:left">按a第一轴随机排列，生成副本</td></tr><tr><td style="text-align:left">np.random.choice(a,size,replace,p)</td><td style="text-align:left">以概率p数组a抽样，样本大小为size</td></tr><tr><td style="text-align:left"><strong>随机分布</strong></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">np.random.uniform(low,high,size)</td><td style="text-align:left">均匀分布数组</td></tr><tr><td style="text-align:left">np.random.normal(loc,scale,size)</td><td style="text-align:left">正态分布数组</td></tr><tr><td style="text-align:left">np.random.poisson(lam,size)</td><td style="text-align:left">泊松分布数组</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：随机漫步</span></span><br><span class="line">nsteps = <span class="number">1000</span></span><br><span class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=nsteps)</span><br><span class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">walk = steps.cumsum()</span><br><span class="line">plt.plot(walk[:<span class="number">100</span>])</span><br></pre></td></tr></table></figure><h1 id="numba"><a class="markdownIt-Anchor" href="#numba"></a> Numba</h1><p>Numba是一个开源项目，它可以利用CPUs、GPUs或其它硬件为类似NumPy的数据创建快速函数。它使用了<a href="http://llvm.org/" target="_blank" rel="noopener">LLVM项目</a>，将Python代码转换为机器代码</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Scientific Computing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> numpy </tag>
            
            <tag> 科学计算 </tag>
            
            <tag> 随机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python手册(IDE)--Jupyter Notebook</title>
      <link href="/posts/python/PythonNotebook(Python-Basics)--Jupyter-Notebook.html"/>
      <url>/posts/python/PythonNotebook(Python-Basics)--Jupyter-Notebook.html</url>
      
        <content type="html"><![CDATA[<h1 id="anaconda"><a class="markdownIt-Anchor" href="#anaconda"></a> Anaconda</h1><p>Anaconda 是一个用于科学计算的 Python 发行版，支持 Linux, Mac, Windows, 包含了众多流行的科学计算、数据分析的 Python 包，还自带Spyder和Jupyter Notebook等IDE，不需要配置系统路径，安装后可直接运行。</p><a id="more"></a><blockquote><p>清华大学开源软件镜像站 <a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="noopener">下载链接</a>，下载速度快。<br><a href="https://blog.csdn.net/u013211009/article/details/78437098?locationNum=7&amp;fps=1" target="_blank" rel="noopener">win10+python3下Anaconda的安装及环境变量配置</a></p></blockquote><p>Anaconda作为管理平台，包含以下应用程序：</p><ul><li>Anaconda Navigator ：用于管理工具包和环境的图形用户界面，后续涉及的众多管理命令也可以在 Navigator 中手工实现。</li><li>Jupyter notebook ：基于web的交互式计算环境，可以编辑易于人们阅读的文档，用于展示数据分析的过程。</li><li>Anaconda Prompt：交互式命令终端，可以用来管理工具包和环境。</li><li>spyder ：一个使用Python语言、跨平台的、科学运算集成开发环境。</li></ul><p><img alt="pro" data-src="/images/ide.png"></p><p><strong>包管理</strong>：在Shell窗口运行</p><table><thead><tr><th><strong>conda</strong></th><th>conda将conda、python等都视为package</th></tr></thead><tbody><tr><td>conda list</td><td>查看已经安装的包</td></tr><tr><td>conda install package_name</td><td>导入包</td></tr><tr><td>conda update package_name</td><td>更新包</td></tr><tr><td>conda search package_name</td><td>查找package信息</td></tr><tr><td>conda update python</td><td>更新python</td></tr><tr><td>conda update anaconda</td><td>更新anaconda</td></tr><tr><td><strong>pip</strong></td><td></td></tr><tr><td>pip installpackage_name</td><td>导入包</td></tr><tr><td>pip install --upgradepackage_name</td><td>更新包</td></tr></tbody></table><p><strong>shell命令</strong>：在Jupyter, windows cmd 或Linux Shell窗口运行</p><table><thead><tr><th>shell命令（部分）</th><th>说明</th></tr></thead><tbody><tr><td>cd E:\Jupyter</td><td>修改工作目录</td></tr><tr><td>ls</td><td>展示目录下的文件</td></tr><tr><td>pwd</td><td>展示工作目录</td></tr></tbody></table><h1 id="jupyter-notebook"><a class="markdownIt-Anchor" href="#jupyter-notebook"></a> Jupyter Notebook</h1><p>Jupyter Notebook（此前被称为 IPython notebook）是一个交互式笔记本，支持运行 40 多种编程语言。</p><p>Jupyter Notebook 的本质是一个 Web 应用程序，便于创建和共享文学化程序文档，支持实时代码，数学方程，可视化和 markdown。 用途包括：数据清理和转换，数值模拟，统计建模，机器学习等等.</p><blockquote><p><strong>Tips:</strong><br><a href="https://blog.csdn.net/datacastle/article/details/78890469" target="_blank" rel="noopener">最详尽使用指南：超快上手Jupyter Notebook</a><br><a href="https://blog.csdn.net/u014552678/article/details/62046638" target="_blank" rel="noopener">Jupyter Notebook修改默认工作目录</a><br><a href="https://blog.csdn.net/blackrosetian/article/details/77939295" target="_blank" rel="noopener">3步实现Jupyter Notebook直接调用R</a><br><a href="https://blog.csdn.net/vincentluo91/article/details/76832264" target="_blank" rel="noopener">用jupyter notebook同时写python 和 R</a></p></blockquote><h2 id="快捷键"><a class="markdownIt-Anchor" href="#快捷键"></a> 快捷键</h2><table><thead><tr><th>快捷键</th><th>说明</th></tr></thead><tbody><tr><td>Shift+Enter</td><td>执行</td></tr><tr><td>Ctrl+C</td><td>中断运行</td></tr><tr><td>a/b</td><td>上/下插入cell</td></tr><tr><td>esc+dd</td><td>删除cell</td></tr><tr><td>Tab</td><td>自动补全</td></tr><tr><td>Ctrl+↑/↓</td><td>搜索命令</td></tr><tr><td>Ctrl+L</td><td>清空屏幕</td></tr><tr><td>Ctrl+H</td><td>快捷键帮助</td></tr><tr><td>Shift+M</td><td>合并选中的cells</td></tr></tbody></table><h2 id="魔术命令"><a class="markdownIt-Anchor" href="#魔术命令"></a> 魔术命令</h2><ol><li>Magic 关键字是可以在单元格中运行的特殊命令，能让你控制 notebook 本身或执行系统调用（例如更改目录）。</li><li>Magic 命令的前面带有一个或两个百分号（% 或 %%），分别对应行 Magic 命令和单元格 Magic 命令。行 Magic 命令仅应用于编写 Magic 命令时所在的行，而单元格 Magic 命令应用于整个单元格。</li></ol><table><thead><tr><th>magic</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td>%quickref</td><td style="text-align:left">显示IPython的快速参考</td></tr><tr><td>%magic</td><td style="text-align:left">显示所有魔术命令的详细文档</td></tr><tr><td>%debug</td><td style="text-align:left">从最新的异常跟踪的底部进入交互式调试器</td></tr><tr><td>%hist</td><td style="text-align:left">打印命令的输入（可选输出）历史</td></tr><tr><td>%pdb</td><td style="text-align:left">在异常发生后自动进入调试器</td></tr><tr><td>%paste</td><td style="text-align:left">执行剪贴板中的Python代码</td></tr><tr><td>%cpaste</td><td style="text-align:left">打开一个特殊提示符以便手工粘贴待执行的Python代码</td></tr><tr><td>%reset</td><td style="text-align:left">删除interactive命名空间中的全部变量/名称</td></tr><tr><td>%page</td><td style="text-align:left">通过分页器打印输出OBJECT</td></tr><tr><td>%run</td><td style="text-align:left">在IPython中执行一个Python脚本文件(Python解释器:$ python)</td></tr><tr><td>%prunstatement</td><td style="text-align:left">通过cProfile执行statement，并打印分析器的输出结果</td></tr><tr><td>%timestatement</td><td style="text-align:left">报告statement的执行时间</td></tr><tr><td>%timeitstatement</td><td style="text-align:left">多次执行statement以计算系综平均执行时间。对那些执行时间非常小的代码很有用</td></tr><tr><td>%matplotlib inline</td><td style="text-align:left">Jupyter Notebook中集成Matplotlib</td></tr><tr><td>%matplotlib</td><td style="text-align:left">直接调用matplotlib窗口弹出显示</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Python Basics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> Jupyter Notebook </tag>
            
            <tag> IDE </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
